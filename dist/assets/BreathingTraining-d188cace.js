import{B as K}from"./BreadcrumbDropdown-7f07e8d4.js";import{m as T}from"./meditationStorage-bc872dc6.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import{i as c,c as k,j as Q,k as W,A as X,o as h,a as v,b as e,n as G,m as B,t as l,F as D,h as M,r as Y,y as Z,g as R,e as z}from"./index-e0b54b24.js";const ee={class:"breathing-guide"},te={class:"breathing-circle-container"},se={class:"inner-circle"},ae={class:"breath-text"},ne={class:"breath-counter"},oe={class:"progress-ring"},ie={class:"progress-svg",width:"200",height:"200"},le=["stroke-dashoffset"],re={class:"breathing-instructions"},ce={class:"phase-title"},ue={class:"phase-description"},de={class:"breathing-stats"},he={class:"stat-item"},pe={class:"stat-value"},ve={class:"stat-item"},ge={class:"stat-value"},me={class:"breathing-controls"},_e={class:"particles"},be={__name:"BreathingGuide",props:{pattern:{type:Object,default:()=>({inhale:4,hold:4,exhale:4,pause:1})},autoStart:{type:Boolean,default:!1},sessionDuration:{type:Number,default:300},saveProgress:{type:Boolean,default:!0}},emits:["phase-change","cycle-complete","session-complete","session-start","session-end"],setup(x,{emit:g}){const u=x,m=g,d=c(!1),n=c("inhale"),_=c(0),p=c(0),b=c(0),C=c(0),t=c(null),s=c(null);let $=null,f=null;const y=2*Math.PI*90,o=c(y),S=k(()=>u.pattern[n.value]||1),P=k(()=>({inhale:"å¸æ°”",hold:"å±æ¯",exhale:"å‘¼æ°”",pause:"æš‚åœ"})[n.value]),O=k(()=>({inhale:"æ·±æ·±å¸æ°”",hold:"ä¿æŒå‘¼å¸",exhale:"ç¼“ç¼“å‘¼æ°”",pause:"è‡ªç„¶å‘¼å¸"})[n.value]),V=k(()=>({inhale:"é€šè¿‡é¼»å­æ…¢æ…¢å¸æ°”ï¼Œæ„Ÿå—ç©ºæ°”è¿›å…¥è‚ºéƒ¨",hold:"è½»æ¾ä¿æŒå‘¼å¸ï¼Œä¸è¦ç”¨åŠ›",exhale:"é€šè¿‡å˜´å·´æ…¢æ…¢å‘¼æ°”ï¼Œé‡Šæ”¾æ‰€æœ‰ç´§å¼ ",pause:"è‡ªç„¶å‘¼å¸ï¼Œå‡†å¤‡ä¸‹ä¸€è½®å¾ªç¯"})[n.value]),j=()=>{d.value?I():A()},A=()=>{if(d.value=!0,C.value=Date.now(),t.value=Date.now(),s.value=`breathing_${Date.now()}`,u.saveProgress){const a={id:s.value,type:"breathing",startTime:t.value,pattern:u.pattern,duration:u.sessionDuration,status:"active"};T.saveSession(a)}N(),H(),m("session-start",{sessionId:s.value})},I=()=>{d.value=!1,clearTimeout($),clearInterval(f)},L=()=>{const a=d.value;if(d.value=!1,clearTimeout($),clearInterval(f),$=null,f=null,a&&u.saveProgress&&s.value){const i=Date.now(),r={id:s.value,type:"breathing",startTime:t.value,endTime:i,duration:Math.floor((i-t.value)/1e3),cycles:p.value,pattern:u.pattern,status:"completed"};T.updateSession(r);const w=T.getStatistics();w.breathingSessions++,w.totalBreathingTime+=r.duration,T.saveStatistics(w),m("session-end",r)}s.value=null,t.value=null},E=()=>{I(),n.value="inhale",_.value=0,p.value=0,b.value=0,o.value=y},N=()=>{const a=S.value*1e3;o.value=0,_.value=S.value;const i=setInterval(()=>{_.value--,_.value<=0&&clearInterval(i)},1e3);$=setTimeout(()=>{U()},a)},U=()=>{if(t.value&&b.value>=u.sessionDuration){q();return}const a=["inhale","hold","exhale","pause"],r=(a.indexOf(n.value)+1)%a.length;n.value=a[r],o.value=y,m("phase-change",n.value),n.value==="inhale"&&(p.value++,m("cycle-complete",p.value)),d.value&&N()},q=()=>{L(),m("session-complete",{cycles:p.value,duration:b.value,sessionId:s.value})},H=()=>{f=setInterval(()=>{b.value++},1e3)},J=a=>{const i=Math.floor(a/60),r=a%60;return`${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`};return Q(()=>u.pattern,()=>{d.value&&E()},{deep:!0}),W(()=>{u.autoStart&&A()}),X(()=>{I()}),(a,i)=>(h(),v("div",ee,[e("div",te,[e("div",{class:G(["breathing-circle",{inhaling:n.value==="inhale",holding:n.value==="hold",exhaling:n.value==="exhale",paused:n.value==="pause"}]),style:B({"--inhale-duration":`${x.pattern.inhale}s`,"--hold-duration":`${x.pattern.hold}s`,"--exhale-duration":`${x.pattern.exhale}s`,"--pause-duration":`${x.pattern.pause||1}s`})},[e("div",se,[e("div",ae,l(P.value),1),e("div",ne,l(_.value),1)]),(h(),v(D,null,M(3,r=>e("div",{class:"ripple",key:r,style:B({"--delay":`${r*.5}s`})},null,4)),64))],6),e("div",oe,[(h(),v("svg",ie,[i[0]||(i[0]=e("circle",{class:"progress-background",cx:"100",cy:"100",r:"90",fill:"none",stroke:"rgba(255, 255, 255, 0.2)","stroke-width":"4"},null,-1)),e("circle",{class:"progress-bar",cx:"100",cy:"100",r:"90",fill:"none",stroke:"#4CAF50","stroke-width":"4","stroke-linecap":"round","stroke-dasharray":y,"stroke-dashoffset":o.value,style:B({transition:d.value?`stroke-dashoffset ${S.value}s linear`:"none"})},null,12,le)]))])]),e("div",re,[e("h3",ce,l(O.value),1),e("p",ue,l(V.value),1),e("div",de,[e("div",he,[i[1]||(i[1]=e("span",{class:"stat-label"},"å½“å‰è½®æ¬¡",-1)),e("span",pe,l(p.value),1)]),e("div",ve,[i[2]||(i[2]=e("span",{class:"stat-label"},"æ€»æ—¶é•¿",-1)),e("span",ge,l(J(b.value)),1)])])]),e("div",me,[e("button",{class:"control-btn primary",onClick:j},l(d.value?"æš‚åœ":"å¼€å§‹"),1),e("button",{class:"control-btn secondary",onClick:E}," é‡ç½® ")]),e("div",_e,[(h(),v(D,null,M(20,r=>e("div",{key:r,class:"particle",style:B({"--delay":`${Math.random()*10}s`,"--duration":`${5+Math.random()*10}s`,"--x":`${Math.random()*100}%`,"--y":`${Math.random()*100}%`})},null,4)),64))])]))}},fe=F(be,[["__scopeId","data-v-aca509cb"]]);const ye={class:"breathing-training-container"},xe={key:1},$e={class:"page-header"},Se={class:"header-background"},Te={class:"breathing-animation"},ke={class:"breathing-modes"},Be={class:"modes-grid"},Ce=["onClick"],Ie={class:"mode-icon"},we={class:"mode-pattern"},De={class:"pattern-value"},Me={class:"mode-duration"},Pe={class:"duration-value"},Ae={class:"mode-age"},Ee={class:"age-value"},Ne={__name:"BreathingTraining",setup(x){const g=c(null),u=c(null),m=t=>{console.log("Phase changed:",t)},d=t=>{console.log("Cycle completed:",t)},n=t=>{u.value=t,console.log("Session started:",t)},_=t=>{console.log("Session ended:",t)},p=t=>{console.log("Session completed:",t)},b=t=>{g.value=t,console.log("é€‰æ‹©å‘¼å¸æ¨¡å¼:",t.name)},C=c([{id:1,name:"åŸºç¡€å‘¼å¸",icon:"ğŸŒ±",description:"ç®€å•çš„æ·±å‘¼å¸ç»ƒä¹ ï¼Œé€‚åˆåˆå­¦è€…",pattern:{inhale:4,hold:4,exhale:4,pause:1},patternText:"4-4-4 (å¸æ°”-ä¿æŒ-å‘¼æ°”)",duration:5,ageRange:"3-12å²",route:"/meditation/breathing/basic"},{id:2,name:"æ”¾æ¾å‘¼å¸",icon:"ğŸŒ™",description:"å»¶é•¿å‘¼æ°”æ—¶é—´ï¼Œå¸®åŠ©æ·±åº¦æ”¾æ¾",pattern:{inhale:4,hold:2,exhale:6,pause:1},patternText:"4-2-6 (å¸æ°”-ä¿æŒ-å‘¼æ°”)",duration:8,ageRange:"5-12å²",route:"/meditation/breathing/relaxation"},{id:3,name:"ä¸“æ³¨å‘¼å¸",icon:"ğŸ¯",description:"æå‡ä¸“æ³¨åŠ›çš„å‘¼å¸ç»ƒä¹ ",pattern:{inhale:6,hold:2,exhale:6,pause:1},patternText:"6-2-6 (å¸æ°”-ä¿æŒ-å‘¼æ°”)",duration:10,ageRange:"7-12å²",route:"/meditation/breathing/focus"}]);return(t,s)=>{var f,y;const $=Y("router-view");return h(),v("div",ye,[t.$route.path==="/meditation/breathing"?(h(),Z(K,{key:0,"main-title":"å†¥æƒ³è®­ç»ƒ","main-path":"/meditation","current-title":"å‘¼å¸è®­ç»ƒ","sibling-modules":[{title:"å¼•å¯¼å†¥æƒ³",path:"/meditation/guided"},{title:"å‘¼å¸è®­ç»ƒ",path:"/meditation/breathing"},{title:"è„‘æ³¢ç”Ÿæˆå™¨",path:"/meditation/brainwave-generator"},{title:"èŠ‚æ‹å™¨",path:"/meditation/metronome"},{title:"æƒ³è±¡åŠ›è®­ç»ƒ",path:"/meditation/visualization"},{title:"æ­£å¿µè®­ç»ƒ",path:"/meditation/mindfulness"}]})):R("",!0),t.$route.path==="/meditation/breathing"?(h(),v("div",xe,[e("div",$e,[e("div",Se,[e("div",Te,[z(fe,{pattern:((f=g.value)==null?void 0:f.pattern)||{inhale:4,hold:4,exhale:4,pause:1},"session-duration":(y=g.value)!=null&&y.duration?g.value.duration*60:300,"auto-start":!1,"save-progress":!0,onPhaseChange:m,onCycleComplete:d,onSessionStart:n,onSessionEnd:_,onSessionComplete:p},null,8,["pattern","session-duration"])])]),s[0]||(s[0]=e("h1",null,"ğŸ« å‘¼å¸è®­ç»ƒ",-1)),s[1]||(s[1]=e("p",{class:"page-description"}," é€šè¿‡æœ‰èŠ‚å¥çš„å‘¼å¸ç»ƒä¹ ï¼Œå¸®åŠ©å­©å­å­¦ä¼šè°ƒèŠ‚æƒ…ç»ªï¼Œæå‡ä¸“æ³¨åŠ›å’Œæ”¾æ¾èƒ½åŠ›ã€‚ æ·±å‘¼å¸æ˜¯å†¥æƒ³çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯è‡ªæˆ‘è°ƒèŠ‚çš„é‡è¦æŠ€èƒ½ã€‚ ",-1))]),e("div",ke,[s[5]||(s[5]=e("h2",{class:"section-title"},"é€‰æ‹©å‘¼å¸æ¨¡å¼",-1)),e("div",Be,[(h(!0),v(D,null,M(C.value,o=>{var S;return h(),v("div",{key:o.id,class:G(["mode-card",{selected:((S=g.value)==null?void 0:S.id)===o.id}]),onClick:P=>b(o)},[e("div",Ie,l(o.icon),1),e("h3",null,l(o.name),1),e("p",null,l(o.description),1),e("div",we,[s[2]||(s[2]=e("span",{class:"pattern-label"},"å‘¼å¸èŠ‚å¥ï¼š",-1)),e("span",De,l(o.patternText),1)]),e("div",Me,[s[3]||(s[3]=e("span",{class:"duration-label"},"æ—¶é•¿ï¼š",-1)),e("span",Pe,l(o.duration)+"åˆ†é’Ÿ",1)]),e("div",Ae,[s[4]||(s[4]=e("span",{class:"age-label"},"å¹´é¾„ï¼š",-1)),e("span",Ee,l(o.ageRange),1)])],10,Ce)}),128))])])])):R("",!0),z($)])}}},Oe=F(Ne,[["__scopeId","data-v-6d676c08"]]);export{Oe as default};
