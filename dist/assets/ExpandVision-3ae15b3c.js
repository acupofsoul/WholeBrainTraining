import{u as Gt,a as Ot,b as jt}from"./useBasicTraining-c6520dac.js";import{k as v,C as Ht,c as gt,q as Jt,o as r,a as d,b as t,F as p,h as M,g as f,t as l,m as k,f as tt,s as X,v as Y,D as Qt,n as m,z as Xt}from"./index-7434e420.js";import{_ as Yt}from"./_plugin-vue_export-helper-c27b6911.js";const Zt={name:"ExpandVision",emits:["back"],setup(ut,{emit:e}){const _=Gt("expand_vision"),s=jt(_),st=Ot(_),b=v(null),n=v(1),u=v(5),I=v(0),L=v(!1),et=v({}),w=v([{id:"dots",name:"点阵训练",icon:"🔴",description:"通过点击周边出现的彩色圆点，扩大视觉感知范围",level:"beginner",levelText:"初级",duration:5,difficulty:2,ageRange:"6-12岁",progress:0,features:["基础视野扩展","颜色识别","反应训练","注意力集中"],benefits:["提高周边视觉","增强反应速度","改善注意力分配","扩大视觉范围"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"numbers",name:"数字追踪",icon:"🔢",description:"在视野范围内快速找到指定的数字，提高数字识别能力",level:"intermediate",levelText:"中级",duration:8,difficulty:3,ageRange:"8-16岁",progress:0,features:["数字识别","视觉搜索","目标定位","快速扫描"],benefits:["提高数字敏感度","增强搜索效率","改善目标识别","训练视觉扫描"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"shapes",name:"形状识别",icon:"🔺",description:"识别不同形状和颜色的目标，训练形状感知和颜色辨识",level:"intermediate",levelText:"中级",duration:10,difficulty:3,ageRange:"10-18岁",progress:0,features:["形状识别","颜色辨识","视觉分类","特征提取"],benefits:["提高形状感知","增强颜色敏感度","改善视觉分类","训练特征识别"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"text",name:"文字扫描",icon:"📝",description:"在视野中快速定位特定词汇，提升文字识别和阅读效率",level:"advanced",levelText:"高级",duration:12,difficulty:4,ageRange:"12-20岁",progress:0,features:["文字识别","词汇搜索","阅读扫描","语言处理"],benefits:["提高阅读速度","增强文字敏感度","改善扫描技巧","训练视觉词汇"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"motion",name:"动态追踪",icon:"🎯",description:"追踪移动的目标物体，训练动态视觉和预测能力",level:"advanced",levelText:"高级",duration:10,difficulty:4,ageRange:"12-20岁",progress:0,features:["动态追踪","运动预测","视觉跟踪","反应协调"],benefits:["提高动态视觉","增强预测能力","改善眼球运动","训练视觉协调"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"peripheral",name:"周边感知",icon:"👁️",description:"专注中心的同时感知周边变化，训练周边视觉敏感度",level:"expert",levelText:"专家",duration:15,difficulty:5,ageRange:"15-25岁",progress:0,features:["周边视觉","双重任务","注意分配","视觉监控"],benefits:["增强周边感知","提高多任务能力","改善注意分配","训练视觉监控"],bestScore:0,totalAttempts:0,averageAccuracy:0}]),A=v([]),G=v(0),N=v(0),D=v([]),E=v(0),V=v(0),T=v(5),x=v([]),C=v({type:"circle",color:"#ff0000",name:"红色圆形"}),z=v(0),P=v([]),W=v(""),q=v(0),S=v([]),O=v(null),y=Ht({centerTask:{numbers:[],correctAnswer:0},peripheralTargets:[]}),B=v(""),j=v(0),H=v(0),mt=v(3),ft=v(3),ht=v(3),pt=v(3),Mt=gt(()=>{const a=U();if(!a)return 0;const i=a.duration*60;return(i-I.value)/i*100}),J=gt(()=>N.value===0?0:Math.round(G.value/N.value*100)),_t=a=>{b.value=a},U=()=>w.value.find(a=>a.id===b.value),bt=()=>({dots:"保持注视中心十字，用余光发现并点击周边出现的彩色圆点",numbers:"保持注视中心十字，快速找到并点击指定的数字",shapes:"保持注视中心十字，识别并点击指定形状和颜色的目标",text:"保持注视中心十字，快速定位并点击指定的词汇",motion:"保持注视中心十字，追踪并点击移动的目标",peripheral:"专注计算中心数字的和，同时点击周边闪烁的目标"})[b.value]||"请选择训练模式",Z=a=>{b.value=a;const i=U();n.value=1,u.value=s.settings.sessionCount||5,I.value=i.duration*60,Rt(),wt(),_.startTrainingSession({mode:a,duration:i.duration,sessions:u.value}),nt()},yt=()=>{_.pauseTraining(),Q()},kt=()=>{_.resumeTraining(),nt()},Tt=()=>{_.cancelTrainingSession(),Q(),it()};let F=null;const nt=()=>{F&&clearInterval(F),F=setInterval(()=>{_.isPaused.value||(I.value--,I.value<=0&&at())},1e3)},Q=()=>{F&&(clearInterval(F),F=null)},at=()=>{Q();const a=xt();Ct(a),_.endTrainingSession({score:a,completed:!0,accuracy:J.value,mode:b.value,sessions:n.value}),St(),L.value=!0},xt=()=>{let a=0;switch(b.value){case"dots":a=J.value;break;case"numbers":a=V.value/T.value*100;break;case"shapes":a=z.value/T.value*100;break;case"text":a=q.value/T.value*100;break;case"motion":a=n.value/u.value*100;break;case"peripheral":a=j.value/H.value*50+(B.value===y.centerTask.correctAnswer?50:0);break;default:a=50}return Math.round(a)},Ct=a=>{const i=U();et.value={accuracy:J.value,duration:i.duration*60,sessions:n.value,averageReaction:450+Math.random()*200,visionRange:s.settings.visionRange,newAchievement:a>80,achievementTitle:"视野大师",achievementDescription:"在扩大视野训练中达到80%以上准确率！"}},St=()=>{const a=U();a&&(a.progress=Math.min(100,a.progress+20))},Rt=()=>{G.value=0,N.value=0,V.value=0,z.value=0,q.value=0,j.value=0,H.value=0,B.value=""},it=()=>{A.value=[],D.value=[],x.value=[],P.value=[],S.value=[],O.value&&(cancelAnimationFrame(O.value),O.value=null)},wt=()=>{switch(b.value){case"dots":At();break;case"numbers":Dt();break;case"shapes":Pt();break;case"text":Ft();break;case"motion":It();break;case"peripheral":lt();break}},At=()=>{const a=s.settings.visionRange||400,i=8+Math.floor(Math.random()*5),o=["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff","#44ffff"];A.value=[],N.value=i;for(let c=0;c<i;c++){const g=Math.PI*2*c/i+Math.random()*.5,h=100+Math.random()*(a/2-100);A.value.push({id:c,x:300+Math.cos(g)*h,y:200+Math.sin(g)*h,color:o[Math.floor(Math.random()*o.length)],active:!1,clicked:!1})}$()},$=()=>{const a=A.value.filter(i=>!i.active&&!i.clicked);if(a.length>0){const i=a[Math.floor(Math.random()*a.length)];i.active=!0,setTimeout(()=>{i.active&&(i.active=!1,$())},2e3+Math.random()*1e3)}},Dt=()=>{const a=s.settings.visionRange||400,i=12;D.value=[],E.value=Math.floor(Math.random()*9)+1;for(let c=0;c<i;c++){const g=Math.PI*2*c/i,h=80+Math.random()*(a/2-80);D.value.push({id:c,x:300+Math.cos(g)*h,y:200+Math.sin(g)*h,value:Math.floor(Math.random()*9)+1,found:!1})}const o=Math.floor(Math.random()*i);D.value[o].value=E.value},Pt=()=>{const a=s.settings.visionRange||400,i=10,o=["circle","square","triangle"],c=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff"];x.value=[],C.value={type:o[Math.floor(Math.random()*o.length)],color:c[Math.floor(Math.random()*c.length)],name:ct(o[Math.floor(Math.random()*o.length)],c[Math.floor(Math.random()*c.length)])};for(let h=0;h<i;h++){const K=Math.PI*2*h/i,vt=80+Math.random()*(a/2-80);x.value.push({id:h,x:300+Math.cos(K)*vt,y:200+Math.sin(K)*vt,type:o[Math.floor(Math.random()*o.length)],color:c[Math.floor(Math.random()*c.length)],found:!1})}const g=Math.floor(Math.random()*i);x.value[g].type=C.value.type,x.value[g].color=C.value.color},Ft=()=>{const a=s.settings.visionRange||400,i=8,o=["苹果","香蕉","橙子","葡萄","草莓","西瓜","桃子","梨子","樱桃","柠檬"];P.value=[],W.value=o[Math.floor(Math.random()*o.length)];for(let g=0;g<i;g++){const h=Math.PI*2*g/i,K=100+Math.random()*(a/2-100);P.value.push({id:g,x:300+Math.cos(h)*K,y:200+Math.sin(h)*K,text:o[Math.floor(Math.random()*o.length)],found:!1})}const c=Math.floor(Math.random()*i);P.value[c].text=W.value},It=()=>{S.value=[];for(let i=0;i<3;i++)S.value.push({id:i,x:Math.random()*500,y:Math.random()*300,vx:(Math.random()-.5)*4,vy:(Math.random()-.5)*4});ot()},ot=()=>{S.value.forEach(a=>{a.x+=a.vx,a.y+=a.vy,(a.x<=0||a.x>=580)&&(a.vx*=-1),(a.y<=0||a.y>=380)&&(a.vy*=-1),a.x=Math.max(0,Math.min(580,a.x)),a.y=Math.max(0,Math.min(380,a.y))}),O.value=requestAnimationFrame(ot)},lt=()=>{const a=[];for(let o=0;o<5;o++)a.push(Math.floor(Math.random()*9)+1);y.centerTask.numbers=a,y.centerTask.correctAnswer=a.reduce((o,c)=>o+c,0);const i=6;H.value=i,y.peripheralTargets=[];for(let o=0;o<i;o++){const c=Math.PI*2*o/i,g=150+Math.random()*100;y.peripheralTargets.push({id:o,x:300+Math.cos(c)*g,y:200+Math.sin(c)*g,color:"#ff4444",active:!1})}rt()},rt=()=>{const a=y.peripheralTargets.filter(i=>!i.active);if(a.length>0){const i=a[Math.floor(Math.random()*a.length)];i.active=!0,setTimeout(()=>{i.active=!1,setTimeout(rt,1e3+Math.random()*2e3)},1500)}},Nt=a=>{const i=A.value.find(o=>o.id===a);i&&i.active&&(i.clicked=!0,i.active=!1,G.value++,s.settings.soundEnabled&&R(),$())},Et=a=>{const i=D.value.find(o=>o.id===a);i&&i.value===E.value&&!i.found&&(i.found=!0,V.value++,s.settings.soundEnabled&&R(),V.value<T.value&&(E.value=Math.floor(Math.random()*9)+1))},Vt=a=>{const i=x.value.find(o=>o.id===a);if(i&&dt(i)&&!i.found&&(i.found=!0,z.value++,s.settings.soundEnabled&&R(),z.value<T.value)){const o=["circle","square","triangle"],c=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff"];C.value={type:o[Math.floor(Math.random()*o.length)],color:c[Math.floor(Math.random()*c.length)],name:ct(o[Math.floor(Math.random()*o.length)],c[Math.floor(Math.random()*c.length)])}}},zt=a=>{const i=P.value.find(o=>o.id===a);if(i&&i.text===W.value&&!i.found&&(i.found=!0,q.value++,s.settings.soundEnabled&&R(),q.value<T.value)){const o=["苹果","香蕉","橙子","葡萄","草莓","西瓜","桃子","梨子","樱桃","柠檬"];W.value=o[Math.floor(Math.random()*o.length)]}},Wt=a=>{const i=S.value.findIndex(o=>o.id===a);i!==-1&&(S.value.splice(i,1),n.value++,s.settings.soundEnabled&&R(),n.value>=u.value&&at())},qt=a=>{const i=y.peripheralTargets.find(o=>o.id===a);i&&i.active&&(i.active=!1,j.value++,s.settings.soundEnabled&&R())},Bt=()=>{parseInt(B.value)===y.centerTask.correctAnswer&&s.settings.soundEnabled&&R(),lt(),B.value=""},dt=a=>a.type===C.value.type&&a.color===C.value.color,ct=(a,i)=>{const o={circle:"圆形",square:"方形",triangle:"三角形"};return`${{"#ff0000":"红色","#00ff00":"绿色","#0000ff":"蓝色","#ffff00":"黄色","#ff00ff":"紫色"}[i]||""}${o[a]||""}`},R=()=>{try{const a=new(window.AudioContext||window.webkitAudioContext),i=a.createOscillator(),o=a.createGain();i.connect(o),o.connect(a.destination),i.frequency.setValueAtTime(800,a.currentTime),o.gain.setValueAtTime(.1,a.currentTime),o.gain.exponentialRampToValueAtTime(.01,a.currentTime+.1),i.start(a.currentTime),i.stop(a.currentTime+.1)}catch(a){console.log("音效播放失败:",a)}},Ut=a=>{switch(a){case"improving":return"上升";case"declining":return"下降";default:return"稳定"}},Kt=()=>{L.value=!1},Lt=()=>{L.value=!1;const a=w.value.findIndex(i=>i.id===b.value)+1;a<w.value.length?Z(w.value[a].id):Z(w.value[0].id)};return Jt(()=>{Q(),it()}),{trainingManager:_,settingsManager:s,statsManager:st,selectedMode:b,currentSession:n,totalSessions:u,timeRemaining:I,showCompletionModal:L,completionData:et,trainingModes:w,currentDots:A,dotsClicked:G,totalDots:N,currentNumbers:D,targetNumber:E,numbersFound:V,targetCount:T,currentShapes:x,targetShape:C,shapesFound:z,currentWords:P,targetWord:W,wordsFound:q,currentMotionTargets:S,currentPeripheralData:y,peripheralAnswer:B,peripheralTargetsClicked:j,peripheralTargetsTotal:H,visionRangeRating:mt,reactionSpeedRating:ft,attentionRating:ht,accuracyRating:pt,timerProgress:Mt,accuracy:J,selectMode:_t,getCurrentMode:U,getCurrentInstruction:bt,startTraining:Z,pauseTraining:yt,resumeTraining:kt,stopTraining:Tt,clickDot:Nt,clickNumber:Et,clickShape:Vt,clickWord:zt,clickMotionTarget:Wt,clickPeripheralTarget:qt,submitPeripheralAnswer:Bt,isTargetShape:dt,getTrendText:Ut,closeCompletionModal:Kt,startNextTraining:Lt}}},$t={class:"expand-vision-container"},ts={key:0,class:"loading-container"},ss={key:1,class:"training-modes"},es={class:"modes-grid"},ns=["onClick"],as={class:"mode-header"},is={class:"mode-icon"},os={class:"mode-description"},ls={class:"mode-details"},rs={class:"detail-item"},ds={class:"detail-value"},cs={class:"detail-item"},vs={class:"detail-value"},gs={class:"detail-item"},us={class:"detail-value"},ms={class:"mode-progress"},fs={class:"progress-bar"},hs={class:"progress-text"},ps=["onClick"],Ms={key:2,class:"training-interface"},_s={class:"training-card"},bs={class:"training-header"},ys={class:"training-controls"},ks={class:"training-timer"},Ts={class:"timer-display"},xs={class:"time-remaining"},Cs={class:"session-info"},Ss={class:"timer-progress"},Rs={class:"progress-bar"},ws={class:"training-content"},As={class:"instruction"},Ds={key:0,class:"dots-training"},Ps={class:"vision-field",ref:"visionField"},Fs=["onClick"],Is={class:"training-stats"},Ns={class:"stat-item"},Es={class:"stat-value"},Vs={class:"stat-item"},zs={class:"stat-value"},Ws={class:"stat-item"},qs={class:"stat-value"},Bs={key:1,class:"numbers-training"},Us={class:"vision-field",ref:"visionField"},Ks=["onClick"],Ls={class:"target-info"},Gs={class:"target-display"},Os={class:"target-number"},js={class:"found-count"},Hs={key:2,class:"shapes-training"},Js={class:"vision-field",ref:"visionField"},Qs=["onClick"],Xs={class:"target-info"},Ys={class:"target-display"},Zs={class:"target-shape"},$s={class:"found-count"},te={key:3,class:"text-training"},se={class:"vision-field",ref:"visionField"},ee=["onClick"],ne={class:"target-info"},ae={class:"target-display"},ie={class:"target-word"},oe={class:"found-count"},le={key:4,class:"motion-training"},re={class:"vision-field",ref:"visionField"},de=["onClick"],ce={class:"target-info"},ve={class:"found-count"},ge={key:5,class:"peripheral-training"},ue={class:"vision-field",ref:"visionField"},me={class:"center-task-area"},fe=["onClick"],he={class:"dual-task-info"},pe={class:"center-task"},Me={class:"peripheral-task"},_e={key:3,class:"training-settings"},be={class:"settings-grid"},ye={class:"settings-group"},ke={class:"setting-item"},Te={class:"setting-item"},xe={class:"setting-item"},Ce={class:"settings-group"},Se={class:"setting-item"},Re={class:"range-container"},we={class:"range-value"},Ae={class:"setting-item"},De={class:"range-container"},Pe={class:"range-value"},Fe={class:"setting-item"},Ie={class:"range-container"},Ne={class:"range-value"},Ee={key:4,class:"statistics-section"},Ve={class:"stats-overview"},ze={class:"stats-card"},We={class:"stats-grid"},qe={class:"stat-item"},Be={class:"stat-value"},Ue={class:"stat-item"},Ke={class:"stat-value"},Le={class:"stat-item"},Ge={class:"stat-value"},Oe={class:"stat-item"},je={class:"stat-value"},He={class:"stat-item"},Je={class:"stat-value"},Qe={class:"stat-item"},Xe={class:"stats-card"},Ye={class:"ability-ratings"},Ze={class:"rating-item"},$e={class:"rating-stars"},tn={class:"rating-item"},sn={class:"rating-stars"},en={class:"rating-item"},nn={class:"rating-stars"},an={class:"rating-item"},on={class:"rating-stars"},ln={key:5,class:"completion-overlay"},rn={class:"completion-modal"},dn={class:"completion-content"},cn={class:"completion-stats"},vn={class:"stat-item"},gn={class:"stat-value"},un={class:"stat-item"},mn={class:"stat-value"},fn={class:"stat-item"},hn={class:"stat-value"},pn={class:"stat-item"},Mn={class:"stat-value"},_n={key:0,class:"achievement-notification"},bn={class:"achievement-text"},yn={class:"modal-actions"};function kn(ut,e,_,s,st,b){return r(),d("div",$t,[s.trainingManager.isLoading.value?(r(),d("div",ts,e[17]||(e[17]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"正在加载训练数据...",-1)]))):s.trainingManager.isTraining.value?f("",!0):(r(),d("div",ss,[e[21]||(e[21]=t("h3",null,"选择训练模式",-1)),t("div",es,[(r(!0),d(p,null,M(s.trainingModes,n=>(r(),d("div",{key:n.id,class:m(["mode-card",{active:s.selectedMode===n.id}]),onClick:u=>s.selectMode(n.id)},[t("div",as,[t("span",is,l(n.icon),1),t("span",{class:m(["mode-level",n.level])},l(n.levelText),3)]),t("h4",null,l(n.name),1),t("p",os,l(n.description),1),t("div",ls,[t("div",rs,[e[18]||(e[18]=t("span",{class:"detail-label"},"训练时长:",-1)),t("span",ds,l(n.duration)+"分钟",1)]),t("div",cs,[e[19]||(e[19]=t("span",{class:"detail-label"},"难度等级:",-1)),t("span",vs,l(n.difficulty)+"/5",1)]),t("div",gs,[e[20]||(e[20]=t("span",{class:"detail-label"},"推荐年龄:",-1)),t("span",us,l(n.ageRange),1)])]),t("div",ms,[t("div",fs,[t("div",{class:"progress-fill",style:k({width:n.progress+"%"})},null,4)]),t("div",hs,"完成度: "+l(n.progress)+"%",1)]),t("button",{class:"start-mode-btn",onClick:Xt(u=>s.startTraining(n.id),["stop"])},l(n.progress>0?"继续训练":"开始训练"),9,ps)],10,ns))),128))])])),s.trainingManager.isTraining.value?(r(),d("div",Ms,[t("div",_s,[t("div",bs,[t("h3",null,l(s.getCurrentMode().name),1),t("div",ys,[s.trainingManager.canPauseTraining.value?(r(),d("button",{key:0,class:"control-btn",onClick:e[0]||(e[0]=(...n)=>s.pauseTraining&&s.pauseTraining(...n))}," ⏸️ ")):f("",!0),s.trainingManager.canResumeTraining.value?(r(),d("button",{key:1,class:"control-btn",onClick:e[1]||(e[1]=(...n)=>s.resumeTraining&&s.resumeTraining(...n))}," ▶️ ")):f("",!0),t("button",{class:"control-btn",onClick:e[2]||(e[2]=(...n)=>s.stopTraining&&s.stopTraining(...n))}," ⏹️ ")])]),t("div",ks,[t("div",Ts,[t("div",xs,l(s.trainingManager.formatDuration(s.timeRemaining)),1),t("div",Cs,"第 "+l(s.currentSession)+"/"+l(s.totalSessions)+" 轮",1)]),t("div",Ss,[t("div",Rs,[t("div",{class:"progress-fill",style:k({width:s.timerProgress+"%"})},null,4)])])]),t("div",ws,[t("div",As,l(s.getCurrentInstruction()),1),s.selectedMode==="dots"?(r(),d("div",Ds,[t("div",Ps,[e[22]||(e[22]=t("div",{class:"center-point"},"+",-1)),(r(!0),d(p,null,M(s.currentDots,n=>(r(),d("div",{key:n.id,class:m(["dot-item",{active:n.active,clicked:n.clicked}]),style:k({left:n.x+"px",top:n.y+"px",backgroundColor:n.color}),onClick:u=>s.clickDot(n.id)},null,14,Fs))),128))],512),t("div",Is,[t("div",Ns,[e[23]||(e[23]=t("span",{class:"stat-label"},"已点击",-1)),t("span",Es,l(s.dotsClicked),1)]),t("div",Vs,[e[24]||(e[24]=t("span",{class:"stat-label"},"总数",-1)),t("span",zs,l(s.totalDots),1)]),t("div",Ws,[e[25]||(e[25]=t("span",{class:"stat-label"},"准确率",-1)),t("span",qs,l(s.accuracy)+"%",1)])])])):f("",!0),s.selectedMode==="numbers"?(r(),d("div",Bs,[t("div",Us,[e[26]||(e[26]=t("div",{class:"center-point"},"+",-1)),(r(!0),d(p,null,M(s.currentNumbers,n=>(r(),d("div",{key:n.id,class:m(["number-item",{target:n.value===s.targetNumber,found:n.found}]),style:k({left:n.x+"px",top:n.y+"px"}),onClick:u=>s.clickNumber(n.id)},l(n.value),15,Ks))),128))],512),t("div",Ls,[t("div",Gs,[e[27]||(e[27]=tt(" 寻找数字: ",-1)),t("span",Os,l(s.targetNumber),1)]),t("div",js," 已找到: "+l(s.numbersFound)+"/"+l(s.targetCount),1)])])):f("",!0),s.selectedMode==="shapes"?(r(),d("div",Hs,[t("div",Js,[e[28]||(e[28]=t("div",{class:"center-point"},"+",-1)),(r(!0),d(p,null,M(s.currentShapes,n=>(r(),d("div",{key:n.id,class:m(["shape-item",[n.type,{target:s.isTargetShape(n),found:n.found}]]),style:k({left:n.x+"px",top:n.y+"px",backgroundColor:n.color,borderColor:n.type==="triangle"?n.color:"transparent"}),onClick:u=>s.clickShape(n.id)},null,14,Qs))),128))],512),t("div",Xs,[t("div",Ys,[e[29]||(e[29]=tt(" 寻找: ",-1)),t("span",Zs,l(s.targetShape.name),1)]),t("div",$s," 已找到: "+l(s.shapesFound)+"/"+l(s.targetCount),1)])])):f("",!0),s.selectedMode==="text"?(r(),d("div",te,[t("div",se,[e[30]||(e[30]=t("div",{class:"center-point"},"+",-1)),(r(!0),d(p,null,M(s.currentWords,n=>(r(),d("div",{key:n.id,class:m(["word-item",{target:n.text===s.targetWord,found:n.found}]),style:k({left:n.x+"px",top:n.y+"px"}),onClick:u=>s.clickWord(n.id)},l(n.text),15,ee))),128))],512),t("div",ne,[t("div",ae,[e[31]||(e[31]=tt(" 寻找词汇: ",-1)),t("span",ie,l(s.targetWord),1)]),t("div",oe," 已找到: "+l(s.wordsFound)+"/"+l(s.targetCount),1)])])):f("",!0),s.selectedMode==="motion"?(r(),d("div",le,[t("div",re,[e[32]||(e[32]=t("div",{class:"center-point"},"+",-1)),(r(!0),d(p,null,M(s.currentMotionTargets,n=>(r(),d("div",{key:n.id,class:"motion-target",style:k({left:n.x+"px",top:n.y+"px",width:s.settingsManager.settings.targetSize+"px",height:s.settingsManager.settings.targetSize+"px"}),onClick:u=>s.clickMotionTarget(n.id)},null,12,de))),128))],512),t("div",ce,[e[33]||(e[33]=t("div",{class:"target-display"}," 追踪移动目标 ",-1)),t("div",ve," 已击中: "+l(s.currentSession)+"/"+l(s.settingsManager.settings.sessionCount),1)])])):f("",!0),s.selectedMode==="peripheral"?(r(),d("div",ge,[t("div",ue,[t("div",me,[(r(!0),d(p,null,M(s.currentPeripheralData.centerTask.numbers,(n,u)=>(r(),d("div",{key:"center-"+u,class:"center-number"},l(n),1))),128))]),(r(!0),d(p,null,M(s.currentPeripheralData.peripheralTargets,n=>(r(),d("div",{key:n.id,class:m(["peripheral-target",{active:n.active}]),style:k({left:n.x+"px",top:n.y+"px",backgroundColor:n.color}),onClick:u=>s.clickPeripheralTarget(n.id)},null,14,fe))),128))],512),t("div",he,[t("div",pe,[e[34]||(e[34]=t("span",null,"中心任务: 计算数字和",-1)),X(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>s.peripheralAnswer=n),type:"number",class:"answer-input",onKeyup:e[4]||(e[4]=Qt((...n)=>s.submitPeripheralAnswer&&s.submitPeripheralAnswer(...n),["enter"]))},null,544),[[Y,s.peripheralAnswer]]),t("button",{onClick:e[5]||(e[5]=(...n)=>s.submitPeripheralAnswer&&s.submitPeripheralAnswer(...n)),class:"submit-btn"},"提交")]),t("div",Me,[e[35]||(e[35]=t("span",null,"周边任务: 点击闪烁目标",-1)),t("span",null,"已点击: "+l(s.peripheralTargetsClicked)+"/"+l(s.peripheralTargetsTotal),1)])])])):f("",!0)])])])):f("",!0),s.trainingManager.isTraining.value?f("",!0):(r(),d("div",_e,[e[44]||(e[44]=t("h3",null,"训练设置",-1)),t("div",be,[t("div",ye,[e[39]||(e[39]=t("h4",null,"基础设置",-1)),t("div",ke,[e[36]||(e[36]=t("label",null,"声音效果",-1)),t("button",{class:m(["toggle-btn",{active:s.settingsManager.settings.soundEnabled}]),onClick:e[6]||(e[6]=n=>s.settingsManager.toggleSetting("soundEnabled"))},l(s.settingsManager.settings.soundEnabled?"开启":"关闭"),3)]),t("div",Te,[e[37]||(e[37]=t("label",null,"震动反馈",-1)),t("button",{class:m(["toggle-btn",{active:s.settingsManager.settings.vibrationEnabled}]),onClick:e[7]||(e[7]=n=>s.settingsManager.toggleSetting("vibrationEnabled"))},l(s.settingsManager.settings.vibrationEnabled?"开启":"关闭"),3)]),t("div",xe,[e[38]||(e[38]=t("label",null,"视觉反馈",-1)),t("button",{class:m(["toggle-btn",{active:s.settingsManager.settings.visualFeedback}]),onClick:e[8]||(e[8]=n=>s.settingsManager.toggleSetting("visualFeedback"))},l(s.settingsManager.settings.visualFeedback?"开启":"关闭"),3)])]),t("div",Ce,[e[43]||(e[43]=t("h4",null,"训练参数",-1)),t("div",Se,[e[40]||(e[40]=t("label",null,"视野范围",-1)),t("div",Re,[X(t("input",{type:"range",min:"200",max:"800",step:"50","onUpdate:modelValue":e[9]||(e[9]=n=>s.settingsManager.settings.visionRange=n),onChange:e[10]||(e[10]=n=>s.settingsManager.updateSetting("visionRange",n.target.value))},null,544),[[Y,s.settingsManager.settings.visionRange]]),t("span",we,l(s.settingsManager.settings.visionRange)+"px",1)])]),t("div",Ae,[e[41]||(e[41]=t("label",null,"目标大小",-1)),t("div",De,[X(t("input",{type:"range",min:"10",max:"40",step:"5","onUpdate:modelValue":e[11]||(e[11]=n=>s.settingsManager.settings.targetSize=n),onChange:e[12]||(e[12]=n=>s.settingsManager.updateSetting("targetSize",n.target.value))},null,544),[[Y,s.settingsManager.settings.targetSize]]),t("span",Pe,l(s.settingsManager.settings.targetSize)+"px",1)])]),t("div",Fe,[e[42]||(e[42]=t("label",null,"训练轮数",-1)),t("div",Ie,[X(t("input",{type:"range",min:"3",max:"10",step:"1","onUpdate:modelValue":e[13]||(e[13]=n=>s.settingsManager.settings.sessionCount=n),onChange:e[14]||(e[14]=n=>s.settingsManager.updateSetting("sessionCount",n.target.value))},null,544),[[Y,s.settingsManager.settings.sessionCount]]),t("span",Ne,l(s.settingsManager.settings.sessionCount)+"轮",1)])])])])])),s.trainingManager.isTraining.value?f("",!0):(r(),d("div",Ee,[e[57]||(e[57]=t("h3",null,"训练统计",-1)),t("div",Ve,[t("div",ze,[e[51]||(e[51]=t("h4",null,"总体表现",-1)),t("div",We,[t("div",qe,[e[45]||(e[45]=t("span",{class:"stat-label"},"总训练次数",-1)),t("span",Be,l(s.statsManager.formattedStats.value.totalSessions),1)]),t("div",Ue,[e[46]||(e[46]=t("span",{class:"stat-label"},"累计训练时间",-1)),t("span",Ke,l(s.statsManager.formattedStats.value.totalTimeFormatted),1)]),t("div",Le,[e[47]||(e[47]=t("span",{class:"stat-label"},"平均准确率",-1)),t("span",Ge,l(s.statsManager.formattedStats.value.averageScore)+"%",1)]),t("div",Oe,[e[48]||(e[48]=t("span",{class:"stat-label"},"最佳成绩",-1)),t("span",je,l(s.statsManager.formattedStats.value.bestScore||0)+"分",1)]),t("div",He,[e[49]||(e[49]=t("span",{class:"stat-label"},"完成率",-1)),t("span",Je,l(s.statsManager.formattedStats.value.completionRate)+"%",1)]),t("div",Qe,[e[50]||(e[50]=t("span",{class:"stat-label"},"进步趋势",-1)),t("span",{class:m(["stat-value trend",s.statsManager.formattedStats.value.recentTrend])},l(s.getTrendText(s.statsManager.formattedStats.value.recentTrend)),3)])])]),t("div",Xe,[e[56]||(e[56]=t("h4",null,"能力评级",-1)),t("div",Ye,[t("div",Ze,[e[52]||(e[52]=t("span",{class:"rating-label"},"视野范围",-1)),t("div",$e,[(r(),d(p,null,M(5,n=>t("span",{key:n,class:m(["star",{active:n<=s.visionRangeRating}])},"⭐",2)),64))])]),t("div",tn,[e[53]||(e[53]=t("span",{class:"rating-label"},"反应速度",-1)),t("div",sn,[(r(),d(p,null,M(5,n=>t("span",{key:n,class:m(["star",{active:n<=s.reactionSpeedRating}])},"⭐",2)),64))])]),t("div",en,[e[54]||(e[54]=t("span",{class:"rating-label"},"注意力",-1)),t("div",nn,[(r(),d(p,null,M(5,n=>t("span",{key:n,class:m(["star",{active:n<=s.attentionRating}])},"⭐",2)),64))])]),t("div",an,[e[55]||(e[55]=t("span",{class:"rating-label"},"准确性",-1)),t("div",on,[(r(),d(p,null,M(5,n=>t("span",{key:n,class:m(["star",{active:n<=s.accuracyRating}])},"⭐",2)),64))])])])])])])),s.showCompletionModal?(r(),d("div",ln,[t("div",rn,[e[63]||(e[63]=t("div",{class:"completion-header"},[t("h3",null,"🎉 训练完成！")],-1)),t("div",dn,[t("div",cn,[t("div",vn,[e[58]||(e[58]=t("span",{class:"stat-label"},"准确率",-1)),t("span",gn,l(s.completionData.accuracy)+"%",1)]),t("div",un,[e[59]||(e[59]=t("span",{class:"stat-label"},"训练时长",-1)),t("span",mn,l(s.trainingManager.formatDuration(s.completionData.duration)),1)]),t("div",fn,[e[60]||(e[60]=t("span",{class:"stat-label"},"完成轮数",-1)),t("span",hn,l(s.completionData.sessions),1)]),t("div",pn,[e[61]||(e[61]=t("span",{class:"stat-label"},"平均反应",-1)),t("span",Mn,l(Math.round(s.completionData.averageReaction))+"ms",1)])]),s.completionData.newAchievement?(r(),d("div",_n,[e[62]||(e[62]=t("div",{class:"achievement-icon"},"🏆",-1)),t("div",bn,[t("h4",null,l(s.completionData.achievementTitle),1),t("p",null,l(s.completionData.achievementDescription),1)])])):f("",!0)]),t("div",yn,[t("button",{class:"secondary-btn",onClick:e[15]||(e[15]=(...n)=>s.closeCompletionModal&&s.closeCompletionModal(...n))},"返回"),t("button",{class:"primary-btn",onClick:e[16]||(e[16]=(...n)=>s.startNextTraining&&s.startNextTraining(...n))},"继续训练")])])])):f("",!0)])}const Sn=Yt(Zt,[["render",kn],["__scopeId","data-v-fab9c1bb"]]);export{Sn as default};
