import{k as u,c as h,l as Re,q as Oe,J as Ue,o as i,a as l,b as e,F as S,h as x,s as V,x as Y,y as Ne,t as o,m as $,g as E,p as je,L as Be,f as H,B as Ve,n as F}from"./index-7434e420.js";import{_ as $e}from"./_plugin-vue_export-helper-c27b6911.js";const Ee={class:"calculation-assessment"},He={class:"assessment-container"},Fe={key:0,class:"setup-phase"},Qe={class:"setup-content"},We={class:"setting-group"},ze={class:"difficulty-options"},Je=["onClick"],Xe={class:"difficulty-icon"},Ye={class:"difficulty-info"},Ge={class:"difficulty-name"},Ze={class:"difficulty-desc"},Ke={class:"setting-group"},et={class:"module-options"},tt=["onClick"],st={class:"module-icon"},nt={class:"module-info"},ot={class:"module-name"},it={class:"module-desc"},lt={class:"module-time"},at={class:"module-checkbox"},ct={key:0,class:"fas fa-check"},ut={class:"setting-group"},rt={class:"personal-settings"},dt={class:"setting-item"},vt={class:"setting-item"},mt={class:"setting-item"},_t={class:"setup-actions"},pt=["disabled"],ht={key:1,class:"testing-phase"},gt={class:"test-header"},ft={class:"test-progress"},yt={class:"progress-info"},bt={class:"current-module"},kt={class:"question-counter"},St={class:"progress-bar"},xt={key:0,class:"test-timer"},Mt={class:"test-content"},Tt={key:2,class:"results-phase"},Ct={class:"results-container"},qt={class:"overall-score"},At={class:"score-circle"},wt={class:"score-value"},It={class:"score-description"},Lt={class:"ability-radar"},Pt={class:"radar-chart"},Dt={class:"radar-legend"},Rt={class:"legend-name"},Ot={class:"legend-score"},Ut={class:"module-results"},Nt={class:"module-cards"},jt={class:"module-header"},Bt={class:"module-icon"},Vt={class:"module-title"},$t={class:"module-score"},Et={class:"module-stats"},Ht={class:"stat-item"},Ft={class:"stat-value"},Qt={class:"stat-item"},Wt={class:"stat-value"},zt={class:"stat-item"},Jt={class:"stat-value"},Xt={class:"module-performance"},Yt={class:"performance-bar"},Gt={class:"performance-label"},Zt={class:"question-details"},Kt={class:"details-summary"},es={class:"summary-stats"},ts={class:"summary-item"},ss={class:"summary-text"},ns={class:"summary-number"},os={class:"summary-item"},is={class:"summary-text"},ls={class:"summary-number"},as={class:"summary-item"},cs={class:"summary-text"},us={class:"summary-number"},rs={class:"question-list"},ds={class:"question-number"},vs={class:"question-content"},ms={class:"question-text"},_s={class:"question-info"},ps={class:"question-module"},hs={class:"question-difficulty"},gs={class:"question-time"},fs={class:"question-result"},ys={class:"result-icon"},bs={class:"result-text"},ks={class:"improvement-suggestions"},Ss={class:"suggestions-list"},xs={class:"suggestion-icon"},Ms={class:"suggestion-content"},Ts={class:"suggestion-actions"},Cs=["onClick"],qs={__name:"CalculationAssessment",props:{initialSettings:{type:Object,default:()=>({})}},emits:["assessment-completed","go-to-training"],setup(G,{emit:Z}){const N=G,R=Z,f=u("setup"),y=u("medium"),c=u(["arithmetic","logic"]),b=u(20),_=u(600),L=u(!0),p=u(0),P=u(0),O=u(0),U=u(0),M=u(null),r=u([]),d=u([]),Q=u(null),j=u(null),K=u([{value:"easy",name:"简单",icon:"🟢",description:"基础计算，适合初学者"},{value:"medium",name:"中等",icon:"🟡",description:"中等难度，适合大多数人"},{value:"hard",name:"困难",icon:"🟠",description:"高难度计算，需要较强基础"},{value:"expert",name:"专家",icon:"🔴",description:"专家级别，极具挑战性"}]),D=u([{key:"arithmetic",name:"基础运算",icon:"➕",description:"加减乘除等基础数学运算",estimatedTime:5,component:"ArithmeticTest"},{key:"logic",name:"逻辑推理",icon:"🧠",description:"数学逻辑和推理能力测试",estimatedTime:8,component:"LogicReasoningTest"},{key:"sequence",name:"数字序列",icon:"🔢",description:"数字规律识别和序列推理",estimatedTime:6,component:"NumberSequenceTest"},{key:"mental",name:"心算能力",icon:"⚡",description:"快速心算和数字处理能力",estimatedTime:7,component:"MentalMathTest"}]),ee=h(()=>O.value>0?(P.value+1)/O.value*100:0),te=h(()=>{const s=c.value[p.value],t=D.value.find(n=>n.key===s);return(t==null?void 0:t.component)||"ArithmeticTest"}),se=h(()=>({difficulty:y.value,questionCount:Math.ceil(b.value/c.value.length),timeLimit:_.value,showHints:L.value,module:c.value[p.value]})),T=h(()=>{if(d.value.length===0)return 0;const s=d.value.reduce((t,n)=>t+n.score,0);return Math.round(s/d.value.length)}),C=h(()=>[{name:"计算速度",key:"speed",color:"#ff6b6b"},{name:"计算准确性",key:"accuracy",color:"#4ecdc4"},{name:"逻辑推理",key:"logic",color:"#45b7d1"},{name:"数字敏感度",key:"sensitivity",color:"#96ceb4"},{name:"问题解决",key:"problem_solving",color:"#feca57"},{name:"抽象思维",key:"abstract",color:"#ff9ff3"}].map(t=>({...t,score:me(t.key)}))),W=h(()=>r.value.filter(s=>s.isCorrect).length),ne=h(()=>r.value.filter(s=>!s.isCorrect&&!s.isSkipped).length),oe=h(()=>r.value.filter(s=>s.isSkipped).length),ie=h(()=>{const s=[];return T.value<70&&s.push({type:"basic_training",icon:"📚",title:"基础能力提升",description:"建议从基础计算开始，逐步提高计算速度和准确性。",actions:[{text:"基础训练",action:"basic_training"},{text:"查看教程",action:"view_tutorial"}]}),q("arithmetic")<75&&s.push({type:"arithmetic_practice",icon:"➕",title:"加强基础运算",description:"基础运算能力需要提升，建议多练习四则运算。",actions:[{text:"运算练习",action:"arithmetic_practice"}]}),q("logic")<75&&s.push({type:"logic_training",icon:"🧠",title:"逻辑思维训练",description:"逻辑推理能力有待提高，建议进行专项训练。",actions:[{text:"逻辑训练",action:"logic_training"}]}),s}),le=s=>{const t=c.value.indexOf(s);t>-1?c.value.splice(t,1):c.value.push(s)},ae=()=>{f.value="testing",Q.value=Date.now(),p.value=0,P.value=0,O.value=b.value,U.value=_.value,r.value=[],d.value=[],_.value>0&&ce()},ce=()=>{M.value=setInterval(()=>{U.value--,U.value<=0&&ue()},1e3)},ue=()=>{clearInterval(M.value),z()},re=()=>{const s=c.value[p.value],t=D.value.find(n=>n.key===s);return(t==null?void 0:t.name)||""},de=s=>{r.value.push({...s,module:c.value[p.value],timestamp:Date.now()}),P.value++},ve=s=>{d.value.push({module:c.value[p.value],...s.results}),p.value<c.value.length-1?p.value++:z()},z=()=>{clearInterval(M.value),f.value="results",Ve(()=>{fe()}),R("assessment-completed",{overallScore:T.value,moduleResults:d.value,allAnswers:r.value,totalTime:(Date.now()-Q.value)/1e3})},me=s=>{switch(s){case"speed":return _e();case"accuracy":return pe();case"logic":return q("logic")||0;case"sensitivity":return q("sequence")||0;case"problem_solving":return he();case"abstract":return ge();default:return 0}},_e=()=>{if(r.value.length===0)return 0;const s=r.value.reduce((t,n)=>t+n.responseTime,0)/r.value.length;return Math.max(0,Math.min(100,100-(s-10)*2))},pe=()=>r.value.length===0?0:Math.round(W.value/r.value.length*100),he=()=>{const s=d.value.map(t=>t.score);return s.length>0?Math.round(s.reduce((t,n)=>t+n,0)/s.length):0},ge=()=>{const s=q("logic")||0,t=q("sequence")||0;return Math.round((s+t)/2)},q=s=>{const t=d.value.find(n=>n.module===s);return(t==null?void 0:t.score)||0},fe=()=>{if(!j.value)return;const s=j.value,t=s.getContext("2d"),n=s.width/2,a=s.height/2,g=150;t.clearRect(0,0,s.width,s.height),t.strokeStyle="#e0e0e0",t.lineWidth=1;for(let v=1;v<=5;v++)t.beginPath(),t.arc(n,a,g/5*v,0,2*Math.PI),t.stroke();const B=2*Math.PI/C.value.length;C.value.forEach((v,A)=>{const m=A*B-Math.PI/2,k=n+Math.cos(m)*g,w=a+Math.sin(m)*g;t.beginPath(),t.moveTo(n,a),t.lineTo(k,w),t.stroke(),t.fillStyle="#333",t.font="12px Arial",t.textAlign="center";const I=n+Math.cos(m)*(g+20),De=a+Math.sin(m)*(g+20);t.fillText(v.name,I,De)}),t.beginPath(),t.fillStyle="rgba(74, 144, 226, 0.3)",t.strokeStyle="#4a90e2",t.lineWidth=2,C.value.forEach((v,A)=>{const m=A*B-Math.PI/2,k=v.score/100*g,w=n+Math.cos(m)*k,I=a+Math.sin(m)*k;A===0?t.moveTo(w,I):t.lineTo(w,I)}),t.closePath(),t.fill(),t.stroke(),C.value.forEach((v,A)=>{const m=A*B-Math.PI/2,k=v.score/100*g,w=n+Math.cos(m)*k,I=a+Math.sin(m)*k;t.beginPath(),t.arc(w,I,4,0,2*Math.PI),t.fillStyle=v.color,t.fill()})},ye=s=>{const t=Math.floor(s/60),n=s%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},be=s=>s>=90?"优秀":s>=80?"良好":s>=70?"中等":s>=60?"及格":"需要提高",ke=s=>s>=90?"您的计算能力非常出色，在各个方面都表现优异。":s>=80?"您具有良好的计算能力，在大多数方面表现良好。":s>=70?"您的计算能力处于中等水平，还有提升空间。":s>=60?"您的计算能力达到基本要求，建议加强练习。":"您的计算能力需要显著提高，建议从基础开始系统学习。",Se=s=>{const t=D.value.find(n=>n.key===s);return(t==null?void 0:t.icon)||"📊"},J=s=>{const t=D.value.find(n=>n.key===s);return(t==null?void 0:t.name)||s},xe=s=>s>=90?"#28a745":s>=80?"#17a2b8":s>=70?"#ffc107":"#dc3545",Me=s=>s>=90?"优秀":s>=80?"良好":s>=70?"中等":"需要提高",Te=s=>s.isSkipped?"skipped":s.isCorrect?"correct":"incorrect",Ce=s=>({easy:"简单",medium:"中等",hard:"困难",expert:"专家"})[s]||s,qe=s=>s.isSkipped?"⏭":s.isCorrect?"✓":"✗",Ae=s=>s.isSkipped?"跳过":s.isCorrect?"正确":"错误",we=()=>{const s={timestamp:new Date().toISOString(),overallScore:T.value,abilityScores:C.value,moduleResults:d.value,allAnswers:r.value,settings:{difficulty:y.value,modules:c.value,questionCount:b.value,timeLimit:_.value}},t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download=`calculation-assessment-${new Date().toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(n)},Ie=()=>{f.value="setup",p.value=0,P.value=0,r.value=[],d.value=[],clearInterval(M.value)},X=()=>{R("go-to-training",{recommendedModules:c.value,difficulty:y.value,weakAreas:Le()})},Le=()=>d.value.filter(s=>s.score<75).map(s=>s.module),Pe=s=>{switch(s.action){case"basic_training":X();break;case"arithmetic_practice":R("go-to-training",{focus:"arithmetic"});break;case"logic_training":R("go-to-training",{focus:"logic"});break}};return Re(()=>{N.initialSettings&&Object.assign({selectedDifficulty:y.value,selectedModules:c.value,questionCount:b.value,timeLimit:_.value,showHints:L.value},N.initialSettings)}),Oe(()=>{M.value&&clearInterval(M.value)}),Ue(()=>N.initialSettings,s=>{s&&f.value==="setup"&&Object.assign({selectedDifficulty:y.value,selectedModules:c.value,questionCount:b.value,timeLimit:_.value,showHints:L.value},s)},{deep:!0}),(s,t)=>(i(),l("div",Ee,[e("div",He,[f.value==="setup"?(i(),l("div",Fe,[e("div",Qe,[t[12]||(t[12]=e("h2",null,"计算能力测评",-1)),t[13]||(t[13]=e("p",{class:"assessment-description"}," 本测评将全面评估您的数学计算能力、逻辑推理能力和数字处理能力。 通过多种类型的测试，为您提供详细的能力分析报告。 ",-1)),e("div",We,[t[3]||(t[3]=e("h3",null,"选择难度等级",-1)),e("div",ze,[(i(!0),l(S,null,x(K.value,n=>(i(),l("div",{key:n.value,class:F(["difficulty-option",{active:y.value===n.value}]),onClick:a=>y.value=n.value},[e("div",Xe,o(n.icon),1),e("div",Ye,[e("div",Ge,o(n.name),1),e("div",Ze,o(n.description),1)])],10,Je))),128))])]),e("div",Ke,[t[4]||(t[4]=e("h3",null,"选择测试模块",-1)),e("div",et,[(i(!0),l(S,null,x(D.value,n=>(i(),l("div",{key:n.key,class:F(["module-option",{active:c.value.includes(n.key)}]),onClick:a=>le(n.key)},[e("div",st,o(n.icon),1),e("div",nt,[e("div",ot,o(n.name),1),e("div",it,o(n.description),1),e("div",lt,"预计用时: "+o(n.estimatedTime)+"分钟",1)]),e("div",at,[c.value.includes(n.key)?(i(),l("i",ct)):E("",!0)])],10,tt))),128))])]),e("div",ut,[t[11]||(t[11]=e("h3",null,"个性化设置",-1)),e("div",rt,[e("div",dt,[t[6]||(t[6]=e("label",null,"题目数量",-1)),V(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>b.value=n)},t[5]||(t[5]=[e("option",{value:"10"},"10题 (快速测评)",-1),e("option",{value:"20"},"20题 (标准测评)",-1),e("option",{value:"30"},"30题 (深度测评)",-1)]),512),[[Y,b.value]])]),e("div",vt,[t[8]||(t[8]=e("label",null,"时间限制",-1)),V(e("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>_.value=n)},t[7]||(t[7]=[e("option",{value:"300"},"5分钟",-1),e("option",{value:"600"},"10分钟",-1),e("option",{value:"900"},"15分钟",-1),e("option",{value:"0"},"无限制",-1)]),512),[[Y,_.value]])]),e("div",mt,[t[9]||(t[9]=e("label",null,"显示提示",-1)),V(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=n=>L.value=n)},null,512),[[Ne,L.value]]),t[10]||(t[10]=e("span",{class:"checkbox-label"},"在困难题目中显示解题提示",-1))])])]),e("div",_t,[e("button",{onClick:ae,class:"btn-start",disabled:c.value.length===0}," 开始测评 ",8,pt)])])])):f.value==="testing"?(i(),l("div",ht,[e("div",gt,[e("div",ft,[e("div",yt,[e("span",bt,o(re()),1),e("span",kt,o(P.value+1)+" / "+o(O.value),1)]),e("div",St,[e("div",{class:"progress-fill",style:$({width:ee.value+"%"})},null,4)])]),_.value>0?(i(),l("div",xt,[t[14]||(t[14]=e("i",{class:"fas fa-clock"},null,-1)),e("span",null,o(ye(U.value)),1)])):E("",!0)]),e("div",Mt,[(i(),je(Be(te.value),{"test-data":se.value,onAnswerSubmitted:de,onTestCompleted:ve},null,40,["test-data"]))])])):f.value==="results"?(i(),l("div",Tt,[e("div",Ct,[t[32]||(t[32]=e("h2",null,"计算能力测评报告",-1)),e("div",qt,[e("div",At,[e("div",wt,o(T.value),1),t[15]||(t[15]=e("div",{class:"score-label"},"综合得分",-1))]),e("div",It,[e("h3",null,o(be(T.value)),1),e("p",null,o(ke(T.value)),1)])]),e("div",Lt,[t[16]||(t[16]=e("h3",null,"能力分析",-1)),e("div",Pt,[e("canvas",{ref_key:"radarCanvas",ref:j,width:"400",height:"400"},null,512)]),e("div",Dt,[(i(!0),l(S,null,x(C.value,n=>(i(),l("div",{key:n.name,class:"legend-item"},[e("div",{class:"legend-color",style:$({backgroundColor:n.color})},null,4),e("span",Rt,o(n.name),1),e("span",Ot,o(n.score),1)]))),128))])]),e("div",Ut,[t[20]||(t[20]=e("h3",null,"模块详细结果",-1)),e("div",Nt,[(i(!0),l(S,null,x(d.value,n=>(i(),l("div",{key:n.module,class:"module-card"},[e("div",jt,[e("div",Bt,o(Se(n.module)),1),e("div",Vt,[e("h4",null,o(J(n.module)),1),e("div",$t,o(n.score)+"分",1)])]),e("div",Et,[e("div",Ht,[t[17]||(t[17]=e("span",{class:"stat-label"},"准确率",-1)),e("span",Ft,o(n.accuracy)+"%",1)]),e("div",Qt,[t[18]||(t[18]=e("span",{class:"stat-label"},"平均用时",-1)),e("span",Wt,o(n.averageTime)+"秒",1)]),e("div",zt,[t[19]||(t[19]=e("span",{class:"stat-label"},"完成题数",-1)),e("span",Jt,o(n.completed)+" / "+o(n.total),1)])]),e("div",Xt,[e("div",Yt,[e("div",{class:"performance-fill",style:$({width:n.accuracy+"%",backgroundColor:xe(n.accuracy)})},null,4)]),e("div",Gt,o(Me(n.accuracy)),1)])]))),128))])]),e("div",Zt,[t[27]||(t[27]=e("h3",null,"题目详情",-1)),e("div",Kt,[e("div",es,[e("div",ts,[t[22]||(t[22]=e("div",{class:"summary-icon correct"},"✓",-1)),e("div",ss,[e("div",ns,o(W.value),1),t[21]||(t[21]=e("div",{class:"summary-label"},"答对题数",-1))])]),e("div",os,[t[24]||(t[24]=e("div",{class:"summary-icon incorrect"},"✗",-1)),e("div",is,[e("div",ls,o(ne.value),1),t[23]||(t[23]=e("div",{class:"summary-label"},"答错题数",-1))])]),e("div",as,[t[26]||(t[26]=e("div",{class:"summary-icon skipped"},"⏭",-1)),e("div",cs,[e("div",us,o(oe.value),1),t[25]||(t[25]=e("div",{class:"summary-label"},"跳过题数",-1))])])])]),e("div",rs,[(i(!0),l(S,null,x(r.value,(n,a)=>(i(),l("div",{key:a,class:F(["question-item",Te(n)])},[e("div",ds,o(a+1),1),e("div",vs,[e("div",ms,o(n.question),1),e("div",_s,[e("span",ps,o(J(n.module)),1),e("span",hs,o(Ce(n.difficulty)),1),e("span",gs,o(n.responseTime.toFixed(1))+"秒",1)])]),e("div",fs,[e("div",ys,o(qe(n)),1),e("div",bs,o(Ae(n)),1)])],2))),128))])]),e("div",ks,[t[28]||(t[28]=e("h3",null,"改进建议",-1)),e("div",Ss,[(i(!0),l(S,null,x(ie.value,n=>(i(),l("div",{key:n.type,class:"suggestion-item"},[e("div",xs,o(n.icon),1),e("div",Ms,[e("h4",null,o(n.title),1),e("p",null,o(n.description),1),e("div",Ts,[(i(!0),l(S,null,x(n.actions,a=>(i(),l("button",{key:a.text,class:"suggestion-action",onClick:g=>Pe(a)},o(a.text),9,Cs))),128))])])]))),128))])]),e("div",{class:"result-actions"},[e("button",{onClick:we,class:"btn-export"},t[29]||(t[29]=[e("i",{class:"fas fa-download"},null,-1),H(" 导出报告 ",-1)])),e("button",{onClick:Ie,class:"btn-retake"},t[30]||(t[30]=[e("i",{class:"fas fa-redo"},null,-1),H(" 重新测评 ",-1)])),e("button",{onClick:X,class:"btn-training"},t[31]||(t[31]=[e("i",{class:"fas fa-dumbbell"},null,-1),H(" 开始训练 ",-1)]))])])])):E("",!0)])]))}},Is=$e(qs,[["__scopeId","data-v-f50688a1"]]);export{Is as default};
