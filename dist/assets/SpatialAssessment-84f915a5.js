import{k as v,c as I,l as bt,q as yt,o as l,a as d,b as t,n as P,t as n,d as _t,g as M,F as y,h as _,m as ft,s as N,x as ht,y as gt,f as mt,p as wt,L as Mt,A as $t}from"./index-7434e420.js";import{_ as xt}from"./_plugin-vue_export-helper-c27b6911.js";import{P as It}from"./PatternComparisonTest-8e46b4e6.js";const St={class:"spatial-reasoning-test"},Tt={class:"test-content"},Pt={class:"test-header"},At={class:"test-info"},qt={class:"progress-counter"},Dt={key:0,class:"ready-phase"},Ct={key:1,class:"testing-phase"},Lt={class:"question-container"},Rt={class:"question-header"},Ht={class:"question-type"},Bt={class:"question-timer"},Ut={class:"question-content"},Vt={key:0,class:"rotation-question"},jt={class:"original-figure"},Ot={class:"figure-container"},Qt=["innerHTML"],Ft={class:"rotation-info"},Nt={class:"rotation-desc"},Et={key:1,class:"construction-question"},zt={class:"construction-parts"},Jt={class:"parts-container"},Xt=["innerHTML"],Yt={class:"construction-hint"},Gt={class:"hint-text"},Kt={key:2,class:"unfolding-question"},Wt={class:"solid-figure"},Zt={class:"figure-container"},te=["innerHTML"],ee={key:3,class:"combination-question"},se={class:"combination-scenario"},ie={class:"scenario-container"},ae=["innerHTML"],oe={class:"combination-task"},ne={class:"answer-options"},le={class:"options-grid"},de=["onClick","disabled"],re={class:"option-label"},ce=["innerHTML"],ue={class:"question-actions"},ve=["disabled"],pe=["disabled"],he={key:0,class:"hint-panel"},ge={class:"hint-content"},me={key:1,class:"answer-explanation"},be={class:"explanation-header"},ye={class:"result-text"},_e={class:"explanation-content"},fe={key:2,class:"results-phase"},xe={class:"results-container"},ke={class:"final-stats"},we={class:"stat-card"},Me={class:"stat-value"},$e={class:"stat-card"},Ie={class:"stat-value"},Se={class:"stat-card"},Te={class:"stat-value"},Pe={class:"stat-card"},Ae={class:"stat-value"},qe={class:"spatial-analysis"},De={class:"analysis-radar"},Ce={width:"300",height:"300",viewBox:"0 0 300 300"},Le={transform:"translate(150,150)"},Re={class:"radar-grid"},He=["r"],Be=["x2","y2"],Ue=["points"],Ve=["cx","cy"],je=["x","y"],Oe={class:"ability-details"},Qe={class:"ability-header"},Fe={class:"ability-name"},Ne={class:"ability-score"},Ee={class:"ability-bar"},ze={class:"ability-feedback"},Je={class:"detailed-results"},Xe={class:"question-results"},Ye={class:"result-header"},Ge={class:"question-number"},Ke={class:"question-type-label"},We={class:"result-details"},Ze={class:"time-used"},ts={class:"difficulty-level"},es={class:"points-earned"},ss={__name:"SpatialReasoningTest",props:{testData:{type:Object,required:!0},settings:{type:Object,required:!0}},emits:["answer-submitted","test-completed"],setup(vt,{emit:pt}){const T=vt,g=pt,R=v("ready"),D=v(0),b=v(15),k=v(900),A=v(90),H=v(null),m=v(null),O=v(0),C=v(0),f=v(null),h=v(!1),q=v(!1),B=v(!1),$=v([]),E=v(0),S=v([]),u=I(()=>S.value[D.value]||{}),U=I(()=>$.value.filter(r=>r.correct).length),Q=I(()=>$.value.length>0?Math.round(U.value/$.value.length*100):0),z=I(()=>$.value.reduce((r,s)=>r+s.points,0)),J=I(()=>{const r=Q.value;return r>=90?"优秀":r>=80?"良好":r>=70?"一般":"需改进"}),x=I(()=>{const r={rotation:{correct:0,total:0,name:"旋转能力"},construction:{correct:0,total:0,name:"构造能力"},unfolding:{correct:0,total:0,name:"展开能力"},combination:{correct:0,total:0,name:"组合能力"}};return $.value.forEach(s=>{r[s.type]&&(r[s.type].total++,s.correct&&r[s.type].correct++)}),Object.entries(r).map(([s,o])=>{const c=o.total>0?Math.round(o.correct/o.total*100):0;return{type:s,name:o.name,score:c,feedback:rt(s,c)}}).filter(s=>s.score>0)}),st=I(()=>x.value.map((r,s)=>{const o=s*2*Math.PI/x.value.length-Math.PI/2,c=r.score/100*100,w=Math.cos(o)*c,L=Math.sin(o)*c;return`${w},${L}`}).join(" ")),it=I(()=>x.value.map((r,s)=>{const o=s*2*Math.PI/x.value.length-Math.PI/2,c=r.score/100*100;return{x:Math.cos(o)*c,y:Math.sin(o)*c}})),at={rotation:[{question:"下面哪个图形是原图形顺时针旋转90度后的结果？",originalFigure:'<div style="width:60px;height:60px;background:linear-gradient(45deg, #4a90e2 50%, transparent 50%);border:2px solid #333;"></div>',rotationDesc:"顺时针旋转90度",options:['<div style="width:60px;height:60px;background:linear-gradient(135deg, #4a90e2 50%, transparent 50%);border:2px solid #333;"></div>','<div style="width:60px;height:60px;background:linear-gradient(-45deg, #4a90e2 50%, transparent 50%);border:2px solid #333;"></div>','<div style="width:60px;height:60px;background:linear-gradient(225deg, #4a90e2 50%, transparent 50%);border:2px solid #333;"></div>','<div style="width:60px;height:60px;background:linear-gradient(315deg, #4a90e2 50%, transparent 50%);border:2px solid #333;"></div>'],correctAnswer:1,explanation:"原图形的对角线从左上到右下，顺时针旋转90度后变为从右上到左下。",hint:"想象图形绕中心点顺时针转动90度的样子。",difficulty:"easy"},{question:"下面哪个图形是原图形逆时针旋转180度后的结果？",originalFigure:'<div style="width:60px;height:60px;background:#4a90e2;clip-path:polygon(0 0, 100% 0, 50% 100%);border:2px solid #333;"></div>',rotationDesc:"逆时针旋转180度",options:['<div style="width:60px;height:60px;background:#4a90e2;clip-path:polygon(50% 0, 0 100%, 100% 100%);border:2px solid #333;"></div>','<div style="width:60px;height:60px;background:#4a90e2;clip-path:polygon(0 0, 100% 50%, 0 100%);border:2px solid #333;"></div>','<div style="width:60px;height:60px;background:#4a90e2;clip-path:polygon(0 50%, 100% 0, 100% 100%);border:2px solid #333;"></div>','<div style="width:60px;height:60px;background:#4a90e2;clip-path:polygon(0 0, 100% 0, 50% 100%);border:2px solid #333;"></div>'],correctAnswer:0,explanation:"三角形顶点向上，旋转180度后顶点向下。",hint:"180度旋转相当于上下颠倒。",difficulty:"medium"}],construction:[{question:"用下面的部件能组成什么立体图形？",parts:['<div style="width:40px;height:40px;background:#ff6b6b;border:2px solid #333;"></div>','<div style="width:40px;height:40px;background:#4ecdc4;border:2px solid #333;"></div>','<div style="width:40px;height:40px;background:#45b7d1;border:2px solid #333;"></div>','<div style="width:40px;height:40px;background:#96ceb4;border:2px solid #333;"></div>'],options:['<div style="width:80px;height:80px;background:linear-gradient(45deg, #ff6b6b 25%, #4ecdc4 25%, #4ecdc4 50%, #45b7d1 50%, #45b7d1 75%, #96ceb4 75%);border:2px solid #333;"></div>','<div style="width:80px;height:40px;background:linear-gradient(to right, #ff6b6b 25%, #4ecdc4 25%, #4ecdc4 50%, #45b7d1 50%, #45b7d1 75%, #96ceb4 75%);border:2px solid #333;"></div>','<div style="width:40px;height:80px;background:linear-gradient(to bottom, #ff6b6b 25%, #4ecdc4 25%, #4ecdc4 50%, #45b7d1 50%, #45b7d1 75%, #96ceb4 75%);border:2px solid #333;"></div>','<div style="width:60px;height:60px;background:radial-gradient(circle, #ff6b6b 20%, #4ecdc4 20%, #4ecdc4 40%, #45b7d1 40%, #45b7d1 60%, #96ceb4 60%);border:2px solid #333;"></div>'],correctAnswer:0,explanation:"四个正方形可以组成一个2×2的大正方形。",hint:"考虑如何将四个相同大小的正方形拼接在一起。",difficulty:"easy"}],unfolding:[{question:"下面哪个是正方体的正确展开图？",solidFigure:'<div style="width:60px;height:60px;background:linear-gradient(135deg, #4a90e2 50%, #357abd 50%);border:2px solid #333;position:relative;"><div style="position:absolute;top:-10px;left:10px;width:40px;height:10px;background:#2c5aa0;transform:skewX(-45deg);"></div><div style="position:absolute;top:10px;right:-10px;width:10px;height:40px;background:#1e3a5f;transform:skewY(-45deg);"></div></div>',options:['<div style="display:grid;grid-template-columns:repeat(4,20px);grid-template-rows:repeat(3,20px);gap:1px;"><div style="grid-column:2;grid-row:1;background:#4a90e2;border:1px solid #333;"></div><div style="grid-column:1/5;grid-row:2;background:#4a90e2;border:1px solid #333;"></div><div style="grid-column:2;grid-row:3;background:#4a90e2;border:1px solid #333;"></div></div>','<div style="display:grid;grid-template-columns:repeat(3,20px);grid-template-rows:repeat(4,20px);gap:1px;"><div style="grid-column:1;grid-row:2;background:#4a90e2;border:1px solid #333;"></div><div style="grid-column:2;grid-row:1/5;background:#4a90e2;border:1px solid #333;"></div><div style="grid-column:3;grid-row:2;background:#4a90e2;border:1px solid #333;"></div></div>','<div style="display:grid;grid-template-columns:repeat(3,20px);grid-template-rows:repeat(3,20px);gap:1px;"><div style="grid-column:1/4;grid-row:1;background:#4a90e2;border:1px solid #333;"></div><div style="grid-column:1/4;grid-row:2;background:#4a90e2;border:1px solid #333;"></div></div>','<div style="display:grid;grid-template-columns:repeat(2,20px);grid-template-rows:repeat(3,20px);gap:1px;"><div style="grid-column:1/3;grid-row:1/4;background:#4a90e2;border:1px solid #333;"></div></div>'],correctAnswer:0,explanation:"正方体有6个面，展开图应该是十字形，包含一个中心面和四个相邻面，以及一个对面。",hint:"正方体展开图通常呈十字形或T字形。",difficulty:"medium"}],combination:[{question:"如果将图形A放在图形B的上方，会形成什么样的组合？",scenario:'<div style="display:flex;gap:20px;align-items:center;"><div style="text-align:center;"><div style="margin-bottom:5px;">图形A</div><div style="width:40px;height:40px;background:#ff6b6b;border-radius:50%;border:2px solid #333;"></div></div><div style="font-size:20px;">+</div><div style="text-align:center;"><div style="margin-bottom:5px;">图形B</div><div style="width:40px;height:40px;background:#4ecdc4;border:2px solid #333;"></div></div></div>',task:"选择正确的组合结果：",options:['<div style="position:relative;width:40px;height:60px;"><div style="position:absolute;bottom:0;width:40px;height:40px;background:#4ecdc4;border:2px solid #333;"></div><div style="position:absolute;top:0;left:0;width:40px;height:40px;background:#ff6b6b;border-radius:50%;border:2px solid #333;"></div></div>','<div style="position:relative;width:60px;height:40px;"><div style="position:absolute;left:0;width:40px;height:40px;background:#4ecdc4;border:2px solid #333;"></div><div style="position:absolute;right:0;width:40px;height:40px;background:#ff6b6b;border-radius:50%;border:2px solid #333;"></div></div>','<div style="position:relative;width:40px;height:40px;"><div style="position:absolute;width:40px;height:40px;background:#4ecdc4;border:2px solid #333;"></div><div style="position:absolute;width:40px;height:40px;background:#ff6b6b;border-radius:50%;border:2px solid #333;opacity:0.7;"></div></div>','<div style="display:flex;gap:5px;"><div style="width:40px;height:40px;background:#ff6b6b;border-radius:50%;border:2px solid #333;"></div><div style="width:40px;height:40px;background:#4ecdc4;border:2px solid #333;"></div></div>'],correctAnswer:0,explanation:"圆形A放在正方形B的上方，形成垂直叠加的组合。",hint:"注意题目说的是'上方'，不是'旁边'或'重叠'。",difficulty:"easy"}]},ot=()=>{R.value="testing",X(),O.value=Date.now(),nt(),Y()},X=()=>{const r=T.settings.difficulty,s={easy:{total:12,distribution:{easy:.7,medium:.3,hard:0}},medium:{total:15,distribution:{easy:.4,medium:.5,hard:.1}},hard:{total:18,distribution:{easy:.2,medium:.5,hard:.3}},expert:{total:20,distribution:{easy:.1,medium:.4,hard:.5}}},o=s[r]||s.medium;b.value=o.total,S.value=[];const c=["rotation","construction","unfolding","combination"];for(let w=0;w<b.value;w++){const L=c[w%c.length],a=at[L],e=a[Math.floor(Math.random()*a.length)];S.value.push({...e,type:L,id:w})}S.value=S.value.sort(()=>Math.random()-.5)},nt=()=>{H.value=setInterval(()=>{k.value--,k.value<=0&&Z()},1e3)},Y=()=>{C.value=Date.now(),A.value=K(),m.value=setInterval(()=>{A.value--,A.value<=0&&(f.value===null&&(f.value=-1),W())},1e3)},G=()=>{H.value&&(clearInterval(H.value),H.value=null),m.value&&(clearInterval(m.value),m.value=null)},K=()=>{const r=u.value.difficulty;return{easy:90,medium:120,hard:150}[r]||120},F=r=>{h.value||(f.value=r)},lt=()=>{q.value=!0,E.value++},W=()=>{m.value&&clearInterval(m.value);const r=Math.round((Date.now()-C.value)/1e3),s=f.value===u.value.correctAnswer;B.value=s;let o=0;if(s){o={easy:6,medium:10,hard:15}[u.value.difficulty]||10;const L=Math.max(0,A.value/K()*3);o+=Math.round(L),q.value&&(o=Math.round(o*.7))}const c={questionId:u.value.id,type:u.value.type,difficulty:u.value.difficulty,correct:s,selectedAnswer:f.value,correctAnswer:u.value.correctAnswer,timeUsed:r,points:o,usedHint:q.value};$.value.push(c),h.value=!0,g("answer-submitted",c)},dt=()=>{D.value<b.value-1?(D.value++,f.value=null,h.value=!1,q.value=!1,Y()):Z()},Z=()=>{G(),R.value="results";const r={totalScore:z.value,correctCount:U.value,totalQuestions:b.value,accuracy:Q.value,spatialLevel:J.value,timeUsed:900-k.value,usedHints:E.value,difficulty:T.settings.difficulty,spatialAbilities:x.value,questionResults:$.value};setTimeout(()=>{g("test-completed",r)},3e3)},tt=r=>({rotation:"图形旋转",construction:"立体构造",unfolding:"展开图",combination:"空间组合"})[r]||r,et=r=>({easy:"简单",medium:"中等",hard:"困难",expert:"专家"})[r]||r,rt=(r,s)=>{var w;const o={rotation:{high:"图形旋转能力优秀，空间想象力强。",medium:"图形旋转能力良好，可以进一步提高。",low:"图形旋转能力需要加强，建议多做旋转练习。"},construction:{high:"立体构造能力优秀，三维思维清晰。",medium:"立体构造能力良好，继续保持。",low:"立体构造能力需要提高，建议加强空间训练。"},unfolding:{high:"展开图理解能力优秀，空间转换能力强。",medium:"展开图理解能力良好，思路比较清晰。",low:"展开图理解能力需要改善，建议多练习立体图形。"},combination:{high:"空间组合能力优秀，能够准确理解空间关系。",medium:"空间组合能力良好，空间感知力不错。",low:"空间组合能力需要提升，建议多做组合练习。"}},c=s>=80?"high":s>=60?"medium":"low";return((w=o[r])==null?void 0:w[c])||"需要更多练习来提高能力。"},ct=r=>{const s=Math.floor(r/60),o=r%60;return`${s.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`};return bt(()=>{const r=T.settings.difficulty,s={easy:{duration:720},medium:{duration:900},hard:{duration:1080},expert:{duration:1200}},o=s[r]||s.medium;k.value=o.duration}),yt(()=>{G()}),(r,s)=>(l(),d("div",St,[t("div",Tt,[t("div",Pt,[s[0]||(s[0]=t("h3",null,"空间推理测试",-1)),t("div",At,[t("span",{class:P(["timer",{warning:k.value<60}])}," 剩余时间: "+n(ct(k.value)),3),t("span",qt,n(D.value+1)+" / "+n(b.value),1)])]),R.value==="ready"?(l(),d("div",Dt,[s[1]||(s[1]=_t('<div class="instructions" data-v-7a545a3b><h4 data-v-7a545a3b>测试说明</h4><p data-v-7a545a3b>这是一个空间推理能力测试，将评估您的三维空间想象和推理能力。</p><p data-v-7a545a3b>测试包含图形旋转、空间折叠、立体构造等多种类型的题目。</p><p data-v-7a545a3b>请仔细观察图形，运用空间想象力选择正确答案。</p></div><div class="test-types" data-v-7a545a3b><h5 data-v-7a545a3b>测试类型：</h5><div class="type-grid" data-v-7a545a3b><div class="type-card" data-v-7a545a3b><div class="type-icon" data-v-7a545a3b>🔄</div><div class="type-name" data-v-7a545a3b>图形旋转</div><div class="type-desc" data-v-7a545a3b>识别旋转后的图形</div></div><div class="type-card" data-v-7a545a3b><div class="type-icon" data-v-7a545a3b>📦</div><div class="type-name" data-v-7a545a3b>立体构造</div><div class="type-desc" data-v-7a545a3b>分析三维物体结构</div></div><div class="type-card" data-v-7a545a3b><div class="type-icon" data-v-7a545a3b>📄</div><div class="type-name" data-v-7a545a3b>展开图</div><div class="type-desc" data-v-7a545a3b>判断立体图形展开</div></div><div class="type-card" data-v-7a545a3b><div class="type-icon" data-v-7a545a3b>🧩</div><div class="type-name" data-v-7a545a3b>空间组合</div><div class="type-desc" data-v-7a545a3b>组合图形空间关系</div></div></div></div>',2)),t("button",{class:"btn-primary",onClick:ot},"开始测试")])):M("",!0),R.value==="testing"?(l(),d("div",Ct,[t("div",Lt,[t("div",Rt,[t("div",Ht,[t("span",{class:P(["type-badge",u.value.type])},n(tt(u.value.type)),3),t("span",{class:P(["difficulty-badge",u.value.difficulty])},n(et(u.value.difficulty)),3)]),t("div",Bt,[t("div",{class:P(["timer-circle",{warning:A.value<10}])},n(A.value),3)])]),t("div",Ut,[t("h4",null,n(u.value.question),1),u.value.type==="rotation"?(l(),d("div",Vt,[t("div",jt,[s[2]||(s[2]=t("h5",null,"原图形：",-1)),t("div",Ot,[t("div",{class:"spatial-figure",innerHTML:u.value.originalFigure},null,8,Qt)])]),t("div",Ft,[s[3]||(s[3]=t("span",{class:"rotation-label"},"旋转操作：",-1)),t("span",Nt,n(u.value.rotationDesc),1)])])):M("",!0),u.value.type==="construction"?(l(),d("div",Et,[t("div",zt,[s[4]||(s[4]=t("h5",null,"组成部分：",-1)),t("div",Jt,[(l(!0),d(y,null,_(u.value.parts,(o,c)=>(l(),d("div",{key:c,class:"part-item"},[t("div",{class:"spatial-figure",innerHTML:o},null,8,Xt)]))),128))])]),t("div",Yt,[s[5]||(s[5]=t("span",{class:"hint-label"},"提示：",-1)),t("span",Gt,n(u.value.hint),1)])])):M("",!0),u.value.type==="unfolding"?(l(),d("div",Kt,[t("div",Wt,[s[6]||(s[6]=t("h5",null,"立体图形：",-1)),t("div",Zt,[t("div",{class:"spatial-figure solid",innerHTML:u.value.solidFigure},null,8,te)])]),s[7]||(s[7]=t("div",{class:"unfolding-instruction"},[t("p",null,"请选择该立体图形的正确展开图：")],-1))])):M("",!0),u.value.type==="combination"?(l(),d("div",ee,[t("div",se,[s[8]||(s[8]=t("h5",null,"空间场景：",-1)),t("div",ie,[t("div",{class:"spatial-figure",innerHTML:u.value.scenario},null,8,ae)])]),t("div",oe,[t("p",null,n(u.value.task),1)])])):M("",!0)]),t("div",ne,[t("div",le,[(l(!0),d(y,null,_(u.value.options,(o,c)=>(l(),d("button",{key:c,class:P(["option-button",{selected:f.value===c,correct:h.value&&c===u.value.correctAnswer,incorrect:h.value&&f.value===c&&c!==u.value.correctAnswer}]),onClick:w=>F(c),disabled:h.value},[t("div",re,n(String.fromCharCode(65+c)),1),t("div",{class:"option-figure",innerHTML:o},null,8,ce)],10,de))),128))])]),t("div",ue,[t("button",{class:"btn-hint",onClick:lt,disabled:q.value||!u.value.hint}," 💡 提示 ",8,ve),t("button",{class:"btn-submit",onClick:W,disabled:f.value===null||h.value}," 提交答案 ",8,pe),h.value?(l(),d("button",{key:0,class:"btn-next",onClick:dt},n(D.value<b.value-1?"下一题":"完成测试"),1)):M("",!0)]),q.value&&u.value.hint?(l(),d("div",he,[s[9]||(s[9]=t("div",{class:"hint-header"},[t("span",{class:"hint-icon"},"💡"),t("span",{class:"hint-title"},"解题提示")],-1)),t("div",ge,n(u.value.hint),1)])):M("",!0),h.value?(l(),d("div",me,[t("div",be,[t("span",{class:P(["result-icon",{correct:B.value,incorrect:!B.value}])},n(B.value?"✓":"✗"),3),t("span",ye,n(B.value?"回答正确！":"回答错误！"),1)]),t("div",_e,[s[10]||(s[10]=t("h5",null,"解析：",-1)),t("p",null,n(u.value.explanation),1)])])):M("",!0)])])):M("",!0),R.value==="results"?(l(),d("div",fe,[t("div",xe,[s[17]||(s[17]=t("h3",null,"空间推理测试完成",-1)),t("div",ke,[t("div",we,[t("div",Me,n(z.value),1),s[11]||(s[11]=t("div",{class:"stat-label"},"总得分",-1))]),t("div",$e,[t("div",Ie,n(U.value)+" / "+n(b.value),1),s[12]||(s[12]=t("div",{class:"stat-label"},"正确题数",-1))]),t("div",Se,[t("div",Te,n(Q.value)+"%",1),s[13]||(s[13]=t("div",{class:"stat-label"},"准确率",-1))]),t("div",Pe,[t("div",Ae,n(J.value),1),s[14]||(s[14]=t("div",{class:"stat-label"},"空间能力等级",-1))])]),t("div",qe,[s[15]||(s[15]=t("h4",null,"空间能力分析",-1)),t("div",De,[(l(),d("svg",Ce,[t("g",Le,[t("g",Re,[(l(),d(y,null,_(5,o=>t("circle",{key:o,r:o*20,fill:"none",stroke:"#e0e0e0","stroke-width":"1"},null,8,He)),64)),(l(!0),d(y,null,_(x.value,(o,c)=>(l(),d("line",{key:c,x1:0,y1:0,x2:Math.cos(c*2*Math.PI/x.value.length-Math.PI/2)*100,y2:Math.sin(c*2*Math.PI/x.value.length-Math.PI/2)*100,stroke:"#e0e0e0","stroke-width":"1"},null,8,Be))),128))]),t("polygon",{points:st.value,fill:"rgba(74, 144, 226, 0.3)",stroke:"#4a90e2","stroke-width":"2"},null,8,Ue),(l(!0),d(y,null,_(it.value,(o,c)=>(l(),d("circle",{key:c,cx:o.x,cy:o.y,r:"4",fill:"#4a90e2"},null,8,Ve))),128)),(l(!0),d(y,null,_(x.value,(o,c)=>(l(),d("text",{key:c,x:Math.cos(c*2*Math.PI/x.value.length-Math.PI/2)*120,y:Math.sin(c*2*Math.PI/x.value.length-Math.PI/2)*120,"text-anchor":"middle","dominant-baseline":"middle","font-size":"12",fill:"#333"},n(o.name),9,je))),128))])]))]),t("div",Oe,[(l(!0),d(y,null,_(x.value,o=>(l(),d("div",{key:o.type,class:"ability-item"},[t("div",Qe,[t("span",Fe,n(o.name),1),t("span",Ne,n(o.score)+"%",1)]),t("div",Ee,[t("div",{class:"ability-fill",style:ft({width:o.score+"%"})},null,4)]),t("div",ze,n(o.feedback),1)]))),128))])]),t("div",Je,[s[16]||(s[16]=t("h4",null,"详细结果",-1)),t("div",Xe,[(l(!0),d(y,null,_($.value,(o,c)=>(l(),d("div",{key:c,class:"question-result"},[t("div",Ye,[t("span",Ge,"第 "+n(c+1)+" 题",1),t("span",Ke,n(tt(o.type)),1),t("span",{class:P(["result-status",{correct:o.correct,incorrect:!o.correct}])},n(o.correct?"✓":"✗"),3)]),t("div",We,[t("span",Ze,"用时: "+n(o.timeUsed)+"s",1),t("span",ts,"难度: "+n(et(o.difficulty)),1),t("span",es,"得分: "+n(o.points),1)])]))),128))])])])])):M("",!0)])]))}},is=xt(ss,[["__scopeId","data-v-7a545a3b"]]);const as={class:"spatial-assessment"},os={class:"assessment-container"},ns={key:0,class:"setup-phase"},ls={class:"setup-content"},ds={class:"settings-grid"},rs={class:"setting-group"},cs={class:"difficulty-options"},us=["value"],vs={class:"option-content"},ps={class:"option-title"},hs={class:"option-desc"},gs={class:"setting-group"},ms={class:"module-options"},bs=["value"],ys={class:"option-content"},_s={class:"option-title"},fs={class:"module-icon"},xs={class:"option-desc"},ks={class:"setting-group"},ws={class:"personal-settings"},Ms={class:"setting-item"},$s={class:"setting-item"},Is={class:"setting-item"},Ss={class:"setup-actions"},Ts=["disabled"],Ps={key:1,class:"testing-phase"},As={class:"test-header"},qs={class:"test-progress"},Ds={class:"progress-bar"},Cs={class:"progress-text"},Ls={key:2,class:"results-phase"},Rs={class:"results-header"},Hs={class:"overall-score"},Bs={class:"score-circle"},Us={viewBox:"0 0 100 100"},Vs=["stroke-dashoffset"],js={class:"score-text"},Os={class:"score-number"},Qs={class:"detailed-results"},Fs={class:"results-grid"},Ns={class:"result-header"},Es={class:"result-icon"},zs={class:"result-details"},Js={class:"detail-item"},Xs={class:"detail-value"},Ys={class:"detail-item"},Gs={class:"detail-value"},Ks={class:"detail-item"},Ws={class:"detail-value"},Zs={class:"result-feedback"},ti={class:"spatial-analysis"},ei={class:"analysis-chart"},si={class:"radar-container"},ii={viewBox:"0 0 300 300",class:"radar-svg"},ai={class:"radar-grid"},oi=["points"],ni=["x2","y2"],li=["points"],di=["cx","cy"],ri=["x","y"],ci={class:"improvement-suggestions"},ui={class:"suggestions-list"},vi={class:"suggestion-header"},pi={class:"suggestion-icon"},hi={class:"suggestion-desc"},gi={class:"suggestion-actions"},mi=["onClick"],bi={class:"results-actions"},yi={__name:"SpatialAssessment",emits:["go-back"],setup(vt,{emit:pt}){const T=v("setup"),g=v({difficulty:"medium",duration:"medium",selectedModules:["spatial-reasoning","pattern-comparison","3d-rotation","spatial-memory"],feedbackMode:"delayed",enable3DView:!0}),R=v([{value:"easy",label:"简单",description:"基础空间概念，适合初学者"},{value:"medium",label:"中等",description:"标准空间推理，适合一般用户"},{value:"hard",label:"困难",description:"复杂空间变换，适合高水平用户"},{value:"expert",label:"专家",description:"极具挑战性的空间问题"}]),D=v([{id:"spatial-reasoning",name:"空间推理",icon:"🧩",description:"评估三维空间中的逻辑推理能力",component:is},{id:"pattern-comparison",name:"图形比较",icon:"🔍",description:"测试图形识别和比较能力",component:It},{id:"3d-rotation",name:"3D旋转",icon:"🔄",description:"评估三维图形的心理旋转能力",component:null},{id:"spatial-memory",name:"空间记忆",icon:"🗺️",description:"测试空间位置的记忆能力",component:null}]),b=v(0),k=v(null),A=v(null),H=v(null),m=v([]),O=v(null),C=v(0),f=v(null),h=v([{name:"空间推理",score:0},{name:"图形识别",score:0},{name:"3D旋转",score:0},{name:"空间记忆",score:0},{name:"立体感知",score:0}]),q=v([]),B=I(()=>g.value.selectedModules.length>0),$=I(()=>g.value.selectedModules.length),E=I(()=>$.value===0?0:b.value/$.value*100),S=I(()=>{if(m.value.length===0)return 0;const a=m.value.reduce((e,i)=>e+i.score,0);return Math.round(a/m.value.length)}),u=()=>{T.value="testing",b.value=0,m.value=[],O.value=Date.now();const a={short:15*60,medium:20*60,long:25*60};C.value=a[g.value.duration],K(),U()},U=()=>{if(b.value>=g.value.selectedModules.length){X();return}const a=g.value.selectedModules[b.value],e=D.value.find(i=>i.id===a);e&&e.component?(k.value=e,A.value=e.component,H.value=Q(e.id)):(b.value++,U())},Q=a=>{const i={"spatial-reasoning":z,"pattern-comparison":J,"3d-rotation":x,"spatial-memory":st}[a];return i?i():null},z=()=>({questions:[{id:1,type:"spatial-reasoning",question:"下面哪个图形是左侧立体图形的正确展开图？",stimulus:"3d-cube",options:["option1","option2","option3","option4"],correct:2,difficulty:g.value.difficulty}]}),J=()=>({questions:[{id:1,type:"pattern-comparison",question:"找出与左侧图形完全相同的选项",stimulus:"complex-pattern",options:["pattern1","pattern2","pattern3","pattern4"],correct:1,difficulty:g.value.difficulty}]}),x=()=>({questions:[{id:1,type:"3d-rotation",question:"将左侧图形顺时针旋转90度后，应该是什么样子？",stimulus:"3d-object",options:["rotated1","rotated2","rotated3","rotated4"],correct:3,difficulty:g.value.difficulty}]}),st=()=>({questions:[{id:1,type:"spatial-memory",question:"记住下面图形中各个元素的位置，然后选择正确的重现",stimulus:"spatial-layout",memoryTime:5e3,options:["layout1","layout2","layout3","layout4"],correct:0,difficulty:g.value.difficulty}]}),it=a=>{console.log("Answer submitted:",a)},at=()=>{const a={moduleId:k.value.id,name:k.value.name,icon:k.value.icon,score:Math.floor(Math.random()*40)+60,accuracy:Math.floor(Math.random()*30)+70,avgTime:Math.floor(Math.random()*10)+15,difficulty:g.value.difficulty,feedback:ot(k.value.id)};m.value.push(a),b.value++,U()},ot=a=>({"spatial-reasoning":"您的空间推理能力表现良好，能够较好地理解三维空间中的逻辑关系。","pattern-comparison":"您在图形识别方面有不错的表现，对细节的观察比较敏锐。","3d-rotation":"您的心理旋转能力需要进一步提升，建议多做相关练习。","spatial-memory":"您的空间记忆能力中等，可以通过训练得到改善。"})[a]||"测试完成，感谢您的参与。",X=()=>{T.value="results",F(),nt(),Y(),G()},nt=()=>{h.value.forEach(a=>{a.score=Math.floor(Math.random()*40)+50})},Y=()=>{q.value=[{area:"spatial-reasoning",title:"空间推理训练",icon:"🧩",description:"通过立体几何和空间变换练习提升空间推理能力",priority:"high",trainingPath:"/basic-training/expand-vision"},{area:"3d-rotation",title:"3D旋转练习",icon:"🔄",description:"加强心理旋转训练，提升三维图形的想象能力",priority:"medium",trainingPath:"/basic-training/spatial"}]},G=()=>{const a={timestamp:Date.now(),settings:g.value,testResults:m.value,overallScore:S.value,spatialAbilities:h.value,duration:O.value?Date.now()-O.value:0},e=localStorage.getItem("spatialAssessmentHistory")||"[]",i=JSON.parse(e);i.push(a),localStorage.setItem("spatialAssessmentHistory",JSON.stringify(i));const p={spatialIndex:S.value,accuracy:m.value.reduce((V,j)=>V+j.accuracy,0)/m.value.length,lastTestDate:Date.now()};localStorage.setItem("spatialAssessmentStats",JSON.stringify(p))},K=()=>{f.value=setInterval(()=>{C.value--,C.value<=0&&X()},1e3)},F=()=>{f.value&&(clearInterval(f.value),f.value=null)},lt=a=>{const e=Math.floor(a/60),i=a%60;return`${e.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},W=()=>{T.value="setup",b.value=0,m.value=[],F()},dt=()=>{const a={timestamp:new Date().toISOString(),overallScore:S.value,testResults:m.value,spatialAbilities:h.value},e=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),i=URL.createObjectURL(e),p=document.createElement("a");p.href=i,p.download=`spatial-assessment-${Date.now()}.json`,p.click(),URL.revokeObjectURL(i)},Z=a=>{window.location.href=a},tt=a=>a>=80?"excellent":a>=70?"good":a>=60?"average":"poor",et=a=>({high:"高优先级",medium:"中优先级",low:"低优先级"})[a]||"中优先级",rt=a=>{const e=[],i=2*Math.PI/h.value.length;for(let p=0;p<h.value.length;p++){const V=p*i-Math.PI/2,j=150+a*Math.cos(V),ut=150+a*Math.sin(V);e.push(`${j},${ut}`)}return e.join(" ")},ct=a=>{const e=a*(2*Math.PI)/h.value.length-Math.PI/2;return 150+100*Math.cos(e)},r=a=>{const e=a*(2*Math.PI)/h.value.length-Math.PI/2;return 150+100*Math.sin(e)},s=()=>{const a=[],e=2*Math.PI/h.value.length;return h.value.forEach((i,p)=>{const V=p*e-Math.PI/2,j=i.score,ut=150+j*Math.cos(V),kt=150+j*Math.sin(V);a.push(`${ut},${kt}`)}),a.join(" ")},o=(a,e)=>{const i=a*(2*Math.PI)/h.value.length-Math.PI/2;return 150+e*Math.cos(i)},c=(a,e)=>{const i=a*(2*Math.PI)/h.value.length-Math.PI/2;return 150+e*Math.sin(i)},w=a=>{const e=a*(2*Math.PI)/h.value.length-Math.PI/2;return 150+120*Math.cos(e)},L=a=>{const e=a*(2*Math.PI)/h.value.length-Math.PI/2;return 150+120*Math.sin(e)};return bt(()=>{}),yt(()=>{F()}),(a,e)=>(l(),d("div",as,[t("div",os,[e[25]||(e[25]=_t('<div class="assessment-header" data-v-af26f765><h2 data-v-af26f765>空间能力测评</h2><div class="assessment-info" data-v-af26f765><span class="info-item" data-v-af26f765><i class="icon-cube" data-v-af26f765>🔮</i> 空间想象力评估 </span><span class="info-item" data-v-af26f765><i class="icon-time" data-v-af26f765>⏱️</i> 预计用时: 20-25分钟 </span></div></div>',1)),T.value==="setup"?(l(),d("div",ns,[t("div",ls,[e[15]||(e[15]=t("h3",null,"测评设置",-1)),e[16]||(e[16]=t("p",{class:"setup-description"}," 空间能力测评将评估您的三维空间想象、立体几何理解、 图形旋转、空间定位等多项空间认知能力。 ",-1)),t("div",ds,[t("div",rs,[e[7]||(e[7]=t("h4",null,"难度设置",-1)),t("div",cs,[(l(!0),d(y,null,_(R.value,i=>(l(),d("label",{key:i.value,class:"difficulty-option"},[N(t("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=p=>g.value.difficulty=p),value:i.value},null,8,us),[[$t,g.value.difficulty]]),t("div",vs,[t("div",ps,n(i.label),1),t("div",hs,n(i.description),1)])]))),128))])]),t("div",gs,[e[8]||(e[8]=t("h4",null,"测试模块",-1)),t("div",ms,[(l(!0),d(y,null,_(D.value,i=>(l(),d("label",{key:i.id,class:"module-option"},[N(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=p=>g.value.selectedModules=p),value:i.id},null,8,bs),[[gt,g.value.selectedModules]]),t("div",ys,[t("div",_s,[t("span",fs,n(i.icon),1),mt(" "+n(i.name),1)]),t("div",xs,n(i.description),1)])]))),128))])]),t("div",ks,[e[14]||(e[14]=t("h4",null,"个性化设置",-1)),t("div",ws,[t("div",Ms,[e[10]||(e[10]=t("label",null,"测试时长:",-1)),N(t("select",{"onUpdate:modelValue":e[2]||(e[2]=i=>g.value.duration=i)},e[9]||(e[9]=[t("option",{value:"short"},"短时测试 (15分钟)",-1),t("option",{value:"medium"},"标准测试 (20分钟)",-1),t("option",{value:"long"},"完整测试 (25分钟)",-1)]),512),[[ht,g.value.duration]])]),t("div",$s,[e[12]||(e[12]=t("label",null,"反馈模式:",-1)),N(t("select",{"onUpdate:modelValue":e[3]||(e[3]=i=>g.value.feedbackMode=i)},e[11]||(e[11]=[t("option",{value:"immediate"},"即时反馈",-1),t("option",{value:"delayed"},"延迟反馈",-1),t("option",{value:"final"},"最终反馈",-1)]),512),[[ht,g.value.feedbackMode]])]),t("div",Is,[t("label",null,[N(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=i=>g.value.enable3DView=i)},null,512),[[gt,g.value.enable3DView]]),e[13]||(e[13]=mt(" 启用3D视图辅助 ",-1))])])])])]),t("div",Ss,[t("button",{class:"btn-secondary",onClick:e[5]||(e[5]=i=>a.$emit("go-back"))},"返回"),t("button",{class:"btn-start",onClick:u,disabled:!B.value}," 开始测评 ",8,Ts)])])])):M("",!0),T.value==="testing"?(l(),d("div",Ps,[t("div",As,[t("div",qs,[t("div",Ds,[t("div",{class:"progress-fill",style:ft({width:E.value+"%"})},null,4)]),t("div",Cs,n(b.value+1)+" / "+n($.value)+" - "+n(k.value.name),1)]),t("div",{class:P(["test-timer",{warning:C.value<60}])},n(lt(C.value)),3)]),(l(),wt(Mt(A.value),{"test-data":H.value,settings:g.value,onAnswerSubmitted:it,onTestCompleted:at},null,40,["test-data","settings"]))])):M("",!0),T.value==="results"?(l(),d("div",Ls,[t("div",Rs,[e[19]||(e[19]=t("h3",null,"空间能力测评结果",-1)),t("div",Hs,[t("div",Bs,[(l(),d("svg",Us,[e[17]||(e[17]=t("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e0e0e0","stroke-width":"8"},null,-1)),t("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"var(--color-primary)","stroke-width":"8","stroke-dasharray":"283","stroke-dashoffset":283-283*S.value/100,transform:"rotate(-90 50 50)"},null,8,Vs)])),t("div",js,[t("span",Os,n(S.value),1),e[18]||(e[18]=t("span",{class:"score-label"},"空间指数",-1))])])])]),t("div",Qs,[t("div",Fs,[(l(!0),d(y,null,_(m.value,i=>(l(),d("div",{key:i.moduleId,class:"result-card"},[t("div",Ns,[t("span",Es,n(i.icon),1),t("h4",null,n(i.name),1),t("span",{class:P(["result-score",tt(i.score)])},n(i.score)+"分",3)]),t("div",zs,[t("div",Js,[e[20]||(e[20]=t("span",{class:"detail-label"},"准确率：",-1)),t("span",Xs,n(i.accuracy)+"%",1)]),t("div",Ys,[e[21]||(e[21]=t("span",{class:"detail-label"},"平均用时：",-1)),t("span",Gs,n(i.avgTime)+"秒",1)]),t("div",Ks,[e[22]||(e[22]=t("span",{class:"detail-label"},"难度等级：",-1)),t("span",Ws,n(i.difficulty),1)])]),t("div",Zs,[t("p",null,n(i.feedback),1)])]))),128))]),t("div",ti,[e[23]||(e[23]=t("h4",null,"空间能力分析",-1)),t("div",ei,[t("div",si,[(l(),d("svg",ii,[t("g",ai,[(l(),d(y,null,_(5,i=>t("polygon",{key:i,points:rt(i*20),fill:"none",stroke:"#e0e0e0","stroke-width":"1"},null,8,oi)),64)),(l(!0),d(y,null,_(h.value,(i,p)=>(l(),d("line",{key:p,x1:"150",y1:"150",x2:ct(p),y2:r(p),stroke:"#e0e0e0","stroke-width":"1"},null,8,ni))),128))]),t("polygon",{points:s(),fill:"rgba(16, 185, 129, 0.3)",stroke:"#10b981","stroke-width":"2"},null,8,li),(l(!0),d(y,null,_(h.value,(i,p)=>(l(),d("circle",{key:p,cx:o(p,i.score),cy:c(p,i.score),r:"4",fill:"#10b981"},null,8,di))),128)),(l(!0),d(y,null,_(h.value,(i,p)=>(l(),d("text",{key:p,x:w(p),y:L(p),"text-anchor":"middle","dominant-baseline":"middle","font-size":"12",fill:"#666"},n(i.name),9,ri))),128))]))])])]),t("div",ci,[e[24]||(e[24]=t("h4",null,"改进建议",-1)),t("div",ui,[(l(!0),d(y,null,_(q.value,i=>(l(),d("div",{key:i.area,class:"suggestion-item"},[t("div",vi,[t("span",pi,n(i.icon),1),t("h5",null,n(i.title),1),t("span",{class:P(["suggestion-priority",i.priority])},n(et(i.priority)),3)]),t("p",hi,n(i.description),1),t("div",gi,[t("button",{class:"btn-small",onClick:p=>Z(i.trainingPath)}," 开始训练 ",8,mi)])]))),128))])])]),t("div",bi,[t("button",{class:"btn-secondary",onClick:W},"重新测评"),t("button",{class:"btn-secondary",onClick:dt},"导出报告"),t("button",{class:"btn-primary",onClick:e[6]||(e[6]=i=>a.$emit("go-back"))},"返回主页")])])):M("",!0)])]))}},ki=xt(yi,[["__scopeId","data-v-af26f765"]]);export{ki as default};
