import{u as Ce,k as i,c as se,l as Ve,q as Be,o as u,a as r,b as e,t as a,n as m,m as I,F as p,h as g,s as c,v as D,x as $,d as we,y as N,f as M,A as H,z as Pe,g as Re}from"./index-7434e420.js";import{_ as Ue}from"./_plugin-vue_export-helper-c27b6911.js";const Ae={class:"metronome-container"},Ie={class:"metronome-player"},De={class:"player-card"},$e={class:"metronome-display"},Ne={class:"tempo-info"},Oe={class:"tempo-description"},qe={class:"visual-metronome"},Fe={class:"beat-indicator"},ze={class:"measure-counter"},Ee={class:"measure-number"},Le={class:"session-timer"},Ge={class:"timer-display"},je={class:"time-elapsed"},Ke={class:"session-duration"},He={class:"timer-progress"},Je={class:"progress-bar"},Qe={class:"metronome-controls"},We={class:"tempo-control"},Xe={class:"tempo-input-group"},Ye=["disabled"],Ze=["disabled"],et={class:"time-signature-control"},tt={class:"play-controls"},st={class:"audio-settings"},nt={class:"volume-control"},at={class:"volume-value"},it={class:"sound-selection"},ot={class:"preset-tempos"},lt={class:"presets-grid"},dt=["onClick"],ut={class:"preset-icon"},rt={class:"preset-bpm"},ct={class:"preset-description"},vt={class:"preset-benefits"},mt={class:"training-modes"},pt={class:"modes-grid"},gt=["onClick"],bt={class:"mode-header"},ft={class:"mode-icon"},yt={class:"mode-description"},_t={class:"mode-details"},ht={class:"detail-item"},St={class:"detail-value"},kt={class:"detail-item"},Mt={class:"detail-value"},Tt={class:"detail-item"},xt={class:"detail-value"},Ct={class:"mode-progress"},Vt={class:"progress-bar"},Bt={class:"progress-text"},wt={class:"start-mode-btn"},Pt={class:"session-settings"},Rt={class:"settings-grid"},Ut={class:"setting-card"},At={class:"setting-item"},It={class:"setting-item"},Dt={class:"setting-label"},$t={class:"setting-item"},Nt={class:"setting-label"},Ot={class:"setting-card"},qt={class:"setting-item"},Ft={class:"setting-label"},zt={class:"setting-item"},Et={class:"setting-label"},Lt={class:"setting-item"},Gt={class:"setting-card"},jt={class:"setting-item"},Kt={class:"setting-label"},Ht={class:"setting-item"},Jt={class:"setting-label"},Qt={class:"setting-item"},Wt={class:"setting-label"},Xt={class:"usage-analytics"},Yt={class:"analytics-grid"},Zt={class:"analytics-card"},es={class:"analytics-header"},ts={class:"stats-overview"},ss={class:"stat-item"},ns={class:"stat-info"},as={class:"stat-value"},is={class:"stat-item"},os={class:"stat-info"},ls={class:"stat-value"},ds={class:"stat-item"},us={class:"stat-info"},rs={class:"stat-value"},cs={class:"analytics-card"},vs={class:"tempo-chart"},ms={class:"chart-bars"},ps=["title"],gs={class:"bar-label"},bs={class:"analytics-card"},fs={class:"effect-ratings"},ys={class:"rating-item"},_s={class:"rating-stars"},hs={class:"rating-item"},Ss={class:"rating-stars"},ks={class:"rating-item"},Ms={class:"rating-stars"},Ts={class:"rating-item"},xs={class:"rating-stars"},Cs={class:"modal-content"},Vs={class:"session-summary"},Bs={class:"summary-item"},ws={class:"summary-value"},Ps={class:"summary-item"},Rs={class:"summary-value"},Us={class:"summary-item"},As={class:"summary-value"},Is={class:"effect-feedback"},Ds={class:"feedback-options"},$s=["onClick"],Ns=3e3,Os={__name:"Metronome",emits:["back"],setup(qs,{emit:Fs}){const J=Ce(),y=i(!1),l=i(120),V=i("4/4"),O=i(4),f=i(0),B=i(0),w=i(70),Q=i("click"),_=i(15),x=i(0),q=i("basic"),F=i(0),W=i(120),h=i([]);let v=null,X=null,Y=null;const o=i({autoStop:!0,countIn:!0,accentBeat:!0,visualOnly:!1,subdivision:"quarter",goal:"focus",soundType:"click",accentSoundType:"bell",volume:70,accentVolume:80,fadeIn:!1,fadeOut:!1,visualStyle:"pendulum",colorTheme:"auto",showBeatNumbers:!0,showMeasureCount:!0,showTimer:!0,fullscreenMode:!1,beatAnimation:"pulse",adaptiveTempo:!1,tempoVariation:0,progressiveTraining:!1,sessionReminders:!0,reminderInterval:5,preferredTempos:[60,80,120],customTimeSignatures:["4/4","3/4","2/4"],trainingGoals:{daily:20,weekly:140,monthly:600},polyrhythm:!1,polyrhythmRatio:"3:2",metronomeChain:!1,biofeedback:!1,heartRateSync:!1,hapticFeedback:!1,voiceCount:!1,accessibilityMode:!1,largeText:!1,highContrast:!1,maxVolume:85,maxSessionTime:60,breakReminders:!0,eyeStrainProtection:!0}),Z=i("month"),P=i(0),R=i(0),z=i(120),S=i({}),ee=i(0),k=i({focus:4,rhythm:4,relaxation:3,timing:4}),E=i(!1),L=i("");i([{id:1,name:"深度冥想",bpm:60,icon:"🧘",description:"缓慢节拍，适合深度冥想和放松",benefits:["深度放松","内心平静","压力释放"],category:"meditation",timeSignature:"4/4",difficulty:"beginner"},{id:2,name:"专注训练",bpm:80,icon:"🎯",description:"中慢节拍，提升专注力和集中度",benefits:["专注力","集中度","心理稳定"],category:"focus",timeSignature:"4/4",difficulty:"beginner"},{id:3,name:"标准节拍",bpm:120,icon:"⚡",description:"标准节拍，适合日常训练",benefits:["节奏感","时间感","协调性"],category:"rhythm",timeSignature:"4/4",difficulty:"intermediate"},{id:4,name:"活力训练",bpm:140,icon:"🔥",description:"快速节拍，激发活力和能量",benefits:["活力提升","反应速度","动态平衡"],category:"energy",timeSignature:"4/4",difficulty:"intermediate"},{id:5,name:"挑战模式",bpm:180,icon:"🚀",description:"高速节拍，挑战极限专注力",benefits:["极限专注","快速反应","高度集中"],category:"challenge",timeSignature:"4/4",difficulty:"advanced"},{id:6,name:"呼吸同步",bpm:45,icon:"🌬️",description:"超慢节拍，与深呼吸节奏同步",benefits:["呼吸调节","心率平稳","深度放松"],category:"breathing",timeSignature:"4/4",difficulty:"beginner"},{id:7,name:"学习辅助",bpm:100,icon:"📚",description:"适中节拍，提升学习效率和记忆力",benefits:["学习效率","记忆增强","思维清晰"],category:"study",timeSignature:"4/4",difficulty:"beginner"},{id:8,name:"创意激发",bpm:90,icon:"🎨",description:"灵感节拍，激发创造力和想象力",benefits:["创造力","灵感激发","思维发散"],category:"creativity",timeSignature:"3/4",difficulty:"intermediate"},{id:9,name:"运动协调",bpm:160,icon:"🏃",description:"运动节拍，提升身体协调性",benefits:["身体协调","运动节奏","肌肉记忆"],category:"movement",timeSignature:"2/4",difficulty:"intermediate"},{id:10,name:"复合节拍",bpm:110,icon:"🎼",description:"复杂拍号，训练高级节奏感",benefits:["复杂节奏","音乐感知","认知灵活"],category:"complex",timeSignature:"7/8",difficulty:"advanced"},{id:11,name:"睡前放松",bpm:40,icon:"🌙",description:"极慢节拍，帮助入睡和深度休息",benefits:["助眠效果","深度放松","心率下降"],category:"sleep",timeSignature:"4/4",difficulty:"beginner"},{id:12,name:"晨间唤醒",bpm:130,icon:"☀️",description:"活力节拍，唤醒身心状态",benefits:["精神唤醒","活力提升","状态调整"],category:"morning",timeSignature:"4/4",difficulty:"intermediate"}]);const U=i([{id:"basic",name:"基础训练",description:"固定节拍训练，建立稳定的内在节奏感",icon:"🎵",level:"beginner",duration:10,tempoRange:"60-120 BPM",difficulty:"简单",totalSessions:10,completedSessions:0,benefits:["节奏感建立","时间感培养","基础协调"],targetAudience:"初学者、节拍器新手",stages:[{name:"适应阶段",duration:3,tempo:80,description:"熟悉节拍器节奏"},{name:"稳定阶段",duration:4,tempo:100,description:"保持稳定跟随"},{name:"巩固阶段",duration:3,tempo:120,description:"巩固节奏感"}]},{id:"progressive",name:"渐进训练",description:"节拍逐渐加快，提升适应能力",icon:"📈",level:"intermediate",duration:15,tempoRange:"80-160 BPM",difficulty:"中等",totalSessions:8,completedSessions:0,benefits:["适应能力","反应速度","节奏控制"],targetAudience:"有基础的练习者",stages:[{name:"慢速起步",duration:5,tempo:80,description:"从慢速开始适应"},{name:"逐步加速",duration:5,tempo:120,description:"逐渐提升节拍速度"},{name:"快速挑战",duration:5,tempo:160,description:"挑战快速节拍"}]},{id:"variable",name:"变速训练",description:"节拍随机变化，增强专注力和适应性",icon:"🔄",level:"advanced",duration:20,tempoRange:"60-180 BPM",difficulty:"困难",totalSessions:12,completedSessions:0,benefits:["专注力","适应性","反应灵敏"],targetAudience:"高级练习者",stages:[{name:"小幅变化",duration:6,tempo:100,description:"小范围节拍变化"},{name:"中幅变化",duration:7,tempo:120,description:"中等范围变化"},{name:"大幅变化",duration:7,tempo:140,description:"大范围随机变化"}]},{id:"meditation",name:"冥想辅助",description:"缓慢稳定节拍，辅助冥想练习",icon:"🌊",level:"beginner",duration:25,tempoRange:"40-80 BPM",difficulty:"简单",totalSessions:15,completedSessions:0,benefits:["深度放松","冥想专注","心率调节"],targetAudience:"冥想练习者、放松需求者",stages:[{name:"入静准备",duration:5,tempo:60,description:"进入冥想状态"},{name:"深度冥想",duration:15,tempo:45,description:"深度冥想练习"},{name:"回归调整",duration:5,tempo:60,description:"逐渐回到正常状态"}]},{id:"complex",name:"复合节拍",description:"复杂拍号训练，提升音乐感知能力",icon:"🎼",level:"advanced",duration:18,tempoRange:"90-150 BPM",difficulty:"困难",totalSessions:10,completedSessions:0,benefits:["音乐感知","复杂节奏","认知灵活"],targetAudience:"音乐学习者、高级练习者",stages:[{name:"3/4拍练习",duration:6,tempo:100,description:"三拍子节奏训练"},{name:"5/4拍练习",duration:6,tempo:110,description:"五拍子节奏训练"},{name:"7/8拍练习",duration:6,tempo:120,description:"复杂拍号训练"}]},{id:"breathing",name:"呼吸同步",description:"与呼吸节奏同步，调节身心状态",icon:"🌬️",level:"beginner",duration:20,tempoRange:"30-60 BPM",difficulty:"简单",totalSessions:12,completedSessions:0,benefits:["呼吸调节","心率平稳","压力缓解"],targetAudience:"压力大的人群、呼吸练习者",stages:[{name:"自然呼吸",duration:5,tempo:45,description:"跟随自然呼吸节奏"},{name:"深度呼吸",duration:10,tempo:30,description:"深度呼吸练习"},{name:"节奏呼吸",duration:5,tempo:40,description:"建立规律呼吸"}]},{id:"focus",name:"专注力强化",description:"通过节拍训练提升专注力和注意力",icon:"🎯",level:"intermediate",duration:12,tempoRange:"80-120 BPM",difficulty:"中等",totalSessions:14,completedSessions:0,benefits:["专注力","注意力","心理稳定"],targetAudience:"学生、需要专注的工作者",stages:[{name:"注意力集中",duration:4,tempo:80,description:"集中注意力训练"},{name:"持续专注",duration:4,tempo:100,description:"维持专注状态"},{name:"深度专注",duration:4,tempo:120,description:"深度专注训练"}]},{id:"creativity",name:"创意激发",description:"特殊节拍模式激发创造力和灵感",icon:"🎨",level:"intermediate",duration:16,tempoRange:"70-110 BPM",difficulty:"中等",totalSessions:8,completedSessions:0,benefits:["创造力","灵感激发","思维发散"],targetAudience:"创作者、设计师、艺术家",stages:[{name:"思维放松",duration:5,tempo:70,description:"放松思维状态"},{name:"灵感涌现",duration:6,tempo:90,description:"激发创意灵感"},{name:"创意整合",duration:5,tempo:110,description:"整合创意思路"}]}]),ne=i([{value:"excellent",label:"非常好",icon:"😊"},{value:"good",label:"不错",icon:"🙂"},{value:"average",label:"一般",icon:"😐"},{value:"poor",label:"不太好",icon:"😕"}]),ae=se(()=>60/l.value),ie=se(()=>{const n=_.value*60;return x.value/n*100}),oe=n=>n<60?"极慢 - 深度冥想":n<80?"慢速 - 放松冥想":n<100?"中慢 - 专注训练":n<120?"中速 - 标准节拍":n<140?"中快 - 活力训练":n<160?"快速 - 挑战模式":"极快 - 极限挑战",le=()=>{y.value?C():G()},G=()=>{y.value=!0,f.value=0,B.value=0,F.value=0,de(),re(),ce()},C=()=>{y.value=!1,clearInterval(X),clearInterval(Y)},de=()=>{v||(v=new(window.AudioContext||window.webkitAudioContext))},ue=(n=!1)=>{if(o.value.visualOnly||!v)return;const t=v.createOscillator(),s=v.createGain();t.connect(s),s.connect(v.destination);const d=n&&o.value.accentBeat?800:600,b=.1,K=w.value/100*.3;t.frequency.setValueAtTime(d,v.currentTime),s.gain.setValueAtTime(K,v.currentTime),s.gain.exponentialRampToValueAtTime(.001,v.currentTime+b),t.start(v.currentTime),t.stop(v.currentTime+b)},re=()=>{const n=60/l.value*1e3;X=setInterval(()=>{f.value++,F.value++,f.value>O.value&&(f.value=1,B.value++);const t=f.value===1;ue(t)},n)},ce=()=>{Y=setInterval(()=>{x.value++,x.value>=_.value*60&&ve()},1e3)},ve=()=>{C(),R.value++,P.value+=_.value,W.value=l.value;const n=Math.floor(l.value/20)*20,t=`${n}-${n+19}`;S.value[t]=(S.value[t]||0)+1,Me(),o.value.autoStop&&(E.value=!0)},T=()=>{y.value&&(C(),setTimeout(()=>{G()},100))},me=()=>{l.value<200&&(l.value+=5,T())},pe=()=>{l.value>40&&(l.value-=5,T())},j=()=>{const[n]=V.value.split("/");O.value=parseInt(n),y.value&&(f.value=0,B.value=0)},ge=()=>{},be=()=>{},fe=()=>{const n=Date.now();if(h.value.push(n),h.value=h.value.filter(t=>n-t<Ns),h.value.length>=2){const t=[];for(let b=1;b<h.value.length;b++)t.push(h.value[b]-h.value[b-1]);const s=t.reduce((b,K)=>b+K)/t.length,d=Math.round(6e4/s);d>=40&&d<=200&&(l.value=d,T())}},ye=n=>{l.value=n.bpm,T()},_e=n=>{switch(q.value=n.id,n.id){case"meditation":l.value=60,o.value.goal="meditation";break;case"progressive":l.value=80,o.value.goal="focus";break;case"variable":l.value=120,o.value.goal="focus";break;case"complex":V.value="3/4",j();break;default:l.value=120,o.value.goal="rhythm"}},he=n=>({beginner:"初级",intermediate:"中级",advanced:"高级"})[n]||"中级",Se=()=>{const n=U.value.find(t=>t.id===q.value);return n?n.name:"基础训练"},te=n=>{const t=Math.floor(n/60),s=n%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},A=()=>{E.value=!1,L.value="",x.value=0},ke=()=>{A(),G()},Me=()=>{const n={settings:o.value,modes:U.value,analytics:{totalTrainingMinutes:P.value,totalSessions:R.value,averageTempo:z.value,tempoUsage:S.value,effectRatings:k.value}};J.saveMeditationModuleData("metronome",n)},Te=()=>{const n=J.getMeditationModuleData("metronome");n&&(n.settings&&(o.value={...o.value,...n.settings}),n.modes&&(U.value=n.modes),n.analytics&&(P.value=n.analytics.totalTrainingMinutes||0,R.value=n.analytics.totalSessions||0,z.value=n.analytics.averageTempo||120,S.value=n.analytics.tempoUsage||{},k.value={...k.value,...n.analytics.effectRatings})),xe()},xe=()=>{["40-59","60-79","80-99","100-119","120-139","140-159","160-179","180-199"].forEach(t=>{S.value[t]=Math.floor(Math.random()*30)+5}),ee.value=Math.max(...Object.values(S.value))};return Ve(()=>{Te(),j()}),Be(()=>{C(),v&&v.close()}),(n,t)=>(u(),r("div",Ae,[e("div",Ie,[e("div",De,[e("div",$e,[e("div",Ne,[e("h3",null,a(l.value)+" BPM",1),e("p",Oe,a(oe(l.value)),1)]),e("div",qe,[e("div",{class:m(["metronome-pendulum",{active:y.value}])},[e("div",{class:"pendulum-rod",style:I({animationDuration:ae.value+"s"})},t[16]||(t[16]=[e("div",{class:"pendulum-weight"},null,-1)]),4)],2),e("div",Fe,[(u(!0),r(p,null,g(O.value,(s,d)=>(u(),r("div",{key:d,class:m(["beat-dot",{active:f.value===d+1,accent:d===0&&f.value===1}])},a(d+1),3))),128))]),e("div",ze,[t[17]||(t[17]=e("span",{class:"measure-label"},"小节：",-1)),e("span",Ee,a(B.value),1)])]),e("div",Le,[e("div",Ge,[e("span",je,a(te(x.value)),1),e("span",Ke,"/ "+a(te(_.value*60)),1)]),e("div",He,[e("div",Je,[e("div",{class:"progress-fill",style:I({width:ie.value+"%"})},null,4)])])])]),e("div",Qe,[e("div",We,[t[18]||(t[18]=e("label",null,"节拍速度 (BPM)：",-1)),e("div",Xe,[e("button",{class:"tempo-btn",onClick:pe,disabled:l.value<=40},"-",8,Ye),c(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),min:"40",max:"200",class:"tempo-input",onInput:T},null,544),[[D,l.value]]),e("button",{class:"tempo-btn",onClick:me,disabled:l.value>=200},"+",8,Ze)]),c(e("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>l.value=s),min:"40",max:"200",class:"tempo-slider",onInput:T},null,544),[[D,l.value]])]),e("div",et,[t[20]||(t[20]=e("label",null,"拍号：",-1)),c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>V.value=s),onChange:j,class:"time-signature-select"},t[19]||(t[19]=[e("option",{value:"4/4"},"4/4",-1),e("option",{value:"3/4"},"3/4",-1),e("option",{value:"2/4"},"2/4",-1),e("option",{value:"6/8"},"6/8",-1)]),544),[[$,V.value]])]),e("div",tt,[e("button",{class:"control-btn",onClick:le},a(y.value?"⏸️":"▶️"),1),e("button",{class:"control-btn",onClick:C},"⏹️"),e("button",{class:"control-btn",onClick:fe},"👆 Tap")]),e("div",st,[e("div",nt,[t[21]||(t[21]=e("label",null,"音量：",-1)),c(e("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":t[3]||(t[3]=s=>w.value=s),class:"volume-slider",onInput:ge},null,544),[[D,w.value]]),e("span",at,a(w.value)+"%",1)]),e("div",it,[t[23]||(t[23]=e("label",null,"节拍音效：",-1)),c(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>Q.value=s),onChange:be,class:"sound-select"},t[22]||(t[22]=[we('<option value="click" data-v-8a9b0193>咔嗒声</option><option value="beep" data-v-8a9b0193>蜂鸣声</option><option value="wood" data-v-8a9b0193>木块声</option><option value="bell" data-v-8a9b0193>铃声</option><option value="drum" data-v-8a9b0193>鼓声</option>',5)]),544),[[$,Q.value]])])])])])]),e("div",ot,[t[24]||(t[24]=e("h3",null,"预设节拍",-1)),e("div",lt,[(u(!0),r(p,null,g(n.tempoPresets,s=>(u(),r("div",{key:s.id,class:m(["preset-card",{active:l.value===s.bpm}]),onClick:d=>ye(s)},[e("div",ut,a(s.icon),1),e("h4",null,a(s.name),1),e("p",rt,a(s.bpm)+" BPM",1),e("p",ct,a(s.description),1),e("div",vt,[(u(!0),r(p,null,g(s.benefits,d=>(u(),r("span",{key:d,class:"benefit-tag"},a(d),1))),128))])],10,dt))),128))])]),e("div",mt,[t[28]||(t[28]=e("h3",null,"训练模式",-1)),e("div",pt,[(u(!0),r(p,null,g(U.value,s=>(u(),r("div",{key:s.id,class:m(["mode-card",{active:q.value===s.id}]),onClick:d=>_e(s)},[e("div",bt,[e("div",ft,a(s.icon),1),e("div",{class:m(["mode-level",s.level])},a(he(s.level)),3)]),e("h4",null,a(s.name),1),e("p",yt,a(s.description),1),e("div",_t,[e("div",ht,[t[25]||(t[25]=e("span",{class:"detail-label"},"时长：",-1)),e("span",St,a(s.duration)+"分钟",1)]),e("div",kt,[t[26]||(t[26]=e("span",{class:"detail-label"},"节拍范围：",-1)),e("span",Mt,a(s.tempoRange),1)]),e("div",Tt,[t[27]||(t[27]=e("span",{class:"detail-label"},"难度：",-1)),e("span",xt,a(s.difficulty),1)])]),e("div",Ct,[e("div",Vt,[e("div",{class:"progress-fill",style:I({width:s.completedSessions/s.totalSessions*100+"%"})},null,4)]),e("span",Bt,a(s.completedSessions)+"/"+a(s.totalSessions)+" 完成",1)]),e("button",wt,a(s.completedSessions===0?"开始训练":"继续训练"),1)],10,gt))),128))])]),e("div",Pt,[t[42]||(t[42]=e("h3",null,"会话设置",-1)),e("div",Rt,[e("div",Ut,[t[32]||(t[32]=e("h4",null,"⏰ 时间设置",-1)),e("div",At,[t[29]||(t[29]=e("label",null,"会话时长（分钟）：",-1)),c(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>_.value=s),min:"5",max:"60",class:"number-input"},null,512),[[D,_.value]])]),e("div",It,[e("label",Dt,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>o.value.autoStop=s)},null,512),[[N,o.value.autoStop]]),t[30]||(t[30]=M(" 时间到自动停止 ",-1))])]),e("div",$t,[e("label",Nt,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=s=>o.value.countIn=s)},null,512),[[N,o.value.countIn]]),t[31]||(t[31]=M(" 开始前预备拍 ",-1))])])]),e("div",Ot,[t[37]||(t[37]=e("h4",null,"🎵 音频设置",-1)),e("div",qt,[e("label",Ft,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>o.value.accentBeat=s)},null,512),[[N,o.value.accentBeat]]),t[33]||(t[33]=M(" 强拍重音 ",-1))])]),e("div",zt,[e("label",Et,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=s=>o.value.visualOnly=s)},null,512),[[N,o.value.visualOnly]]),t[34]||(t[34]=M(" 仅视觉模式 ",-1))])]),e("div",Lt,[t[36]||(t[36]=e("label",null,"节拍细分：",-1)),c(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.subdivision=s),class:"select-input"},t[35]||(t[35]=[e("option",{value:"quarter"},"四分音符",-1),e("option",{value:"eighth"},"八分音符",-1),e("option",{value:"sixteenth"},"十六分音符",-1)]),512),[[$,o.value.subdivision]])])]),e("div",Gt,[t[41]||(t[41]=e("h4",null,"🎯 训练目标",-1)),e("div",jt,[e("label",Kt,[c(e("input",{type:"radio","onUpdate:modelValue":t[11]||(t[11]=s=>o.value.goal=s),value:"focus"},null,512),[[H,o.value.goal]]),t[38]||(t[38]=M(" 专注力训练 ",-1))])]),e("div",Ht,[e("label",Jt,[c(e("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=s=>o.value.goal=s),value:"rhythm"},null,512),[[H,o.value.goal]]),t[39]||(t[39]=M(" 节奏感培养 ",-1))])]),e("div",Qt,[e("label",Wt,[c(e("input",{type:"radio","onUpdate:modelValue":t[13]||(t[13]=s=>o.value.goal=s),value:"meditation"},null,512),[[H,o.value.goal]]),t[40]||(t[40]=M(" 冥想辅助 ",-1))])])])])]),e("div",Xt,[t[57]||(t[57]=e("h3",null,"使用分析",-1)),e("div",Yt,[e("div",Zt,[e("div",es,[t[44]||(t[44]=e("h4",null,"📊 训练统计",-1)),c(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>Z.value=s),class:"time-range-select"},t[43]||(t[43]=[e("option",{value:"week"},"最近一周",-1),e("option",{value:"month"},"最近一月",-1),e("option",{value:"quarter"},"最近三月",-1)]),512),[[$,Z.value]])]),e("div",ts,[e("div",ss,[t[46]||(t[46]=e("div",{class:"stat-icon"},"⏱️",-1)),e("div",ns,[e("span",as,a(P.value),1),t[45]||(t[45]=e("span",{class:"stat-label"},"总训练时长（分钟）",-1))])]),e("div",is,[t[48]||(t[48]=e("div",{class:"stat-icon"},"🎯",-1)),e("div",os,[e("span",ls,a(R.value),1),t[47]||(t[47]=e("span",{class:"stat-label"},"总会话次数",-1))])]),e("div",ds,[t[50]||(t[50]=e("div",{class:"stat-icon"},"🎵",-1)),e("div",us,[e("span",rs,a(z.value),1),t[49]||(t[49]=e("span",{class:"stat-label"},"平均节拍 (BPM)",-1))])])])]),e("div",cs,[t[51]||(t[51]=e("h4",null,"📈 节拍分布",-1)),e("div",vs,[e("div",ms,[(u(!0),r(p,null,g(S.value,(s,d)=>(u(),r("div",{key:d,class:"chart-bar",style:I({height:s/ee.value*100+"%"}),title:`${d} BPM: ${s}次`},[e("span",gs,a(d),1)],12,ps))),128))])])]),e("div",bs,[t[56]||(t[56]=e("h4",null,"🎯 训练效果",-1)),e("div",fs,[e("div",ys,[t[52]||(t[52]=e("span",{class:"rating-label"},"专注力：",-1)),e("div",_s,[(u(),r(p,null,g(5,s=>e("span",{key:s,class:m(["star",{filled:s<=k.value.focus}])},"⭐",2)),64))])]),e("div",hs,[t[53]||(t[53]=e("span",{class:"rating-label"},"节奏感：",-1)),e("div",Ss,[(u(),r(p,null,g(5,s=>e("span",{key:s,class:m(["star",{filled:s<=k.value.rhythm}])},"⭐",2)),64))])]),e("div",ks,[t[54]||(t[54]=e("span",{class:"rating-label"},"放松度：",-1)),e("div",Ms,[(u(),r(p,null,g(5,s=>e("span",{key:s,class:m(["star",{filled:s<=k.value.relaxation}])},"⭐",2)),64))])]),e("div",Ts,[t[55]||(t[55]=e("span",{class:"rating-label"},"时间感：",-1)),e("div",xs,[(u(),r(p,null,g(5,s=>e("span",{key:s,class:m(["star",{filled:s<=k.value.timing}])},"⭐",2)),64))])])])])])]),E.value?(u(),r("div",{key:0,class:"modal-overlay",onClick:A},[e("div",{class:"session-modal",onClick:t[15]||(t[15]=Pe(()=>{},["stop"]))},[e("div",{class:"modal-header"},[t[58]||(t[58]=e("h3",null,"🎉 训练完成",-1)),e("button",{class:"close-btn",onClick:A},"×")]),e("div",Cs,[e("p",null,"您已完成 "+a(_.value)+" 分钟的节拍器训练！",1),e("div",Vs,[e("div",Bs,[t[59]||(t[59]=e("span",{class:"summary-label"},"平均节拍：",-1)),e("span",ws,a(W.value)+" BPM",1)]),e("div",Ps,[t[60]||(t[60]=e("span",{class:"summary-label"},"总节拍数：",-1)),e("span",Rs,a(F.value),1)]),e("div",Us,[t[61]||(t[61]=e("span",{class:"summary-label"},"训练模式：",-1)),e("span",As,a(Se()),1)])]),e("div",Is,[t[62]||(t[62]=e("h4",null,"请评价本次训练效果：",-1)),e("div",Ds,[(u(!0),r(p,null,g(ne.value,s=>(u(),r("button",{key:s.value,class:m(["feedback-btn",{selected:L.value===s.value}]),onClick:d=>L.value=s.value},a(s.icon)+" "+a(s.label),11,$s))),128))])]),e("div",{class:"modal-actions"},[e("button",{class:"secondary-btn",onClick:A},"完成"),e("button",{class:"primary-btn",onClick:ke},"再来一次")])])])])):Re("",!0)]))}},Ls=Ue(Os,[["__scopeId","data-v-8a9b0193"]]);export{Ls as default};
