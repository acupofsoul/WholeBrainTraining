import{k as $,c as b,J as Ee,l as Pe,q as Qe,o as r,a as u,b as e,d as Le,g as D,t as o,m as le,F as S,h as q,n as Y,p as Ce,L as Ue,i as Ye,u as Ge,s as qe,x as Ne,y as He,f as Ie,A as Ke}from"./index-7434e420.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";import{P as Ze}from"./PatternComparisonTest-8e46b4e6.js";const et={class:"visual-search-test"},tt={class:"test-container"},st={key:0,class:"instruction-phase"},nt={key:1,class:"testing-phase"},ot={class:"test-header"},at={class:"test-info"},lt={class:"question-counter"},it={class:"timer"},rt={class:"target-display"},ct={class:"target-count"},ut={class:"search-area"},dt=["width","height"],vt=["cx","cy","r","fill"],ht=["x","y","width","height","fill"],pt=["points","fill"],ft=["cx","cy","r","fill","data-target-id"],mt=["x","y","width","height","fill","data-target-id"],_t=["points","fill","data-target-id"],gt=["cx","cy","stroke"],yt=["x","y","fill"],bt={class:"test-controls"},$t={class:"progress-info"},xt=["disabled"],kt={key:2,class:"results-phase"},Mt={class:"results-container"},wt={class:"overall-results"},Tt={class:"result-card"},Ct={class:"result-content"},Dt={class:"result-value"},St={class:"result-card"},qt={class:"result-content"},It={class:"result-value"},At={class:"result-card"},Pt={class:"result-content"},Qt={class:"result-value"},Lt={class:"result-card"},zt={class:"result-content"},Ft={class:"result-value"},Bt={class:"detailed-analysis"},Ot={class:"analysis-grid"},Et={class:"analysis-item"},Rt={class:"difficulty-chart"},jt={class:"difficulty-label"},Wt={class:"bar-container"},Vt={class:"accuracy-value"},Ut={class:"analysis-item"},Nt={class:"time-trend"},Ht={width:"300",height:"150",viewBox:"0 0 300 150"},Jt=["points"],Xt=["cx","cy"],Yt={class:"performance-feedback"},Gt={class:"feedback-content"},Kt={class:"feedback-icon"},Zt={class:"feedback-text"},es={class:"feedback-title"},ts={class:"feedback-description"},ss={class:"improvement-suggestions"},ns={__name:"VisualSearchTest",props:{testData:{type:Object,required:!0},settings:{type:Object,default:()=>({})}},emits:["test-completed","answer-submitted"],setup(Me,{emit:de}){const ne=Me,J=de,C=$("instruction"),T=$(0),x=$([]),g=$([]),R=$(0),k=$(0),H=$(0),w=$(null),F=$([]),X=$({width:800,height:600}),M=b(()=>x.value[T.value]),B=b(()=>M.value?M.value.targets.filter(v=>v.found).length:0),Z=b(()=>{if(!M.value)return 0;const v=F.value.length;if(v===0)return 100;const h=F.value.filter(n=>n.correct).length;return Math.round(h/v*100)}),I=b(()=>{var v;return B.value===((v=M.value)==null?void 0:v.targetCount)||H.value>=60}),O=b(()=>T.value===x.value.length-1),j=b(()=>{if(g.value.length===0)return 0;const v=g.value.reduce((n,a)=>n+a.correctClicks,0),h=g.value.reduce((n,a)=>n+a.totalClicks,0);return h>0?Math.round(v/h*100):0}),z=b(()=>g.value.length===0?0:(g.value.reduce((h,n)=>h+n.responseTime,0)/g.value.length).toFixed(1)),U=b(()=>{const a=j.value,t=Math.max(0,100-parseFloat(z.value)/60*100);return Math.round(a*.6+t*.4)}),G=b(()=>{if(g.value.length===0)return 0;const v=g.value.reduce((n,a)=>n+a.targetCount,0),h=g.value.reduce((n,a)=>n+a.foundTargets,0);return v>0?Math.round(h/v*100):0}),L=b(()=>[...new Set(x.value.map(v=>v.difficulty))]),ie=b(()=>g.value.map((v,h)=>{const n=h/(g.value.length-1)*280+10,a=140-v.responseTime/60*120;return`${n},${a}`}).join(" ")),ve=b(()=>g.value.map((v,h)=>{const n=h/(g.value.length-1)*280+10,a=140-v.responseTime/60*120;return{x:n,y:a}})),N=b(()=>{const v=[];return j.value<70&&v.push("建议放慢速度，提高点击准确性"),parseFloat(z.value)>30&&v.push("可以通过练习提高搜索速度"),G.value<80&&v.push("注意系统性搜索，避免遗漏目标"),v.length===0&&v.push("表现优秀，继续保持！"),v}),ee=()=>{C.value="testing",he(),me(),R.value=Date.now()},he=()=>{const v=ne.testData.difficulty||"medium",h=pe(v);x.value=[];for(let n=0;n<h;n++){const a=$e(n,h,v);x.value.push(fe(a))}},pe=v=>({easy:8,medium:10,hard:12,expert:15})[v]||10,$e=(v,h,n)=>{const a=v/h;return n==="easy"?a<.7?"easy":"medium":n==="medium"?a<.3?"easy":a<.8?"medium":"hard":n==="hard"?a<.2?"medium":a<.7?"hard":"expert":a<.3?"hard":"expert"},fe=v=>{const n={easy:{distractorCount:20,targetCount:2,shapes:["●"],colors:["#ff6b6b","#4ecdc4"]},medium:{distractorCount:40,targetCount:3,shapes:["●","■"],colors:["#ff6b6b","#4ecdc4","#45b7d1"]},hard:{distractorCount:60,targetCount:4,shapes:["●","■","▲"],colors:["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24"]},expert:{distractorCount:80,targetCount:5,shapes:["●","■","▲"],colors:["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7"]}}[v],a=n.shapes[Math.floor(Math.random()*n.shapes.length)],t=n.colors[Math.floor(Math.random()*n.colors.length)],s=[];for(let m=0;m<n.targetCount;m++)s.push({x:Math.random()*(X.value.width-60)+30,y:Math.random()*(X.value.height-60)+30,shape:a,color:t,size:15,found:!1,clicked:!1});const p=[];for(let m=0;m<n.distractorCount;m++){let y,i;do y=n.shapes[Math.floor(Math.random()*n.shapes.length)],i=n.colors[Math.floor(Math.random()*n.colors.length)];while(y===a&&i===t);p.push({x:Math.random()*(X.value.width-60)+30,y:Math.random()*(X.value.height-60)+30,shape:y,color:i,size:15})}return{difficulty:v,target:{shape:a,color:t},targetCount:n.targetCount,targets:s,distractors:p}},me=()=>{k.value=Date.now(),H.value=0,w.value=setInterval(()=>{H.value=Math.floor((Date.now()-k.value)/1e3)},1e3)},te=v=>{const h=v.target.getBoundingClientRect(),n=v.clientX-h.left,a=v.clientY-h.top;let t=!1;M.value.targets.forEach((s,p)=>{Math.sqrt((n-s.x)**2+(a-s.y)**2)<=s.size+10&&!s.found&&(s.found=!0,s.clicked=!0,t=!0,F.value.push({x:n,y:a,correct:!0,timestamp:Date.now()}))}),t||F.value.push({x:n,y:a,correct:!1,timestamp:Date.now()})},se=()=>{const v=(Date.now()-k.value)/1e3,h=F.value.filter(t=>t.correct).length,n=F.value.length,a={questionIndex:T.value,difficulty:M.value.difficulty,targetCount:M.value.targetCount,foundTargets:B.value,correctClicks:h,totalClicks:n,responseTime:v,accuracy:n>0?h/n*100:0,completed:B.value===M.value.targetCount};g.value.push(a),J("answer-submitted",{type:"visual-search",questionIndex:T.value,correct:a.completed,responseTime:a.responseTime,score:oe(a),difficulty:a.difficulty}),F.value=[],O.value?_e():(T.value++,me())},oe=v=>{const h=v.accuracy,n=Math.max(0,100-v.responseTime*2),a=v.completed?20:0;return Math.min(100,Math.round(h*.6+n*.2+a*.2))},_e=()=>{w.value&&(clearInterval(w.value),w.value=null),C.value="results",J("test-completed",{type:"visual-search",overallScore:U.value,accuracy:j.value,averageTime:parseFloat(z.value),searchEfficiency:G.value,answers:g.value,totalTime:(Date.now()-R.value)/1e3})},ge=(v,h,n)=>`${v},${h-n} ${v-n},${h+n} ${v+n},${h+n}`,xe=v=>({easy:"简单",medium:"中等",hard:"困难",expert:"专家"})[v]||v,ae=v=>{const h=g.value.filter(t=>t.difficulty===v);if(h.length===0)return 0;const n=h.reduce((t,s)=>t+s.correctClicks,0),a=h.reduce((t,s)=>t+s.totalClicks,0);return a>0?Math.round(n/a*100):0},re=v=>v>=90?"excellent":v>=80?"good":v>=70?"average":"needs-improvement",ce=v=>v>=90?"🌟":v>=80?"👍":v>=70?"👌":"💪",ke=v=>v>=90?"优秀表现":v>=80?"良好表现":v>=70?"一般表现":"需要改进",ye=v=>v>=90?"您的视觉搜索能力非常出色，能够快速准确地定位目标。":v>=80?"您的视觉搜索能力良好，在大多数情况下能够有效找到目标。":v>=70?"您的视觉搜索能力一般，还有提升空间。":"建议多进行视觉搜索练习，提高观察和定位能力。",ue=v=>`${v}s`;return Ee(()=>ne.testData,()=>{C.value==="instruction"&&(T.value=0,g.value=[],F.value=[])},{deep:!0}),Pe(()=>{}),Qe(()=>{w.value&&clearInterval(w.value)}),(v,h)=>(r(),u("div",et,[e("div",tt,[C.value==="instruction"?(r(),u("div",st,[e("div",{class:"instruction-content"},[h[0]||(h[0]=Le('<h3 data-v-da7c6a09>视觉搜索测试</h3><div class="instruction-text" data-v-da7c6a09><p data-v-da7c6a09>在这个测试中，您需要在复杂的视觉场景中快速找到指定的目标物体。</p><div class="instruction-steps" data-v-da7c6a09><div class="step-item" data-v-da7c6a09><span class="step-number" data-v-da7c6a09>1</span><span class="step-text" data-v-da7c6a09>仔细观察搜索目标</span></div><div class="step-item" data-v-da7c6a09><span class="step-number" data-v-da7c6a09>2</span><span class="step-text" data-v-da7c6a09>在图像中找到所有相同的目标</span></div><div class="step-item" data-v-da7c6a09><span class="step-number" data-v-da7c6a09>3</span><span class="step-text" data-v-da7c6a09>点击找到的目标位置</span></div><div class="step-item" data-v-da7c6a09><span class="step-number" data-v-da7c6a09>4</span><span class="step-text" data-v-da7c6a09>尽可能快速且准确地完成</span></div></div></div>',2)),e("button",{class:"btn-start",onClick:ee},"开始测试")])])):D("",!0),C.value==="testing"?(r(),u("div",nt,[e("div",ot,[e("div",at,[e("span",lt,"第 "+o(T.value+1)+" / "+o(x.value.length)+" 题",1),e("span",it,o(ue(H.value)),1)]),e("div",rt,[h[1]||(h[1]=e("span",{class:"target-label"},"寻找目标:",-1)),e("div",{class:"target-item",style:le({backgroundColor:M.value.target.color})},o(M.value.target.shape),5),e("span",ct,"数量: "+o(M.value.targetCount),1)])]),e("div",ut,[(r(),u("svg",{width:X.value.width,height:X.value.height,class:"search-canvas",onClick:te},[h[2]||(h[2]=e("rect",{width:"100%",height:"100%",fill:"#f8f9fa"},null,-1)),(r(!0),u(S,null,q(M.value.distractors,(n,a)=>(r(),u("g",{key:"distractor-"+a},[n.shape==="●"?(r(),u("circle",{key:0,cx:n.x,cy:n.y,r:n.size,fill:n.color,class:"search-item distractor"},null,8,vt)):n.shape==="■"?(r(),u("rect",{key:1,x:n.x-n.size,y:n.y-n.size,width:n.size*2,height:n.size*2,fill:n.color,class:"search-item distractor"},null,8,ht)):n.shape==="▲"?(r(),u("polygon",{key:2,points:ge(n.x,n.y,n.size),fill:n.color,class:"search-item distractor"},null,8,pt)):D("",!0)]))),128)),(r(!0),u(S,null,q(M.value.targets,(n,a)=>(r(),u("g",{key:"target-"+a},[n.shape==="●"?(r(),u("circle",{key:0,cx:n.x,cy:n.y,r:n.size,fill:n.color,class:Y(["search-item","target",{found:n.found,clicked:n.clicked}]),"data-target-id":a},null,10,ft)):n.shape==="■"?(r(),u("rect",{key:1,x:n.x-n.size,y:n.y-n.size,width:n.size*2,height:n.size*2,fill:n.color,class:Y(["search-item","target",{found:n.found,clicked:n.clicked}]),"data-target-id":a},null,10,mt)):n.shape==="▲"?(r(),u("polygon",{key:2,points:ge(n.x,n.y,n.size),fill:n.color,class:Y(["search-item","target",{found:n.found,clicked:n.clicked}]),"data-target-id":a},null,10,_t)):D("",!0)]))),128)),(r(!0),u(S,null,q(F.value,(n,a)=>(r(),u("g",{key:"click-"+a},[e("circle",{cx:n.x,cy:n.y,r:"15",fill:"none",stroke:n.correct?"#28a745":"#dc3545","stroke-width":"3",class:"click-mark"},null,8,gt),e("text",{x:n.x,y:n.y+5,"text-anchor":"middle",fill:n.correct?"#28a745":"#dc3545","font-weight":"bold","font-size":"16"},o(n.correct?"✓":"✗"),9,yt)]))),128))],8,dt))]),e("div",bt,[e("div",$t,[e("span",null,"已找到: "+o(B.value)+" / "+o(M.value.targetCount),1),e("span",null,"准确率: "+o(Z.value)+"%",1)]),e("button",{class:"btn-next",onClick:se,disabled:!I.value},o(O.value?"完成测试":"下一题"),9,xt)])])):D("",!0),C.value==="results"?(r(),u("div",kt,[e("div",Mt,[h[16]||(h[16]=e("h3",null,"视觉搜索测试结果",-1)),e("div",wt,[e("div",Tt,[h[4]||(h[4]=e("div",{class:"result-icon"},"🎯",-1)),e("div",Ct,[e("div",Dt,o(j.value)+"%",1),h[3]||(h[3]=e("div",{class:"result-label"},"总体准确率",-1))])]),e("div",St,[h[6]||(h[6]=e("div",{class:"result-icon"},"⚡",-1)),e("div",qt,[e("div",It,o(z.value)+"s",1),h[5]||(h[5]=e("div",{class:"result-label"},"平均用时",-1))])]),e("div",At,[h[8]||(h[8]=e("div",{class:"result-icon"},"📊",-1)),e("div",Pt,[e("div",Qt,o(U.value),1),h[7]||(h[7]=e("div",{class:"result-label"},"综合得分",-1))])]),e("div",Lt,[h[10]||(h[10]=e("div",{class:"result-icon"},"🔍",-1)),e("div",zt,[e("div",Ft,o(G.value)+"%",1),h[9]||(h[9]=e("div",{class:"result-label"},"搜索效率",-1))])])]),e("div",Bt,[h[13]||(h[13]=e("h4",null,"详细分析",-1)),e("div",Ot,[e("div",Et,[h[11]||(h[11]=e("h5",null,"难度表现",-1)),e("div",Rt,[(r(!0),u(S,null,q(L.value,n=>(r(),u("div",{key:n,class:"difficulty-bar"},[e("span",jt,o(xe(n)),1),e("div",Wt,[e("div",{class:"bar-fill",style:le({width:ae(n)+"%"})},null,4)]),e("span",Vt,o(ae(n))+"%",1)]))),128))])]),e("div",Ut,[h[12]||(h[12]=e("h5",null,"反应时间趋势",-1)),e("div",Nt,[(r(),u("svg",Ht,[e("polyline",{points:ie.value,fill:"none",stroke:"#4a90e2","stroke-width":"2"},null,8,Jt),(r(!0),u(S,null,q(ve.value,(n,a)=>(r(),u("circle",{key:a,cx:n.x,cy:n.y,r:"3",fill:"#4a90e2"},null,8,Xt))),128))]))])])])]),e("div",Yt,[h[15]||(h[15]=e("h4",null,"表现评价",-1)),e("div",Gt,[e("div",{class:Y(["feedback-item",re(j.value)])},[e("div",Kt,o(ce(j.value)),1),e("div",Zt,[e("div",es,o(ke(j.value)),1),e("div",ts,o(ye(j.value)),1)])],2),e("div",ss,[h[14]||(h[14]=e("h5",null,"改进建议",-1)),e("ul",null,[(r(!0),u(S,null,q(N.value,n=>(r(),u("li",{key:n},o(n),1))),128))])])])])])])):D("",!0)])]))}},os=ze(ns,[["__scopeId","data-v-da7c6a09"]]);const as={class:"detail-observation-test"},ls={class:"test-container"},is={key:0,class:"instruction-phase"},rs={key:1,class:"testing-phase"},cs={class:"test-header"},us={class:"test-info"},ds={class:"question-counter"},vs={class:"timer"},hs={class:"phase-indicator"},ps={class:"phase-name"},fs={key:0,class:"observation-phase"},ms={class:"observation-header"},_s={class:"observation-timer"},gs={class:"timer-circle"},ys={width:"60",height:"60",viewBox:"0 0 60 60"},bs=["stroke-dasharray"],$s={class:"timer-text"},xs={class:"image-container"},ks={class:"image-content"},Ms={width:"100%",height:"100%",viewBox:"0 0 400 300"},ws=["fill"],Ts=["cx","cy","r","fill","stroke","stroke-width"],Cs=["x","y","width","height","fill","stroke","stroke-width"],Ds=["points","fill","stroke","stroke-width"],Ss=["x","y","font-size","fill","font-weight"],qs=["x1","y1","x2","y2","stroke","stroke-width"],Is={key:1,class:"questioning-phase"},As={class:"question-container"},Ps={class:"question-options"},Qs=["onClick"],Ls={class:"option-letter"},zs={class:"option-content"},Fs={key:0,class:"option-text"},Bs={key:1,class:"option-color"},Os={key:2,class:"option-number"},Es={key:3,class:"option-shape"},Rs={width:"40",height:"40",viewBox:"0 0 40 40"},js=["fill"],Ws=["fill"],Vs=["fill"],Us={class:"question-controls"},Ns=["disabled"],Hs={key:2,class:"feedback-phase"},Js={class:"feedback-container"},Xs={class:"feedback-header"},Ys={class:"feedback-text"},Gs={class:"feedback-title"},Ks={class:"feedback-explanation"},Zs={class:"feedback-details"},en={class:"detail-item"},tn={class:"detail-value"},sn={class:"detail-item"},nn={class:"detail-value"},on={class:"detail-item"},an={class:"detail-value"},ln={key:2,class:"results-phase"},rn={class:"results-container"},cn={class:"overall-results"},un={class:"result-card"},dn={class:"result-content"},vn={class:"result-value"},hn={class:"result-card"},pn={class:"result-content"},fn={class:"result-value"},mn={class:"result-card"},_n={class:"result-content"},gn={class:"result-value"},yn={class:"result-card"},bn={class:"result-content"},$n={class:"result-value"},xn={class:"detailed-analysis"},kn={class:"analysis-grid"},Mn={class:"analysis-item"},wn={class:"category-chart"},Tn={class:"category-label"},Cn={class:"bar-container"},Dn={class:"accuracy-value"},Sn={class:"analysis-item"},qn={class:"time-distribution"},In={width:"300",height:"150",viewBox:"0 0 300 150"},An=["x","y","width","height"],Pn=["x"],Qn={class:"performance-feedback"},Ln={class:"feedback-content"},zn={class:"feedback-icon"},Fn={class:"feedback-text"},Bn={class:"feedback-title"},On={class:"feedback-description"},En={class:"improvement-suggestions"},Rn={__name:"DetailObservationTest",props:{testData:{type:Object,required:!0},settings:{type:Object,default:()=>({})}},emits:["test-completed","answer-submitted"],setup(Me,{emit:de}){const ne=Me,J=de,C=$("instruction"),T=$("observation"),x=$(0),g=$(0),R=$([]),k=$([]),H=$(0),w=$(0),F=$(0),X=$(0),M=$(10),B=$(null),Z=$(null),I=$(null),O=$(!1),j=$(0),z=b(()=>R.value[x.value]),U=b(()=>z.value?z.value.detailQuestions[g.value]:null),G=b(()=>({observation:"观察图像",questioning:"回答问题",feedback:"查看反馈"})[T.value]||""),L=b(()=>{var d;const c=ye(((d=z.value)==null?void 0:d.difficulty)||"medium");return(c-M.value)/c*100}),ie=b(()=>z.value?g.value===z.value.detailQuestions.length-1:!0),ve=b(()=>x.value===R.value.length-1),N=b(()=>{if(k.value.length===0)return 0;const c=k.value.reduce((l,_)=>l+_.correctCount,0),d=k.value.reduce((l,_)=>l+_.totalQuestions,0);return d>0?Math.round(c/d*100):0}),ee=b(()=>k.value.length===0?0:(k.value.reduce((d,l)=>d+l.totalTime,0)/k.value.length).toFixed(1)),he=b(()=>{const _=N.value,Q=Math.max(0,100-parseFloat(ee.value)/30*100);return Math.round(_*.7+Q*.3)}),pe=b(()=>{const c=N.value,d=k.value.reduce((l,_)=>{const Q=Math.max(0,100-_.averageTime/20*100);return l+Q},0)/k.value.length;return Math.round(c*.8+d*.2)}),$e=b(()=>{const c=new Set;return k.value.forEach(d=>{d.detailAnswers.forEach(l=>{c.add(l.category)})}),Array.from(c)}),fe=b(()=>{const c=[];k.value.forEach(V=>{V.detailAnswers.forEach(P=>{c.push(P.responseTime)})});const d=[0,5,10,15,20,30],l=new Array(d.length-1).fill(0);c.forEach(V=>{for(let P=0;P<d.length-1;P++)if(V>=d[P]&&V<d[P+1]){l[P]++;break}});const _=Math.max(...l),Q=40,K=100;return l.map((V,P)=>({x:P*50+25,y:130-V/_*K,width:Q,height:V/_*K,label:`${d[P]}-${d[P+1]}s`}))}),me=b(()=>{const c=[];return N.value<70&&c.push("建议提高观察的仔细程度，注意图像中的细节信息"),parseFloat(ee.value)>20&&c.push("可以通过练习提高观察和记忆的效率"),A("color")<70&&c.push("加强对颜色细节的观察和记忆训练"),A("shape")<70&&c.push("提高对形状和几何特征的识别能力"),c.length===0&&c.push("表现优秀，继续保持细致的观察能力！"),c}),te=()=>{C.value="testing",se(),ue(),H.value=Date.now()},se=()=>{const c=ne.testData.difficulty||"medium",d=oe(c);R.value=[];for(let l=0;l<d;l++){const _=_e(l,d,c);R.value.push(ge(_))}},oe=c=>({easy:6,medium:8,hard:10,expert:12})[c]||8,_e=(c,d,l)=>{const _=c/d;return l==="easy"?_<.7?"easy":"medium":l==="medium"?_<.3?"easy":_<.8?"medium":"hard":l==="hard"?_<.2?"medium":_<.7?"hard":"expert":_<.3?"hard":"expert"},ge=c=>{const l={easy:{elementCount:5,questionCount:3,observationTime:15},medium:{elementCount:8,questionCount:4,observationTime:12},hard:{elementCount:12,questionCount:5,observationTime:10},expert:{elementCount:15,questionCount:6,observationTime:8}}[c],_=xe(l.elementCount,c),Q=ae(_,l.questionCount);return{difficulty:c,background:ke(["#f0f8ff","#f5f5dc","#f0fff0","#fff8dc"]),elements:_,detailQuestions:Q,observationTime:l.observationTime}},xe=(c,d)=>{const l=[],_=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7","#a0e7e5","#ffeaa7"],Q=["circle","rectangle","triangle"],K=["A","B","C","1","2","3","★","♦","♠"];for(let V=0;V<c;V++)if((Math.random()<.7?"shape":"text")==="shape"){const Se=Q[Math.floor(Math.random()*Q.length)],be={type:Se,x:Math.random()*300+50,y:Math.random()*200+50,color:_[Math.floor(Math.random()*_.length)],size:Math.random()*20+10};Se==="rectangle"&&(be.width=Math.random()*40+20,be.height=Math.random()*30+15),Math.random()<.3&&(be.border="#333",be.borderWidth=2),l.push(be)}else l.push({type:"text",x:Math.random()*300+50,y:Math.random()*200+50,text:K[Math.floor(Math.random()*K.length)],color:_[Math.floor(Math.random()*_.length)],fontSize:Math.random()*10+16,fontWeight:Math.random()<.5?"normal":"bold"});if(d!=="easy"){const V=Math.floor(Math.random()*3)+1;for(let P=0;P<V;P++)l.push({type:"line",x1:Math.random()*400,y1:Math.random()*300,x2:Math.random()*400,y2:Math.random()*300,color:_[Math.floor(Math.random()*_.length)],width:Math.random()*3+1})}return l},ae=(c,d,l)=>{const _=[],Q=["color","shape","count","position","size","text"];for(let K=0;K<d;K++){const V=Q[Math.floor(Math.random()*Q.length)],P=re(c,V);P&&_.push(P)}return _},re=(c,d,l)=>{const _=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7","#a0e7e5","#ffeaa7"],Q=["红色","青色","蓝色","黄色","紫色","浅青","浅黄"];switch(d){case"color":const K=c.filter(E=>E.color);if(K.length===0)return null;const V=K[Math.floor(Math.random()*K.length)].color,P=_.indexOf(V),Se=Q[P]||"未知",be=[{type:"color",color:V,label:Se},{type:"color",color:_[(P+1)%_.length],label:Q[(P+1)%Q.length]},{type:"color",color:_[(P+2)%_.length],label:Q[(P+2)%Q.length]},{type:"color",color:_[(P+3)%_.length],label:Q[(P+3)%Q.length]}];return{category:"color",question:"图像中出现了哪种颜色的元素？",options:ce(be),correctAnswer:be.findIndex(E=>E.color===V),explanation:`图像中确实包含${Se}的元素。`};case"shape":const Fe=c.filter(E=>["circle","rectangle","triangle"].includes(E.type));if(Fe.length===0)return null;const Re=Fe[Math.floor(Math.random()*Fe.length)].type,Xe={circle:"圆形",rectangle:"矩形",triangle:"三角形"},je=[{type:"shape",shape:"circle",label:"圆形",color:"#666"},{type:"shape",shape:"rectangle",label:"矩形",color:"#666"},{type:"shape",shape:"triangle",label:"三角形",color:"#666"}];return{category:"shape",question:"图像中包含以下哪种形状？",options:je,correctAnswer:je.findIndex(E=>E.shape===Re),explanation:`图像中确实包含${Xe[Re]}。`};case"count":const Te=c.filter(E=>E.type==="circle").length,We=[{type:"number",value:Te},{type:"number",value:Math.max(0,Te-1)},{type:"number",value:Te+1},{type:"number",value:Te+2}].filter(E=>E.value>=0);return{category:"count",question:"图像中有多少个圆形？",options:ce(We),correctAnswer:We.findIndex(E=>E.value===Te),explanation:`图像中共有${Te}个圆形。`};case"text":const Be=c.filter(E=>E.type==="text");if(Be.length===0)return null;const Ae=Be[Math.floor(Math.random()*Be.length)].text,Oe=["A","B","C","1","2","3","★","♦","♠"].filter(E=>E!==Ae),Ve=[{type:"text",text:Ae},{type:"text",text:Oe[0]},{type:"text",text:Oe[1]},{type:"text",text:Oe[2]}];return{category:"text",question:"图像中包含以下哪个文字或符号？",options:ce(Ve),correctAnswer:Ve.findIndex(E=>E.text===Ae),explanation:`图像中确实包含文字或符号${Ae}。`};default:return null}},ce=c=>{const d=[...c];for(let l=d.length-1;l>0;l--){const _=Math.floor(Math.random()*(l+1));[d[l],d[_]]=[d[_],d[l]]}return d},ke=c=>c[Math.floor(Math.random()*c.length)],ye=c=>({easy:15,medium:12,hard:10,expert:8})[c]||12,ue=()=>{T.value="observation",X.value=ye(z.value.difficulty),M.value=X.value,Z.value=setInterval(()=>{M.value--,M.value<=0&&(clearInterval(Z.value),v())},1e3)},v=()=>{T.value="questioning",g.value=0,I.value=null,w.value=Date.now(),h()},h=()=>{F.value=0,B.value=setInterval(()=>{F.value++},1e3)},n=c=>{I.value=c},a=()=>{if(I.value===null)return;clearInterval(B.value);const c=(Date.now()-w.value)/1e3,d=I.value===U.value.correctAnswer;O.value=d,j.value=c.toFixed(1),k.value[x.value]||(k.value[x.value]={questionIndex:x.value,detailAnswers:[],correctCount:0,totalQuestions:z.value.detailQuestions.length,totalTime:0}),k.value[x.value].detailAnswers.push({questionIndex:g.value,selectedAnswer:I.value,correctAnswer:U.value.correctAnswer,isCorrect:d,responseTime:c,category:U.value.category}),d&&k.value[x.value].correctCount++,k.value[x.value].totalTime+=c,J("answer-submitted",{questionIndex:x.value,detailQuestionIndex:g.value,selectedAnswer:I.value,correctAnswer:U.value.correctAnswer,isCorrect:d,responseTime:c}),T.value="feedback"},t=()=>{ie.value?ve.value?s():(x.value++,ue()):(g.value++,I.value=null,w.value=Date.now(),T.value="questioning",h())},s=()=>{C.value="results",k.value.forEach(c=>{c.averageTime=c.totalTime/c.totalQuestions}),J("test-completed",{testType:"detail-observation",results:{overallAccuracy:N.value,averageTime:parseFloat(ee.value),finalScore:he.value,observationScore:pe.value,answers:k.value,totalTime:(Date.now()-H.value)/1e3}})},p=(c,d,l)=>{const _=l*Math.sqrt(3)/2;return`${c},${d-_/2} ${c-l/2},${d+_/2} ${c+l/2},${d+_/2}`},m=()=>{const c=U.value.options[U.value.correctAnswer];return c.type==="text"?c.text:c.type==="color"?c.label:c.type==="number"?c.value.toString():c.type==="shape"?c.label:""},y=()=>{if(I.value===null)return"未选择";const c=U.value.options[I.value];return c.type==="text"?c.text:c.type==="color"?c.label:c.type==="number"?c.value.toString():c.type==="shape"?c.label:""},i=c=>{const d=Math.floor(c/60),l=c%60;return`${d.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`},f=c=>({color:"颜色识别",shape:"形状识别",count:"数量统计",position:"位置记忆",size:"大小比较",text:"文字识别"})[c]||c,A=c=>{const d=[];if(k.value.forEach(_=>{_.detailAnswers.forEach(Q=>{Q.category===c&&d.push(Q)})}),d.length===0)return 0;const l=d.filter(_=>_.isCorrect).length;return Math.round(l/d.length*100)},W=c=>c>=90?"excellent":c>=80?"good":c>=70?"average":"poor",we=c=>c>=90?"🏆":c>=80?"👍":c>=70?"👌":"💪",De=c=>c>=90?"优秀表现":c>=80?"良好表现":c>=70?"一般表现":"需要提高",Je=c=>c>=90?"您的细节观察能力非常出色，能够准确捕捉和记忆图像中的各种细节信息。":c>=80?"您具有良好的细节观察能力，在大多数情况下能够准确识别图像细节。":c>=70?"您的细节观察能力处于平均水平，通过练习可以进一步提高。":"建议加强细节观察训练，提高对图像信息的敏感度和记忆能力。";return Pe(()=>{}),Qe(()=>{B.value&&clearInterval(B.value),Z.value&&clearInterval(Z.value)}),Ee(()=>ne.testData,c=>{c&&C.value==="instruction"&&(x.value=0,g.value=0,k.value=[],I.value=null)},{deep:!0}),(c,d)=>(r(),u("div",as,[e("div",ls,[C.value==="instruction"?(r(),u("div",is,[e("div",{class:"instruction-content"},[d[0]||(d[0]=Le('<h3 data-v-225301a9>细节观察测试</h3><div class="instruction-text" data-v-225301a9><p data-v-225301a9>在这个测试中，您需要仔细观察图像并记住其中的细节信息。</p><div class="instruction-steps" data-v-225301a9><div class="step-item" data-v-225301a9><span class="step-number" data-v-225301a9>1</span><span class="step-text" data-v-225301a9>仔细观察展示的图像</span></div><div class="step-item" data-v-225301a9><span class="step-number" data-v-225301a9>2</span><span class="step-text" data-v-225301a9>记住图像中的重要细节</span></div><div class="step-item" data-v-225301a9><span class="step-number" data-v-225301a9>3</span><span class="step-text" data-v-225301a9>回答关于图像细节的问题</span></div><div class="step-item" data-v-225301a9><span class="step-number" data-v-225301a9>4</span><span class="step-text" data-v-225301a9>尽可能准确地回答每个问题</span></div></div></div>',2)),e("button",{class:"btn-start",onClick:te},"开始测试")])])):D("",!0),C.value==="testing"?(r(),u("div",rs,[e("div",cs,[e("div",us,[e("span",ds,"第 "+o(x.value+1)+" / "+o(R.value.length)+" 题",1),e("span",vs,o(i(F.value)),1)]),e("div",hs,[d[1]||(d[1]=e("span",{class:"phase-label"},"当前阶段:",-1)),e("span",ps,o(G.value),1)])]),T.value==="observation"?(r(),u("div",fs,[e("div",ms,[d[3]||(d[3]=e("h4",null,"请仔细观察下面的图像",-1)),e("div",_s,[e("div",gs,[(r(),u("svg",ys,[d[2]||(d[2]=e("circle",{cx:"30",cy:"30",r:"25",fill:"none",stroke:"#e0e0e0","stroke-width":"4"},null,-1)),e("circle",{cx:"30",cy:"30",r:"25",fill:"none",stroke:"var(--color-primary)","stroke-width":"4","stroke-linecap":"round","stroke-dasharray":`${L.value*1.57} 157`,transform:"rotate(-90 30 30)"},null,8,bs)])),e("div",$s,o(M.value)+"s",1)])])]),e("div",xs,[e("div",{class:"detail-image",style:le({backgroundImage:`url(${z.value.imageUrl})`})},[e("div",ks,[(r(),u("svg",Ms,[e("rect",{width:"400",height:"300",fill:z.value.background},null,8,ws),(r(!0),u(S,null,q(z.value.elements,(l,_)=>(r(),u("g",{key:_},[l.type==="circle"?(r(),u("circle",{key:0,cx:l.x,cy:l.y,r:l.size,fill:l.color,stroke:l.border||"none","stroke-width":l.borderWidth||0},null,8,Ts)):l.type==="rectangle"?(r(),u("rect",{key:1,x:l.x-l.width/2,y:l.y-l.height/2,width:l.width,height:l.height,fill:l.color,stroke:l.border||"none","stroke-width":l.borderWidth||0},null,8,Cs)):l.type==="triangle"?(r(),u("polygon",{key:2,points:p(l.x,l.y,l.size),fill:l.color,stroke:l.border||"none","stroke-width":l.borderWidth||0},null,8,Ds)):D("",!0),l.type==="text"?(r(),u("text",{key:3,x:l.x,y:l.y,"font-size":l.fontSize||16,fill:l.color,"font-weight":l.fontWeight||"normal","text-anchor":"middle","dominant-baseline":"middle"},o(l.text),9,Ss)):D("",!0),l.type==="line"?(r(),u("line",{key:4,x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,stroke:l.color,"stroke-width":l.width||2},null,8,qs)):D("",!0)]))),128))]))])],4)])])):D("",!0),T.value==="questioning"?(r(),u("div",Is,[e("div",As,[e("h4",null,o(U.value.question),1),e("div",Ps,[(r(!0),u(S,null,q(U.value.options,(l,_)=>(r(),u("div",{key:_,class:Y(["option-item",{selected:I.value===_}]),onClick:Q=>n(_)},[e("div",Ls,o(String.fromCharCode(65+_)),1),e("div",zs,[l.type==="text"?(r(),u("div",Fs,o(l.text),1)):l.type==="color"?(r(),u("div",Bs,[e("div",{class:"color-sample",style:le({backgroundColor:l.color})},null,4),e("span",null,o(l.label),1)])):l.type==="number"?(r(),u("div",Os,o(l.value),1)):l.type==="shape"?(r(),u("div",Es,[(r(),u("svg",Rs,[l.shape==="circle"?(r(),u("circle",{key:0,cx:"20",cy:"20",r:"15",fill:l.color||"#333"},null,8,js)):l.shape==="rectangle"?(r(),u("rect",{key:1,x:"5",y:"10",width:"30",height:"20",fill:l.color||"#333"},null,8,Ws)):l.shape==="triangle"?(r(),u("polygon",{key:2,points:"20,5 35,35 5,35",fill:l.color||"#333"},null,8,Vs)):D("",!0)])),e("span",null,o(l.label),1)])):D("",!0)])],10,Qs))),128))]),e("div",Us,[e("button",{class:"btn-submit",onClick:a,disabled:I.value===null},o(ie.value?"下一题":"下一个问题"),9,Ns)])])])):D("",!0),T.value==="feedback"?(r(),u("div",Hs,[e("div",Js,[e("div",Xs,[e("div",{class:Y(["feedback-icon",{correct:O.value,incorrect:!O.value}])},o(O.value?"✓":"✗"),3),e("div",Ys,[e("div",Gs,o(O.value?"回答正确！":"回答错误"),1),e("div",Ks,o(U.value.explanation),1)])]),e("div",Zs,[e("div",en,[d[4]||(d[4]=e("span",{class:"detail-label"},"正确答案:",-1)),e("span",tn,o(m()),1)]),e("div",sn,[d[5]||(d[5]=e("span",{class:"detail-label"},"您的答案:",-1)),e("span",nn,o(y()),1)]),e("div",on,[d[6]||(d[6]=e("span",{class:"detail-label"},"用时:",-1)),e("span",an,o(j.value)+"秒",1)])]),e("button",{class:"btn-continue",onClick:t},o(ve.value?"查看结果":"继续测试"),1)])])):D("",!0)])):D("",!0),C.value==="results"?(r(),u("div",ln,[e("div",rn,[d[20]||(d[20]=e("h3",null,"细节观察测试结果",-1)),e("div",cn,[e("div",un,[d[8]||(d[8]=e("div",{class:"result-icon"},"🎯",-1)),e("div",dn,[e("div",vn,o(N.value)+"%",1),d[7]||(d[7]=e("div",{class:"result-label"},"总体准确率",-1))])]),e("div",hn,[d[10]||(d[10]=e("div",{class:"result-icon"},"⚡",-1)),e("div",pn,[e("div",fn,o(ee.value)+"s",1),d[9]||(d[9]=e("div",{class:"result-label"},"平均用时",-1))])]),e("div",mn,[d[12]||(d[12]=e("div",{class:"result-icon"},"📊",-1)),e("div",_n,[e("div",gn,o(he.value),1),d[11]||(d[11]=e("div",{class:"result-label"},"综合得分",-1))])]),e("div",yn,[d[14]||(d[14]=e("div",{class:"result-icon"},"👁️",-1)),e("div",bn,[e("div",$n,o(pe.value)+"%",1),d[13]||(d[13]=e("div",{class:"result-label"},"观察能力",-1))])])]),e("div",xn,[d[17]||(d[17]=e("h4",null,"详细分析",-1)),e("div",kn,[e("div",Mn,[d[15]||(d[15]=e("h5",null,"题型表现",-1)),e("div",wn,[(r(!0),u(S,null,q($e.value,l=>(r(),u("div",{key:l,class:"category-bar"},[e("span",Tn,o(f(l)),1),e("div",Cn,[e("div",{class:"bar-fill",style:le({width:A(l)+"%"})},null,4)]),e("span",Dn,o(A(l))+"%",1)]))),128))])]),e("div",Sn,[d[16]||(d[16]=e("h5",null,"反应时间分布",-1)),e("div",qn,[(r(),u("svg",In,[(r(!0),u(S,null,q(fe.value,(l,_)=>(r(),u("g",{key:_},[e("rect",{x:l.x,y:l.y,width:l.width,height:l.height,fill:"var(--color-primary)",opacity:"0.7"},null,8,An),e("text",{x:l.x+l.width/2,y:145,"text-anchor":"middle","font-size":"10",fill:"#666"},o(l.label),9,Pn)]))),128))]))])])])]),e("div",Qn,[d[19]||(d[19]=e("h4",null,"表现评价",-1)),e("div",Ln,[e("div",{class:Y(["feedback-item",W(N.value)])},[e("div",zn,o(we(N.value)),1),e("div",Fn,[e("div",Bn,o(De(N.value)),1),e("div",On,o(Je(N.value)),1)])],2),e("div",En,[d[18]||(d[18]=e("h5",null,"改进建议",-1)),e("ul",null,[(r(!0),u(S,null,q(me.value,l=>(r(),u("li",{key:l},o(l),1))),128))])])])])])])):D("",!0)])]))}},jn=ze(Rn,[["__scopeId","data-v-225301a9"]]);const Wn={class:"change-detection-test"},Vn={class:"test-container"},Un={key:0,class:"instruction-phase"},Nn={key:1,class:"testing-phase"},Hn={class:"test-header"},Jn={class:"test-info"},Xn={class:"question-counter"},Yn={class:"timer"},Gn={class:"found-differences"},Kn={class:"progress-bar"},Zn={class:"question-container"},eo={class:"images-container"},to={class:"image-panel"},so={class:"image-wrapper"},no=["cx","cy"],oo={class:"image-panel"},ao={class:"image-wrapper"},lo=["cx","cy"],io={class:"question-controls"},ro=["disabled"],co={key:2,class:"feedback-phase"},uo={class:"feedback-container"},vo={class:"feedback-header"},ho={class:"feedback-text"},po={class:"feedback-title"},fo={class:"feedback-explanation"},mo={class:"feedback-details"},_o={class:"detail-item"},go={class:"detail-value"},yo={class:"detail-item"},bo={class:"detail-value"},$o={class:"detail-item"},xo={class:"detail-value"},ko={class:"detail-item"},Mo={class:"detail-value"},wo={class:"all-differences"},To={class:"differences-grid"},Co={class:"difference-status"},Do={class:"difference-description"},So={key:3,class:"results-phase"},qo={class:"results-container"},Io={class:"overall-results"},Ao={class:"result-card"},Po={class:"result-value"},Qo={class:"result-card"},Lo={class:"result-value"},zo={class:"result-card"},Fo={class:"result-value"},Bo={class:"result-card"},Oo={class:"result-value"},Eo={class:"detailed-analysis"},Ro={class:"analysis-grid"},jo={class:"analysis-item"},Wo={class:"difficulty-chart"},Vo={class:"difficulty-label"},Uo={class:"bar-container"},No={class:"accuracy-value"},Ho={class:"analysis-item"},Jo={class:"efficiency-stats"},Xo={class:"stat-row"},Yo={class:"stat-value"},Go={class:"stat-row"},Ko={class:"stat-value"},Zo={class:"stat-row"},ea={class:"stat-value"},ta={class:"stat-row"},sa={class:"stat-value"},na={class:"analysis-item"},oa={class:"time-distribution"},aa={class:"distribution-chart"},la=["title"],ia={class:"performance-feedback"},ra={class:"feedback-icon"},ca={class:"feedback-text"},ua={class:"feedback-title"},da={class:"feedback-description"},va={class:"improvement-suggestions"},ha={key:0},pa={key:1},fa={key:2},ma={key:3},_a={__name:"ChangeDetectionTest",props:{testData:{type:Object,default:()=>({difficulty:"medium",questionCount:8,timeLimit:480})}},emits:["test-completed","answer-submitted"],setup(Me,{emit:de}){const ne=Me,J=de,C=$("instruction"),T=$(0),x=$([]),g=$([]),R=$([]),k=$(null),H=$(null),w=$(0),F=$(null),X=$(0),M=b(()=>R.value[T.value]||{}),B=b(()=>(T.value+1)/R.value.length*100),Z=b(()=>T.value===R.value.length-1),I=b(()=>{if(g.value.length===0)return 0;const t=g.value.reduce((p,m)=>p+m.totalDifferences,0),s=g.value.reduce((p,m)=>p+m.foundDifferences,0);return t>0?Math.round(s/t*100):0}),O=b(()=>g.value.length===0?0:(g.value.reduce((s,p)=>s+p.responseTime,0)/g.value.length).toFixed(1)),j=b(()=>{const t=I.value,s=Math.max(0,60-parseFloat(O.value))*1,p=L.value*.5;return Math.min(100,Math.round(t+s+p))}),z=b(()=>{const t=I.value,s=L.value;return Math.round(t*.7+s*.3)}),U=b(()=>{if(g.value.length===0)return 0;const t=g.value.reduce((p,m)=>p+m.foundDifferences,0),s=g.value.reduce((p,m)=>p+m.responseTime,0);return t>0?(s/t).toFixed(1):0}),G=b(()=>{if(g.value.length===0)return 0;const t=g.value.map(s=>s.foundDifferences>0?s.responseTime/s.foundDifferences:1/0).filter(s=>s!==1/0);return t.length>0?Math.min(...t).toFixed(1):0}),L=b(()=>{if(g.value.length===0)return 0;const t=g.value.filter(s=>s.foundDifferences===s.totalDifferences).length;return Math.round(t/g.value.length*100)}),ie=b(()=>g.value.filter(t=>t.foundDifferences===t.totalDifferences).length),ve=()=>{C.value="testing",k.value=Date.now(),N(),se()},N=()=>{const{difficulty:t,questionCount:s}=ne.testData;R.value=[];for(let p=0;p<s;p++)R.value.push(ee(t,p))},ee=(t,s)=>{const p={easy:{differences:3,complexity:2},medium:{differences:4,complexity:3},hard:{differences:5,complexity:4},expert:{differences:6,complexity:5}},m=p[t]||p.medium,y=he(m.complexity),i=pe(y,m.differences);return{id:s,question:`请找出两幅图像之间的 ${m.differences} 个差异`,leftImage:y,rightImage:$e(y,i),differences:i,difficulty:t}},he=t=>{const s=[],p=["circle","square","triangle","diamond"],m=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c"];for(let y=0;y<t*3;y++)s.push({id:y,type:p[Math.floor(Math.random()*p.length)],x:50+Math.random()*300,y:50+Math.random()*200,size:20+Math.random()*30,color:m[Math.floor(Math.random()*m.length)],rotation:Math.random()*360});return s},pe=(t,s)=>{const p=[],m=new Set;for(let y=0;y<s;y++){let i;do i=Math.floor(Math.random()*t.length);while(m.has(i));m.add(i);const f=t[i],A=Math.random();let W="";A<.25?W="颜色变化":A<.5?W="大小变化":A<.75?W="形状变化":W="位置变化",p.push({elementIndex:i,type:A<.25?"color":A<.5?"size":A<.75?"shape":"position",x:f.x,y:f.y,description:W})}return p},$e=(t,s)=>{const p=JSON.parse(JSON.stringify(t)),m=["circle","square","triangle","diamond"],y=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c"];return s.forEach(i=>{const f=p[i.elementIndex];switch(i.type){case"color":do f.color=y[Math.floor(Math.random()*y.length)];while(f.color===t[i.elementIndex].color);break;case"size":f.size=f.size>30?f.size-15:f.size+15;break;case"shape":do f.type=m[Math.floor(Math.random()*m.length)];while(f.type===t[i.elementIndex].type);break;case"position":f.x=Math.max(30,Math.min(370,f.x+(Math.random()-.5)*100)),f.y=Math.max(30,Math.min(270,f.y+(Math.random()-.5)*80)),i.x=f.x,i.y=f.y;break}}),p},fe=t=>!t||!Array.isArray(t)?"":t.map(s=>{const{type:p,x:m,y,size:i,color:f,rotation:A=0}=s,W=A?`transform="rotate(${A} ${m} ${y})"`:"";switch(p){case"circle":return`<circle cx="${m}" cy="${y}" r="${i/2}" fill="${f}" ${W}/>`;case"square":return`<rect x="${m-i/2}" y="${y-i/2}" width="${i}" height="${i}" fill="${f}" ${W}/>`;case"triangle":return`<polygon points="${me(m,y,i)}" fill="${f}" ${W}/>`;case"diamond":return`<polygon points="${`${m},${y-i/2} ${m+i/2},${y} ${m},${y+i/2} ${m-i/2},${y}`}" fill="${f}" ${W}/>`;default:return""}}).join(""),me=(t,s,p)=>{const m=p*Math.sqrt(3)/2;return`${t},${s-m/2} ${t-p/2},${s+m/2} ${t+p/2},${s+m/2}`},te=(t,s)=>{var A,W;const p=t.target.getBoundingClientRect(),m=t.clientX-p.left,y=t.clientY-p.top,i=25,f=(A=M.value.differences)==null?void 0:A.find(we=>Math.abs(we.x-m)<i&&Math.abs(we.y-y)<i);f&&(x.value.some(De=>Math.abs(De.x-f.x)<i&&Math.abs(De.y-f.y)<i)||(x.value.push({x:f.x,y:f.y,type:f.type,description:f.description}),x.value.length===((W=M.value.differences)==null?void 0:W.length)&&setTimeout(()=>{oe()},500)))},se=()=>{w.value=0,H.value=Date.now(),F.value=setInterval(()=>{w.value++},1e3)},oe=()=>{var s,p;clearInterval(F.value);const t=(Date.now()-H.value)/1e3;X.value=t.toFixed(1),g.value.push({questionIndex:T.value,foundDifferences:x.value.length,totalDifferences:((s=M.value.differences)==null?void 0:s.length)||0,responseTime:t,difficulty:M.value.difficulty,differences:[...x.value]}),J("answer-submitted",{questionIndex:T.value,foundDifferences:x.value.length,totalDifferences:((p=M.value.differences)==null?void 0:p.length)||0,responseTime:t}),C.value="feedback"},_e=()=>{oe()},ge=()=>{Z.value?xe():(T.value++,x.value=[],C.value="testing",se())},xe=()=>{C.value="results",J("test-completed",{testType:"change-detection",results:{overallAccuracy:I.value,averageTime:parseFloat(O.value),finalScore:j.value,detectionScore:z.value,answers:g.value,totalTime:(Date.now()-k.value)/1e3}})},ae=()=>{const t=re();return t===100?"excellent":t>=75?"good":"average"},re=()=>{var s;const t=((s=M.value.differences)==null?void 0:s.length)||0;return t>0?Math.round(x.value.length/t*100):0},ce=()=>{const t=re();return t===100?"完美表现！":t>=75?"表现良好！":t>=50?"还不错！":"继续努力！"},ke=t=>{const s=Math.floor(t/60),p=t%60;return`${s.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`},ye=t=>({easy:"简单",medium:"中等",hard:"困难",expert:"专家"})[t]||t,ue=t=>{const s=g.value.filter(y=>y.difficulty===t);if(s.length===0)return 0;const p=s.reduce((y,i)=>y+i.totalDifferences,0),m=s.reduce((y,i)=>y+i.foundDifferences,0);return p>0?Math.round(m/p*100):0},v=t=>t>=90?"excellent":t>=80?"good":t>=70?"average":"poor",h=t=>t>=90?"🏆":t>=80?"👍":t>=70?"👌":"💪",n=t=>t>=90?"优秀表现":t>=80?"良好表现":t>=70?"一般表现":"需要提高",a=t=>t>=90?"您的变化检测能力非常出色，能够快速准确地发现图像中的细微差异。":t>=80?"您具有良好的变化检测能力，在大多数情况下能够准确识别差异。":t>=70?"您的变化检测能力处于平均水平，通过练习可以进一步提高。":"建议加强变化检测训练，提高对视觉信息变化的敏感度和观察能力。";return Pe(()=>{}),Qe(()=>{F.value&&clearInterval(F.value)}),Ee(()=>ne.testData,t=>{t&&C.value==="instruction"&&(T.value=0,x.value=[],g.value=[])},{deep:!0}),(t,s)=>{var p,m,y,i;return r(),u("div",Wn,[e("div",Vn,[C.value==="instruction"?(r(),u("div",Un,[e("div",{class:"instruction-content"},[s[2]||(s[2]=Le('<h3 data-v-907a1ac3>变化检测测试</h3><p class="instruction-text" data-v-907a1ac3> 这个测试将评估您的变化检测能力。您需要观察两个相似的图像，找出它们之间的差异。 </p><div class="instruction-steps" data-v-907a1ac3><div class="step-item" data-v-907a1ac3><div class="step-number" data-v-907a1ac3>1</div><div class="step-text" data-v-907a1ac3>仔细观察左右两幅图像</div></div><div class="step-item" data-v-907a1ac3><div class="step-number" data-v-907a1ac3>2</div><div class="step-text" data-v-907a1ac3>找出图像之间的差异</div></div><div class="step-item" data-v-907a1ac3><div class="step-number" data-v-907a1ac3>3</div><div class="step-text" data-v-907a1ac3>点击差异位置进行标记</div></div><div class="step-item" data-v-907a1ac3><div class="step-number" data-v-907a1ac3>4</div><div class="step-text" data-v-907a1ac3>在规定时间内找出所有差异</div></div></div>',3)),e("button",{onClick:ve,class:"btn-start"}," 开始测试 ")])])):C.value==="testing"?(r(),u("div",Nn,[e("div",Hn,[e("div",Jn,[e("div",Xn," 题目 "+o(T.value+1)+" / "+o(R.value.length),1),e("div",Yn," ⏱️ "+o(ke(w.value)),1),e("div",Gn," 已找到: "+o(x.value.length)+" / "+o(((p=M.value.differences)==null?void 0:p.length)||0),1)]),e("div",Kn,[e("div",{class:"progress-fill",style:le({width:B.value+"%"})},null,4)])]),e("div",Zn,[e("h4",null,o(M.value.question),1),e("div",eo,[e("div",to,[s[3]||(s[3]=e("h5",null,"图像 A",-1)),e("div",so,[(r(),u("svg",{width:"400",height:"300",class:"comparison-image",onClick:s[0]||(s[0]=f=>te(f))},[(r(),Ce(Ue("g"),{innerHTML:fe(M.value.leftImage)},null,8,["innerHTML"])),(r(!0),u(S,null,q(x.value,(f,A)=>(r(),u("circle",{key:"left-"+A,cx:f.x,cy:f.y,r:"15",fill:"none",stroke:"#28a745","stroke-width":"3",class:"difference-marker"},null,8,no))),128))]))])]),e("div",oo,[s[4]||(s[4]=e("h5",null,"图像 B",-1)),e("div",ao,[(r(),u("svg",{width:"400",height:"300",class:"comparison-image",onClick:s[1]||(s[1]=f=>te(f))},[(r(),Ce(Ue("g"),{innerHTML:fe(M.value.rightImage)},null,8,["innerHTML"])),(r(!0),u(S,null,q(x.value,(f,A)=>(r(),u("circle",{key:"right-"+A,cx:f.x,cy:f.y,r:"15",fill:"none",stroke:"#28a745","stroke-width":"3",class:"difference-marker"},null,8,lo))),128))]))])])]),e("div",io,[e("button",{onClick:oe,disabled:x.value.length===0,class:"btn-submit"},o(x.value.length===(((m=M.value.differences)==null?void 0:m.length)||0)?"完成":"提交当前结果"),9,ro),e("button",{onClick:_e,class:"btn-skip"}," 跳过此题 ")])])])):C.value==="feedback"?(r(),u("div",co,[e("div",uo,[e("div",vo,[e("div",{class:Y(["feedback-icon",ae()])},o(ae()==="excellent"?"🏆":ae()==="good"?"👍":"👌"),3),e("div",ho,[e("div",po,o(ce()),1),e("div",fo," 您找到了 "+o(x.value.length)+" / "+o(((y=M.value.differences)==null?void 0:y.length)||0)+" 个差异 ",1)])]),e("div",mo,[e("div",_o,[s[5]||(s[5]=e("span",{class:"detail-label"},"找到差异：",-1)),e("span",go,o(x.value.length)+" 个",1)]),e("div",yo,[s[6]||(s[6]=e("span",{class:"detail-label"},"总差异数：",-1)),e("span",bo,o(((i=M.value.differences)==null?void 0:i.length)||0)+" 个",1)]),e("div",$o,[s[7]||(s[7]=e("span",{class:"detail-label"},"准确率：",-1)),e("span",xo,o(re())+"%",1)]),e("div",ko,[s[8]||(s[8]=e("span",{class:"detail-label"},"用时：",-1)),e("span",Mo,o(X.value)+"秒",1)])]),e("div",wo,[s[9]||(s[9]=e("h5",null,"所有差异位置：",-1)),e("div",To,[(r(!0),u(S,null,q(M.value.differences,(f,A)=>(r(),u("div",{class:"difference-item",key:A},[e("div",Co,o(x.value.some(W=>Math.abs(W.x-f.x)<20&&Math.abs(W.y-f.y)<20)?"✓":"✗"),1),e("div",Do,o(f.description),1)]))),128))])]),e("button",{onClick:ge,class:"btn-continue"},o(Z.value?"查看结果":"下一题"),1)])])):C.value==="results"?(r(),u("div",So,[e("div",qo,[s[30]||(s[30]=e("h3",null,"变化检测测试结果",-1)),e("div",Io,[e("div",Ao,[s[10]||(s[10]=e("div",{class:"result-icon"},"🎯",-1)),e("div",Po,o(I.value)+"%",1),s[11]||(s[11]=e("div",{class:"result-label"},"总体准确率",-1))]),e("div",Qo,[s[12]||(s[12]=e("div",{class:"result-icon"},"⏱️",-1)),e("div",Lo,o(O.value),1),s[13]||(s[13]=e("div",{class:"result-label"},"平均用时(秒)",-1))]),e("div",zo,[s[14]||(s[14]=e("div",{class:"result-icon"},"⭐",-1)),e("div",Fo,o(j.value),1),s[15]||(s[15]=e("div",{class:"result-label"},"综合得分",-1))]),e("div",Bo,[s[16]||(s[16]=e("div",{class:"result-icon"},"👁️",-1)),e("div",Oo,o(z.value),1),s[17]||(s[17]=e("div",{class:"result-label"},"检测能力得分",-1))])]),e("div",Eo,[s[26]||(s[26]=e("h4",null,"详细分析",-1)),e("div",Ro,[e("div",jo,[s[18]||(s[18]=e("h5",null,"难度表现",-1)),e("div",Wo,[(r(),u(S,null,q(["easy","medium","hard","expert"],f=>e("div",{key:f,class:"difficulty-bar"},[e("div",Vo,o(ye(f)),1),e("div",Uo,[e("div",{class:"bar-fill",style:le({width:ue(f)+"%"})},null,4)]),e("div",No,o(ue(f))+"%",1)])),64))])]),e("div",Ho,[s[23]||(s[23]=e("h5",null,"检测效率",-1)),e("div",Jo,[e("div",Xo,[s[19]||(s[19]=e("span",{class:"stat-label"},"平均检测时间：",-1)),e("span",Yo,o(U.value)+"秒/个",1)]),e("div",Go,[s[20]||(s[20]=e("span",{class:"stat-label"},"最快检测：",-1)),e("span",Ko,o(G.value)+"秒",1)]),e("div",Zo,[s[21]||(s[21]=e("span",{class:"stat-label"},"检测成功率：",-1)),e("span",ea,o(L.value)+"%",1)]),e("div",ta,[s[22]||(s[22]=e("span",{class:"stat-label"},"完全正确题目：",-1)),e("span",sa,o(ie.value)+" / "+o(g.value.length),1)])])]),e("div",na,[s[25]||(s[25]=e("h5",null,"反应时间分布",-1)),e("div",oa,[e("div",aa,[(r(!0),u(S,null,q(g.value,(f,A)=>(r(),u("div",{key:A,class:"time-bar",style:le({height:Math.min(f.responseTime/60*100,100)+"%"}),title:`第${A+1}题: ${f.responseTime.toFixed(1)}秒`},null,12,la))),128))]),s[24]||(s[24]=e("div",{class:"distribution-labels"},[e("span",null,"题目序号")],-1))])])])]),e("div",ia,[s[29]||(s[29]=e("h4",null,"表现评价",-1)),e("div",{class:Y(["feedback-item",v(I.value)])},[e("div",ra,o(h(I.value)),1),e("div",ca,[e("div",ua,o(n(I.value)),1),e("div",da,o(a(I.value)),1)])],2),e("div",va,[s[28]||(s[28]=e("h5",null,"改进建议",-1)),e("ul",null,[I.value<70?(r(),u("li",ha,"加强视觉注意力训练，提高对细节变化的敏感度")):D("",!0),O.value>45?(r(),u("li",pa,"练习快速扫描技巧，提高检测效率")):D("",!0),L.value<80?(r(),u("li",fa,"重点训练系统性观察方法，避免遗漏")):D("",!0),ie.value<g.value.length/2?(r(),u("li",ma,"加强耐心和细致度，确保找全所有差异")):D("",!0),s[27]||(s[27]=e("li",null,"定期进行变化检测练习，保持和提升观察能力",-1))])])])])])):D("",!0)])])}}},ga=ze(_a,[["__scopeId","data-v-907a1ac3"]]);const ya={class:"observation-assessment"},ba={class:"assessment-container"},$a={key:0,class:"setup-phase"},xa={class:"setup-content"},ka={class:"settings-grid"},Ma={class:"setting-group"},wa={class:"difficulty-options"},Ta=["value"],Ca={class:"option-content"},Da={class:"option-title"},Sa={class:"option-desc"},qa={class:"setting-group"},Ia={class:"module-options"},Aa=["value"],Pa={class:"option-content"},Qa={class:"option-title"},La={class:"module-icon"},za={class:"option-desc"},Fa={class:"setting-group"},Ba={class:"personal-settings"},Oa={class:"setting-item"},Ea={class:"setting-item"},Ra={class:"setting-item"},ja={class:"setup-actions"},Wa=["disabled"],Va={key:1,class:"testing-phase"},Ua={class:"test-header"},Na={class:"test-progress"},Ha={class:"progress-bar"},Ja={class:"progress-text"},Xa={class:"test-timer"},Ya={class:"current-test"},Ga={key:2,class:"results-phase"},Ka={class:"results-container"},Za={class:"overall-score"},el={class:"score-circle"},tl={width:"200",height:"200",viewBox:"0 0 200 200"},sl=["stroke-dasharray"],nl={class:"score-content"},ol={class:"score-value"},al={class:"score-details"},ll={class:"score-item"},il={class:"score-item"},rl={class:"value"},cl={class:"score-item"},ul={class:"value"},dl={class:"score-item"},vl={class:"value"},hl={class:"ability-analysis"},pl={class:"analysis-content"},fl={class:"radar-chart"},ml={width:"300",height:"300",viewBox:"0 0 300 300"},_l={transform:"translate(150,150)"},gl={class:"radar-grid"},yl=["r"],bl=["x2","y2"],$l=["points"],xl=["cx","cy"],kl=["x","y"],Ml={class:"ability-details"},wl={class:"ability-header"},Tl={class:"ability-icon"},Cl={class:"ability-name"},Dl={class:"ability-score"},Sl={class:"ability-bar"},ql={class:"ability-description"},Il={class:"ability-feedback"},Al={class:"detailed-results"},Pl={class:"results-tabs"},Ql=["onClick"],Ll={class:"tab-content"},zl={key:0,class:"module-results"},Fl={class:"module-header"},Bl={class:"module-icon"},Ol={class:"module-name"},El={class:"module-score"},Rl={class:"module-stats"},jl={class:"stat-item"},Wl={class:"stat-value"},Vl={class:"stat-item"},Ul={class:"stat-value"},Nl={class:"stat-item"},Hl={class:"stat-value"},Jl={class:"module-feedback"},Xl={key:1,class:"question-details"},Yl={class:"question-header"},Gl={class:"question-number"},Kl={class:"question-type"},Zl={class:"question-details-content"},ei={class:"detail-item"},ti={class:"detail-value"},si={class:"detail-item"},ni={class:"detail-value"},oi={class:"detail-item"},ai={class:"detail-value"},li={key:2,class:"improvement-suggestions"},ii={class:"suggestion-header"},ri={class:"suggestion-icon"},ci={class:"suggestion-title"},ui={class:"suggestion-content"},di={class:"suggestion-actions"},vi={class:"training-methods"},hi={class:"method-tags"},pi=["onClick"],fi={__name:"ObservationAssessment",setup(Me){const de=Ye(),ne=Ge(),J=$("setup"),C=$(0),T=$(0),x=$(1200),g=$(null),R=$(0),k=$([]),H=$("modules"),w=$({difficulty:"medium",selectedModules:["visual-search","detail-observation","pattern-comparison","change-detection"],duration:"medium",feedbackMode:"delayed",enableHints:!0}),F=[{value:"easy",label:"简单",description:"适合初学者，题目相对简单，时间充裕"},{value:"medium",label:"中等",description:"标准难度，适合大多数用户"},{value:"hard",label:"困难",description:"高难度挑战，适合有经验的用户"},{value:"expert",label:"专家",description:"极高难度，适合专业人士"}],X=[{id:"visual-search",name:"视觉搜索",icon:"🔍",description:"在复杂场景中快速定位目标物体"},{id:"detail-observation",name:"细节观察",icon:"🔎",description:"观察和记忆图像中的细节信息"},{id:"pattern-comparison",name:"图形比较",icon:"📊",description:"比较图形之间的异同点"},{id:"change-detection",name:"变化检测",icon:"🔄",description:"检测图像中发生的变化"}],M=$([]),B=b(()=>M.value[C.value]),Z=b(()=>w.value.selectedModules.length>0),I=b(()=>T.value>0?C.value/T.value*100:0),O=b(()=>{if(k.value.length===0)return 0;const a=k.value.reduce((s,p)=>s+p.score,0),t=k.value.length*100;return Math.round(a/t*100)}),j=b(()=>{if(k.value.length===0)return 0;const a=k.value.filter(t=>t.correct).length;return Math.round(a/k.value.length*100)}),z=b(()=>k.value.length===0?0:(k.value.reduce((t,s)=>t+s.responseTime,0)/k.value.length).toFixed(1)),U=b(()=>k.value.length),G=b(()=>{const a=O.value;return a>=90?"优秀":a>=80?"良好":a>=70?"一般":a>=60?"及格":"需改进"}),L=b(()=>{const a={"visual-search":{name:"视觉搜索",icon:"🔍",scores:[]},"detail-observation":{name:"细节观察",icon:"🔎",scores:[]},"pattern-comparison":{name:"图形比较",icon:"📊",scores:[]},"change-detection":{name:"变化检测",icon:"🔄",scores:[]}};return k.value.forEach(t=>{a[t.type]&&a[t.type].scores.push(t.score)}),Object.entries(a).map(([t,s])=>{const p=s.scores.length>0?Math.round(s.scores.reduce((m,y)=>m+y,0)/s.scores.length):0;return{type:t,name:s.name,icon:s.icon,score:p,description:ae(t),feedback:getAbilityFeedback(t,p)}})}),ie=b(()=>L.value.map((a,t)=>{const s=t*2*Math.PI/L.value.length-Math.PI/2,p=a.score/100*125,m=Math.cos(s)*p,y=Math.sin(s)*p;return`${m},${y}`}).join(" ")),ve=b(()=>L.value.map((a,t)=>{const s=t*2*Math.PI/L.value.length-Math.PI/2,p=a.score/100*125;return{x:Math.cos(s)*p,y:Math.sin(s)*p}})),N=b(()=>{const a={};return k.value.forEach(t=>{a[t.type]||(a[t.type]={type:t.type,name:_e(t.type),icon:ge(t.type),scores:[],times:[],correct:0,total:0}),a[t.type].scores.push(t.score),a[t.type].times.push(t.responseTime),a[t.type].total++,t.correct&&a[t.type].correct++}),Object.values(a).map(t=>({...t,score:Math.round(t.scores.reduce((s,p)=>s+p,0)/t.scores.length),accuracy:Math.round(t.correct/t.total*100),averageTime:(t.times.reduce((s,p)=>s+p,0)/t.times.length).toFixed(1),completed:t.total,feedback:ce(t.type,t.correct/t.total)}))}),ee=b(()=>{const a=[];return L.value.forEach(t=>{t.score<70&&a.push({id:t.type,icon:t.icon,title:`提升${t.name}能力`,priority:t.score<50?"高":"中",description:`您的${t.name}能力得分为${t.score}%，建议通过针对性训练来提升。`,methods:ke(t.type),trainingPath:`/training/observation/${t.type}`})}),a}),he=[{id:"modules",label:"模块结果"},{id:"questions",label:"题目详情"},{id:"suggestions",label:"改进建议"}],pe=()=>{J.value="testing",$e(),me(),R.value=Date.now()},$e=()=>{M.value=[];const a=w.value.selectedModules,t=w.value.difficulty,p={short:{easy:15,medium:12,hard:10,expert:8},medium:{easy:20,medium:16,hard:14,expert:12},long:{easy:25,medium:20,hard:18,expert:15}}[w.value.duration][t],m=Math.floor(p/a.length);a.forEach(y=>{for(let i=0;i<m;i++)M.value.push({type:y,difficulty:t,id:`${y}-${i}`,data:fe(y,t)})}),M.value=M.value.sort(()=>Math.random()-.5),T.value=M.value.length},fe=(a,t)=>({type:a,difficulty:t}),me=()=>{const a={short:600,medium:900,long:1200};x.value=a[w.value.duration],g.value=setInterval(()=>{x.value--,x.value<=0&&oe()},1e3)},te=a=>{k.value.push({...a,testIndex:C.value,timestamp:Date.now()})},se=a=>{C.value<T.value-1?C.value++:oe()},oe=()=>{g.value&&(clearInterval(g.value),g.value=null),J.value="results";const a={type:"observation",timestamp:Date.now(),settings:w.value,overallScore:O.value,accuracy:j.value,averageResponseTime:z.value,observationLevel:G.value,abilities:L.value,moduleResults:N.value,questionResults:k.value,timeUsed:(Date.now()-R.value)/1e3};ne.saveAssessmentResult(a)},_e=a=>({"visual-search":"视觉搜索","detail-observation":"细节观察","pattern-comparison":"图形比较","change-detection":"变化检测"})[a]||a,ge=a=>({"visual-search":"🔍","detail-observation":"🔎","pattern-comparison":"📊","change-detection":"🔄"})[a]||"📝",xe=a=>({easy:"简单",medium:"中等",hard:"困难",expert:"专家"})[a]||a,ae=a=>({"visual-search":"在复杂视觉环境中快速定位和识别目标对象的能力","detail-observation":"观察、记忆和识别图像细节信息的能力","pattern-comparison":"比较和分析不同图形模式异同的能力","change-detection":"检测和识别视觉场景中变化的能力"})[a]||"",re=(a,t)=>{var m;const s={"visual-search":{high:"视觉搜索能力优秀，能够快速准确地定位目标。",medium:"视觉搜索能力良好，可以进一步提高搜索效率。",low:"视觉搜索能力需要加强，建议多做搜索练习。"},"detail-observation":{high:"细节观察能力出色，对图像细节有很好的感知力。",medium:"细节观察能力不错，继续保持观察的敏锐度。",low:"细节观察能力有待提升，建议加强细节训练。"},"pattern-comparison":{high:"图形比较能力优秀，能够准确识别图形差异。",medium:"图形比较能力良好，分析能力比较强。",low:"图形比较能力需要改善，建议多练习图形分析。"},"change-detection":{high:"变化检测能力优秀，对环境变化非常敏感。",medium:"变化检测能力良好，观察力比较敏锐。",low:"变化检测能力需要提高，建议加强变化感知训练。"}},p=t>=80?"high":t>=60?"medium":"low";return((m=s[a])==null?void 0:m[p])||"需要更多练习来提高能力。"},ce=(a,t)=>{const s=t*100;return re(a,s)},ke=a=>({"visual-search":["视觉搜索游戏","注意力训练","反应速度练习"],"detail-observation":["细节记忆训练","图像观察练习","专注力提升"],"pattern-comparison":["图形分析训练","逻辑推理练习","模式识别游戏"],"change-detection":["变化感知训练","对比观察练习","动态视觉训练"]})[a]||["基础观察训练"],ye=a=>{const t=Math.floor(a/60),s=a%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},ue=()=>{const a={title:"观察能力测评报告",timestamp:new Date().toLocaleString(),overallScore:O.value,observationLevel:G.value,accuracy:j.value,averageResponseTime:z.value,abilities:L.value,moduleResults:N.value,suggestions:ee.value},t=JSON.stringify(a,null,2),s=new Blob([t],{type:"application/json"}),p=URL.createObjectURL(s),m=document.createElement("a");m.href=p,m.download=`观察能力测评报告_${new Date().toISOString().split("T")[0]}.json`,m.click(),URL.revokeObjectURL(p)},v=()=>{J.value="setup",C.value=0,k.value=[],M.value=[],g.value&&(clearInterval(g.value),g.value=null)},h=()=>{de.push("/training/observation")},n=a=>{de.push(a)};return Pe(()=>{}),Qe(()=>{g.value&&clearInterval(g.value)}),(a,t)=>{var s,p,m,y;return r(),u("div",ya,[e("div",ba,[t[34]||(t[34]=Le('<div class="assessment-header" data-v-7800460e><h2 data-v-7800460e>观察能力测评</h2><div class="assessment-info" data-v-7800460e><span class="info-item" data-v-7800460e><i class="icon-eye" data-v-7800460e>👁️</i> 视觉观察力评估 </span><span class="info-item" data-v-7800460e><i class="icon-time" data-v-7800460e>⏱️</i> 预计用时: 15-20分钟 </span></div></div>',1)),J.value==="setup"?(r(),u("div",$a,[e("div",xa,[t[13]||(t[13]=e("h3",null,"测评设置",-1)),t[14]||(t[14]=e("p",{class:"setup-description"}," 观察能力测评将从多个维度评估您的视觉观察和细节识别能力， 包括视觉搜索、细节观察、图形比较、变化检测等方面。 ",-1)),e("div",ka,[e("div",Ma,[t[5]||(t[5]=e("h4",null,"难度设置",-1)),e("div",wa,[(r(),u(S,null,q(F,i=>e("label",{key:i.value,class:"difficulty-option"},[qe(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=f=>w.value.difficulty=f),value:i.value},null,8,Ta),[[Ke,w.value.difficulty]]),e("div",Ca,[e("div",Da,o(i.label),1),e("div",Sa,o(i.description),1)])])),64))])]),e("div",qa,[t[6]||(t[6]=e("h4",null,"测试模块",-1)),e("div",Ia,[(r(),u(S,null,q(X,i=>e("label",{key:i.id,class:"module-option"},[qe(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=f=>w.value.selectedModules=f),value:i.id},null,8,Aa),[[He,w.value.selectedModules]]),e("div",Pa,[e("div",Qa,[e("span",La,o(i.icon),1),Ie(" "+o(i.name),1)]),e("div",za,o(i.description),1)])])),64))])]),e("div",Fa,[t[12]||(t[12]=e("h4",null,"个性化设置",-1)),e("div",Ba,[e("div",Oa,[t[8]||(t[8]=e("label",null,"测试时长:",-1)),qe(e("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>w.value.duration=i)},t[7]||(t[7]=[e("option",{value:"short"},"短时测试 (10分钟)",-1),e("option",{value:"medium"},"标准测试 (15分钟)",-1),e("option",{value:"long"},"完整测试 (20分钟)",-1)]),512),[[Ne,w.value.duration]])]),e("div",Ea,[t[10]||(t[10]=e("label",null,"反馈模式:",-1)),qe(e("select",{"onUpdate:modelValue":t[3]||(t[3]=i=>w.value.feedbackMode=i)},t[9]||(t[9]=[e("option",{value:"immediate"},"即时反馈",-1),e("option",{value:"delayed"},"延迟反馈",-1),e("option",{value:"final"},"最终反馈",-1)]),512),[[Ne,w.value.feedbackMode]])]),e("div",Ra,[e("label",null,[qe(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=i=>w.value.enableHints=i)},null,512),[[He,w.value.enableHints]]),t[11]||(t[11]=Ie(" 启用提示功能 ",-1))])])])])]),e("div",ja,[e("button",{class:"btn-start",onClick:pe,disabled:!Z.value}," 开始测评 ",8,Wa)])])])):D("",!0),J.value==="testing"?(r(),u("div",Va,[e("div",Ua,[e("div",Na,[e("div",Ha,[e("div",{class:"progress-fill",style:le({width:I.value+"%"})},null,4)]),e("span",Ja,o(C.value+1)+" / "+o(T.value),1)]),e("div",Xa,[e("div",{class:Y(["timer-display",{warning:x.value<60}])},o(ye(x.value)),3)])]),e("div",Ya,[((s=B.value)==null?void 0:s.type)==="visual-search"?(r(),Ce(os,{key:0,"test-data":B.value,settings:w.value,onTestCompleted:se,onAnswerSubmitted:te},null,8,["test-data","settings"])):D("",!0),((p=B.value)==null?void 0:p.type)==="detail-observation"?(r(),Ce(jn,{key:1,"test-data":B.value,settings:w.value,onTestCompleted:se,onAnswerSubmitted:te},null,8,["test-data","settings"])):D("",!0),((m=B.value)==null?void 0:m.type)==="pattern-comparison"?(r(),Ce(Ze,{key:2,"test-data":B.value,settings:w.value,onTestCompleted:se,onAnswerSubmitted:te},null,8,["test-data","settings"])):D("",!0),((y=B.value)==null?void 0:y.type)==="change-detection"?(r(),Ce(ga,{key:3,"test-data":B.value,settings:w.value,onTestCompleted:se,onAnswerSubmitted:te},null,8,["test-data","settings"])):D("",!0)])])):D("",!0),J.value==="results"?(r(),u("div",Ga,[e("div",Ka,[t[33]||(t[33]=e("h3",null,"观察能力测评报告",-1)),e("div",Za,[e("div",el,[(r(),u("svg",tl,[t[15]||(t[15]=e("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"#e0e0e0","stroke-width":"10"},null,-1)),e("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"var(--color-primary)","stroke-width":"10","stroke-linecap":"round","stroke-dasharray":`${O.value*5.65} 565`,transform:"rotate(-90 100 100)"},null,8,sl)])),e("div",nl,[e("div",ol,o(O.value),1),t[16]||(t[16]=e("div",{class:"score-label"},"综合得分",-1))])]),e("div",al,[e("div",ll,[t[17]||(t[17]=e("span",{class:"label"},"观察等级:",-1)),e("span",{class:Y(["value",G.value.toLowerCase()])},o(G.value),3)]),e("div",il,[t[18]||(t[18]=e("span",{class:"label"},"准确率:",-1)),e("span",rl,o(j.value)+"%",1)]),e("div",cl,[t[19]||(t[19]=e("span",{class:"label"},"平均反应时间:",-1)),e("span",ul,o(z.value)+"秒",1)]),e("div",dl,[t[20]||(t[20]=e("span",{class:"label"},"完成测试数:",-1)),e("span",vl,o(U.value)+" / "+o(T.value),1)])])]),e("div",hl,[t[21]||(t[21]=e("h4",null,"能力分析",-1)),e("div",pl,[e("div",fl,[(r(),u("svg",ml,[e("g",_l,[e("g",gl,[(r(),u(S,null,q(5,i=>e("circle",{key:i,r:i*25,fill:"none",stroke:"#e0e0e0","stroke-width":"1"},null,8,yl)),64)),(r(!0),u(S,null,q(L.value,(i,f)=>(r(),u("line",{key:f,x1:0,y1:0,x2:Math.cos(f*2*Math.PI/L.value.length-Math.PI/2)*125,y2:Math.sin(f*2*Math.PI/L.value.length-Math.PI/2)*125,stroke:"#e0e0e0","stroke-width":"1"},null,8,bl))),128))]),e("polygon",{points:ie.value,fill:"rgba(74, 144, 226, 0.3)",stroke:"#4a90e2","stroke-width":"2"},null,8,$l),(r(!0),u(S,null,q(ve.value,(i,f)=>(r(),u("circle",{key:f,cx:i.x,cy:i.y,r:"4",fill:"#4a90e2"},null,8,xl))),128)),(r(!0),u(S,null,q(L.value,(i,f)=>(r(),u("text",{key:f,x:Math.cos(f*2*Math.PI/L.value.length-Math.PI/2)*140,y:Math.sin(f*2*Math.PI/L.value.length-Math.PI/2)*140,"text-anchor":"middle","dominant-baseline":"middle","font-size":"12",fill:"#333"},o(i.name),9,kl))),128))])]))]),e("div",Ml,[(r(!0),u(S,null,q(L.value,i=>(r(),u("div",{key:i.type,class:"ability-item"},[e("div",wl,[e("span",Tl,o(i.icon),1),e("span",Cl,o(i.name),1),e("span",Dl,o(i.score)+"%",1)]),e("div",Sl,[e("div",{class:"ability-fill",style:le({width:i.score+"%"})},null,4)]),e("div",ql,o(i.description),1),e("div",Il,o(i.feedback),1)]))),128))])])]),e("div",Al,[t[29]||(t[29]=e("h4",null,"详细结果",-1)),e("div",Pl,[(r(),u(S,null,q(he,i=>e("button",{key:i.id,class:Y(["tab-button",{active:H.value===i.id}]),onClick:f=>H.value=i.id},o(i.label),11,Ql)),64))]),e("div",Ll,[H.value==="modules"?(r(),u("div",zl,[(r(!0),u(S,null,q(N.value,i=>(r(),u("div",{key:i.type,class:"module-result"},[e("div",Fl,[e("span",Bl,o(i.icon),1),e("span",Ol,o(i.name),1),e("span",El,o(i.score)+"分",1)]),e("div",Rl,[e("div",jl,[t[22]||(t[22]=e("span",{class:"stat-label"},"准确率:",-1)),e("span",Wl,o(i.accuracy)+"%",1)]),e("div",Vl,[t[23]||(t[23]=e("span",{class:"stat-label"},"平均用时:",-1)),e("span",Ul,o(i.averageTime)+"秒",1)]),e("div",Nl,[t[24]||(t[24]=e("span",{class:"stat-label"},"完成题数:",-1)),e("span",Hl,o(i.completed)+" / "+o(i.total),1)])]),e("div",Jl,o(i.feedback),1)]))),128))])):D("",!0),H.value==="questions"?(r(),u("div",Xl,[(r(!0),u(S,null,q(k.value,(i,f)=>(r(),u("div",{key:f,class:"question-result"},[e("div",Yl,[e("span",Gl,"第 "+o(f+1)+" 题",1),e("span",Kl,o(_e(i.type)),1),e("span",{class:Y(["question-status",{correct:i.correct,incorrect:!i.correct}])},o(i.correct?"✓":"✗"),3)]),e("div",Zl,[e("div",ei,[t[25]||(t[25]=e("span",{class:"detail-label"},"用时:",-1)),e("span",ti,o(i.responseTime)+"秒",1)]),e("div",si,[t[26]||(t[26]=e("span",{class:"detail-label"},"难度:",-1)),e("span",ni,o(xe(i.difficulty)),1)]),e("div",oi,[t[27]||(t[27]=e("span",{class:"detail-label"},"得分:",-1)),e("span",ai,o(i.score)+"分",1)])])]))),128))])):D("",!0),H.value==="suggestions"?(r(),u("div",li,[(r(!0),u(S,null,q(ee.value,i=>(r(),u("div",{key:i.id,class:"suggestion-card"},[e("div",ii,[e("span",ri,o(i.icon),1),e("span",ci,o(i.title),1),e("span",{class:Y(["suggestion-priority",i.priority])},o(i.priority),3)]),e("div",ui,[e("p",null,o(i.description),1),e("div",di,[e("div",vi,[t[28]||(t[28]=e("h5",null,"推荐训练:",-1)),e("div",hi,[(r(!0),u(S,null,q(i.methods,f=>(r(),u("span",{key:f,class:"method-tag"},o(f),1))),128))])]),e("button",{class:"btn-start-training",onClick:f=>n(i.trainingPath)}," 开始训练 ",8,pi)])])]))),128))])):D("",!0)])]),e("div",{class:"results-actions"},[e("button",{class:"btn-export",onClick:ue},t[30]||(t[30]=[e("i",{class:"icon-download"},"📥",-1),Ie(" 导出报告 ",-1)])),e("button",{class:"btn-restart",onClick:v},t[31]||(t[31]=[e("i",{class:"icon-restart"},"🔄",-1),Ie(" 重新测评 ",-1)])),e("button",{class:"btn-training",onClick:h},t[32]||(t[32]=[e("i",{class:"icon-training"},"🎯",-1),Ie(" 开始训练 ",-1)]))])])])):D("",!0)])])}}},$i=ze(fi,[["__scopeId","data-v-7800460e"]]);export{$i as default};
