import{_ as Tt}from"./_plugin-vue_export-helper-c27b6911.js";import{i as g,c as x,k as $t,A as wt,j as kt,o as u,a as h,b as e,d as Ct,t as l,m as O,y as U,N as K,F as q,h as I,n as L,g as k}from"./index-e0b54b24.js";const St={class:"pattern-comparison-test"},At={class:"test-container"},Pt={key:0,class:"instruction-phase"},Ot={key:1,class:"testing-phase"},qt={class:"test-header"},It={class:"test-info"},zt={class:"question-counter"},Dt={class:"timer"},Nt={class:"progress-bar"},Lt={class:"question-container"},Qt={class:"reference-pattern"},Ft={class:"pattern-display"},Jt={width:"200",height:"200",class:"pattern-svg"},jt={class:"options-container"},Bt={class:"pattern-options"},Ht=["onClick"],Vt={class:"option-letter"},Et={width:"150",height:"150",class:"pattern-svg"},Gt={class:"question-controls"},Rt=["disabled"],Wt={key:2,class:"feedback-phase"},Ut={class:"feedback-container"},Kt={class:"feedback-header"},Xt={class:"feedback-text"},Yt={class:"feedback-title"},Zt={class:"feedback-explanation"},te={class:"feedback-details"},ee={class:"detail-item"},se={class:"detail-value"},ne={class:"detail-item"},oe={class:"detail-value"},ae={class:"detail-item"},re={class:"detail-value"},ie={key:3,class:"results-phase"},le={class:"results-container"},ce={class:"overall-results"},de={class:"result-card"},ue={class:"result-value"},ve={class:"result-card"},pe={class:"result-value"},he={class:"result-card"},me={class:"result-value"},fe={class:"result-card"},_e={class:"result-value"},ge={class:"detailed-analysis"},ye={class:"analysis-grid"},be={class:"analysis-item"},xe={class:"difficulty-chart"},Me={class:"difficulty-label"},Te={class:"bar-container"},$e={class:"accuracy-value"},we={class:"analysis-item"},ke={class:"pattern-type-chart"},Ce={class:"type-label"},Se={class:"bar-container"},Ae={class:"accuracy-value"},Pe={class:"analysis-item"},Oe={class:"time-trend"},qe={class:"trend-chart"},Ie={class:"trend-line"},ze=["title"],De={class:"trend-stats"},Ne={class:"stat-item"},Le={class:"stat-value"},Qe={class:"stat-item"},Fe={class:"stat-value"},Je={class:"performance-feedback"},je={class:"feedback-icon"},Be={class:"feedback-text"},He={class:"feedback-title"},Ve={class:"feedback-description"},Ee={class:"improvement-suggestions"},Ge={key:0},Re={key:1},We={key:2},Ue={key:3},Ke={__name:"PatternComparisonTest",props:{testData:{type:Object,default:()=>({difficulty:"medium",questionCount:10,timeLimit:300})}},emits:["test-completed","answer-submitted"],setup(X,{emit:Y}){const Q=X,F=Y,b=g("instruction"),M=g(0),f=g(null),v=g([]),w=g([]),J=g(null),j=g(null),z=g(0),C=g(null),S=g(!1),B=g(0),y=x(()=>w.value[M.value]||{}),Z=x(()=>(M.value+1)/w.value.length*100),H=x(()=>M.value===w.value.length-1),T=x(()=>{if(v.value.length===0)return 0;const s=v.value.filter(t=>t.isCorrect).length;return Math.round(s/v.value.length*100)}),A=x(()=>v.value.length===0?0:(v.value.reduce((t,n)=>t+n.responseTime,0)/v.value.length).toFixed(1)),V=x(()=>{const s=T.value,t=Math.max(0,30-parseFloat(A.value))*2;return Math.min(100,Math.round(s+t))}),E=x(()=>{const s={easy:1,medium:1.2,hard:1.5,expert:2};let t=0,n=0;return v.value.forEach(o=>{const i=s[o.difficulty]||1;t+=o.isCorrect?i*100:0,n+=i}),n>0?Math.round(t/n):0}),tt=x(()=>v.value.length===0?0:Math.min(...v.value.map(s=>s.responseTime)).toFixed(1)),et=x(()=>v.value.length===0?0:Math.max(...v.value.map(s=>s.responseTime)).toFixed(1)),st=()=>{b.value="testing",J.value=Date.now(),nt(),W()},nt=()=>{const{difficulty:s,questionCount:t}=Q.testData;w.value=[];for(let n=0;n<t;n++)w.value.push(ot(s,n))},ot=(s,t)=>{const n=["geometric","color","size","rotation"];switch(n[Math.floor(Math.random()*n.length)]){case"geometric":return G(s,t);case"color":return at(s,t);case"size":return rt(s,t);case"rotation":return it(s,t);default:return G(s,t)}},G=(s,t)=>{const n=["circle","square","triangle","diamond","hexagon"],i={easy:2,medium:3,hard:4,expert:5}[s]||3,r=[];for(let a=0;a<i;a++)r.push({type:n[Math.floor(Math.random()*n.length)],x:50+a%2*100,y:50+Math.floor(a/2)*100,size:30+Math.random()*20,color:"#3498db"});const c=[],m={pattern:[...r]};c.push(m);for(let a=0;a<3;a++){const d={pattern:[...r]},_=Math.floor(Math.random()*d.pattern.length);d.pattern[_]={...d.pattern[_],type:n[Math.floor(Math.random()*n.length)]},c.push(d)}const p=P(c),$=p.findIndex(a=>JSON.stringify(a.pattern)===JSON.stringify(m.pattern));return{id:t,question:"请找出与参考模式完全相同的选项",referencePattern:r,options:p,correctAnswer:$,explanation:"正确答案应该与参考模式的形状、位置完全一致。",difficulty:s,patternType:"geometric"}},at=(s,t)=>{const n=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c"],i={easy:3,medium:4,hard:5,expert:6}[s]||4,r=[];for(let a=0;a<i;a++)r.push({type:"circle",x:30+a%3*60,y:30+Math.floor(a/3)*60,size:25,color:n[a%n.length]});const c=[],m={pattern:[...r]};c.push(m);for(let a=0;a<3;a++){const d={pattern:[...r]},_=Math.floor(Math.random()*d.pattern.length);d.pattern[_]={...d.pattern[_],color:n[Math.floor(Math.random()*n.length)]},c.push(d)}const p=P(c),$=p.findIndex(a=>JSON.stringify(a.pattern)===JSON.stringify(m.pattern));return{id:t,question:"请找出与参考模式颜色排列完全相同的选项",referencePattern:r,options:p,correctAnswer:$,explanation:"正确答案应该与参考模式的颜色排列完全一致。",difficulty:s,patternType:"color"}},rt=(s,t)=>{const n=[20,30,40,50,60],i={easy:3,medium:4,hard:5,expert:6}[s]||4,r=[];for(let a=0;a<i;a++)r.push({type:"circle",x:40+a%3*60,y:40+Math.floor(a/3)*60,size:n[a%n.length],color:"#3498db"});const c=[],m={pattern:[...r]};c.push(m);for(let a=0;a<3;a++){const d={pattern:[...r]},_=Math.floor(Math.random()*d.pattern.length);d.pattern[_]={...d.pattern[_],size:n[Math.floor(Math.random()*n.length)]},c.push(d)}const p=P(c),$=p.findIndex(a=>JSON.stringify(a.pattern)===JSON.stringify(m.pattern));return{id:t,question:"请找出与参考模式大小排列完全相同的选项",referencePattern:r,options:p,correctAnswer:$,explanation:"正确答案应该与参考模式的大小排列完全一致。",difficulty:s,patternType:"size"}},it=(s,t)=>{const n=[0,45,90,135,180,225,270,315],i={easy:2,medium:3,hard:4,expert:5}[s]||3,r=[];for(let a=0;a<i;a++)r.push({type:"triangle",x:50+a%2*100,y:50+Math.floor(a/2)*100,size:30,color:"#e74c3c",rotation:n[a%n.length]});const c=[],m={pattern:[...r]};c.push(m);for(let a=0;a<3;a++){const d={pattern:[...r]},_=Math.floor(Math.random()*d.pattern.length);d.pattern[_]={...d.pattern[_],rotation:n[Math.floor(Math.random()*n.length)]},c.push(d)}const p=P(c),$=p.findIndex(a=>JSON.stringify(a.pattern)===JSON.stringify(m.pattern));return{id:t,question:"请找出与参考模式旋转角度完全相同的选项",referencePattern:r,options:p,correctAnswer:$,explanation:"正确答案应该与参考模式的旋转角度完全一致。",difficulty:s,patternType:"rotation"}},R=s=>!s||!Array.isArray(s)?"":s.map(t=>{const{type:n,x:o,y:i,size:r,color:c,rotation:m=0}=t,p=m?`transform="rotate(${m} ${o} ${i})"`:"";switch(n){case"circle":return`<circle cx="${o}" cy="${i}" r="${r/2}" fill="${c}" ${p}/>`;case"square":return`<rect x="${o-r/2}" y="${i-r/2}" width="${r}" height="${r}" fill="${c}" ${p}/>`;case"triangle":return`<polygon points="${lt(o,i,r)}" fill="${c}" ${p}/>`;case"diamond":return`<polygon points="${`${o},${i-r/2} ${o+r/2},${i} ${o},${i+r/2} ${o-r/2},${i}`}" fill="${c}" ${p}/>`;case"hexagon":return`<polygon points="${ct(o,i,r/2)}" fill="${c}" ${p}/>`;default:return""}}).join(""),lt=(s,t,n)=>{const o=n*Math.sqrt(3)/2;return`${s},${t-o/2} ${s-n/2},${t+o/2} ${s+n/2},${t+o/2}`},ct=(s,t,n)=>{const o=[];for(let i=0;i<6;i++){const r=i*60*Math.PI/180,c=s+n*Math.cos(r),m=t+n*Math.sin(r);o.push(`${c},${m}`)}return o.join(" ")},P=s=>{const t=[...s];for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t},W=()=>{z.value=0,j.value=Date.now(),C.value=setInterval(()=>{z.value++},1e3)},dt=s=>{f.value=s},ut=()=>{if(f.value===null)return;clearInterval(C.value);const s=(Date.now()-j.value)/1e3,t=f.value===y.value.correctAnswer;S.value=t,B.value=s.toFixed(1),v.value.push({questionIndex:M.value,selectedAnswer:f.value,correctAnswer:y.value.correctAnswer,isCorrect:t,responseTime:s,difficulty:y.value.difficulty,patternType:y.value.patternType}),F("answer-submitted",{questionIndex:M.value,selectedAnswer:f.value,correctAnswer:y.value.correctAnswer,isCorrect:t,responseTime:s}),b.value="feedback"},vt=()=>{H.value?pt():(M.value++,f.value=null,b.value="testing",W())},pt=()=>{b.value="results",F("test-completed",{testType:"pattern-comparison",results:{overallAccuracy:T.value,averageTime:parseFloat(A.value),finalScore:V.value,patternScore:E.value,answers:v.value,totalTime:(Date.now()-J.value)/1e3}})},ht=()=>f.value===null?"未选择":String.fromCharCode(65+f.value),mt=()=>String.fromCharCode(65+y.value.correctAnswer),ft=s=>{const t=Math.floor(s/60),n=s%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},_t=s=>({easy:"简单",medium:"中等",hard:"困难",expert:"专家"})[s]||s,D=s=>{const t=v.value.filter(o=>o.difficulty===s);if(t.length===0)return 0;const n=t.filter(o=>o.isCorrect).length;return Math.round(n/t.length*100)},gt=s=>({geometric:"几何形状",color:"颜色模式",size:"大小模式",rotation:"旋转模式"})[s]||s,N=s=>{const t=v.value.filter(o=>o.patternType===s);if(t.length===0)return 0;const n=t.filter(o=>o.isCorrect).length;return Math.round(n/t.length*100)},yt=s=>s>=90?"excellent":s>=80?"good":s>=70?"average":"poor",bt=s=>s>=90?"🏆":s>=80?"👍":s>=70?"👌":"💪",xt=s=>s>=90?"优秀表现":s>=80?"良好表现":s>=70?"一般表现":"需要提高",Mt=s=>s>=90?"您的模式识别能力非常出色，能够快速准确地识别和比较各种复杂模式。":s>=80?"您具有良好的模式识别能力，在大多数情况下能够准确识别模式特征。":s>=70?"您的模式识别能力处于平均水平，通过练习可以进一步提高。":"建议加强模式识别训练，提高对图形、颜色、大小等特征的敏感度。";return $t(()=>{}),wt(()=>{C.value&&clearInterval(C.value)}),kt(()=>Q.testData,s=>{s&&b.value==="instruction"&&(M.value=0,v.value=[],f.value=null)},{deep:!0}),(s,t)=>(u(),h("div",St,[e("div",At,[b.value==="instruction"?(u(),h("div",Pt,[e("div",{class:"instruction-content"},[t[0]||(t[0]=Ct('<h3 data-v-16a16eda>模式比较测试</h3><p class="instruction-text" data-v-16a16eda> 这个测试将评估您的模式识别和比较能力。您需要观察不同的图形模式，找出它们之间的相似性和差异性。 </p><div class="instruction-steps" data-v-16a16eda><div class="step-item" data-v-16a16eda><div class="step-number" data-v-16a16eda>1</div><div class="step-text" data-v-16a16eda>观察给出的参考模式</div></div><div class="step-item" data-v-16a16eda><div class="step-number" data-v-16a16eda>2</div><div class="step-text" data-v-16a16eda>比较候选选项中的模式</div></div><div class="step-item" data-v-16a16eda><div class="step-number" data-v-16a16eda>3</div><div class="step-text" data-v-16a16eda>选择最匹配的模式</div></div><div class="step-item" data-v-16a16eda><div class="step-number" data-v-16a16eda>4</div><div class="step-text" data-v-16a16eda>在规定时间内完成所有题目</div></div></div>',3)),e("button",{onClick:st,class:"btn-start"}," 开始测试 ")])])):b.value==="testing"?(u(),h("div",Ot,[e("div",qt,[e("div",It,[e("div",zt," 题目 "+l(M.value+1)+" / "+l(w.value.length),1),e("div",Dt," ⏱️ "+l(ft(z.value)),1)]),e("div",Nt,[e("div",{class:"progress-fill",style:O({width:Z.value+"%"})},null,4)])]),e("div",Lt,[e("h4",null,l(y.value.question),1),e("div",Qt,[t[1]||(t[1]=e("h5",null,"参考模式：",-1)),e("div",Ft,[(u(),h("svg",Jt,[(u(),U(K("g"),{innerHTML:R(y.value.referencePattern)},null,8,["innerHTML"]))]))])]),e("div",jt,[t[2]||(t[2]=e("h5",null,"请选择最匹配的模式：",-1)),e("div",Bt,[(u(!0),h(q,null,I(y.value.options,(n,o)=>(u(),h("div",{key:o,class:L(["option-pattern",{selected:f.value===o}]),onClick:i=>dt(o)},[e("div",Vt,l(String.fromCharCode(65+o)),1),(u(),h("svg",Et,[(u(),U(K("g"),{innerHTML:R(n.pattern)},null,8,["innerHTML"]))]))],10,Ht))),128))])]),e("div",Gt,[e("button",{onClick:ut,disabled:f.value===null,class:"btn-submit"}," 提交答案 ",8,Rt)])])])):b.value==="feedback"?(u(),h("div",Wt,[e("div",Ut,[e("div",Kt,[e("div",{class:L(["feedback-icon",S.value?"correct":"incorrect"])},l(S.value?"✓":"✗"),3),e("div",Xt,[e("div",Yt,l(S.value?"回答正确！":"回答错误"),1),e("div",Zt,l(y.value.explanation),1)])]),e("div",te,[e("div",ee,[t[3]||(t[3]=e("span",{class:"detail-label"},"您的答案：",-1)),e("span",se,l(ht()),1)]),e("div",ne,[t[4]||(t[4]=e("span",{class:"detail-label"},"正确答案：",-1)),e("span",oe,l(mt()),1)]),e("div",ae,[t[5]||(t[5]=e("span",{class:"detail-label"},"用时：",-1)),e("span",re,l(B.value)+"秒",1)])]),e("button",{onClick:vt,class:"btn-continue"},l(H.value?"查看结果":"下一题"),1)])])):b.value==="results"?(u(),h("div",ie,[e("div",le,[t[23]||(t[23]=e("h3",null,"模式比较测试结果",-1)),e("div",ce,[e("div",de,[t[6]||(t[6]=e("div",{class:"result-icon"},"🎯",-1)),e("div",ue,l(T.value)+"%",1),t[7]||(t[7]=e("div",{class:"result-label"},"总体准确率",-1))]),e("div",ve,[t[8]||(t[8]=e("div",{class:"result-icon"},"⏱️",-1)),e("div",pe,l(A.value),1),t[9]||(t[9]=e("div",{class:"result-label"},"平均用时(秒)",-1))]),e("div",he,[t[10]||(t[10]=e("div",{class:"result-icon"},"⭐",-1)),e("div",me,l(V.value),1),t[11]||(t[11]=e("div",{class:"result-label"},"综合得分",-1))]),e("div",fe,[t[12]||(t[12]=e("div",{class:"result-icon"},"🧩",-1)),e("div",_e,l(E.value),1),t[13]||(t[13]=e("div",{class:"result-label"},"模式识别得分",-1))])]),e("div",ge,[t[19]||(t[19]=e("h4",null,"详细分析",-1)),e("div",ye,[e("div",be,[t[14]||(t[14]=e("h5",null,"难度表现",-1)),e("div",xe,[(u(),h(q,null,I(["easy","medium","hard","expert"],n=>e("div",{key:n,class:"difficulty-bar"},[e("div",Me,l(_t(n)),1),e("div",Te,[e("div",{class:"bar-fill",style:O({width:D(n)+"%"})},null,4)]),e("div",$e,l(D(n))+"%",1)])),64))])]),e("div",we,[t[15]||(t[15]=e("h5",null,"模式类型表现",-1)),e("div",ke,[(u(),h(q,null,I(["geometric","color","size","rotation"],n=>e("div",{key:n,class:"type-bar"},[e("div",Ce,l(gt(n)),1),e("div",Se,[e("div",{class:"bar-fill",style:O({width:N(n)+"%"})},null,4)]),e("div",Ae,l(N(n))+"%",1)])),64))])]),e("div",Pe,[t[18]||(t[18]=e("h5",null,"反应时间趋势",-1)),e("div",Oe,[e("div",qe,[e("div",Ie,[(u(!0),h(q,null,I(v.value,(n,o)=>(u(),h("div",{key:o,class:"trend-point",style:O({left:o/(v.value.length-1)*100+"%",bottom:Math.min(n.responseTime/30*100,100)+"%"}),title:`第${o+1}题: ${n.responseTime.toFixed(1)}秒`},null,12,ze))),128))])]),e("div",De,[e("div",Ne,[t[16]||(t[16]=e("span",{class:"stat-label"},"最快：",-1)),e("span",Le,l(tt.value)+"秒",1)]),e("div",Qe,[t[17]||(t[17]=e("span",{class:"stat-label"},"最慢：",-1)),e("span",Fe,l(et.value)+"秒",1)])])])])])]),e("div",Je,[t[22]||(t[22]=e("h4",null,"表现评价",-1)),e("div",{class:L(["feedback-item",yt(T.value)])},[e("div",je,l(bt(T.value)),1),e("div",Be,[e("div",He,l(xt(T.value)),1),e("div",Ve,l(Mt(T.value)),1)])],2),e("div",Ee,[t[21]||(t[21]=e("h5",null,"改进建议",-1)),e("ul",null,[T.value<70?(u(),h("li",Ge,"加强基础图形识别训练，提高对几何形状的敏感度")):k("",!0),A.value>20?(u(),h("li",Re,"练习快速模式识别，提高反应速度")):k("",!0),D("hard")<60?(u(),h("li",We,"重点练习复杂模式的分析和比较")):k("",!0),N("rotation")<70?(u(),h("li",Ue,"加强空间旋转能力的训练")):k("",!0),t[20]||(t[20]=e("li",null,"定期进行模式识别练习，保持和提升认知能力",-1))])])])])])):k("",!0)])]))}},Ze=Tt(Ke,[["__scopeId","data-v-16a16eda"]]);export{Ze as P};
