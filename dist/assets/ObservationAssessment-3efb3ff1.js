import{i as b,c as y,j as Oe,k as Pe,A as Qe,o as i,a as c,b as e,d as ze,g as C,t as o,m as ae,F as S,h as q,n as X,y as Ce,N as Ne,s as Ye,u as Ge,p as qe,z as Ue,B as He,f as Ae,C as Ke}from"./index-e0b54b24.js";import{_ as Le}from"./_plugin-vue_export-helper-c27b6911.js";import{P as Ze}from"./PatternComparisonTest-272864dc.js";const et={class:"visual-search-test"},tt={class:"test-container"},st={key:0,class:"instruction-phase"},nt={key:1,class:"testing-phase"},ot={class:"test-header"},at={class:"test-info"},lt={class:"question-counter"},it={class:"timer"},rt={class:"target-display"},ct={class:"target-count"},ut={class:"search-area"},dt=["width","height"],vt=["cx","cy","r","fill"],ht=["x","y","width","height","fill"],pt=["points","fill"],ft=["cx","cy","r","fill","data-target-id"],mt=["x","y","width","height","fill","data-target-id"],_t=["points","fill","data-target-id"],gt=["cx","cy","stroke"],yt=["x","y","fill"],bt={class:"test-controls"},$t={class:"progress-info"},xt=["disabled"],kt={key:2,class:"results-phase"},wt={class:"results-container"},Mt={class:"overall-results"},Tt={class:"result-card"},Ct={class:"result-content"},Dt={class:"result-value"},St={class:"result-card"},qt={class:"result-content"},At={class:"result-value"},It={class:"result-card"},Pt={class:"result-content"},Qt={class:"result-value"},zt={class:"result-card"},Lt={class:"result-content"},Bt={class:"result-value"},Et={class:"detailed-analysis"},Ft={class:"analysis-grid"},Ot={class:"analysis-item"},Rt={class:"difficulty-chart"},Wt={class:"difficulty-label"},jt={class:"bar-container"},Vt={class:"accuracy-value"},Nt={class:"analysis-item"},Ut={class:"time-trend"},Ht={width:"300",height:"150",viewBox:"0 0 300 150"},Jt=["points"],Xt=["cx","cy"],Yt={class:"performance-feedback"},Gt={class:"feedback-content"},Kt={class:"feedback-icon"},Zt={class:"feedback-text"},es={class:"feedback-title"},ts={class:"feedback-description"},ss={class:"improvement-suggestions"},ns={__name:"VisualSearchTest",props:{testData:{type:Object,required:!0},settings:{type:Object,default:()=>({})}},emits:["test-completed","answer-submitted"],setup(we,{emit:ue}){const se=we,H=ue,T=b("instruction"),w=b(0),$=b([]),_=b([]),R=b(0),x=b(0),U=b(0),k=b(null),B=b([]),E=b({width:800,height:600}),M=()=>{const d=window.innerWidth;d>=1367&&d<=1600?E.value={width:750,height:550}:d>=1281&&d<=1366?E.value={width:700,height:500}:d>=1024&&d<=1280?E.value={width:650,height:450}:d<=768?E.value={width:Math.min(d-40,600),height:400}:E.value={width:800,height:600}},D=y(()=>$.value[w.value]),J=y(()=>D.value?D.value.targets.filter(d=>d.found).length:0),A=y(()=>{if(!D.value)return 0;const d=B.value.length;if(d===0)return 100;const p=B.value.filter(s=>s.correct).length;return Math.round(p/d*100)}),W=y(()=>{var d;return J.value===((d=D.value)==null?void 0:d.targetCount)||U.value>=60}),Y=y(()=>w.value===$.value.length-1),I=y(()=>{if(_.value.length===0)return 0;const d=_.value.reduce((s,t)=>s+t.correctClicks,0),p=_.value.reduce((s,t)=>s+t.totalClicks,0);return p>0?Math.round(d/p*100):0}),F=y(()=>_.value.length===0?0:(_.value.reduce((p,s)=>p+s.responseTime,0)/_.value.length).toFixed(1)),Z=y(()=>{const t=I.value,n=Math.max(0,100-parseFloat(F.value)/60*100);return Math.round(t*.6+n*.4)}),z=y(()=>{if(_.value.length===0)return 0;const d=_.value.reduce((s,t)=>s+t.targetCount,0),p=_.value.reduce((s,t)=>s+t.foundTargets,0);return d>0?Math.round(p/d*100):0}),le=y(()=>[...new Set($.value.map(d=>d.difficulty))]),de=y(()=>_.value.map((d,p)=>{const s=p/(_.value.length-1)*280+10,t=140-d.responseTime/60*120;return`${s},${t}`}).join(" ")),N=y(()=>_.value.map((d,p)=>{const s=p/(_.value.length-1)*280+10,t=140-d.responseTime/60*120;return{x:s,y:t}})),ee=y(()=>{const d=[];return I.value<70&&d.push("建议放慢速度，提高点击准确性"),parseFloat(F.value)>30&&d.push("可以通过练习提高搜索速度"),z.value<80&&d.push("注意系统性搜索，避免遗漏目标"),d.length===0&&d.push("表现优秀，继续保持！"),d}),ve=()=>{T.value="testing",he(),G(),R.value=Date.now()},he=()=>{const d=se.testData.difficulty||"medium",p=ye(d);$.value=[];for(let s=0;s<p;s++){const t=pe(s,p,d);$.value.push(be(t))}},ye=d=>({easy:8,medium:10,hard:12,expert:15})[d]||10,pe=(d,p,s)=>{const t=d/p;return s==="easy"?t<.7?"easy":"medium":s==="medium"?t<.3?"easy":t<.8?"medium":"hard":s==="hard"?t<.2?"medium":t<.7?"hard":"expert":t<.3?"hard":"expert"},be=d=>{const s={easy:{distractorCount:20,targetCount:2,shapes:["●"],colors:["#ff6b6b","#4ecdc4"]},medium:{distractorCount:40,targetCount:3,shapes:["●","■"],colors:["#ff6b6b","#4ecdc4","#45b7d1"]},hard:{distractorCount:60,targetCount:4,shapes:["●","■","▲"],colors:["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24"]},expert:{distractorCount:80,targetCount:5,shapes:["●","■","▲"],colors:["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7"]}}[d],t=s.shapes[Math.floor(Math.random()*s.shapes.length)],n=s.colors[Math.floor(Math.random()*s.colors.length)],v=[];for(let g=0;g<s.targetCount;g++)v.push({x:Math.random()*(E.value.width-60)+30,y:Math.random()*(E.value.height-60)+30,shape:t,color:n,size:15,found:!1,clicked:!1});const f=[];for(let g=0;g<s.distractorCount;g++){let l,h;do l=s.shapes[Math.floor(Math.random()*s.shapes.length)],h=s.colors[Math.floor(Math.random()*s.colors.length)];while(l===t&&h===n);f.push({x:Math.random()*(E.value.width-60)+30,y:Math.random()*(E.value.height-60)+30,shape:l,color:h,size:15})}return{difficulty:d,target:{shape:t,color:n},targetCount:s.targetCount,targets:v,distractors:f}},G=()=>{x.value=Date.now(),U.value=0,k.value=setInterval(()=>{U.value=Math.floor((Date.now()-x.value)/1e3)},1e3)},te=d=>{const p=d.target.getBoundingClientRect(),s=d.clientX-p.left,t=d.clientY-p.top;let n=!1;D.value.targets.forEach((v,f)=>{Math.sqrt((s-v.x)**2+(t-v.y)**2)<=v.size+10&&!v.found&&(v.found=!0,v.clicked=!0,n=!0,B.value.push({x:s,y:t,correct:!0,timestamp:Date.now()}))}),n||B.value.push({x:s,y:t,correct:!1,timestamp:Date.now()})},ne=()=>{const d=(Date.now()-x.value)/1e3,p=B.value.filter(n=>n.correct).length,s=B.value.length,t={questionIndex:w.value,difficulty:D.value.difficulty,targetCount:D.value.targetCount,foundTargets:J.value,correctClicks:p,totalClicks:s,responseTime:d,accuracy:s>0?p/s*100:0,completed:J.value===D.value.targetCount};_.value.push(t),H("answer-submitted",{type:"visual-search",questionIndex:w.value,correct:t.completed,responseTime:t.responseTime,score:fe(t),difficulty:t.difficulty}),B.value=[],Y.value?$e():(w.value++,G())},fe=d=>{const p=d.accuracy,s=Math.max(0,100-d.responseTime*2),t=d.completed?20:0;return Math.min(100,Math.round(p*.6+s*.2+t*.2))},$e=()=>{k.value&&(clearInterval(k.value),k.value=null),T.value="results",H("test-completed",{type:"visual-search",overallScore:Z.value,accuracy:I.value,averageTime:parseFloat(F.value),searchEfficiency:z.value,answers:_.value,totalTime:(Date.now()-R.value)/1e3})},me=(d,p,s)=>`${d},${p-s} ${d-s},${p+s} ${d+s},${p+s}`,ie=d=>({easy:"简单",medium:"中等",hard:"困难",expert:"专家"})[d]||d,oe=d=>{const p=_.value.filter(n=>n.difficulty===d);if(p.length===0)return 0;const s=p.reduce((n,v)=>n+v.correctClicks,0),t=p.reduce((n,v)=>n+v.totalClicks,0);return t>0?Math.round(s/t*100):0},re=d=>d>=90?"excellent":d>=80?"good":d>=70?"average":"needs-improvement",xe=d=>d>=90?"🌟":d>=80?"👍":d>=70?"👌":"💪",_e=d=>d>=90?"优秀表现":d>=80?"良好表现":d>=70?"一般表现":"需要改进",ce=d=>d>=90?"您的视觉搜索能力非常出色，能够快速准确地定位目标。":d>=80?"您的视觉搜索能力良好，在大多数情况下能够有效找到目标。":d>=70?"您的视觉搜索能力一般，还有提升空间。":"建议多进行视觉搜索练习，提高观察和定位能力。",ke=d=>`${d}s`;return Oe(()=>se.testData,()=>{T.value==="instruction"&&(w.value=0,_.value=[],B.value=[])},{deep:!0}),Pe(()=>{M(),window.addEventListener("resize",M)}),Qe(()=>{k.value&&clearInterval(k.value),window.removeEventListener("resize",M)}),(d,p)=>(i(),c("div",et,[e("div",tt,[T.value==="instruction"?(i(),c("div",st,[e("div",{class:"instruction-content"},[p[0]||(p[0]=ze('<h3 data-v-5c7c6df3>视觉搜索测试</h3><div class="instruction-text" data-v-5c7c6df3><p data-v-5c7c6df3>在这个测试中，您需要在复杂的视觉场景中快速找到指定的目标物体。</p><div class="instruction-steps" data-v-5c7c6df3><div class="step-item" data-v-5c7c6df3><span class="step-number" data-v-5c7c6df3>1</span><span class="step-text" data-v-5c7c6df3>仔细观察搜索目标</span></div><div class="step-item" data-v-5c7c6df3><span class="step-number" data-v-5c7c6df3>2</span><span class="step-text" data-v-5c7c6df3>在图像中找到所有相同的目标</span></div><div class="step-item" data-v-5c7c6df3><span class="step-number" data-v-5c7c6df3>3</span><span class="step-text" data-v-5c7c6df3>点击找到的目标位置</span></div><div class="step-item" data-v-5c7c6df3><span class="step-number" data-v-5c7c6df3>4</span><span class="step-text" data-v-5c7c6df3>尽可能快速且准确地完成</span></div></div></div>',2)),e("button",{class:"btn-start",onClick:ve},"开始测试")])])):C("",!0),T.value==="testing"?(i(),c("div",nt,[e("div",ot,[e("div",at,[e("span",lt,"第 "+o(w.value+1)+" / "+o($.value.length)+" 题",1),e("span",it,o(ke(U.value)),1)]),e("div",rt,[p[1]||(p[1]=e("span",{class:"target-label"},"寻找目标:",-1)),e("div",{class:"target-item",style:ae({backgroundColor:D.value.target.color})},o(D.value.target.shape),5),e("span",ct,"数量: "+o(D.value.targetCount),1)])]),e("div",ut,[(i(),c("svg",{width:E.value.width,height:E.value.height,class:"search-canvas",onClick:te},[p[2]||(p[2]=e("rect",{width:"100%",height:"100%",fill:"#f8f9fa"},null,-1)),(i(!0),c(S,null,q(D.value.distractors,(s,t)=>(i(),c("g",{key:"distractor-"+t},[s.shape==="●"?(i(),c("circle",{key:0,cx:s.x,cy:s.y,r:s.size,fill:s.color,class:"search-item distractor"},null,8,vt)):s.shape==="■"?(i(),c("rect",{key:1,x:s.x-s.size,y:s.y-s.size,width:s.size*2,height:s.size*2,fill:s.color,class:"search-item distractor"},null,8,ht)):s.shape==="▲"?(i(),c("polygon",{key:2,points:me(s.x,s.y,s.size),fill:s.color,class:"search-item distractor"},null,8,pt)):C("",!0)]))),128)),(i(!0),c(S,null,q(D.value.targets,(s,t)=>(i(),c("g",{key:"target-"+t},[s.shape==="●"?(i(),c("circle",{key:0,cx:s.x,cy:s.y,r:s.size,fill:s.color,class:X(["search-item","target",{found:s.found,clicked:s.clicked}]),"data-target-id":t},null,10,ft)):s.shape==="■"?(i(),c("rect",{key:1,x:s.x-s.size,y:s.y-s.size,width:s.size*2,height:s.size*2,fill:s.color,class:X(["search-item","target",{found:s.found,clicked:s.clicked}]),"data-target-id":t},null,10,mt)):s.shape==="▲"?(i(),c("polygon",{key:2,points:me(s.x,s.y,s.size),fill:s.color,class:X(["search-item","target",{found:s.found,clicked:s.clicked}]),"data-target-id":t},null,10,_t)):C("",!0)]))),128)),(i(!0),c(S,null,q(B.value,(s,t)=>(i(),c("g",{key:"click-"+t},[e("circle",{cx:s.x,cy:s.y,r:"15",fill:"none",stroke:s.correct?"#28a745":"#dc3545","stroke-width":"3",class:"click-mark"},null,8,gt),e("text",{x:s.x,y:s.y+5,"text-anchor":"middle",fill:s.correct?"#28a745":"#dc3545","font-weight":"bold","font-size":"16"},o(s.correct?"✓":"✗"),9,yt)]))),128))],8,dt))]),e("div",bt,[e("div",$t,[e("span",null,"已找到: "+o(J.value)+" / "+o(D.value.targetCount),1),e("span",null,"准确率: "+o(A.value)+"%",1)]),e("button",{class:"btn-next",onClick:ne,disabled:!W.value},o(Y.value?"完成测试":"下一题"),9,xt)])])):C("",!0),T.value==="results"?(i(),c("div",kt,[e("div",wt,[p[16]||(p[16]=e("h3",null,"视觉搜索测试结果",-1)),e("div",Mt,[e("div",Tt,[p[4]||(p[4]=e("div",{class:"result-icon"},"🎯",-1)),e("div",Ct,[e("div",Dt,o(I.value)+"%",1),p[3]||(p[3]=e("div",{class:"result-label"},"总体准确率",-1))])]),e("div",St,[p[6]||(p[6]=e("div",{class:"result-icon"},"⚡",-1)),e("div",qt,[e("div",At,o(F.value)+"s",1),p[5]||(p[5]=e("div",{class:"result-label"},"平均用时",-1))])]),e("div",It,[p[8]||(p[8]=e("div",{class:"result-icon"},"📊",-1)),e("div",Pt,[e("div",Qt,o(Z.value),1),p[7]||(p[7]=e("div",{class:"result-label"},"综合得分",-1))])]),e("div",zt,[p[10]||(p[10]=e("div",{class:"result-icon"},"🔍",-1)),e("div",Lt,[e("div",Bt,o(z.value)+"%",1),p[9]||(p[9]=e("div",{class:"result-label"},"搜索效率",-1))])])]),e("div",Et,[p[13]||(p[13]=e("h4",null,"详细分析",-1)),e("div",Ft,[e("div",Ot,[p[11]||(p[11]=e("h5",null,"难度表现",-1)),e("div",Rt,[(i(!0),c(S,null,q(le.value,s=>(i(),c("div",{key:s,class:"difficulty-bar"},[e("span",Wt,o(ie(s)),1),e("div",jt,[e("div",{class:"bar-fill",style:ae({width:oe(s)+"%"})},null,4)]),e("span",Vt,o(oe(s))+"%",1)]))),128))])]),e("div",Nt,[p[12]||(p[12]=e("h5",null,"反应时间趋势",-1)),e("div",Ut,[(i(),c("svg",Ht,[e("polyline",{points:de.value,fill:"none",stroke:"#4a90e2","stroke-width":"2"},null,8,Jt),(i(!0),c(S,null,q(N.value,(s,t)=>(i(),c("circle",{key:t,cx:s.x,cy:s.y,r:"3",fill:"#4a90e2"},null,8,Xt))),128))]))])])])]),e("div",Yt,[p[15]||(p[15]=e("h4",null,"表现评价",-1)),e("div",Gt,[e("div",{class:X(["feedback-item",re(I.value)])},[e("div",Kt,o(xe(I.value)),1),e("div",Zt,[e("div",es,o(_e(I.value)),1),e("div",ts,o(ce(I.value)),1)])],2),e("div",ss,[p[14]||(p[14]=e("h5",null,"改进建议",-1)),e("ul",null,[(i(!0),c(S,null,q(ee.value,s=>(i(),c("li",{key:s},o(s),1))),128))])])])])])])):C("",!0)])]))}},os=Le(ns,[["__scopeId","data-v-5c7c6df3"]]);const as={class:"detail-observation-test"},ls={class:"test-container"},is={key:0,class:"instruction-phase"},rs={key:1,class:"testing-phase"},cs={class:"test-header"},us={class:"test-info"},ds={class:"question-counter"},vs={class:"timer"},hs={class:"phase-indicator"},ps={class:"phase-name"},fs={key:0,class:"observation-phase"},ms={class:"observation-header"},_s={class:"observation-timer"},gs={class:"timer-circle"},ys={width:"60",height:"60",viewBox:"0 0 60 60"},bs=["stroke-dasharray"],$s={class:"timer-text"},xs={class:"image-container"},ks={class:"image-content"},ws={width:"100%",height:"100%",viewBox:"0 0 400 300"},Ms=["fill"],Ts=["cx","cy","r","fill","stroke","stroke-width"],Cs=["x","y","width","height","fill","stroke","stroke-width"],Ds=["points","fill","stroke","stroke-width"],Ss=["x","y","font-size","fill","font-weight"],qs=["x1","y1","x2","y2","stroke","stroke-width"],As={key:1,class:"questioning-phase"},Is={class:"question-container"},Ps={class:"question-options"},Qs=["onClick"],zs={class:"option-letter"},Ls={class:"option-content"},Bs={key:0,class:"option-text"},Es={key:1,class:"option-color"},Fs={key:2,class:"option-number"},Os={key:3,class:"option-shape"},Rs={width:"40",height:"40",viewBox:"0 0 40 40"},Ws=["fill"],js=["fill"],Vs=["fill"],Ns={class:"question-controls"},Us=["disabled"],Hs={key:2,class:"feedback-phase"},Js={class:"feedback-container"},Xs={class:"feedback-header"},Ys={class:"feedback-text"},Gs={class:"feedback-title"},Ks={class:"feedback-explanation"},Zs={class:"feedback-details"},en={class:"detail-item"},tn={class:"detail-value"},sn={class:"detail-item"},nn={class:"detail-value"},on={class:"detail-item"},an={class:"detail-value"},ln={key:2,class:"results-phase"},rn={class:"results-container"},cn={class:"overall-results"},un={class:"result-card"},dn={class:"result-content"},vn={class:"result-value"},hn={class:"result-card"},pn={class:"result-content"},fn={class:"result-value"},mn={class:"result-card"},_n={class:"result-content"},gn={class:"result-value"},yn={class:"result-card"},bn={class:"result-content"},$n={class:"result-value"},xn={class:"detailed-analysis"},kn={class:"analysis-grid"},wn={class:"analysis-item"},Mn={class:"category-chart"},Tn={class:"category-label"},Cn={class:"bar-container"},Dn={class:"accuracy-value"},Sn={class:"analysis-item"},qn={class:"time-distribution"},An={width:"300",height:"150",viewBox:"0 0 300 150"},In=["x","y","width","height"],Pn=["x"],Qn={class:"performance-feedback"},zn={class:"feedback-content"},Ln={class:"feedback-icon"},Bn={class:"feedback-text"},En={class:"feedback-title"},Fn={class:"feedback-description"},On={class:"improvement-suggestions"},Rn={__name:"DetailObservationTest",props:{testData:{type:Object,required:!0},settings:{type:Object,default:()=>({})}},emits:["test-completed","answer-submitted"],setup(we,{emit:ue}){const se=we,H=ue,T=b("instruction"),w=b("observation"),$=b(0),_=b(0),R=b([]),x=b([]),U=b(0),k=b(0),B=b(0),E=b(0),M=b(10),D=b(null),J=b(null),A=b(null),W=b(!1),Y=b(0),I=y(()=>R.value[$.value]),F=y(()=>I.value?I.value.detailQuestions[_.value]:null),Z=y(()=>({observation:"观察图像",questioning:"回答问题",feedback:"查看反馈"})[w.value]||""),z=y(()=>{var u;const r=_e(((u=I.value)==null?void 0:u.difficulty)||"medium");return(r-M.value)/r*100}),le=y(()=>I.value?_.value===I.value.detailQuestions.length-1:!0),de=y(()=>$.value===R.value.length-1),N=y(()=>{if(x.value.length===0)return 0;const r=x.value.reduce((a,m)=>a+m.correctCount,0),u=x.value.reduce((a,m)=>a+m.totalQuestions,0);return u>0?Math.round(r/u*100):0}),ee=y(()=>x.value.length===0?0:(x.value.reduce((u,a)=>u+a.totalTime,0)/x.value.length).toFixed(1)),ve=y(()=>{const m=N.value,L=Math.max(0,100-parseFloat(ee.value)/30*100);return Math.round(m*.7+L*.3)}),he=y(()=>{const r=N.value,u=x.value.reduce((a,m)=>{const L=Math.max(0,100-m.averageTime/20*100);return a+L},0)/x.value.length;return Math.round(r*.8+u*.2)}),ye=y(()=>{const r=new Set;return x.value.forEach(u=>{u.detailAnswers.forEach(a=>{r.add(a.category)})}),Array.from(r)}),pe=y(()=>{const r=[];x.value.forEach(V=>{V.detailAnswers.forEach(Q=>{r.push(Q.responseTime)})});const u=[0,5,10,15,20,30],a=new Array(u.length-1).fill(0);r.forEach(V=>{for(let Q=0;Q<u.length-1;Q++)if(V>=u[Q]&&V<u[Q+1]){a[Q]++;break}});const m=Math.max(...a),L=40,K=100;return a.map((V,Q)=>({x:Q*50+25,y:130-V/m*K,width:L,height:V/m*K,label:`${u[Q]}-${u[Q+1]}s`}))}),be=y(()=>{const r=[];return N.value<70&&r.push("建议提高观察的仔细程度，注意图像中的细节信息"),parseFloat(ee.value)>20&&r.push("可以通过练习提高观察和记忆的效率"),P("color")<70&&r.push("加强对颜色细节的观察和记忆训练"),P("shape")<70&&r.push("提高对形状和几何特征的识别能力"),r.length===0&&r.push("表现优秀，继续保持细致的观察能力！"),r}),G=()=>{T.value="testing",te(),ce(),U.value=Date.now()},te=()=>{const r=se.testData.difficulty||"medium",u=ne(r);R.value=[];for(let a=0;a<u;a++){const m=fe(a,u,r);R.value.push($e(m))}},ne=r=>({easy:6,medium:8,hard:10,expert:12})[r]||8,fe=(r,u,a)=>{const m=r/u;return a==="easy"?m<.7?"easy":"medium":a==="medium"?m<.3?"easy":m<.8?"medium":"hard":a==="hard"?m<.2?"medium":m<.7?"hard":"expert":m<.3?"hard":"expert"},$e=r=>{const a={easy:{elementCount:5,questionCount:3,observationTime:15},medium:{elementCount:8,questionCount:4,observationTime:12},hard:{elementCount:12,questionCount:5,observationTime:10},expert:{elementCount:15,questionCount:6,observationTime:8}}[r],m=me(a.elementCount,r),L=ie(m,a.questionCount);return{difficulty:r,background:xe(["#f0f8ff","#f5f5dc","#f0fff0","#fff8dc"]),elements:m,detailQuestions:L,observationTime:a.observationTime}},me=(r,u)=>{const a=[],m=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7","#a0e7e5","#ffeaa7"],L=["circle","rectangle","triangle"],K=["A","B","C","1","2","3","★","♦","♠"];for(let V=0;V<r;V++)if((Math.random()<.7?"shape":"text")==="shape"){const Se=L[Math.floor(Math.random()*L.length)],ge={type:Se,x:Math.random()*300+50,y:Math.random()*200+50,color:m[Math.floor(Math.random()*m.length)],size:Math.random()*20+10};Se==="rectangle"&&(ge.width=Math.random()*40+20,ge.height=Math.random()*30+15),Math.random()<.3&&(ge.border="#333",ge.borderWidth=2),a.push(ge)}else a.push({type:"text",x:Math.random()*300+50,y:Math.random()*200+50,text:K[Math.floor(Math.random()*K.length)],color:m[Math.floor(Math.random()*m.length)],fontSize:Math.random()*10+16,fontWeight:Math.random()<.5?"normal":"bold"});if(u!=="easy"){const V=Math.floor(Math.random()*3)+1;for(let Q=0;Q<V;Q++)a.push({type:"line",x1:Math.random()*400,y1:Math.random()*300,x2:Math.random()*400,y2:Math.random()*300,color:m[Math.floor(Math.random()*m.length)],width:Math.random()*3+1})}return a},ie=(r,u,a)=>{const m=[],L=["color","shape","count","position","size","text"];for(let K=0;K<u;K++){const V=L[Math.floor(Math.random()*L.length)],Q=oe(r,V);Q&&m.push(Q)}return m},oe=(r,u,a)=>{const m=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7","#a0e7e5","#ffeaa7"],L=["红色","青色","蓝色","黄色","紫色","浅青","浅黄"];switch(u){case"color":const K=r.filter(O=>O.color);if(K.length===0)return null;const V=K[Math.floor(Math.random()*K.length)].color,Q=m.indexOf(V),Se=L[Q]||"未知",ge=[{type:"color",color:V,label:Se},{type:"color",color:m[(Q+1)%m.length],label:L[(Q+1)%L.length]},{type:"color",color:m[(Q+2)%m.length],label:L[(Q+2)%L.length]},{type:"color",color:m[(Q+3)%m.length],label:L[(Q+3)%L.length]}];return{category:"color",question:"图像中出现了哪种颜色的元素？",options:re(ge),correctAnswer:ge.findIndex(O=>O.color===V),explanation:`图像中确实包含${Se}的元素。`};case"shape":const Be=r.filter(O=>["circle","rectangle","triangle"].includes(O.type));if(Be.length===0)return null;const Re=Be[Math.floor(Math.random()*Be.length)].type,Xe={circle:"圆形",rectangle:"矩形",triangle:"三角形"},We=[{type:"shape",shape:"circle",label:"圆形",color:"#666"},{type:"shape",shape:"rectangle",label:"矩形",color:"#666"},{type:"shape",shape:"triangle",label:"三角形",color:"#666"}];return{category:"shape",question:"图像中包含以下哪种形状？",options:We,correctAnswer:We.findIndex(O=>O.shape===Re),explanation:`图像中确实包含${Xe[Re]}。`};case"count":const Te=r.filter(O=>O.type==="circle").length,je=[{type:"number",value:Te},{type:"number",value:Math.max(0,Te-1)},{type:"number",value:Te+1},{type:"number",value:Te+2}].filter(O=>O.value>=0);return{category:"count",question:"图像中有多少个圆形？",options:re(je),correctAnswer:je.findIndex(O=>O.value===Te),explanation:`图像中共有${Te}个圆形。`};case"text":const Ee=r.filter(O=>O.type==="text");if(Ee.length===0)return null;const Ie=Ee[Math.floor(Math.random()*Ee.length)].text,Fe=["A","B","C","1","2","3","★","♦","♠"].filter(O=>O!==Ie),Ve=[{type:"text",text:Ie},{type:"text",text:Fe[0]},{type:"text",text:Fe[1]},{type:"text",text:Fe[2]}];return{category:"text",question:"图像中包含以下哪个文字或符号？",options:re(Ve),correctAnswer:Ve.findIndex(O=>O.text===Ie),explanation:`图像中确实包含文字或符号${Ie}。`};default:return null}},re=r=>{const u=[...r];for(let a=u.length-1;a>0;a--){const m=Math.floor(Math.random()*(a+1));[u[a],u[m]]=[u[m],u[a]]}return u},xe=r=>r[Math.floor(Math.random()*r.length)],_e=r=>({easy:15,medium:12,hard:10,expert:8})[r]||12,ce=()=>{w.value="observation",E.value=_e(I.value.difficulty),M.value=E.value,J.value=setInterval(()=>{M.value--,M.value<=0&&(clearInterval(J.value),ke())},1e3)},ke=()=>{w.value="questioning",_.value=0,A.value=null,k.value=Date.now(),d()},d=()=>{B.value=0,D.value=setInterval(()=>{B.value++},1e3)},p=r=>{A.value=r},s=()=>{if(A.value===null)return;clearInterval(D.value);const r=(Date.now()-k.value)/1e3,u=A.value===F.value.correctAnswer;W.value=u,Y.value=r.toFixed(1),x.value[$.value]||(x.value[$.value]={questionIndex:$.value,detailAnswers:[],correctCount:0,totalQuestions:I.value.detailQuestions.length,totalTime:0}),x.value[$.value].detailAnswers.push({questionIndex:_.value,selectedAnswer:A.value,correctAnswer:F.value.correctAnswer,isCorrect:u,responseTime:r,category:F.value.category}),u&&x.value[$.value].correctCount++,x.value[$.value].totalTime+=r,H("answer-submitted",{questionIndex:$.value,detailQuestionIndex:_.value,selectedAnswer:A.value,correctAnswer:F.value.correctAnswer,isCorrect:u,responseTime:r}),w.value="feedback"},t=()=>{le.value?de.value?n():($.value++,ce()):(_.value++,A.value=null,k.value=Date.now(),w.value="questioning",d())},n=()=>{T.value="results",x.value.forEach(r=>{r.averageTime=r.totalTime/r.totalQuestions}),H("test-completed",{testType:"detail-observation",results:{overallAccuracy:N.value,averageTime:parseFloat(ee.value),finalScore:ve.value,observationScore:he.value,answers:x.value,totalTime:(Date.now()-U.value)/1e3}})},v=(r,u,a)=>{const m=a*Math.sqrt(3)/2;return`${r},${u-m/2} ${r-a/2},${u+m/2} ${r+a/2},${u+m/2}`},f=()=>{const r=F.value.options[F.value.correctAnswer];return r.type==="text"?r.text:r.type==="color"?r.label:r.type==="number"?r.value.toString():r.type==="shape"?r.label:""},g=()=>{if(A.value===null)return"未选择";const r=F.value.options[A.value];return r.type==="text"?r.text:r.type==="color"?r.label:r.type==="number"?r.value.toString():r.type==="shape"?r.label:""},l=r=>{const u=Math.floor(r/60),a=r%60;return`${u.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},h=r=>({color:"颜色识别",shape:"形状识别",count:"数量统计",position:"位置记忆",size:"大小比较",text:"文字识别"})[r]||r,P=r=>{const u=[];if(x.value.forEach(m=>{m.detailAnswers.forEach(L=>{L.category===r&&u.push(L)})}),u.length===0)return 0;const a=u.filter(m=>m.isCorrect).length;return Math.round(a/u.length*100)},j=r=>r>=90?"excellent":r>=80?"good":r>=70?"average":"poor",Me=r=>r>=90?"🏆":r>=80?"👍":r>=70?"👌":"💪",De=r=>r>=90?"优秀表现":r>=80?"良好表现":r>=70?"一般表现":"需要提高",Je=r=>r>=90?"您的细节观察能力非常出色，能够准确捕捉和记忆图像中的各种细节信息。":r>=80?"您具有良好的细节观察能力，在大多数情况下能够准确识别图像细节。":r>=70?"您的细节观察能力处于平均水平，通过练习可以进一步提高。":"建议加强细节观察训练，提高对图像信息的敏感度和记忆能力。";return Pe(()=>{}),Qe(()=>{D.value&&clearInterval(D.value),J.value&&clearInterval(J.value)}),Oe(()=>se.testData,r=>{r&&T.value==="instruction"&&($.value=0,_.value=0,x.value=[],A.value=null)},{deep:!0}),(r,u)=>(i(),c("div",as,[e("div",ls,[T.value==="instruction"?(i(),c("div",is,[e("div",{class:"instruction-content"},[u[0]||(u[0]=ze('<h3 data-v-28101271>细节观察测试</h3><div class="instruction-text" data-v-28101271><p data-v-28101271>在这个测试中，您需要仔细观察图像并记住其中的细节信息。</p><div class="instruction-steps" data-v-28101271><div class="step-item" data-v-28101271><span class="step-number" data-v-28101271>1</span><span class="step-text" data-v-28101271>仔细观察展示的图像</span></div><div class="step-item" data-v-28101271><span class="step-number" data-v-28101271>2</span><span class="step-text" data-v-28101271>记住图像中的重要细节</span></div><div class="step-item" data-v-28101271><span class="step-number" data-v-28101271>3</span><span class="step-text" data-v-28101271>回答关于图像细节的问题</span></div><div class="step-item" data-v-28101271><span class="step-number" data-v-28101271>4</span><span class="step-text" data-v-28101271>尽可能准确地回答每个问题</span></div></div></div>',2)),e("button",{class:"btn-start",onClick:G},"开始测试")])])):C("",!0),T.value==="testing"?(i(),c("div",rs,[e("div",cs,[e("div",us,[e("span",ds,"第 "+o($.value+1)+" / "+o(R.value.length)+" 题",1),e("span",vs,o(l(B.value)),1)]),e("div",hs,[u[1]||(u[1]=e("span",{class:"phase-label"},"当前阶段:",-1)),e("span",ps,o(Z.value),1)])]),w.value==="observation"?(i(),c("div",fs,[e("div",ms,[u[3]||(u[3]=e("h4",null,"请仔细观察下面的图像",-1)),e("div",_s,[e("div",gs,[(i(),c("svg",ys,[u[2]||(u[2]=e("circle",{cx:"30",cy:"30",r:"25",fill:"none",stroke:"#e0e0e0","stroke-width":"4"},null,-1)),e("circle",{cx:"30",cy:"30",r:"25",fill:"none",stroke:"var(--color-primary)","stroke-width":"4","stroke-linecap":"round","stroke-dasharray":`${z.value*1.57} 157`,transform:"rotate(-90 30 30)"},null,8,bs)])),e("div",$s,o(M.value)+"s",1)])])]),e("div",xs,[e("div",{class:"detail-image",style:ae({backgroundImage:`url(${I.value.imageUrl})`})},[e("div",ks,[(i(),c("svg",ws,[e("rect",{width:"400",height:"300",fill:I.value.background},null,8,Ms),(i(!0),c(S,null,q(I.value.elements,(a,m)=>(i(),c("g",{key:m},[a.type==="circle"?(i(),c("circle",{key:0,cx:a.x,cy:a.y,r:a.size,fill:a.color,stroke:a.border||"none","stroke-width":a.borderWidth||0},null,8,Ts)):a.type==="rectangle"?(i(),c("rect",{key:1,x:a.x-a.width/2,y:a.y-a.height/2,width:a.width,height:a.height,fill:a.color,stroke:a.border||"none","stroke-width":a.borderWidth||0},null,8,Cs)):a.type==="triangle"?(i(),c("polygon",{key:2,points:v(a.x,a.y,a.size),fill:a.color,stroke:a.border||"none","stroke-width":a.borderWidth||0},null,8,Ds)):C("",!0),a.type==="text"?(i(),c("text",{key:3,x:a.x,y:a.y,"font-size":a.fontSize||16,fill:a.color,"font-weight":a.fontWeight||"normal","text-anchor":"middle","dominant-baseline":"middle"},o(a.text),9,Ss)):C("",!0),a.type==="line"?(i(),c("line",{key:4,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,stroke:a.color,"stroke-width":a.width||2},null,8,qs)):C("",!0)]))),128))]))])],4)])])):C("",!0),w.value==="questioning"?(i(),c("div",As,[e("div",Is,[e("h4",null,o(F.value.question),1),e("div",Ps,[(i(!0),c(S,null,q(F.value.options,(a,m)=>(i(),c("div",{key:m,class:X(["option-item",{selected:A.value===m}]),onClick:L=>p(m)},[e("div",zs,o(String.fromCharCode(65+m)),1),e("div",Ls,[a.type==="text"?(i(),c("div",Bs,o(a.text),1)):a.type==="color"?(i(),c("div",Es,[e("div",{class:"color-sample",style:ae({backgroundColor:a.color})},null,4),e("span",null,o(a.label),1)])):a.type==="number"?(i(),c("div",Fs,o(a.value),1)):a.type==="shape"?(i(),c("div",Os,[(i(),c("svg",Rs,[a.shape==="circle"?(i(),c("circle",{key:0,cx:"20",cy:"20",r:"15",fill:a.color||"#333"},null,8,Ws)):a.shape==="rectangle"?(i(),c("rect",{key:1,x:"5",y:"10",width:"30",height:"20",fill:a.color||"#333"},null,8,js)):a.shape==="triangle"?(i(),c("polygon",{key:2,points:"20,5 35,35 5,35",fill:a.color||"#333"},null,8,Vs)):C("",!0)])),e("span",null,o(a.label),1)])):C("",!0)])],10,Qs))),128))]),e("div",Ns,[e("button",{class:"btn-submit",onClick:s,disabled:A.value===null},o(le.value?"下一题":"下一个问题"),9,Us)])])])):C("",!0),w.value==="feedback"?(i(),c("div",Hs,[e("div",Js,[e("div",Xs,[e("div",{class:X(["feedback-icon",{correct:W.value,incorrect:!W.value}])},o(W.value?"✓":"✗"),3),e("div",Ys,[e("div",Gs,o(W.value?"回答正确！":"回答错误"),1),e("div",Ks,o(F.value.explanation),1)])]),e("div",Zs,[e("div",en,[u[4]||(u[4]=e("span",{class:"detail-label"},"正确答案:",-1)),e("span",tn,o(f()),1)]),e("div",sn,[u[5]||(u[5]=e("span",{class:"detail-label"},"您的答案:",-1)),e("span",nn,o(g()),1)]),e("div",on,[u[6]||(u[6]=e("span",{class:"detail-label"},"用时:",-1)),e("span",an,o(Y.value)+"秒",1)])]),e("button",{class:"btn-continue",onClick:t},o(de.value?"查看结果":"继续测试"),1)])])):C("",!0)])):C("",!0),T.value==="results"?(i(),c("div",ln,[e("div",rn,[u[20]||(u[20]=e("h3",null,"细节观察测试结果",-1)),e("div",cn,[e("div",un,[u[8]||(u[8]=e("div",{class:"result-icon"},"🎯",-1)),e("div",dn,[e("div",vn,o(N.value)+"%",1),u[7]||(u[7]=e("div",{class:"result-label"},"总体准确率",-1))])]),e("div",hn,[u[10]||(u[10]=e("div",{class:"result-icon"},"⚡",-1)),e("div",pn,[e("div",fn,o(ee.value)+"s",1),u[9]||(u[9]=e("div",{class:"result-label"},"平均用时",-1))])]),e("div",mn,[u[12]||(u[12]=e("div",{class:"result-icon"},"📊",-1)),e("div",_n,[e("div",gn,o(ve.value),1),u[11]||(u[11]=e("div",{class:"result-label"},"综合得分",-1))])]),e("div",yn,[u[14]||(u[14]=e("div",{class:"result-icon"},"👁️",-1)),e("div",bn,[e("div",$n,o(he.value)+"%",1),u[13]||(u[13]=e("div",{class:"result-label"},"观察能力",-1))])])]),e("div",xn,[u[17]||(u[17]=e("h4",null,"详细分析",-1)),e("div",kn,[e("div",wn,[u[15]||(u[15]=e("h5",null,"题型表现",-1)),e("div",Mn,[(i(!0),c(S,null,q(ye.value,a=>(i(),c("div",{key:a,class:"category-bar"},[e("span",Tn,o(h(a)),1),e("div",Cn,[e("div",{class:"bar-fill",style:ae({width:P(a)+"%"})},null,4)]),e("span",Dn,o(P(a))+"%",1)]))),128))])]),e("div",Sn,[u[16]||(u[16]=e("h5",null,"反应时间分布",-1)),e("div",qn,[(i(),c("svg",An,[(i(!0),c(S,null,q(pe.value,(a,m)=>(i(),c("g",{key:m},[e("rect",{x:a.x,y:a.y,width:a.width,height:a.height,fill:"var(--color-primary)",opacity:"0.7"},null,8,In),e("text",{x:a.x+a.width/2,y:145,"text-anchor":"middle","font-size":"10",fill:"#666"},o(a.label),9,Pn)]))),128))]))])])])]),e("div",Qn,[u[19]||(u[19]=e("h4",null,"表现评价",-1)),e("div",zn,[e("div",{class:X(["feedback-item",j(N.value)])},[e("div",Ln,o(Me(N.value)),1),e("div",Bn,[e("div",En,o(De(N.value)),1),e("div",Fn,o(Je(N.value)),1)])],2),e("div",On,[u[18]||(u[18]=e("h5",null,"改进建议",-1)),e("ul",null,[(i(!0),c(S,null,q(be.value,a=>(i(),c("li",{key:a},o(a),1))),128))])])])])])])):C("",!0)])]))}},Wn=Le(Rn,[["__scopeId","data-v-28101271"]]);const jn={class:"change-detection-test"},Vn={class:"test-container"},Nn={key:0,class:"instruction-phase"},Un={key:1,class:"testing-phase"},Hn={class:"test-header"},Jn={class:"test-info"},Xn={class:"question-counter"},Yn={class:"timer"},Gn={class:"found-differences"},Kn={class:"progress-bar"},Zn={class:"question-container"},eo={class:"images-container"},to={class:"image-panel"},so={class:"image-wrapper"},no=["cx","cy"],oo={class:"image-panel"},ao={class:"image-wrapper"},lo=["cx","cy"],io={class:"question-controls"},ro=["disabled"],co={key:2,class:"feedback-phase"},uo={class:"feedback-container"},vo={class:"feedback-header"},ho={class:"feedback-text"},po={class:"feedback-title"},fo={class:"feedback-explanation"},mo={class:"feedback-details"},_o={class:"detail-item"},go={class:"detail-value"},yo={class:"detail-item"},bo={class:"detail-value"},$o={class:"detail-item"},xo={class:"detail-value"},ko={class:"detail-item"},wo={class:"detail-value"},Mo={class:"all-differences"},To={class:"differences-grid"},Co={class:"difference-status"},Do={class:"difference-description"},So={key:3,class:"results-phase"},qo={class:"results-container"},Ao={class:"overall-results"},Io={class:"result-card"},Po={class:"result-value"},Qo={class:"result-card"},zo={class:"result-value"},Lo={class:"result-card"},Bo={class:"result-value"},Eo={class:"result-card"},Fo={class:"result-value"},Oo={class:"detailed-analysis"},Ro={class:"analysis-grid"},Wo={class:"analysis-item"},jo={class:"difficulty-chart"},Vo={class:"difficulty-label"},No={class:"bar-container"},Uo={class:"accuracy-value"},Ho={class:"analysis-item"},Jo={class:"efficiency-stats"},Xo={class:"stat-row"},Yo={class:"stat-value"},Go={class:"stat-row"},Ko={class:"stat-value"},Zo={class:"stat-row"},ea={class:"stat-value"},ta={class:"stat-row"},sa={class:"stat-value"},na={class:"analysis-item"},oa={class:"time-distribution"},aa={class:"distribution-chart"},la=["title"],ia={class:"performance-feedback"},ra={class:"feedback-icon"},ca={class:"feedback-text"},ua={class:"feedback-title"},da={class:"feedback-description"},va={class:"improvement-suggestions"},ha={key:0},pa={key:1},fa={key:2},ma={key:3},_a={__name:"ChangeDetectionTest",props:{testData:{type:Object,default:()=>({difficulty:"medium",questionCount:8,timeLimit:480})}},emits:["test-completed","answer-submitted"],setup(we,{emit:ue}){const se=we,H=ue,T=b("instruction"),w=b(0),$=b([]),_=b([]),R=b([]),x=b(null),U=b(null),k=b(0),B=b(null),E=b(0),M=y(()=>R.value[w.value]||{}),D=y(()=>(w.value+1)/R.value.length*100),J=y(()=>w.value===R.value.length-1),A=y(()=>{if(_.value.length===0)return 0;const t=_.value.reduce((v,f)=>v+f.totalDifferences,0),n=_.value.reduce((v,f)=>v+f.foundDifferences,0);return t>0?Math.round(n/t*100):0}),W=y(()=>_.value.length===0?0:(_.value.reduce((n,v)=>n+v.responseTime,0)/_.value.length).toFixed(1)),Y=y(()=>{const t=A.value,n=Math.max(0,60-parseFloat(W.value))*1,v=z.value*.5;return Math.min(100,Math.round(t+n+v))}),I=y(()=>{const t=A.value,n=z.value;return Math.round(t*.7+n*.3)}),F=y(()=>{if(_.value.length===0)return 0;const t=_.value.reduce((v,f)=>v+f.foundDifferences,0),n=_.value.reduce((v,f)=>v+f.responseTime,0);return t>0?(n/t).toFixed(1):0}),Z=y(()=>{if(_.value.length===0)return 0;const t=_.value.map(n=>n.foundDifferences>0?n.responseTime/n.foundDifferences:1/0).filter(n=>n!==1/0);return t.length>0?Math.min(...t).toFixed(1):0}),z=y(()=>{if(_.value.length===0)return 0;const t=_.value.filter(n=>n.foundDifferences===n.totalDifferences).length;return Math.round(t/_.value.length*100)}),le=y(()=>_.value.filter(t=>t.foundDifferences===t.totalDifferences).length),de=()=>{T.value="testing",x.value=Date.now(),N(),te()},N=()=>{const{difficulty:t,questionCount:n}=se.testData;R.value=[];for(let v=0;v<n;v++)R.value.push(ee(t,v))},ee=(t,n)=>{const v={easy:{differences:3,complexity:2},medium:{differences:4,complexity:3},hard:{differences:5,complexity:4},expert:{differences:6,complexity:5}},f=v[t]||v.medium,g=ve(f.complexity),l=he(g,f.differences);return{id:n,question:`请找出两幅图像之间的 ${f.differences} 个差异`,leftImage:g,rightImage:ye(g,l),differences:l,difficulty:t}},ve=t=>{const n=[],v=["circle","square","triangle","diamond"],f=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c"];for(let g=0;g<t*3;g++)n.push({id:g,type:v[Math.floor(Math.random()*v.length)],x:50+Math.random()*300,y:50+Math.random()*200,size:20+Math.random()*30,color:f[Math.floor(Math.random()*f.length)],rotation:Math.random()*360});return n},he=(t,n)=>{const v=[],f=new Set;for(let g=0;g<n;g++){let l;do l=Math.floor(Math.random()*t.length);while(f.has(l));f.add(l);const h=t[l],P=Math.random();let j="";P<.25?j="颜色变化":P<.5?j="大小变化":P<.75?j="形状变化":j="位置变化",v.push({elementIndex:l,type:P<.25?"color":P<.5?"size":P<.75?"shape":"position",x:h.x,y:h.y,description:j})}return v},ye=(t,n)=>{const v=JSON.parse(JSON.stringify(t)),f=["circle","square","triangle","diamond"],g=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c"];return n.forEach(l=>{const h=v[l.elementIndex];switch(l.type){case"color":do h.color=g[Math.floor(Math.random()*g.length)];while(h.color===t[l.elementIndex].color);break;case"size":h.size=h.size>30?h.size-15:h.size+15;break;case"shape":do h.type=f[Math.floor(Math.random()*f.length)];while(h.type===t[l.elementIndex].type);break;case"position":h.x=Math.max(30,Math.min(370,h.x+(Math.random()-.5)*100)),h.y=Math.max(30,Math.min(270,h.y+(Math.random()-.5)*80)),l.x=h.x,l.y=h.y;break}}),v},pe=t=>!t||!Array.isArray(t)?"":t.map(n=>{const{type:v,x:f,y:g,size:l,color:h,rotation:P=0}=n,j=P?`transform="rotate(${P} ${f} ${g})"`:"";switch(v){case"circle":return`<circle cx="${f}" cy="${g}" r="${l/2}" fill="${h}" ${j}/>`;case"square":return`<rect x="${f-l/2}" y="${g-l/2}" width="${l}" height="${l}" fill="${h}" ${j}/>`;case"triangle":return`<polygon points="${be(f,g,l)}" fill="${h}" ${j}/>`;case"diamond":return`<polygon points="${`${f},${g-l/2} ${f+l/2},${g} ${f},${g+l/2} ${f-l/2},${g}`}" fill="${h}" ${j}/>`;default:return""}}).join(""),be=(t,n,v)=>{const f=v*Math.sqrt(3)/2;return`${t},${n-f/2} ${t-v/2},${n+f/2} ${t+v/2},${n+f/2}`},G=(t,n)=>{var P,j;const v=t.target.getBoundingClientRect(),f=t.clientX-v.left,g=t.clientY-v.top,l=25,h=(P=M.value.differences)==null?void 0:P.find(Me=>Math.abs(Me.x-f)<l&&Math.abs(Me.y-g)<l);h&&($.value.some(De=>Math.abs(De.x-h.x)<l&&Math.abs(De.y-h.y)<l)||($.value.push({x:h.x,y:h.y,type:h.type,description:h.description}),$.value.length===((j=M.value.differences)==null?void 0:j.length)&&setTimeout(()=>{ne()},500)))},te=()=>{k.value=0,U.value=Date.now(),B.value=setInterval(()=>{k.value++},1e3)},ne=()=>{var n,v;clearInterval(B.value);const t=(Date.now()-U.value)/1e3;E.value=t.toFixed(1),_.value.push({questionIndex:w.value,foundDifferences:$.value.length,totalDifferences:((n=M.value.differences)==null?void 0:n.length)||0,responseTime:t,difficulty:M.value.difficulty,differences:[...$.value]}),H("answer-submitted",{questionIndex:w.value,foundDifferences:$.value.length,totalDifferences:((v=M.value.differences)==null?void 0:v.length)||0,responseTime:t}),T.value="feedback"},fe=()=>{ne()},$e=()=>{J.value?me():(w.value++,$.value=[],T.value="testing",te())},me=()=>{T.value="results",H("test-completed",{testType:"change-detection",results:{overallAccuracy:A.value,averageTime:parseFloat(W.value),finalScore:Y.value,detectionScore:I.value,answers:_.value,totalTime:(Date.now()-x.value)/1e3}})},ie=()=>{const t=oe();return t===100?"excellent":t>=75?"good":"average"},oe=()=>{var n;const t=((n=M.value.differences)==null?void 0:n.length)||0;return t>0?Math.round($.value.length/t*100):0},re=()=>{const t=oe();return t===100?"完美表现！":t>=75?"表现良好！":t>=50?"还不错！":"继续努力！"},xe=t=>{const n=Math.floor(t/60),v=t%60;return`${n.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`},_e=t=>({easy:"简单",medium:"中等",hard:"困难",expert:"专家"})[t]||t,ce=t=>{const n=_.value.filter(g=>g.difficulty===t);if(n.length===0)return 0;const v=n.reduce((g,l)=>g+l.totalDifferences,0),f=n.reduce((g,l)=>g+l.foundDifferences,0);return v>0?Math.round(f/v*100):0},ke=t=>t>=90?"excellent":t>=80?"good":t>=70?"average":"poor",d=t=>t>=90?"🏆":t>=80?"👍":t>=70?"👌":"💪",p=t=>t>=90?"优秀表现":t>=80?"良好表现":t>=70?"一般表现":"需要提高",s=t=>t>=90?"您的变化检测能力非常出色，能够快速准确地发现图像中的细微差异。":t>=80?"您具有良好的变化检测能力，在大多数情况下能够准确识别差异。":t>=70?"您的变化检测能力处于平均水平，通过练习可以进一步提高。":"建议加强变化检测训练，提高对视觉信息变化的敏感度和观察能力。";return Pe(()=>{}),Qe(()=>{B.value&&clearInterval(B.value)}),Oe(()=>se.testData,t=>{t&&T.value==="instruction"&&(w.value=0,$.value=[],_.value=[])},{deep:!0}),(t,n)=>{var v,f,g,l;return i(),c("div",jn,[e("div",Vn,[T.value==="instruction"?(i(),c("div",Nn,[e("div",{class:"instruction-content"},[n[2]||(n[2]=ze('<h3 data-v-907a1ac3>变化检测测试</h3><p class="instruction-text" data-v-907a1ac3> 这个测试将评估您的变化检测能力。您需要观察两个相似的图像，找出它们之间的差异。 </p><div class="instruction-steps" data-v-907a1ac3><div class="step-item" data-v-907a1ac3><div class="step-number" data-v-907a1ac3>1</div><div class="step-text" data-v-907a1ac3>仔细观察左右两幅图像</div></div><div class="step-item" data-v-907a1ac3><div class="step-number" data-v-907a1ac3>2</div><div class="step-text" data-v-907a1ac3>找出图像之间的差异</div></div><div class="step-item" data-v-907a1ac3><div class="step-number" data-v-907a1ac3>3</div><div class="step-text" data-v-907a1ac3>点击差异位置进行标记</div></div><div class="step-item" data-v-907a1ac3><div class="step-number" data-v-907a1ac3>4</div><div class="step-text" data-v-907a1ac3>在规定时间内找出所有差异</div></div></div>',3)),e("button",{onClick:de,class:"btn-start"}," 开始测试 ")])])):T.value==="testing"?(i(),c("div",Un,[e("div",Hn,[e("div",Jn,[e("div",Xn," 题目 "+o(w.value+1)+" / "+o(R.value.length),1),e("div",Yn," ⏱️ "+o(xe(k.value)),1),e("div",Gn," 已找到: "+o($.value.length)+" / "+o(((v=M.value.differences)==null?void 0:v.length)||0),1)]),e("div",Kn,[e("div",{class:"progress-fill",style:ae({width:D.value+"%"})},null,4)])]),e("div",Zn,[e("h4",null,o(M.value.question),1),e("div",eo,[e("div",to,[n[3]||(n[3]=e("h5",null,"图像 A",-1)),e("div",so,[(i(),c("svg",{width:"400",height:"300",class:"comparison-image",onClick:n[0]||(n[0]=h=>G(h))},[(i(),Ce(Ne("g"),{innerHTML:pe(M.value.leftImage)},null,8,["innerHTML"])),(i(!0),c(S,null,q($.value,(h,P)=>(i(),c("circle",{key:"left-"+P,cx:h.x,cy:h.y,r:"15",fill:"none",stroke:"#28a745","stroke-width":"3",class:"difference-marker"},null,8,no))),128))]))])]),e("div",oo,[n[4]||(n[4]=e("h5",null,"图像 B",-1)),e("div",ao,[(i(),c("svg",{width:"400",height:"300",class:"comparison-image",onClick:n[1]||(n[1]=h=>G(h))},[(i(),Ce(Ne("g"),{innerHTML:pe(M.value.rightImage)},null,8,["innerHTML"])),(i(!0),c(S,null,q($.value,(h,P)=>(i(),c("circle",{key:"right-"+P,cx:h.x,cy:h.y,r:"15",fill:"none",stroke:"#28a745","stroke-width":"3",class:"difference-marker"},null,8,lo))),128))]))])])]),e("div",io,[e("button",{onClick:ne,disabled:$.value.length===0,class:"btn-submit"},o($.value.length===(((f=M.value.differences)==null?void 0:f.length)||0)?"完成":"提交当前结果"),9,ro),e("button",{onClick:fe,class:"btn-skip"}," 跳过此题 ")])])])):T.value==="feedback"?(i(),c("div",co,[e("div",uo,[e("div",vo,[e("div",{class:X(["feedback-icon",ie()])},o(ie()==="excellent"?"🏆":ie()==="good"?"👍":"👌"),3),e("div",ho,[e("div",po,o(re()),1),e("div",fo," 您找到了 "+o($.value.length)+" / "+o(((g=M.value.differences)==null?void 0:g.length)||0)+" 个差异 ",1)])]),e("div",mo,[e("div",_o,[n[5]||(n[5]=e("span",{class:"detail-label"},"找到差异：",-1)),e("span",go,o($.value.length)+" 个",1)]),e("div",yo,[n[6]||(n[6]=e("span",{class:"detail-label"},"总差异数：",-1)),e("span",bo,o(((l=M.value.differences)==null?void 0:l.length)||0)+" 个",1)]),e("div",$o,[n[7]||(n[7]=e("span",{class:"detail-label"},"准确率：",-1)),e("span",xo,o(oe())+"%",1)]),e("div",ko,[n[8]||(n[8]=e("span",{class:"detail-label"},"用时：",-1)),e("span",wo,o(E.value)+"秒",1)])]),e("div",Mo,[n[9]||(n[9]=e("h5",null,"所有差异位置：",-1)),e("div",To,[(i(!0),c(S,null,q(M.value.differences,(h,P)=>(i(),c("div",{class:"difference-item",key:P},[e("div",Co,o($.value.some(j=>Math.abs(j.x-h.x)<20&&Math.abs(j.y-h.y)<20)?"✓":"✗"),1),e("div",Do,o(h.description),1)]))),128))])]),e("button",{onClick:$e,class:"btn-continue"},o(J.value?"查看结果":"下一题"),1)])])):T.value==="results"?(i(),c("div",So,[e("div",qo,[n[30]||(n[30]=e("h3",null,"变化检测测试结果",-1)),e("div",Ao,[e("div",Io,[n[10]||(n[10]=e("div",{class:"result-icon"},"🎯",-1)),e("div",Po,o(A.value)+"%",1),n[11]||(n[11]=e("div",{class:"result-label"},"总体准确率",-1))]),e("div",Qo,[n[12]||(n[12]=e("div",{class:"result-icon"},"⏱️",-1)),e("div",zo,o(W.value),1),n[13]||(n[13]=e("div",{class:"result-label"},"平均用时(秒)",-1))]),e("div",Lo,[n[14]||(n[14]=e("div",{class:"result-icon"},"⭐",-1)),e("div",Bo,o(Y.value),1),n[15]||(n[15]=e("div",{class:"result-label"},"综合得分",-1))]),e("div",Eo,[n[16]||(n[16]=e("div",{class:"result-icon"},"👁️",-1)),e("div",Fo,o(I.value),1),n[17]||(n[17]=e("div",{class:"result-label"},"检测能力得分",-1))])]),e("div",Oo,[n[26]||(n[26]=e("h4",null,"详细分析",-1)),e("div",Ro,[e("div",Wo,[n[18]||(n[18]=e("h5",null,"难度表现",-1)),e("div",jo,[(i(),c(S,null,q(["easy","medium","hard","expert"],h=>e("div",{key:h,class:"difficulty-bar"},[e("div",Vo,o(_e(h)),1),e("div",No,[e("div",{class:"bar-fill",style:ae({width:ce(h)+"%"})},null,4)]),e("div",Uo,o(ce(h))+"%",1)])),64))])]),e("div",Ho,[n[23]||(n[23]=e("h5",null,"检测效率",-1)),e("div",Jo,[e("div",Xo,[n[19]||(n[19]=e("span",{class:"stat-label"},"平均检测时间：",-1)),e("span",Yo,o(F.value)+"秒/个",1)]),e("div",Go,[n[20]||(n[20]=e("span",{class:"stat-label"},"最快检测：",-1)),e("span",Ko,o(Z.value)+"秒",1)]),e("div",Zo,[n[21]||(n[21]=e("span",{class:"stat-label"},"检测成功率：",-1)),e("span",ea,o(z.value)+"%",1)]),e("div",ta,[n[22]||(n[22]=e("span",{class:"stat-label"},"完全正确题目：",-1)),e("span",sa,o(le.value)+" / "+o(_.value.length),1)])])]),e("div",na,[n[25]||(n[25]=e("h5",null,"反应时间分布",-1)),e("div",oa,[e("div",aa,[(i(!0),c(S,null,q(_.value,(h,P)=>(i(),c("div",{key:P,class:"time-bar",style:ae({height:Math.min(h.responseTime/60*100,100)+"%"}),title:`第${P+1}题: ${h.responseTime.toFixed(1)}秒`},null,12,la))),128))]),n[24]||(n[24]=e("div",{class:"distribution-labels"},[e("span",null,"题目序号")],-1))])])])]),e("div",ia,[n[29]||(n[29]=e("h4",null,"表现评价",-1)),e("div",{class:X(["feedback-item",ke(A.value)])},[e("div",ra,o(d(A.value)),1),e("div",ca,[e("div",ua,o(p(A.value)),1),e("div",da,o(s(A.value)),1)])],2),e("div",va,[n[28]||(n[28]=e("h5",null,"改进建议",-1)),e("ul",null,[A.value<70?(i(),c("li",ha,"加强视觉注意力训练，提高对细节变化的敏感度")):C("",!0),W.value>45?(i(),c("li",pa,"练习快速扫描技巧，提高检测效率")):C("",!0),z.value<80?(i(),c("li",fa,"重点训练系统性观察方法，避免遗漏")):C("",!0),le.value<_.value.length/2?(i(),c("li",ma,"加强耐心和细致度，确保找全所有差异")):C("",!0),n[27]||(n[27]=e("li",null,"定期进行变化检测练习，保持和提升观察能力",-1))])])])])])):C("",!0)])])}}},ga=Le(_a,[["__scopeId","data-v-907a1ac3"]]);const ya={class:"observation-assessment"},ba={class:"assessment-container"},$a={key:0,class:"setup-phase"},xa={class:"setup-content"},ka={class:"settings-grid"},wa={class:"setting-group"},Ma={class:"difficulty-options"},Ta=["value"],Ca={class:"option-content"},Da={class:"option-title"},Sa={class:"option-desc"},qa={class:"setting-group"},Aa={class:"module-options"},Ia=["value"],Pa={class:"option-content"},Qa={class:"option-title"},za={class:"module-icon"},La={class:"option-desc"},Ba={class:"setting-group"},Ea={class:"personal-settings"},Fa={class:"setting-item"},Oa={class:"setting-item"},Ra={class:"setting-item"},Wa={class:"setup-actions"},ja=["disabled"],Va={key:1,class:"testing-phase"},Na={class:"test-header"},Ua={class:"test-progress"},Ha={class:"progress-bar"},Ja={class:"progress-text"},Xa={class:"test-timer"},Ya={class:"current-test"},Ga={key:2,class:"results-phase"},Ka={class:"results-container"},Za={class:"overall-score"},el={class:"score-circle"},tl={width:"200",height:"200",viewBox:"0 0 200 200"},sl=["stroke-dasharray"],nl={class:"score-content"},ol={class:"score-value"},al={class:"score-details"},ll={class:"score-item"},il={class:"score-item"},rl={class:"value"},cl={class:"score-item"},ul={class:"value"},dl={class:"score-item"},vl={class:"value"},hl={class:"ability-analysis"},pl={class:"analysis-content"},fl={class:"radar-chart"},ml={width:"300",height:"300",viewBox:"0 0 300 300"},_l={transform:"translate(150,150)"},gl={class:"radar-grid"},yl=["r"],bl=["x2","y2"],$l=["points"],xl=["cx","cy"],kl=["x","y"],wl={class:"ability-details"},Ml={class:"ability-header"},Tl={class:"ability-icon"},Cl={class:"ability-name"},Dl={class:"ability-score"},Sl={class:"ability-bar"},ql={class:"ability-description"},Al={class:"ability-feedback"},Il={class:"detailed-results"},Pl={class:"results-tabs"},Ql=["onClick"],zl={class:"tab-content"},Ll={key:0,class:"module-results"},Bl={class:"module-header"},El={class:"module-icon"},Fl={class:"module-name"},Ol={class:"module-score"},Rl={class:"module-stats"},Wl={class:"stat-item"},jl={class:"stat-value"},Vl={class:"stat-item"},Nl={class:"stat-value"},Ul={class:"stat-item"},Hl={class:"stat-value"},Jl={class:"module-feedback"},Xl={key:1,class:"question-details"},Yl={class:"question-header"},Gl={class:"question-number"},Kl={class:"question-type"},Zl={class:"question-details-content"},ei={class:"detail-item"},ti={class:"detail-value"},si={class:"detail-item"},ni={class:"detail-value"},oi={class:"detail-item"},ai={class:"detail-value"},li={key:2,class:"improvement-suggestions"},ii={class:"suggestion-header"},ri={class:"suggestion-icon"},ci={class:"suggestion-title"},ui={class:"suggestion-content"},di={class:"suggestion-actions"},vi={class:"training-methods"},hi={class:"method-tags"},pi=["onClick"],fi={__name:"ObservationAssessment",setup(we){const ue=Ye(),se=Ge(),H=b("setup"),T=b(0),w=b(0),$=b(1200),_=b(null),R=b(0),x=b([]),U=b("modules"),k=b({difficulty:"medium",selectedModules:["visual-search","detail-observation","pattern-comparison","change-detection"],duration:"medium",feedbackMode:"delayed",enableHints:!0}),B=[{value:"easy",label:"简单",description:"适合初学者，题目相对简单，时间充裕"},{value:"medium",label:"中等",description:"标准难度，适合大多数用户"},{value:"hard",label:"困难",description:"高难度挑战，适合有经验的用户"},{value:"expert",label:"专家",description:"极高难度，适合专业人士"}],E=[{id:"visual-search",name:"视觉搜索",icon:"🔍",description:"在复杂场景中快速定位目标物体"},{id:"detail-observation",name:"细节观察",icon:"🔎",description:"观察和记忆图像中的细节信息"},{id:"pattern-comparison",name:"图形比较",icon:"📊",description:"比较图形之间的异同点"},{id:"change-detection",name:"变化检测",icon:"🔄",description:"检测图像中发生的变化"}],M=b([]),D=y(()=>M.value[T.value]),J=y(()=>k.value.selectedModules.length>0),A=y(()=>w.value>0?T.value/w.value*100:0),W=y(()=>{if(x.value.length===0)return 0;const s=x.value.reduce((n,v)=>n+v.score,0),t=x.value.length*100;return Math.round(s/t*100)}),Y=y(()=>{if(x.value.length===0)return 0;const s=x.value.filter(t=>t.correct).length;return Math.round(s/x.value.length*100)}),I=y(()=>x.value.length===0?0:(x.value.reduce((t,n)=>t+n.responseTime,0)/x.value.length).toFixed(1)),F=y(()=>x.value.length),Z=y(()=>{const s=W.value;return s>=90?"优秀":s>=80?"良好":s>=70?"一般":s>=60?"及格":"需改进"}),z=y(()=>{const s={"visual-search":{name:"视觉搜索",icon:"🔍",scores:[]},"detail-observation":{name:"细节观察",icon:"🔎",scores:[]},"pattern-comparison":{name:"图形比较",icon:"📊",scores:[]},"change-detection":{name:"变化检测",icon:"🔄",scores:[]}};return x.value.forEach(t=>{s[t.type]&&s[t.type].scores.push(t.score)}),Object.entries(s).map(([t,n])=>{const v=n.scores.length>0?Math.round(n.scores.reduce((f,g)=>f+g,0)/n.scores.length):0;return{type:t,name:n.name,icon:n.icon,score:v,description:ie(t),feedback:getAbilityFeedback(t,v)}})}),le=y(()=>z.value.map((s,t)=>{const n=t*2*Math.PI/z.value.length-Math.PI/2,v=s.score/100*125,f=Math.cos(n)*v,g=Math.sin(n)*v;return`${f},${g}`}).join(" ")),de=y(()=>z.value.map((s,t)=>{const n=t*2*Math.PI/z.value.length-Math.PI/2,v=s.score/100*125;return{x:Math.cos(n)*v,y:Math.sin(n)*v}})),N=y(()=>{const s={};return x.value.forEach(t=>{s[t.type]||(s[t.type]={type:t.type,name:fe(t.type),icon:$e(t.type),scores:[],times:[],correct:0,total:0}),s[t.type].scores.push(t.score),s[t.type].times.push(t.responseTime),s[t.type].total++,t.correct&&s[t.type].correct++}),Object.values(s).map(t=>({...t,score:Math.round(t.scores.reduce((n,v)=>n+v,0)/t.scores.length),accuracy:Math.round(t.correct/t.total*100),averageTime:(t.times.reduce((n,v)=>n+v,0)/t.times.length).toFixed(1),completed:t.total,feedback:re(t.type,t.correct/t.total)}))}),ee=y(()=>{const s=[];return z.value.forEach(t=>{t.score<70&&s.push({id:t.type,icon:t.icon,title:`提升${t.name}能力`,priority:t.score<50?"高":"中",description:`您的${t.name}能力得分为${t.score}%，建议通过针对性训练来提升。`,methods:xe(t.type),trainingPath:`/training/observation/${t.type}`})}),s}),ve=[{id:"modules",label:"模块结果"},{id:"questions",label:"题目详情"},{id:"suggestions",label:"改进建议"}],he=()=>{H.value="testing",ye(),be(),R.value=Date.now()},ye=()=>{M.value=[];const s=k.value.selectedModules,t=k.value.difficulty,v={short:{easy:15,medium:12,hard:10,expert:8},medium:{easy:20,medium:16,hard:14,expert:12},long:{easy:25,medium:20,hard:18,expert:15}}[k.value.duration][t],f=Math.floor(v/s.length);s.forEach(g=>{for(let l=0;l<f;l++)M.value.push({type:g,difficulty:t,id:`${g}-${l}`,data:pe(g,t)})}),M.value=M.value.sort(()=>Math.random()-.5),w.value=M.value.length},pe=(s,t)=>({type:s,difficulty:t}),be=()=>{const s={short:600,medium:900,long:1200};$.value=s[k.value.duration],_.value=setInterval(()=>{$.value--,$.value<=0&&ne()},1e3)},G=s=>{x.value.push({...s,testIndex:T.value,timestamp:Date.now()})},te=s=>{T.value<w.value-1?T.value++:ne()},ne=()=>{_.value&&(clearInterval(_.value),_.value=null),H.value="results";const s={type:"observation",timestamp:Date.now(),settings:k.value,overallScore:W.value,accuracy:Y.value,averageResponseTime:I.value,observationLevel:Z.value,abilities:z.value,moduleResults:N.value,questionResults:x.value,timeUsed:(Date.now()-R.value)/1e3};se.saveAssessmentResult(s)},fe=s=>({"visual-search":"视觉搜索","detail-observation":"细节观察","pattern-comparison":"图形比较","change-detection":"变化检测"})[s]||s,$e=s=>({"visual-search":"🔍","detail-observation":"🔎","pattern-comparison":"📊","change-detection":"🔄"})[s]||"📝",me=s=>({easy:"简单",medium:"中等",hard:"困难",expert:"专家"})[s]||s,ie=s=>({"visual-search":"在复杂视觉环境中快速定位和识别目标对象的能力","detail-observation":"观察、记忆和识别图像细节信息的能力","pattern-comparison":"比较和分析不同图形模式异同的能力","change-detection":"检测和识别视觉场景中变化的能力"})[s]||"",oe=(s,t)=>{var f;const n={"visual-search":{high:"视觉搜索能力优秀，能够快速准确地定位目标。",medium:"视觉搜索能力良好，可以进一步提高搜索效率。",low:"视觉搜索能力需要加强，建议多做搜索练习。"},"detail-observation":{high:"细节观察能力出色，对图像细节有很好的感知力。",medium:"细节观察能力不错，继续保持观察的敏锐度。",low:"细节观察能力有待提升，建议加强细节训练。"},"pattern-comparison":{high:"图形比较能力优秀，能够准确识别图形差异。",medium:"图形比较能力良好，分析能力比较强。",low:"图形比较能力需要改善，建议多练习图形分析。"},"change-detection":{high:"变化检测能力优秀，对环境变化非常敏感。",medium:"变化检测能力良好，观察力比较敏锐。",low:"变化检测能力需要提高，建议加强变化感知训练。"}},v=t>=80?"high":t>=60?"medium":"low";return((f=n[s])==null?void 0:f[v])||"需要更多练习来提高能力。"},re=(s,t)=>{const n=t*100;return oe(s,n)},xe=s=>({"visual-search":["视觉搜索游戏","注意力训练","反应速度练习"],"detail-observation":["细节记忆训练","图像观察练习","专注力提升"],"pattern-comparison":["图形分析训练","逻辑推理练习","模式识别游戏"],"change-detection":["变化感知训练","对比观察练习","动态视觉训练"]})[s]||["基础观察训练"],_e=s=>{const t=Math.floor(s/60),n=s%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},ce=()=>{const s={title:"观察能力测评报告",timestamp:new Date().toLocaleString(),overallScore:W.value,observationLevel:Z.value,accuracy:Y.value,averageResponseTime:I.value,abilities:z.value,moduleResults:N.value,suggestions:ee.value},t=JSON.stringify(s,null,2),n=new Blob([t],{type:"application/json"}),v=URL.createObjectURL(n),f=document.createElement("a");f.href=v,f.download=`观察能力测评报告_${new Date().toISOString().split("T")[0]}.json`,f.click(),URL.revokeObjectURL(v)},ke=()=>{H.value="setup",T.value=0,x.value=[],M.value=[],_.value&&(clearInterval(_.value),_.value=null)},d=()=>{ue.push("/training/observation")},p=s=>{ue.push(s)};return Pe(()=>{}),Qe(()=>{_.value&&clearInterval(_.value)}),(s,t)=>{var n,v,f,g;return i(),c("div",ya,[e("div",ba,[t[34]||(t[34]=ze('<div class="assessment-header" data-v-7800460e><h2 data-v-7800460e>观察能力测评</h2><div class="assessment-info" data-v-7800460e><span class="info-item" data-v-7800460e><i class="icon-eye" data-v-7800460e>👁️</i> 视觉观察力评估 </span><span class="info-item" data-v-7800460e><i class="icon-time" data-v-7800460e>⏱️</i> 预计用时: 15-20分钟 </span></div></div>',1)),H.value==="setup"?(i(),c("div",$a,[e("div",xa,[t[13]||(t[13]=e("h3",null,"测评设置",-1)),t[14]||(t[14]=e("p",{class:"setup-description"}," 观察能力测评将从多个维度评估您的视觉观察和细节识别能力， 包括视觉搜索、细节观察、图形比较、变化检测等方面。 ",-1)),e("div",ka,[e("div",wa,[t[5]||(t[5]=e("h4",null,"难度设置",-1)),e("div",Ma,[(i(),c(S,null,q(B,l=>e("label",{key:l.value,class:"difficulty-option"},[qe(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=h=>k.value.difficulty=h),value:l.value},null,8,Ta),[[Ke,k.value.difficulty]]),e("div",Ca,[e("div",Da,o(l.label),1),e("div",Sa,o(l.description),1)])])),64))])]),e("div",qa,[t[6]||(t[6]=e("h4",null,"测试模块",-1)),e("div",Aa,[(i(),c(S,null,q(E,l=>e("label",{key:l.id,class:"module-option"},[qe(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=h=>k.value.selectedModules=h),value:l.id},null,8,Ia),[[He,k.value.selectedModules]]),e("div",Pa,[e("div",Qa,[e("span",za,o(l.icon),1),Ae(" "+o(l.name),1)]),e("div",La,o(l.description),1)])])),64))])]),e("div",Ba,[t[12]||(t[12]=e("h4",null,"个性化设置",-1)),e("div",Ea,[e("div",Fa,[t[8]||(t[8]=e("label",null,"测试时长:",-1)),qe(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>k.value.duration=l)},t[7]||(t[7]=[e("option",{value:"short"},"短时测试 (10分钟)",-1),e("option",{value:"medium"},"标准测试 (15分钟)",-1),e("option",{value:"long"},"完整测试 (20分钟)",-1)]),512),[[Ue,k.value.duration]])]),e("div",Oa,[t[10]||(t[10]=e("label",null,"反馈模式:",-1)),qe(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>k.value.feedbackMode=l)},t[9]||(t[9]=[e("option",{value:"immediate"},"即时反馈",-1),e("option",{value:"delayed"},"延迟反馈",-1),e("option",{value:"final"},"最终反馈",-1)]),512),[[Ue,k.value.feedbackMode]])]),e("div",Ra,[e("label",null,[qe(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>k.value.enableHints=l)},null,512),[[He,k.value.enableHints]]),t[11]||(t[11]=Ae(" 启用提示功能 ",-1))])])])])]),e("div",Wa,[e("button",{class:"btn-start",onClick:he,disabled:!J.value}," 开始测评 ",8,ja)])])])):C("",!0),H.value==="testing"?(i(),c("div",Va,[e("div",Na,[e("div",Ua,[e("div",Ha,[e("div",{class:"progress-fill",style:ae({width:A.value+"%"})},null,4)]),e("span",Ja,o(T.value+1)+" / "+o(w.value),1)]),e("div",Xa,[e("div",{class:X(["timer-display",{warning:$.value<60}])},o(_e($.value)),3)])]),e("div",Ya,[((n=D.value)==null?void 0:n.type)==="visual-search"?(i(),Ce(os,{key:0,"test-data":D.value,settings:k.value,onTestCompleted:te,onAnswerSubmitted:G},null,8,["test-data","settings"])):C("",!0),((v=D.value)==null?void 0:v.type)==="detail-observation"?(i(),Ce(Wn,{key:1,"test-data":D.value,settings:k.value,onTestCompleted:te,onAnswerSubmitted:G},null,8,["test-data","settings"])):C("",!0),((f=D.value)==null?void 0:f.type)==="pattern-comparison"?(i(),Ce(Ze,{key:2,"test-data":D.value,settings:k.value,onTestCompleted:te,onAnswerSubmitted:G},null,8,["test-data","settings"])):C("",!0),((g=D.value)==null?void 0:g.type)==="change-detection"?(i(),Ce(ga,{key:3,"test-data":D.value,settings:k.value,onTestCompleted:te,onAnswerSubmitted:G},null,8,["test-data","settings"])):C("",!0)])])):C("",!0),H.value==="results"?(i(),c("div",Ga,[e("div",Ka,[t[33]||(t[33]=e("h3",null,"观察能力测评报告",-1)),e("div",Za,[e("div",el,[(i(),c("svg",tl,[t[15]||(t[15]=e("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"#e0e0e0","stroke-width":"10"},null,-1)),e("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"var(--color-primary)","stroke-width":"10","stroke-linecap":"round","stroke-dasharray":`${W.value*5.65} 565`,transform:"rotate(-90 100 100)"},null,8,sl)])),e("div",nl,[e("div",ol,o(W.value),1),t[16]||(t[16]=e("div",{class:"score-label"},"综合得分",-1))])]),e("div",al,[e("div",ll,[t[17]||(t[17]=e("span",{class:"label"},"观察等级:",-1)),e("span",{class:X(["value",Z.value.toLowerCase()])},o(Z.value),3)]),e("div",il,[t[18]||(t[18]=e("span",{class:"label"},"准确率:",-1)),e("span",rl,o(Y.value)+"%",1)]),e("div",cl,[t[19]||(t[19]=e("span",{class:"label"},"平均反应时间:",-1)),e("span",ul,o(I.value)+"秒",1)]),e("div",dl,[t[20]||(t[20]=e("span",{class:"label"},"完成测试数:",-1)),e("span",vl,o(F.value)+" / "+o(w.value),1)])])]),e("div",hl,[t[21]||(t[21]=e("h4",null,"能力分析",-1)),e("div",pl,[e("div",fl,[(i(),c("svg",ml,[e("g",_l,[e("g",gl,[(i(),c(S,null,q(5,l=>e("circle",{key:l,r:l*25,fill:"none",stroke:"#e0e0e0","stroke-width":"1"},null,8,yl)),64)),(i(!0),c(S,null,q(z.value,(l,h)=>(i(),c("line",{key:h,x1:0,y1:0,x2:Math.cos(h*2*Math.PI/z.value.length-Math.PI/2)*125,y2:Math.sin(h*2*Math.PI/z.value.length-Math.PI/2)*125,stroke:"#e0e0e0","stroke-width":"1"},null,8,bl))),128))]),e("polygon",{points:le.value,fill:"rgba(74, 144, 226, 0.3)",stroke:"#4a90e2","stroke-width":"2"},null,8,$l),(i(!0),c(S,null,q(de.value,(l,h)=>(i(),c("circle",{key:h,cx:l.x,cy:l.y,r:"4",fill:"#4a90e2"},null,8,xl))),128)),(i(!0),c(S,null,q(z.value,(l,h)=>(i(),c("text",{key:h,x:Math.cos(h*2*Math.PI/z.value.length-Math.PI/2)*140,y:Math.sin(h*2*Math.PI/z.value.length-Math.PI/2)*140,"text-anchor":"middle","dominant-baseline":"middle","font-size":"12",fill:"#333"},o(l.name),9,kl))),128))])]))]),e("div",wl,[(i(!0),c(S,null,q(z.value,l=>(i(),c("div",{key:l.type,class:"ability-item"},[e("div",Ml,[e("span",Tl,o(l.icon),1),e("span",Cl,o(l.name),1),e("span",Dl,o(l.score)+"%",1)]),e("div",Sl,[e("div",{class:"ability-fill",style:ae({width:l.score+"%"})},null,4)]),e("div",ql,o(l.description),1),e("div",Al,o(l.feedback),1)]))),128))])])]),e("div",Il,[t[29]||(t[29]=e("h4",null,"详细结果",-1)),e("div",Pl,[(i(),c(S,null,q(ve,l=>e("button",{key:l.id,class:X(["tab-button",{active:U.value===l.id}]),onClick:h=>U.value=l.id},o(l.label),11,Ql)),64))]),e("div",zl,[U.value==="modules"?(i(),c("div",Ll,[(i(!0),c(S,null,q(N.value,l=>(i(),c("div",{key:l.type,class:"module-result"},[e("div",Bl,[e("span",El,o(l.icon),1),e("span",Fl,o(l.name),1),e("span",Ol,o(l.score)+"分",1)]),e("div",Rl,[e("div",Wl,[t[22]||(t[22]=e("span",{class:"stat-label"},"准确率:",-1)),e("span",jl,o(l.accuracy)+"%",1)]),e("div",Vl,[t[23]||(t[23]=e("span",{class:"stat-label"},"平均用时:",-1)),e("span",Nl,o(l.averageTime)+"秒",1)]),e("div",Ul,[t[24]||(t[24]=e("span",{class:"stat-label"},"完成题数:",-1)),e("span",Hl,o(l.completed)+" / "+o(l.total),1)])]),e("div",Jl,o(l.feedback),1)]))),128))])):C("",!0),U.value==="questions"?(i(),c("div",Xl,[(i(!0),c(S,null,q(x.value,(l,h)=>(i(),c("div",{key:h,class:"question-result"},[e("div",Yl,[e("span",Gl,"第 "+o(h+1)+" 题",1),e("span",Kl,o(fe(l.type)),1),e("span",{class:X(["question-status",{correct:l.correct,incorrect:!l.correct}])},o(l.correct?"✓":"✗"),3)]),e("div",Zl,[e("div",ei,[t[25]||(t[25]=e("span",{class:"detail-label"},"用时:",-1)),e("span",ti,o(l.responseTime)+"秒",1)]),e("div",si,[t[26]||(t[26]=e("span",{class:"detail-label"},"难度:",-1)),e("span",ni,o(me(l.difficulty)),1)]),e("div",oi,[t[27]||(t[27]=e("span",{class:"detail-label"},"得分:",-1)),e("span",ai,o(l.score)+"分",1)])])]))),128))])):C("",!0),U.value==="suggestions"?(i(),c("div",li,[(i(!0),c(S,null,q(ee.value,l=>(i(),c("div",{key:l.id,class:"suggestion-card"},[e("div",ii,[e("span",ri,o(l.icon),1),e("span",ci,o(l.title),1),e("span",{class:X(["suggestion-priority",l.priority])},o(l.priority),3)]),e("div",ui,[e("p",null,o(l.description),1),e("div",di,[e("div",vi,[t[28]||(t[28]=e("h5",null,"推荐训练:",-1)),e("div",hi,[(i(!0),c(S,null,q(l.methods,h=>(i(),c("span",{key:h,class:"method-tag"},o(h),1))),128))])]),e("button",{class:"btn-start-training",onClick:h=>p(l.trainingPath)}," 开始训练 ",8,pi)])])]))),128))])):C("",!0)])]),e("div",{class:"results-actions"},[e("button",{class:"btn-export",onClick:ce},t[30]||(t[30]=[e("i",{class:"icon-download"},"📥",-1),Ae(" 导出报告 ",-1)])),e("button",{class:"btn-restart",onClick:ke},t[31]||(t[31]=[e("i",{class:"icon-restart"},"🔄",-1),Ae(" 重新测评 ",-1)])),e("button",{class:"btn-training",onClick:d},t[32]||(t[32]=[e("i",{class:"icon-training"},"🎯",-1),Ae(" 开始训练 ",-1)]))])])])):C("",!0)])])}}},$i=Le(fi,[["__scopeId","data-v-7800460e"]]);export{$i as default};
