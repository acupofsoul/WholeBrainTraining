import{k as l,c as M,K as se,o as d,a as v,b as e,F as ae,h as ne,s as V,x as le,v as z,g as b,t as n,m as N,D as oe,n as A,B as ie}from"./index-7434e420.js";import{_ as ue}from"./_plugin-vue_export-helper-c27b6911.js";const re={class:"instant-calculation-container"},ce={key:0,class:"difficulty-selection"},de={class:"difficulty-cards"},ve=["onClick"],me={class:"level-info"},pe={class:"difficulty-stars"},fe={class:"time-limit"},_e={key:0,class:"training-settings"},he={class:"settings-row"},ge={class:"setting-item"},be={class:"setting-item"},ye={key:1,class:"training-area"},ke={key:0,class:"ready-phase"},Me={class:"countdown-circle"},xe={class:"countdown-number"},Ce={key:1,class:"calculation-phase"},we={class:"progress-bar"},Ie={class:"progress-text"},Le={class:"question-display"},Te={class:"expression"},qe={class:"timer-circle"},$e={class:"timer-svg",viewBox:"0 0 100 100"},Be={class:"timer-text"},De={class:"answer-input"},Fe=["disabled"],Qe=["disabled"],Se={key:0,class:"quick-feedback"},Re={key:2,class:"result-phase"},Ve={class:"score-summary"},Ae={class:"score-circle"},Ue={class:"score-number"},Ke={class:"score-total"},Pe={class:"accuracy"},ze={class:"performance-stats"},Ne={class:"stat-item"},Ee={class:"stat-value"},Oe={class:"stat-item"},je={class:"stat-value"},Ge={class:"stat-item"},He={class:"stat-value"},Je={class:"performance-level"},We={__name:"InstantCalculation",setup(Xe){const x=l(null),I=l(!1),y=l("ready"),L=l(3),C=l(0),q=l(null),g=l(""),p=l(0),w=l(0),f=l([]),$=l(!1),B=l(!1),T=l(null),k=l(null),D=l(null),o=l({questionCount:20,timeLimit:10}),E=l([{id:"easy",name:"简单",description:"单位数加减法",stars:"★☆☆",timeLimit:15,operations:["+","-"],numberRange:[1,9]},{id:"medium",name:"中等",description:"两位数四则运算",stars:"★★☆",timeLimit:10,operations:["+","-","×"],numberRange:[10,99]},{id:"hard",name:"困难",description:"三位数混合运算",stars:"★★★",timeLimit:8,operations:["+","-","×","÷"],numberRange:[100,999]},{id:"expert",name:"专家",description:"复杂多步运算",stars:"★★★",timeLimit:6,operations:["+","-","×","÷"],numberRange:[10,999],multiStep:!0}]),O=M(()=>o.value.questionCount>0?C.value/o.value.questionCount*100:0),j=M(()=>{const a=2*Math.PI*45,t=p.value/o.value.timeLimit;return a*(1-t)}),U=M(()=>f.value.length>0?f.value.reduce((a,t)=>a+t,0)/f.value.length:0),G=M(()=>f.value.length>0?Math.min(...f.value):0),H=M(()=>f.value.reduce((a,t)=>a+t,0)),F=M(()=>{const a=w.value/o.value.questionCount*100,t=U.value;return a>=90&&t<=3?{name:"数学天才",class:"genius",description:"计算速度和准确率都非常出色!"}:a>=80&&t<=5?{name:"计算高手",class:"expert",description:"计算能力很强，继续保持!"}:a>=70&&t<=8?{name:"计算能手",class:"good",description:"计算能力不错，还有提升空间。"}:a>=60?{name:"努力练习",class:"average",description:"需要多加练习提高计算速度。"}:{name:"加油努力",class:"beginner",description:"多练习基础计算，循序渐进。"}}),J=a=>{x.value=a,o.value.timeLimit=a.timeLimit},K=()=>{I.value=!0,y.value="ready",C.value=0,w.value=0,f.value=[],W()},W=()=>{L.value=3,T.value=setInterval(()=>{L.value--,L.value<=0&&(clearInterval(T.value),y.value="calculating",P())},1e3)},P=()=>{if(C.value>=o.value.questionCount){y.value="result";return}q.value=X(),g.value="",p.value=o.value.timeLimit,$.value=!1,ie(()=>{D.value&&D.value.focus()}),Y()},X=()=>{const a=x.value,t=a.operations,[s,_]=a.numberRange;if(a.multiStep){const i=Math.floor(Math.random()*(_-s+1))+s,u=Math.floor(Math.random()*(_-s+1))+s,r=Math.floor(Math.random()*(_-s+1))+s,h=t[Math.floor(Math.random()*t.length)],c=t[Math.floor(Math.random()*t.length)];let S,R;if(h==="×"||h==="÷"){S=`${i} ${h} ${u} ${c} ${r}`;const m=h==="×"?i*u:Math.floor(i/u);R=c==="+"?m+r:c==="-"?m-r:c==="×"?m*r:Math.floor(m/r)}else{S=`${i} ${h} ${u} ${c} ${r}`;const m=h==="+"?i+u:i-u;R=c==="+"?m+r:c==="-"?m-r:c==="×"?m*r:Math.floor(m/r)}return{expression:S,answer:R}}else{let i=Math.floor(Math.random()*(_-s+1))+s,u=Math.floor(Math.random()*(_-s+1))+s;const r=t[Math.floor(Math.random()*t.length)];r==="÷"&&(u=Math.floor(Math.random()*9)+1,i=u*(Math.floor(Math.random()*20)+1));const h=`${i} ${r} ${u}`;let c;switch(r){case"+":c=i+u;break;case"-":c=i-u;break;case"×":c=i*u;break;case"÷":c=Math.floor(i/u);break}return{expression:h,answer:c}}},Y=()=>{k.value=setInterval(()=>{p.value--,p.value<=0&&(clearInterval(k.value),Q(!0))},1e3)},Q=(a=!1)=>{k.value&&clearInterval(k.value);const t=o.value.timeLimit-p.value;f.value.push(t);const s=!a&&parseInt(g.value)===q.value.answer;s&&w.value++,B.value=s,$.value=!0,setTimeout(()=>{C.value++,P()},1e3)},Z=()=>{g.value=g.value.replace(/[^-0-9]/g,"")},ee=()=>{K()},te=()=>{I.value=!1,x.value=null};return se(()=>{T.value&&clearInterval(T.value),k.value&&clearInterval(k.value)}),(a,t)=>(d(),v("div",re,[t[16]||(t[16]=e("div",{class:"header"},[e("h2",null,"瞬时计算"),e("p",null,"通过快速心算训练，提升数字处理和计算能力")],-1)),I.value?b("",!0):(d(),v("div",ce,[t[7]||(t[7]=e("h3",null,"选择难度",-1)),e("div",de,[(d(!0),v(ae,null,ne(E.value,s=>{var _;return d(),v("div",{class:A(["difficulty-card",{active:((_=x.value)==null?void 0:_.id)===s.id}]),key:s.id,onClick:i=>J(s)},[e("h4",null,n(s.name),1),e("p",null,n(s.description),1),e("div",me,[e("span",pe,n(s.stars),1),e("span",fe,n(s.timeLimit)+"秒",1)])],10,ve)}),128))]),x.value?(d(),v("div",_e,[e("div",he,[e("div",ge,[t[4]||(t[4]=e("label",null,"题目数量:",-1)),V(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.questionCount=s)},t[3]||(t[3]=[e("option",{value:"10"},"10题",-1),e("option",{value:"20"},"20题",-1),e("option",{value:"30"},"30题",-1),e("option",{value:"50"},"50题",-1)]),512),[[le,o.value.questionCount]])]),e("div",be,[t[5]||(t[5]=e("label",null,"答题时间:",-1)),V(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.timeLimit=s),type:"number",min:"3",max:"30",step:"1"},null,512),[[z,o.value.timeLimit,void 0,{number:!0}]]),t[6]||(t[6]=e("span",null,"秒",-1))])]),e("button",{onClick:K,class:"btn-primary"},"开始训练")])):b("",!0)])),I.value?(d(),v("div",ye,[y.value==="ready"?(d(),v("div",ke,[t[8]||(t[8]=e("h3",null,"准备开始",-1)),e("div",Me,[e("span",xe,n(L.value),1)]),t[9]||(t[9]=e("p",null,"请准备好进行快速计算",-1))])):b("",!0),y.value==="calculating"?(d(),v("div",Ce,[e("div",we,[e("div",{class:"progress-fill",style:N({width:O.value+"%"})},null,4),e("span",Ie,n(C.value+1)+" / "+n(o.value.questionCount),1)]),e("div",Le,[e("div",Te,n(q.value.expression),1),e("div",qe,[(d(),v("svg",$e,[t[10]||(t[10]=e("circle",{cx:"50",cy:"50",r:"45",class:"timer-bg"},null,-1)),e("circle",{cx:"50",cy:"50",r:"45",class:"timer-progress",style:N({strokeDashoffset:j.value})},null,4)])),e("span",Be,n(p.value),1)])]),e("div",De,[V(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),onKeyup:oe(Q,["enter"]),onInput:Z,type:"number",placeholder:"输入答案",ref_key:"answerInput",ref:D,disabled:p.value<=0},null,40,Fe),[[z,g.value]]),e("button",{onClick:Q,disabled:!g.value||p.value<=0,class:"btn-submit"},"提交",8,Qe)]),$.value?(d(),v("div",Se,[e("span",{class:A(B.value?"correct":"incorrect")},n(B.value?"✓ 正确!":"✗ 错误!"),3)])):b("",!0)])):b("",!0),y.value==="result"?(d(),v("div",Re,[t[15]||(t[15]=e("h3",null,"训练完成!",-1)),e("div",Ve,[e("div",Ae,[e("span",Ue,n(w.value),1),e("span",Ke,"/ "+n(o.value.questionCount),1)]),e("div",Pe,"准确率: "+n(Math.round(w.value/o.value.questionCount*100))+"%",1)]),e("div",ze,[e("div",Ne,[t[11]||(t[11]=e("span",{class:"stat-label"},"平均用时:",-1)),e("span",Ee,n(U.value.toFixed(1))+"秒",1)]),e("div",Oe,[t[12]||(t[12]=e("span",{class:"stat-label"},"最快用时:",-1)),e("span",je,n(G.value.toFixed(1))+"秒",1)]),e("div",Ge,[t[13]||(t[13]=e("span",{class:"stat-label"},"总用时:",-1)),e("span",He,n(H.value.toFixed(1))+"秒",1)])]),e("div",Je,[t[14]||(t[14]=e("h4",null,"表现评级",-1)),e("div",{class:A(["level-badge",F.value.class])},n(F.value.name),3),e("p",null,n(F.value.description),1)]),e("div",{class:"result-actions"},[e("button",{onClick:ee,class:"btn-primary"},"再次训练"),e("button",{onClick:te,class:"btn-secondary"},"返回选择")])])):b("",!0)])):b("",!0)]))}},et=ue(We,[["__scopeId","data-v-5cf4c735"]]);export{et as default};
