import{i,D as N,k as P,o as u,a as r,b as t,p as w,v as R,t as o,g as d,F as E,h as I,E as W,n as D,K as G,m as X,q as Y}from"./index-e0b54b24.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";const tt={class:"quick-calculation-container"},at={key:0,class:"settings-panel"},et={class:"setting-group"},st={class:"range-input"},lt={class:"input-group"},nt={class:"input-group"},ot={class:"range-info"},ut={class:"current-range"},rt={key:0,class:"error-message"},it={class:"setting-group"},ct={class:"size-selector"},vt=["onClick"],dt={class:"setting-group"},mt={class:"time-selector"},pt=["onClick"],_t={key:1,class:"training-area"},ft={key:0,class:"countdown"},gt={key:1,class:"canvas-container"},ht={key:2,class:"answer-section"},bt={class:"answer-input"},yt=["disabled"],kt={key:3,class:"result-section"},xt={class:"result-icon"},Ct={key:0},wt={key:2,class:"stats-panel"},Mt={class:"stats-grid"},St={class:"stat-item"},Rt={class:"stat-value"},Et={class:"stat-item"},It={class:"stat-value"},Dt={class:"stat-item"},Tt={class:"stat-value"},qt={class:"stat-item"},Vt={class:"stat-value"},O=800,U=600,Nt={__name:"QuickCalculation",setup(Ot){const h=i(!1),m=i(0),f=i(10),e=N({min:10,max:20}),c=i(""),g=i(20),M=i(2e3),b=i(!1),y=i(!1),v=i(""),p=i(!1),k=i([]),z=i(null),S=i(null),B=[{label:"小",value:15},{label:"中",value:20},{label:"大",value:25}],F=[{label:"1秒",value:1e3},{label:"2秒",value:2e3},{label:"3秒",value:3e3},{label:"5秒",value:5e3}],l=N({totalRounds:0,correctCount:0,totalError:0,accuracy:0,averageError:0}),x=()=>{if(c.value="",e.min<1||e.min>1e3){c.value="最小值必须在1-1000之间",e.min=Math.max(1,Math.min(1e3,e.min));return}if(e.max<1||e.max>1e3){c.value="最大值必须在1-1000之间",e.max=Math.max(1,Math.min(1e3,e.max));return}if(e.min>e.max){c.value="最小值不能大于最大值";return}e.max-e.min>100&&(c.value="建议范围跨度不要超过100，以获得更好的训练效果")},K=()=>Math.floor(Math.random()*(e.max-e.min+1))+e.min,Q=()=>{k.value=[];const n=g.value;for(let a=0;a<f.value;a++){let s=0,_=!1,C;for(;!_&&s<100;)C={x:Math.random()*(O-2*n)+n,y:Math.random()*(U-2*n)+n},_=k.value.every(V=>Math.sqrt(Math.pow(C.x-V.x,2)+Math.pow(C.y-V.y,2))>=g.value*1.5),s++;_&&k.value.push(C)}},A=()=>{h.value=!0,y.value=!1,v.value="",m.value=3;const n=setInterval(()=>{m.value--,m.value===0&&(clearInterval(n),T())},1e3)},T=()=>{x(),!(c.value&&!c.value.includes("建议"))&&(f.value=K(),Q(),b.value=!0,setTimeout(()=>{b.value=!1,Y(()=>{S.value&&S.value.focus()})},M.value))},q=()=>{if(!v.value)return;const n=parseInt(v.value);p.value=n===f.value,l.totalRounds++,p.value&&l.correctCount++,l.totalError+=Math.abs(n-f.value),l.accuracy=l.correctCount/l.totalRounds*100,l.averageError=l.totalError/l.totalRounds,y.value=!0,H()},J=()=>{y.value=!1,v.value="",T()},$=()=>{h.value=!1,y.value=!1,b.value=!1,m.value=0},j=n=>{},H=()=>{try{const n={totalRounds:l.totalRounds,correctCount:l.correctCount,totalError:l.totalError,accuracy:l.accuracy,averageError:l.averageError,lastUpdated:new Date().toISOString()};localStorage.setItem("quickCalculationStats",JSON.stringify(n))}catch(n){console.error("保存统计数据失败:",n)}},L=()=>{try{const n=localStorage.getItem("quickCalculationStats");if(n){const a=JSON.parse(n);Object.assign(l,a)}}catch(n){console.error("加载统计数据失败:",n)}};return P(()=>{L(),x()}),(n,a)=>(u(),r("div",tt,[a[14]||(a[14]=t("div",{class:"header"},[t("h2",null,"快速计算训练"),t("p",{class:"description"},"通过快速数点训练，提升数字感知和计算能力")],-1)),h.value?d("",!0):(u(),r("div",at,[t("div",et,[a[5]||(a[5]=t("label",null,"黑点数量范围：",-1)),t("div",st,[t("div",lt,[a[3]||(a[3]=t("label",null,"最小值：",-1)),w(t("input",{type:"number","onUpdate:modelValue":a[0]||(a[0]=s=>e.min=s),onInput:x,min:"1",max:"1000",class:"range-number-input"},null,544),[[R,e.min]])]),t("div",nt,[a[4]||(a[4]=t("label",null,"最大值：",-1)),w(t("input",{type:"number","onUpdate:modelValue":a[1]||(a[1]=s=>e.max=s),onInput:x,min:"1",max:"1000",class:"range-number-input"},null,544),[[R,e.max]])])]),t("div",ot,[t("span",ut,"当前范围："+o(e.min)+" - "+o(e.max),1),c.value?(u(),r("span",rt,o(c.value),1)):d("",!0)])]),t("div",it,[a[6]||(a[6]=t("label",null,"黑点大小：",-1)),t("div",ct,[(u(),r(E,null,I(B,s=>t("button",{key:s.value,onClick:_=>g.value=s.value,class:D([{active:g.value===s.value},"size-btn"])},o(s.label),11,vt)),64))])]),t("div",dt,[a[7]||(a[7]=t("label",null,"显示时间：",-1)),t("div",mt,[(u(),r(E,null,I(F,s=>t("button",{key:s.value,onClick:_=>M.value=s.value,class:D([{active:M.value===s.value},"time-btn"])},o(s.label),11,pt)),64))])]),t("button",{onClick:A,class:"start-btn"},"开始训练")])),h.value?(u(),r("div",_t,[m.value>0?(u(),r("div",ft,o(m.value),1)):d("",!0),m.value===0?(u(),r("div",gt,[t("canvas",{ref_key:"canvas",ref:z,width:O,height:U,onClick:j},null,512),(u(!0),r(E,null,I(k.value,(s,_)=>w((u(),r("div",{key:_,class:"dot",style:X({left:s.x+"px",top:s.y+"px",width:g.value+"px",height:g.value+"px"})},null,4)),[[G,b.value]])),128))])):d("",!0),!b.value&&m.value===0?(u(),r("div",ht,[a[8]||(a[8]=t("h3",null,"请输入您看到的黑点数量：",-1)),t("div",bt,[w(t("input",{type:"number","onUpdate:modelValue":a[2]||(a[2]=s=>v.value=s),onKeyup:W(q,["enter"]),ref_key:"answerInput",ref:S,min:"0",max:"100"},null,544),[[R,v.value]]),t("button",{onClick:q,disabled:!v.value},"确认",8,yt)])])):d("",!0),y.value?(u(),r("div",kt,[t("div",{class:D(["result-card",{correct:p.value,incorrect:!p.value}])},[t("div",xt,o(p.value?"✓":"✗"),1),t("h3",null,o(p.value?"回答正确！":"回答错误"),1),t("p",null,"正确答案："+o(f.value),1),t("p",null,"您的答案："+o(v.value),1),p.value?d("",!0):(u(),r("p",Ct,"差值："+o(Math.abs(f.value-v.value)),1))],2),t("div",{class:"action-buttons"},[t("button",{onClick:J,class:"next-btn"},"下一轮"),t("button",{onClick:$,class:"end-btn"},"结束训练")])])):d("",!0)])):d("",!0),!h.value&&l.totalRounds>0?(u(),r("div",wt,[a[13]||(a[13]=t("h3",null,"训练统计",-1)),t("div",Mt,[t("div",St,[t("span",Rt,o(l.totalRounds),1),a[9]||(a[9]=t("span",{class:"stat-label"},"总轮数",-1))]),t("div",Et,[t("span",It,o(l.correctCount),1),a[10]||(a[10]=t("span",{class:"stat-label"},"正确次数",-1))]),t("div",Dt,[t("span",Tt,o(Math.round(l.accuracy))+"%",1),a[11]||(a[11]=t("span",{class:"stat-label"},"准确率",-1))]),t("div",qt,[t("span",Vt,o(l.averageError.toFixed(1)),1),a[12]||(a[12]=t("span",{class:"stat-label"},"平均误差",-1))])])])):d("",!0)]))}},Ft=Z(Nt,[["__scopeId","data-v-f1fd0f02"]]);export{Ft as default};
