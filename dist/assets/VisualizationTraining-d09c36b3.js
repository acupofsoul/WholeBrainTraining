import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import{i as v,c as V,j as P,k as Z,o as i,a as o,b as t,F as x,h as $,m as tt,t as n,n as I,g as y,A as et,d as R,f as st,e as nt}from"./index-e0b54b24.js";import{m as M}from"./meditationStorage-bc872dc6.js";const at={class:"particle-container"},it={class:"icon-text"},ot={class:"progress-ring"},lt={class:"progress-svg",width:"200",height:"200"},ct=["stroke-dasharray","stroke-dashoffset"],ut={class:"time-display"},rt={class:"time-text"},dt={class:"step-indicators"},vt=["onClick"],pt={class:"step-icon"},mt={class:"step-tooltip"},ft={key:0,class:"interaction-hints"},ht={class:"hint-icon"},_t={class:"hint-text"},gt={key:1,class:"emotion-feedback"},bt={class:"emotion-options"},kt=["onClick"],yt={class:"emotion-icon"},St={class:"emotion-label"},Tt={__name:"VisualizationGuide",props:{isActive:{type:Boolean,default:!1},currentStep:{type:Object,default:null},currentStepIndex:{type:Number,default:0},steps:{type:Array,default:()=>[]},timeLeft:{type:Number,default:0},totalTime:{type:Number,default:0},showHints:{type:Boolean,default:!0},showEmotionFeedback:{type:Boolean,default:!1}},emits:["step-change","emotion-selected","interaction"],setup(_,{emit:N}){const e=_,f=N,p=v([]),g=v(null),c=v(""),S=v(""),T=V(()=>{var s;return((s=e.currentStep)==null?void 0:s.icon)||"✨"}),l=V(()=>2*Math.PI*90),E=V(()=>{if(e.totalTime===0)return l.value;const s=(e.totalTime-e.timeLeft)/e.totalTime;return l.value*(1-s)}),C=V(()=>{var u;const s=[{id:1,icon:"👁️",text:"闭上眼睛，让想象更清晰"},{id:2,icon:"🎵",text:"听听周围的声音"},{id:3,icon:"🌈",text:"想象你最喜欢的颜色"}];return(u=e.currentStep)!=null&&u.hints?e.currentStep.hints.map((a,b)=>({id:b+10,icon:"💡",text:a})):s}),h=v([{id:"happy",icon:"😊",label:"开心"},{id:"calm",icon:"😌",label:"平静"},{id:"excited",icon:"🤩",label:"兴奋"},{id:"curious",icon:"🤔",label:"好奇"},{id:"peaceful",icon:"😇",label:"安详"}]),D=s=>{const u=Math.floor(s/60),a=s%60;return`${u}:${a.toString().padStart(2,"0")}`},k=s=>{f("step-change",s)},A=s=>{g.value=s,f("emotion-selected",s)},z=()=>{const s=["✨","⭐","🌟","💫","🌙","☁️","🦋","🌸","🌺","🍃"];p.value=[];for(let u=0;u<15;u++)p.value.push({id:u,x:Math.random()*100,y:Math.random()*100,emoji:s[Math.floor(Math.random()*s.length)],delay:Math.random()*5,duration:3+Math.random()*4})},w=()=>{if(!e.currentStep)return;const s=e.currentStep.animation||"default";switch(S.value=s,s){case"bloom":c.value="bloom-animation";break;case"bounce":c.value="bounce-animation";break;case"sparkle":c.value="sparkle-animation";break;case"float":c.value="float-animation";break;default:c.value="pulse-animation"}};return P(()=>e.currentStep,()=>{w(),z()},{immediate:!0}),P(()=>e.isActive,s=>{s&&z()}),Z(()=>{z(),w()}),(s,u)=>(i(),o("div",{class:I(["visualization-guide",{active:_.isActive}])},[t("div",{class:I(["main-visual",S.value])},[t("div",at,[(i(!0),o(x,null,$(p.value,a=>(i(),o("div",{key:a.id,class:"particle",style:tt({left:a.x+"%",top:a.y+"%",animationDelay:a.delay+"s",animationDuration:a.duration+"s"})},n(a.emoji),5))),128))]),t("div",{class:I(["central-icon",c.value])},[u[0]||(u[0]=t("div",{class:"icon-glow"},null,-1)),t("span",it,n(T.value),1),u[1]||(u[1]=t("div",{class:"icon-ripple"},null,-1))],2),t("div",ot,[(i(),o("svg",lt,[u[2]||(u[2]=t("circle",{class:"progress-bg",cx:"100",cy:"100",r:"90",fill:"none",stroke:"rgba(255, 255, 255, 0.1)","stroke-width":"4"},null,-1)),t("circle",{class:"progress-fill",cx:"100",cy:"100",r:"90",fill:"none",stroke:"url(#progressGradient)","stroke-width":"4","stroke-linecap":"round","stroke-dasharray":l.value,"stroke-dashoffset":E.value,transform:"rotate(-90 100 100)"},null,8,ct),u[3]||(u[3]=t("defs",null,[t("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[t("stop",{offset:"0%","stop-color":"#FF6B6B"}),t("stop",{offset:"100%","stop-color":"#4ECDC4"})])],-1))]))]),t("div",ut,[t("span",rt,n(D(_.timeLeft)),1)])],2),t("div",dt,[(i(!0),o(x,null,$(_.steps,(a,b)=>(i(),o("div",{key:b,class:I(["step-dot",{active:b===_.currentStepIndex,completed:b<_.currentStepIndex}]),onClick:F=>k(b)},[t("span",pt,n(a.icon),1),t("div",mt,n(a.title),1)],10,vt))),128))]),_.showHints?(i(),o("div",ft,[(i(!0),o(x,null,$(C.value,a=>(i(),o("div",{class:"hint-item",key:a.id},[t("div",ht,n(a.icon),1),t("div",_t,n(a.text),1)]))),128))])):y("",!0),_.showEmotionFeedback?(i(),o("div",gt,[u[4]||(u[4]=t("h4",null,"你现在的感受是？",-1)),t("div",bt,[(i(!0),o(x,null,$(h.value,a=>(i(),o("button",{key:a.id,class:I(["emotion-btn",{selected:g.value===a.id}]),onClick:b=>A(a.id)},[t("span",yt,n(a.icon),1),t("span",St,n(a.label),1)],10,kt))),128))])])):y("",!0)],2))}},wt=O(Tt,[["__scopeId","data-v-7d17b8ef"]]);const xt={class:"visualization-training-container"},$t={class:"visualization-themes"},Ct={class:"themes-grid"},zt=["onClick"],It={class:"theme-icon"},Vt={class:"theme-features"},Et={class:"theme-info"},Dt={class:"info-item"},Mt={class:"info-value"},Nt={class:"info-item"},At={class:"info-value"},Bt={key:0,class:"training-setup"},jt={class:"setup-card"},Ft={class:"setup-preview"},Gt={class:"preview-icon"},Lt={class:"preview-text"},Ht={class:"setup-tips"},Pt={key:1,class:"training-active"},Rt={class:"training-header"},Ot={class:"training-info"},Ut={class:"step-counter"},qt={class:"theme-duration"},Jt={class:"step-description"},Kt={class:"step-instruction"},Qt={class:"training-controls"},Wt=["disabled"],Xt=["disabled"],Yt={key:0,class:"pause-overlay"},Zt={key:2,class:"training-completed"},te={class:"completion-card"},ee={__name:"VisualizationTraining",setup(_){const N=v([{id:1,name:"魔法花园",icon:"🌺",description:"在神奇的花园中探索，与花朵和小动物交朋友",duration:8,ageRange:"3-8岁",features:["自然探索","动物朋友","色彩丰富"],preview:"想象你走进一个充满魔法的花园，那里有会说话的花朵和友善的小动物...",tips:["闭上眼睛，想象你最喜欢的颜色","听听花园里有什么声音","想象你能闻到什么香味","和小动物们打招呼吧"],steps:[{title:"进入花园",icon:"🚪",instruction:"想象你推开一扇美丽的花园门，阳光洒在你的脸上，你看到了什么？",duration:60,animation:"fade-in"},{title:"探索花朵",icon:"🌸",instruction:"走近那些五彩斑斓的花朵，它们在向你点头微笑，你最喜欢哪一朵？",duration:90,animation:"bloom"},{title:"遇见小动物",icon:"🐰",instruction:"一只可爱的小兔子蹦蹦跳跳地来到你身边，它想和你做朋友",duration:90,animation:"bounce"},{title:"魔法时刻",icon:"✨",instruction:"花园里开始下起了彩色的雨滴，每一滴都闪闪发光，感受这份魔法",duration:90,animation:"sparkle"},{title:"告别花园",icon:"👋",instruction:"是时候告别了，向花朵和小动物们挥手，记住这美好的时光",duration:60,animation:"wave"}]},{id:2,name:"太空冒险",icon:"🚀",description:"乘坐宇宙飞船探索神秘的太空世界",duration:10,ageRange:"5-12岁",features:["科幻探索","星球旅行","想象力飞跃"],preview:"穿上宇航服，登上你的专属飞船，准备开始一场激动人心的太空之旅...",tips:["想象你在失重状态下飘浮","看看窗外美丽的星空","想象不同星球的样子","感受宇宙的神秘和广阔"],steps:[{title:"准备发射",icon:"🚀",instruction:"坐在飞船驾驶座上，按下发射按钮，感受飞船缓缓升空",duration:60,animation:"launch"},{title:"穿越大气层",icon:"🌍",instruction:"透过窗户看到地球越来越小，你现在在太空中了！",duration:90,animation:"float"},{title:"遇见外星朋友",icon:"👽",instruction:"一个友善的外星人向你挥手，它想带你参观它的星球",duration:120,animation:"alien-wave"},{title:"探索新星球",icon:"🪐",instruction:"降落在一个有着紫色天空和银色树木的神奇星球上",duration:120,animation:"planet-explore"},{title:"返回地球",icon:"🏠",instruction:"是时候回家了，带着美好的回忆返回温暖的地球",duration:60,animation:"return"}]},{id:3,name:"海底世界",icon:"🐠",description:"潜入深海，探索神秘的海底王国",duration:12,ageRange:"4-10岁",features:["海洋探索","水下冒险","生物认知"],preview:"戴上神奇的呼吸面罩，潜入蔚蓝的大海，发现海底的奇妙世界...",tips:["想象水的清凉感觉","听听海浪和海豚的声音","看看五彩斑斓的珊瑚","和海洋生物们打招呼"],steps:[{title:"潜入大海",icon:"🌊",instruction:"慢慢潜入清澈的海水中，感受水的包围和宁静",duration:60,animation:"dive"},{title:"珊瑚花园",icon:"🪸",instruction:"游到美丽的珊瑚礁，看到各种颜色的珊瑚在水中摇摆",duration:90,animation:"coral-sway"},{title:"海豚朋友",icon:"🐬",instruction:"一群友善的海豚游过来，邀请你和它们一起游泳",duration:120,animation:"dolphin-swim"},{title:"海底宝藏",icon:"💎",instruction:"发现一个闪闪发光的宝箱，里面装满了美丽的珍珠和宝石",duration:90,animation:"treasure-glow"},{title:"浮出水面",icon:"☀️",instruction:"慢慢游向海面，感受阳光透过水面洒在你身上",duration:60,animation:"surface"}]}]),e=v(null),f=v(!1),p=v(!1),g=v(!1),c=v(0),S=v(0),T=v(!1),l=v(null),E=v([]),C=v(0);let h=null,D=null;const k=V(()=>!e.value||!e.value.steps?null:e.value.steps[c.value]);V(()=>e.value?(c.value+1)/e.value.steps.length*100:0);const A=d=>{e.value=d,g.value=!1},z=()=>{f.value=!0,c.value=0,G(),Y(),w()},w=()=>{k.value&&(S.value=k.value.duration,h=setInterval(()=>{p.value||(S.value--,S.value<=0&&s())},1e3))},s=()=>{clearInterval(h),X(),c.value<e.value.steps.length-1?(c.value++,w()):U()},u=()=>{c.value>0&&(clearInterval(h),c.value--,w())},a=()=>{p.value=!0},b=()=>{p.value=!1},F=()=>{f.value=!1,p.value=!1,clearInterval(h),B()},U=()=>{f.value=!1,g.value=!0,clearInterval(h),B()},q=()=>{g.value=!1,z()},J=()=>{e.value=null,g.value=!1,f.value=!1,G()},K=d=>{d>=0&&d<e.value.steps.length&&(clearInterval(h),c.value=d,w(),C.value++)},Q=d=>{const r={id:d,stepIndex:c.value,timestamp:Date.now()};E.value.push(r),l.value&&(l.value.emotions=E.value,M.updateSession(l.value.id,l.value)),T.value=!1},W=d=>{C.value++,console.log("用户交互:",d)},X=()=>{[1,3,4].includes(c.value)&&(T.value=!0,D=setTimeout(()=>{T.value=!1},5e3))},Y=()=>{l.value={id:Date.now().toString(),type:"visualization",theme:e.value.name,startTime:Date.now(),duration:e.value.duration*60,steps:e.value.steps.length,emotions:[],interactions:0,completed:!1},M.saveSession(l.value)},B=()=>{if(l.value){l.value.endTime=Date.now(),l.value.actualDuration=Math.floor((l.value.endTime-l.value.startTime)/1e3),l.value.interactions=C.value,l.value.completed=g.value,M.updateSession(l.value.id,l.value);const d=M.getStatistics();d.totalVisualizationSessions=(d.totalVisualizationSessions||0)+1,d.totalVisualizationTime=(d.totalVisualizationTime||0)+l.value.actualDuration,M.updateStatistics(d)}},G=()=>{l.value=null,E.value=[],C.value=0,T.value=!1};return et(()=>{h&&clearInterval(h),D&&clearTimeout(D),l.value&&f.value&&B()}),(d,r)=>{var L;return i(),o("div",xt,[r[8]||(r[8]=R('<div class="page-header" data-v-22499676><div class="header-background" data-v-22499676><div class="visualization-elements" data-v-22499676><div class="floating-shape shape-1" data-v-22499676>🌟</div><div class="floating-shape shape-2" data-v-22499676>🌈</div><div class="floating-shape shape-3" data-v-22499676>🦋</div><div class="floating-shape shape-4" data-v-22499676>🌸</div></div></div><h1 data-v-22499676>🌈 想象力训练</h1><p class="page-description" data-v-22499676> 通过引导想象激发孩子的创造力和右脑潜能。 想象力是创造力的源泉，也是全脑开发的重要组成部分。 </p></div>',1)),t("div",$t,[r[2]||(r[2]=t("h2",{class:"section-title"},"选择想象主题",-1)),t("div",Ct,[(i(!0),o(x,null,$(N.value,m=>{var H;return i(),o("div",{key:m.id,class:I(["theme-card",{active:((H=e.value)==null?void 0:H.id)===m.id}]),onClick:j=>A(m)},[t("div",It,n(m.icon),1),t("h3",null,n(m.name),1),t("p",null,n(m.description),1),t("div",Vt,[(i(!0),o(x,null,$(m.features,j=>(i(),o("span",{key:j,class:"feature-tag"},n(j),1))),128))]),t("div",Et,[t("div",Dt,[r[0]||(r[0]=t("span",{class:"info-label"},"时长：",-1)),t("span",Mt,n(m.duration)+"分钟",1)]),t("div",Nt,[r[1]||(r[1]=t("span",{class:"info-label"},"适合年龄：",-1)),t("span",At,n(m.ageRange),1)])])],10,zt)}),128))])]),e.value&&!f.value?(i(),o("div",Bt,[t("div",jt,[t("h3",null,"准备开始："+n(e.value.name),1),t("div",Ft,[t("div",Gt,n(e.value.icon),1),t("div",Lt,[t("p",null,n(e.value.preview),1)])]),t("div",Ht,[r[3]||(r[3]=t("h4",null,"💡 想象提示",-1)),t("ul",null,[(i(!0),o(x,null,$(e.value.tips,m=>(i(),o("li",{key:m},n(m),1))),128))])]),t("button",{class:"start-training-btn",onClick:z},r[4]||(r[4]=[t("span",{class:"btn-icon"},"✨",-1),st(" 开始想象之旅 ",-1)]))])])):y("",!0),f.value?(i(),o("div",Pt,[t("div",Rt,[t("h2",null,n(e.value.name),1),t("div",Ot,[t("span",Ut,n(c.value+1)+"/"+n(e.value.steps.length)+" 步骤",1),t("span",qt,"总时长: "+n(e.value.duration)+"分钟",1)])]),nt(wt,{"is-active":f.value&&!p.value,"current-step":k.value,"current-step-index":c.value,steps:e.value.steps,"time-left":S.value,"total-time":((L=k.value)==null?void 0:L.duration)||0,"show-hints":!0,"show-emotion-feedback":T.value,onStepChange:K,onEmotionSelected:Q,onInteraction:W},null,8,["is-active","current-step","current-step-index","steps","time-left","total-time","show-emotion-feedback"]),t("div",Jt,[t("h3",null,n(k.value.title),1),t("p",Kt,n(k.value.instruction),1)]),t("div",Qt,[t("button",{class:"control-btn prev",onClick:u,disabled:c.value===0}," ⬅️ 上一步 ",8,Wt),p.value?y("",!0):(i(),o("button",{key:0,class:"control-btn pause",onClick:a}," ⏸️ 暂停 ")),p.value?(i(),o("button",{key:1,class:"control-btn resume",onClick:b}," ▶️ 继续 ")):y("",!0),t("button",{class:"control-btn next",onClick:s,disabled:c.value===e.value.steps.length-1}," 下一步 ➡️ ",8,Xt),t("button",{class:"control-btn stop",onClick:F}," ⏹️ 结束 ")]),p.value?(i(),o("div",Yt,r[5]||(r[5]=[t("div",{class:"pause-content"},[t("div",{class:"pause-icon"},"⏸️"),t("h3",null,"训练已暂停"),t("p",null,"点击继续按钮恢复想象之旅")],-1)]))):y("",!0)])):y("",!0),g.value?(i(),o("div",Zt,[t("div",te,[r[6]||(r[6]=R('<div class="completion-animation" data-v-22499676><div class="completion-icon" data-v-22499676>🎉</div><div class="sparkles" data-v-22499676><span class="sparkle" data-v-22499676>✨</span><span class="sparkle" data-v-22499676>⭐</span><span class="sparkle" data-v-22499676>🌟</span></div></div><h2 data-v-22499676>想象之旅完成！</h2>',2)),t("p",null,"恭喜完成"+n(e.value.name)+"训练",1),r[7]||(r[7]=t("div",{class:"completion-reflection"},[t("h4",null,"🎨 创作分享"),t("p",null,"你可以把刚才想象的内容画出来或者讲给家人听！")],-1)),t("div",{class:"completion-actions"},[t("button",{class:"action-btn primary",onClick:q}," 🔄 再次体验 "),t("button",{class:"action-btn secondary",onClick:J}," 🌈 选择其他主题 ")])])])):y("",!0)])}}},ie=O(ee,[["__scopeId","data-v-22499676"]]);export{ie as default};
