import{u as Be,i,c as se,k as Ve,A as Pe,o as u,a as r,b as e,t as n,n as v,m as A,F as m,h as p,p as c,v as D,z as $,d as we,B as N,f as S,C as K,l as Re,g as Ue}from"./index-e0b54b24.js";import{a as Ie,b as Ae}from"./audioUtils-91973d70.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";const $e={class:"metronome-container"},Ne={class:"metronome-player"},Oe={class:"player-card"},ze={class:"metronome-display"},Ee={class:"tempo-info"},qe={class:"tempo-description"},Fe={class:"visual-metronome"},Le={class:"beat-indicator"},je={class:"measure-counter"},Ge={class:"measure-number"},Ke={class:"session-timer"},He={class:"timer-display"},Je={class:"time-elapsed"},Qe={class:"session-duration"},We={class:"timer-progress"},Xe={class:"progress-bar"},Ye={class:"metronome-controls"},Ze={class:"tempo-control"},et={class:"tempo-input-group"},tt=["disabled"],st=["disabled"],at={class:"time-signature-control"},nt={class:"play-controls"},it={class:"audio-settings"},ot={class:"volume-control"},lt={class:"volume-value"},dt={class:"sound-selection"},ut={class:"preset-tempos"},rt={class:"presets-grid"},ct=["onClick"],vt={class:"preset-icon"},mt={class:"preset-bpm"},pt={class:"preset-description"},gt={class:"preset-benefits"},ft={class:"training-modes"},bt={class:"modes-grid"},yt=["onClick"],_t={class:"mode-header"},ht={class:"mode-icon"},St={class:"mode-description"},Mt={class:"mode-details"},kt={class:"detail-item"},Tt={class:"detail-value"},Ct={class:"detail-item"},xt={class:"detail-value"},Bt={class:"detail-item"},Vt={class:"detail-value"},Pt={class:"mode-progress"},wt={class:"progress-bar"},Rt={class:"progress-text"},Ut={class:"start-mode-btn"},It={class:"session-settings"},At={class:"settings-grid"},Dt={class:"setting-card"},$t={class:"setting-item"},Nt={class:"setting-item"},Ot={class:"setting-label"},zt={class:"setting-item"},Et={class:"setting-label"},qt={class:"setting-card"},Ft={class:"setting-item"},Lt={class:"setting-label"},jt={class:"setting-item"},Gt={class:"setting-label"},Kt={class:"setting-item"},Ht={class:"setting-card"},Jt={class:"setting-item"},Qt={class:"setting-label"},Wt={class:"setting-item"},Xt={class:"setting-label"},Yt={class:"setting-item"},Zt={class:"setting-label"},es={class:"usage-analytics"},ts={class:"analytics-grid"},ss={class:"analytics-card"},as={class:"analytics-header"},ns={class:"stats-overview"},is={class:"stat-item"},os={class:"stat-info"},ls={class:"stat-value"},ds={class:"stat-item"},us={class:"stat-info"},rs={class:"stat-value"},cs={class:"stat-item"},vs={class:"stat-info"},ms={class:"stat-value"},ps={class:"analytics-card"},gs={class:"tempo-chart"},fs={class:"chart-bars"},bs=["title"],ys={class:"bar-label"},_s={class:"analytics-card"},hs={class:"effect-ratings"},Ss={class:"rating-item"},Ms={class:"rating-stars"},ks={class:"rating-item"},Ts={class:"rating-stars"},Cs={class:"rating-item"},xs={class:"rating-stars"},Bs={class:"rating-item"},Vs={class:"rating-stars"},Ps={class:"modal-content"},ws={class:"session-summary"},Rs={class:"summary-item"},Us={class:"summary-value"},Is={class:"summary-item"},As={class:"summary-value"},Ds={class:"summary-item"},$s={class:"summary-value"},Ns={class:"effect-feedback"},Os={class:"feedback-options"},zs=["onClick"],Es=3e3,qs={__name:"Metronome",emits:["back"],setup(Fs,{emit:Ls}){const H=Be(),g=i(!1),l=i(120),x=i("4/4"),O=i(4),f=i(0),B=i(0),V=i(70),J=i("click"),b=i(15),T=i(0),z=i("basic"),E=i(0),Q=i(120),y=i([]),P=i(!1),W=i(null);i(null);let X=null,Y=null;const o=i({autoStop:!0,countIn:!0,accentBeat:!0,visualOnly:!1,subdivision:"quarter",goal:"focus",soundType:"click",accentSoundType:"bell",volume:70,accentVolume:80,fadeIn:!1,fadeOut:!1,visualStyle:"pendulum",colorTheme:"auto",showBeatNumbers:!0,showMeasureCount:!0,showTimer:!0,fullscreenMode:!1,beatAnimation:"pulse",adaptiveTempo:!1,tempoVariation:0,progressiveTraining:!1,sessionReminders:!0,reminderInterval:5,preferredTempos:[60,80,120],customTimeSignatures:["4/4","3/4","2/4"],trainingGoals:{daily:20,weekly:140,monthly:600},polyrhythm:!1,polyrhythmRatio:"3:2",metronomeChain:!1,biofeedback:!1,heartRateSync:!1,hapticFeedback:!1,voiceCount:!1,accessibilityMode:!1,largeText:!1,highContrast:!1,maxVolume:85,maxSessionTime:60,breakReminders:!0,eyeStrainProtection:!0}),Z=i("month"),w=i(0),R=i(0),q=i(120),_=i({}),ee=i(0),h=i({focus:4,rhythm:4,relaxation:3,timing:4}),F=i(!1),L=i("");i([{id:1,name:"æ·±åº¦å†¥æƒ³",bpm:60,icon:"ğŸ§˜",description:"ç¼“æ…¢èŠ‚æ‹ï¼Œé€‚åˆæ·±åº¦å†¥æƒ³å’Œæ”¾æ¾",benefits:["æ·±åº¦æ”¾æ¾","å†…å¿ƒå¹³é™","å‹åŠ›é‡Šæ”¾"],category:"meditation",timeSignature:"4/4",difficulty:"beginner"},{id:2,name:"ä¸“æ³¨è®­ç»ƒ",bpm:80,icon:"ğŸ¯",description:"ä¸­æ…¢èŠ‚æ‹ï¼Œæå‡ä¸“æ³¨åŠ›å’Œé›†ä¸­åº¦",benefits:["ä¸“æ³¨åŠ›","é›†ä¸­åº¦","å¿ƒç†ç¨³å®š"],category:"focus",timeSignature:"4/4",difficulty:"beginner"},{id:3,name:"æ ‡å‡†èŠ‚æ‹",bpm:120,icon:"âš¡",description:"æ ‡å‡†èŠ‚æ‹ï¼Œé€‚åˆæ—¥å¸¸è®­ç»ƒ",benefits:["èŠ‚å¥æ„Ÿ","æ—¶é—´æ„Ÿ","åè°ƒæ€§"],category:"rhythm",timeSignature:"4/4",difficulty:"intermediate"},{id:4,name:"æ´»åŠ›è®­ç»ƒ",bpm:140,icon:"ğŸ”¥",description:"å¿«é€ŸèŠ‚æ‹ï¼Œæ¿€å‘æ´»åŠ›å’Œèƒ½é‡",benefits:["æ´»åŠ›æå‡","ååº”é€Ÿåº¦","åŠ¨æ€å¹³è¡¡"],category:"energy",timeSignature:"4/4",difficulty:"intermediate"},{id:5,name:"æŒ‘æˆ˜æ¨¡å¼",bpm:180,icon:"ğŸš€",description:"é«˜é€ŸèŠ‚æ‹ï¼ŒæŒ‘æˆ˜æé™ä¸“æ³¨åŠ›",benefits:["æé™ä¸“æ³¨","å¿«é€Ÿååº”","é«˜åº¦é›†ä¸­"],category:"challenge",timeSignature:"4/4",difficulty:"advanced"},{id:6,name:"å‘¼å¸åŒæ­¥",bpm:45,icon:"ğŸŒ¬ï¸",description:"è¶…æ…¢èŠ‚æ‹ï¼Œä¸æ·±å‘¼å¸èŠ‚å¥åŒæ­¥",benefits:["å‘¼å¸è°ƒèŠ‚","å¿ƒç‡å¹³ç¨³","æ·±åº¦æ”¾æ¾"],category:"breathing",timeSignature:"4/4",difficulty:"beginner"},{id:7,name:"å­¦ä¹ è¾…åŠ©",bpm:100,icon:"ğŸ“š",description:"é€‚ä¸­èŠ‚æ‹ï¼Œæå‡å­¦ä¹ æ•ˆç‡å’Œè®°å¿†åŠ›",benefits:["å­¦ä¹ æ•ˆç‡","è®°å¿†å¢å¼º","æ€ç»´æ¸…æ™°"],category:"study",timeSignature:"4/4",difficulty:"beginner"},{id:8,name:"åˆ›æ„æ¿€å‘",bpm:90,icon:"ğŸ¨",description:"çµæ„ŸèŠ‚æ‹ï¼Œæ¿€å‘åˆ›é€ åŠ›å’Œæƒ³è±¡åŠ›",benefits:["åˆ›é€ åŠ›","çµæ„Ÿæ¿€å‘","æ€ç»´å‘æ•£"],category:"creativity",timeSignature:"3/4",difficulty:"intermediate"},{id:9,name:"è¿åŠ¨åè°ƒ",bpm:160,icon:"ğŸƒ",description:"è¿åŠ¨èŠ‚æ‹ï¼Œæå‡èº«ä½“åè°ƒæ€§",benefits:["èº«ä½“åè°ƒ","è¿åŠ¨èŠ‚å¥","è‚Œè‚‰è®°å¿†"],category:"movement",timeSignature:"2/4",difficulty:"intermediate"},{id:10,name:"å¤åˆèŠ‚æ‹",bpm:110,icon:"ğŸ¼",description:"å¤æ‚æ‹å·ï¼Œè®­ç»ƒé«˜çº§èŠ‚å¥æ„Ÿ",benefits:["å¤æ‚èŠ‚å¥","éŸ³ä¹æ„ŸçŸ¥","è®¤çŸ¥çµæ´»"],category:"complex",timeSignature:"7/8",difficulty:"advanced"},{id:11,name:"ç¡å‰æ”¾æ¾",bpm:40,icon:"ğŸŒ™",description:"ææ…¢èŠ‚æ‹ï¼Œå¸®åŠ©å…¥ç¡å’Œæ·±åº¦ä¼‘æ¯",benefits:["åŠ©çœ æ•ˆæœ","æ·±åº¦æ”¾æ¾","å¿ƒç‡ä¸‹é™"],category:"sleep",timeSignature:"4/4",difficulty:"beginner"},{id:12,name:"æ™¨é—´å”¤é†’",bpm:130,icon:"â˜€ï¸",description:"æ´»åŠ›èŠ‚æ‹ï¼Œå”¤é†’èº«å¿ƒçŠ¶æ€",benefits:["ç²¾ç¥å”¤é†’","æ´»åŠ›æå‡","çŠ¶æ€è°ƒæ•´"],category:"morning",timeSignature:"4/4",difficulty:"intermediate"}]);const U=i([{id:"basic",name:"åŸºç¡€è®­ç»ƒ",description:"å›ºå®šèŠ‚æ‹è®­ç»ƒï¼Œå»ºç«‹ç¨³å®šçš„å†…åœ¨èŠ‚å¥æ„Ÿ",icon:"ğŸµ",level:"beginner",duration:10,tempoRange:"60-120 BPM",difficulty:"ç®€å•",totalSessions:10,completedSessions:0,benefits:["èŠ‚å¥æ„Ÿå»ºç«‹","æ—¶é—´æ„ŸåŸ¹å…»","åŸºç¡€åè°ƒ"],targetAudience:"åˆå­¦è€…ã€èŠ‚æ‹å™¨æ–°æ‰‹",stages:[{name:"é€‚åº”é˜¶æ®µ",duration:3,tempo:80,description:"ç†Ÿæ‚‰èŠ‚æ‹å™¨èŠ‚å¥"},{name:"ç¨³å®šé˜¶æ®µ",duration:4,tempo:100,description:"ä¿æŒç¨³å®šè·Ÿéš"},{name:"å·©å›ºé˜¶æ®µ",duration:3,tempo:120,description:"å·©å›ºèŠ‚å¥æ„Ÿ"}]},{id:"progressive",name:"æ¸è¿›è®­ç»ƒ",description:"èŠ‚æ‹é€æ¸åŠ å¿«ï¼Œæå‡é€‚åº”èƒ½åŠ›",icon:"ğŸ“ˆ",level:"intermediate",duration:15,tempoRange:"80-160 BPM",difficulty:"ä¸­ç­‰",totalSessions:8,completedSessions:0,benefits:["é€‚åº”èƒ½åŠ›","ååº”é€Ÿåº¦","èŠ‚å¥æ§åˆ¶"],targetAudience:"æœ‰åŸºç¡€çš„ç»ƒä¹ è€…",stages:[{name:"æ…¢é€Ÿèµ·æ­¥",duration:5,tempo:80,description:"ä»æ…¢é€Ÿå¼€å§‹é€‚åº”"},{name:"é€æ­¥åŠ é€Ÿ",duration:5,tempo:120,description:"é€æ¸æå‡èŠ‚æ‹é€Ÿåº¦"},{name:"å¿«é€ŸæŒ‘æˆ˜",duration:5,tempo:160,description:"æŒ‘æˆ˜å¿«é€ŸèŠ‚æ‹"}]},{id:"variable",name:"å˜é€Ÿè®­ç»ƒ",description:"èŠ‚æ‹éšæœºå˜åŒ–ï¼Œå¢å¼ºä¸“æ³¨åŠ›å’Œé€‚åº”æ€§",icon:"ğŸ”„",level:"advanced",duration:20,tempoRange:"60-180 BPM",difficulty:"å›°éš¾",totalSessions:12,completedSessions:0,benefits:["ä¸“æ³¨åŠ›","é€‚åº”æ€§","ååº”çµæ•"],targetAudience:"é«˜çº§ç»ƒä¹ è€…",stages:[{name:"å°å¹…å˜åŒ–",duration:6,tempo:100,description:"å°èŒƒå›´èŠ‚æ‹å˜åŒ–"},{name:"ä¸­å¹…å˜åŒ–",duration:7,tempo:120,description:"ä¸­ç­‰èŒƒå›´å˜åŒ–"},{name:"å¤§å¹…å˜åŒ–",duration:7,tempo:140,description:"å¤§èŒƒå›´éšæœºå˜åŒ–"}]},{id:"meditation",name:"å†¥æƒ³è¾…åŠ©",description:"ç¼“æ…¢ç¨³å®šèŠ‚æ‹ï¼Œè¾…åŠ©å†¥æƒ³ç»ƒä¹ ",icon:"ğŸŒŠ",level:"beginner",duration:25,tempoRange:"40-80 BPM",difficulty:"ç®€å•",totalSessions:15,completedSessions:0,benefits:["æ·±åº¦æ”¾æ¾","å†¥æƒ³ä¸“æ³¨","å¿ƒç‡è°ƒèŠ‚"],targetAudience:"å†¥æƒ³ç»ƒä¹ è€…ã€æ”¾æ¾éœ€æ±‚è€…",stages:[{name:"å…¥é™å‡†å¤‡",duration:5,tempo:60,description:"è¿›å…¥å†¥æƒ³çŠ¶æ€"},{name:"æ·±åº¦å†¥æƒ³",duration:15,tempo:45,description:"æ·±åº¦å†¥æƒ³ç»ƒä¹ "},{name:"å›å½’è°ƒæ•´",duration:5,tempo:60,description:"é€æ¸å›åˆ°æ­£å¸¸çŠ¶æ€"}]},{id:"complex",name:"å¤åˆèŠ‚æ‹",description:"å¤æ‚æ‹å·è®­ç»ƒï¼Œæå‡éŸ³ä¹æ„ŸçŸ¥èƒ½åŠ›",icon:"ğŸ¼",level:"advanced",duration:18,tempoRange:"90-150 BPM",difficulty:"å›°éš¾",totalSessions:10,completedSessions:0,benefits:["éŸ³ä¹æ„ŸçŸ¥","å¤æ‚èŠ‚å¥","è®¤çŸ¥çµæ´»"],targetAudience:"éŸ³ä¹å­¦ä¹ è€…ã€é«˜çº§ç»ƒä¹ è€…",stages:[{name:"3/4æ‹ç»ƒä¹ ",duration:6,tempo:100,description:"ä¸‰æ‹å­èŠ‚å¥è®­ç»ƒ"},{name:"5/4æ‹ç»ƒä¹ ",duration:6,tempo:110,description:"äº”æ‹å­èŠ‚å¥è®­ç»ƒ"},{name:"7/8æ‹ç»ƒä¹ ",duration:6,tempo:120,description:"å¤æ‚æ‹å·è®­ç»ƒ"}]},{id:"breathing",name:"å‘¼å¸åŒæ­¥",description:"ä¸å‘¼å¸èŠ‚å¥åŒæ­¥ï¼Œè°ƒèŠ‚èº«å¿ƒçŠ¶æ€",icon:"ğŸŒ¬ï¸",level:"beginner",duration:20,tempoRange:"30-60 BPM",difficulty:"ç®€å•",totalSessions:12,completedSessions:0,benefits:["å‘¼å¸è°ƒèŠ‚","å¿ƒç‡å¹³ç¨³","å‹åŠ›ç¼“è§£"],targetAudience:"å‹åŠ›å¤§çš„äººç¾¤ã€å‘¼å¸ç»ƒä¹ è€…",stages:[{name:"è‡ªç„¶å‘¼å¸",duration:5,tempo:45,description:"è·Ÿéšè‡ªç„¶å‘¼å¸èŠ‚å¥"},{name:"æ·±åº¦å‘¼å¸",duration:10,tempo:30,description:"æ·±åº¦å‘¼å¸ç»ƒä¹ "},{name:"èŠ‚å¥å‘¼å¸",duration:5,tempo:40,description:"å»ºç«‹è§„å¾‹å‘¼å¸"}]},{id:"focus",name:"ä¸“æ³¨åŠ›å¼ºåŒ–",description:"é€šè¿‡èŠ‚æ‹è®­ç»ƒæå‡ä¸“æ³¨åŠ›å’Œæ³¨æ„åŠ›",icon:"ğŸ¯",level:"intermediate",duration:12,tempoRange:"80-120 BPM",difficulty:"ä¸­ç­‰",totalSessions:14,completedSessions:0,benefits:["ä¸“æ³¨åŠ›","æ³¨æ„åŠ›","å¿ƒç†ç¨³å®š"],targetAudience:"å­¦ç”Ÿã€éœ€è¦ä¸“æ³¨çš„å·¥ä½œè€…",stages:[{name:"æ³¨æ„åŠ›é›†ä¸­",duration:4,tempo:80,description:"é›†ä¸­æ³¨æ„åŠ›è®­ç»ƒ"},{name:"æŒç»­ä¸“æ³¨",duration:4,tempo:100,description:"ç»´æŒä¸“æ³¨çŠ¶æ€"},{name:"æ·±åº¦ä¸“æ³¨",duration:4,tempo:120,description:"æ·±åº¦ä¸“æ³¨è®­ç»ƒ"}]},{id:"creativity",name:"åˆ›æ„æ¿€å‘",description:"ç‰¹æ®ŠèŠ‚æ‹æ¨¡å¼æ¿€å‘åˆ›é€ åŠ›å’Œçµæ„Ÿ",icon:"ğŸ¨",level:"intermediate",duration:16,tempoRange:"70-110 BPM",difficulty:"ä¸­ç­‰",totalSessions:8,completedSessions:0,benefits:["åˆ›é€ åŠ›","çµæ„Ÿæ¿€å‘","æ€ç»´å‘æ•£"],targetAudience:"åˆ›ä½œè€…ã€è®¾è®¡å¸ˆã€è‰ºæœ¯å®¶",stages:[{name:"æ€ç»´æ”¾æ¾",duration:5,tempo:70,description:"æ”¾æ¾æ€ç»´çŠ¶æ€"},{name:"çµæ„Ÿæ¶Œç°",duration:6,tempo:90,description:"æ¿€å‘åˆ›æ„çµæ„Ÿ"},{name:"åˆ›æ„æ•´åˆ",duration:5,tempo:110,description:"æ•´åˆåˆ›æ„æ€è·¯"}]}]),ae=i([{value:"excellent",label:"éå¸¸å¥½",icon:"ğŸ˜Š"},{value:"good",label:"ä¸é”™",icon:"ğŸ™‚"},{value:"average",label:"ä¸€èˆ¬",icon:"ğŸ˜"},{value:"poor",label:"ä¸å¤ªå¥½",icon:"ğŸ˜•"}]),ne=se(()=>60/l.value),ie=se(()=>{const a=b.value*60;return T.value/a*100}),oe=a=>a<60?"ææ…¢ - æ·±åº¦å†¥æƒ³":a<80?"æ…¢é€Ÿ - æ”¾æ¾å†¥æƒ³":a<100?"ä¸­æ…¢ - ä¸“æ³¨è®­ç»ƒ":a<120?"ä¸­é€Ÿ - æ ‡å‡†èŠ‚æ‹":a<140?"ä¸­å¿« - æ´»åŠ›è®­ç»ƒ":a<160?"å¿«é€Ÿ - æŒ‘æˆ˜æ¨¡å¼":"æå¿« - æé™æŒ‘æˆ˜",le=()=>{g.value?C():j()},j=async()=>{g.value=!0,f.value=0,B.value=0,E.value=0,await de(),P.value?(re(),ce()):g.value=!1},C=()=>{g.value=!1,clearInterval(X),clearInterval(Y)},de=async()=>{try{P.value=!1,W.value=null,await Ie.initialize(),P.value=!0}catch(a){console.error("èŠ‚æ‹å™¨éŸ³é¢‘åˆå§‹åŒ–å¤±è´¥:",a),W.value=a.message}},ue=async(a=!1)=>{if(!(o.value.visualOnly||!P.value))try{const t=a&&o.value.accentBeat?800:600,s=V.value/100,d=.1;await Ae.playMetronomeSound(t,s,d)}catch(t){console.error("æ’­æ”¾èŠ‚æ‹éŸ³é¢‘å¤±è´¥:",t)}},re=()=>{const a=60/l.value*1e3;X=setInterval(()=>{f.value++,E.value++,f.value>O.value&&(f.value=1,B.value++);const t=f.value===1;ue(t)},a)},ce=()=>{Y=setInterval(()=>{T.value++,T.value>=b.value*60&&ve()},1e3)},ve=()=>{C(),R.value++,w.value+=b.value,Q.value=l.value;const a=Math.floor(l.value/20)*20,t=`${a}-${a+19}`;_.value[t]=(_.value[t]||0)+1,ke(),o.value.autoStop&&(F.value=!0)},M=async()=>{g.value&&(C(),setTimeout(async()=>{await j()},100))},me=()=>{l.value<200&&(l.value+=5,M())},pe=()=>{l.value>40&&(l.value-=5,M())},G=()=>{const[a]=x.value.split("/");O.value=parseInt(a),g.value&&(f.value=0,B.value=0)},ge=()=>{},fe=()=>{},be=()=>{const a=Date.now();if(y.value.push(a),y.value=y.value.filter(t=>a-t<Es),y.value.length>=2){const t=[];for(let k=1;k<y.value.length;k++)t.push(y.value[k]-y.value[k-1]);const s=t.reduce((k,xe)=>k+xe)/t.length,d=Math.round(6e4/s);d>=40&&d<=200&&(l.value=d,M())}},ye=a=>{l.value=a.bpm,M()},_e=a=>{switch(z.value=a.id,a.id){case"meditation":l.value=60,o.value.goal="meditation";break;case"progressive":l.value=80,o.value.goal="focus";break;case"variable":l.value=120,o.value.goal="focus";break;case"complex":x.value="3/4",G();break;default:l.value=120,o.value.goal="rhythm"}},he=a=>({beginner:"åˆçº§",intermediate:"ä¸­çº§",advanced:"é«˜çº§"})[a]||"ä¸­çº§",Se=()=>{const a=U.value.find(t=>t.id===z.value);return a?a.name:"åŸºç¡€è®­ç»ƒ"},te=a=>{const t=Math.floor(a/60),s=a%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},I=()=>{F.value=!1,L.value="",T.value=0},Me=()=>{I(),j()},ke=()=>{const a={settings:o.value,modes:U.value,analytics:{totalTrainingMinutes:w.value,totalSessions:R.value,averageTempo:q.value,tempoUsage:_.value,effectRatings:h.value}};H.saveMeditationModuleData("metronome",a)},Te=()=>{const a=H.getMeditationModuleData("metronome");a&&(a.settings&&(o.value={...o.value,...a.settings}),a.modes&&(U.value=a.modes),a.analytics&&(w.value=a.analytics.totalTrainingMinutes||0,R.value=a.analytics.totalSessions||0,q.value=a.analytics.averageTempo||120,_.value=a.analytics.tempoUsage||{},h.value={...h.value,...a.analytics.effectRatings})),Ce()},Ce=()=>{["40-59","60-79","80-99","100-119","120-139","140-159","160-179","180-199"].forEach(t=>{_.value[t]=Math.floor(Math.random()*30)+5}),ee.value=Math.max(...Object.values(_.value))};return Ve(()=>{Te(),G()}),Pe(()=>{C(),audioContext&&audioContext.close()}),(a,t)=>(u(),r("div",$e,[e("div",Ne,[e("div",Oe,[e("div",ze,[e("div",Ee,[e("h3",null,n(l.value)+" BPM",1),e("p",qe,n(oe(l.value)),1)]),e("div",Fe,[e("div",{class:v(["metronome-pendulum",{active:g.value}])},[e("div",{class:"pendulum-rod",style:A({animationDuration:ne.value+"s"})},t[16]||(t[16]=[e("div",{class:"pendulum-weight"},null,-1)]),4)],2),e("div",Le,[(u(!0),r(m,null,p(O.value,(s,d)=>(u(),r("div",{key:d,class:v(["beat-dot",{active:f.value===d+1,accent:d===0&&f.value===1}])},n(d+1),3))),128))]),e("div",je,[t[17]||(t[17]=e("span",{class:"measure-label"},"å°èŠ‚ï¼š",-1)),e("span",Ge,n(B.value),1)])]),e("div",Ke,[e("div",He,[e("span",Je,n(te(T.value)),1),e("span",Qe,"/ "+n(te(b.value*60)),1)]),e("div",We,[e("div",Xe,[e("div",{class:"progress-fill",style:A({width:ie.value+"%"})},null,4)])])])]),e("div",Ye,[e("div",Ze,[t[18]||(t[18]=e("label",null,"èŠ‚æ‹é€Ÿåº¦ (BPM)ï¼š",-1)),e("div",et,[e("button",{class:"tempo-btn",onClick:pe,disabled:l.value<=40},"-",8,tt),c(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),min:"40",max:"200",class:"tempo-input",onInput:M},null,544),[[D,l.value]]),e("button",{class:"tempo-btn",onClick:me,disabled:l.value>=200},"+",8,st)]),c(e("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>l.value=s),min:"40",max:"200",class:"tempo-slider",onInput:M},null,544),[[D,l.value]])]),e("div",at,[t[20]||(t[20]=e("label",null,"æ‹å·ï¼š",-1)),c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value=s),onChange:G,class:"time-signature-select"},t[19]||(t[19]=[e("option",{value:"4/4"},"4/4",-1),e("option",{value:"3/4"},"3/4",-1),e("option",{value:"2/4"},"2/4",-1),e("option",{value:"6/8"},"6/8",-1)]),544),[[$,x.value]])]),e("div",nt,[e("button",{class:"control-btn",onClick:le},n(g.value?"â¸ï¸":"â–¶ï¸"),1),e("button",{class:"control-btn",onClick:C},"â¹ï¸"),e("button",{class:"control-btn",onClick:be},"ğŸ‘† Tap")]),e("div",it,[e("div",ot,[t[21]||(t[21]=e("label",null,"éŸ³é‡ï¼š",-1)),c(e("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":t[3]||(t[3]=s=>V.value=s),class:"volume-slider",onInput:ge},null,544),[[D,V.value]]),e("span",lt,n(V.value)+"%",1)]),e("div",dt,[t[23]||(t[23]=e("label",null,"èŠ‚æ‹éŸ³æ•ˆï¼š",-1)),c(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>J.value=s),onChange:fe,class:"sound-select"},t[22]||(t[22]=[we('<option value="click" data-v-da8e88ed>å’”å—’å£°</option><option value="beep" data-v-da8e88ed>èœ‚é¸£å£°</option><option value="wood" data-v-da8e88ed>æœ¨å—å£°</option><option value="bell" data-v-da8e88ed>é“ƒå£°</option><option value="drum" data-v-da8e88ed>é¼“å£°</option>',5)]),544),[[$,J.value]])])])])])]),e("div",ut,[t[24]||(t[24]=e("h3",null,"é¢„è®¾èŠ‚æ‹",-1)),e("div",rt,[(u(!0),r(m,null,p(a.tempoPresets,s=>(u(),r("div",{key:s.id,class:v(["preset-card",{active:l.value===s.bpm}]),onClick:d=>ye(s)},[e("div",vt,n(s.icon),1),e("h4",null,n(s.name),1),e("p",mt,n(s.bpm)+" BPM",1),e("p",pt,n(s.description),1),e("div",gt,[(u(!0),r(m,null,p(s.benefits,d=>(u(),r("span",{key:d,class:"benefit-tag"},n(d),1))),128))])],10,ct))),128))])]),e("div",ft,[t[28]||(t[28]=e("h3",null,"è®­ç»ƒæ¨¡å¼",-1)),e("div",bt,[(u(!0),r(m,null,p(U.value,s=>(u(),r("div",{key:s.id,class:v(["mode-card",{active:z.value===s.id}]),onClick:d=>_e(s)},[e("div",_t,[e("div",ht,n(s.icon),1),e("div",{class:v(["mode-level",s.level])},n(he(s.level)),3)]),e("h4",null,n(s.name),1),e("p",St,n(s.description),1),e("div",Mt,[e("div",kt,[t[25]||(t[25]=e("span",{class:"detail-label"},"æ—¶é•¿ï¼š",-1)),e("span",Tt,n(s.duration)+"åˆ†é’Ÿ",1)]),e("div",Ct,[t[26]||(t[26]=e("span",{class:"detail-label"},"èŠ‚æ‹èŒƒå›´ï¼š",-1)),e("span",xt,n(s.tempoRange),1)]),e("div",Bt,[t[27]||(t[27]=e("span",{class:"detail-label"},"éš¾åº¦ï¼š",-1)),e("span",Vt,n(s.difficulty),1)])]),e("div",Pt,[e("div",wt,[e("div",{class:"progress-fill",style:A({width:s.completedSessions/s.totalSessions*100+"%"})},null,4)]),e("span",Rt,n(s.completedSessions)+"/"+n(s.totalSessions)+" å®Œæˆ",1)]),e("button",Ut,n(s.completedSessions===0?"å¼€å§‹è®­ç»ƒ":"ç»§ç»­è®­ç»ƒ"),1)],10,yt))),128))])]),e("div",It,[t[42]||(t[42]=e("h3",null,"ä¼šè¯è®¾ç½®",-1)),e("div",At,[e("div",Dt,[t[32]||(t[32]=e("h4",null,"â° æ—¶é—´è®¾ç½®",-1)),e("div",$t,[t[29]||(t[29]=e("label",null,"ä¼šè¯æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰ï¼š",-1)),c(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>b.value=s),min:"5",max:"60",class:"number-input"},null,512),[[D,b.value]])]),e("div",Nt,[e("label",Ot,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>o.value.autoStop=s)},null,512),[[N,o.value.autoStop]]),t[30]||(t[30]=S(" æ—¶é—´åˆ°è‡ªåŠ¨åœæ­¢ ",-1))])]),e("div",zt,[e("label",Et,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=s=>o.value.countIn=s)},null,512),[[N,o.value.countIn]]),t[31]||(t[31]=S(" å¼€å§‹å‰é¢„å¤‡æ‹ ",-1))])])]),e("div",qt,[t[37]||(t[37]=e("h4",null,"ğŸµ éŸ³é¢‘è®¾ç½®",-1)),e("div",Ft,[e("label",Lt,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>o.value.accentBeat=s)},null,512),[[N,o.value.accentBeat]]),t[33]||(t[33]=S(" å¼ºæ‹é‡éŸ³ ",-1))])]),e("div",jt,[e("label",Gt,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=s=>o.value.visualOnly=s)},null,512),[[N,o.value.visualOnly]]),t[34]||(t[34]=S(" ä»…è§†è§‰æ¨¡å¼ ",-1))])]),e("div",Kt,[t[36]||(t[36]=e("label",null,"èŠ‚æ‹ç»†åˆ†ï¼š",-1)),c(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.subdivision=s),class:"select-input"},t[35]||(t[35]=[e("option",{value:"quarter"},"å››åˆ†éŸ³ç¬¦",-1),e("option",{value:"eighth"},"å…«åˆ†éŸ³ç¬¦",-1),e("option",{value:"sixteenth"},"åå…­åˆ†éŸ³ç¬¦",-1)]),512),[[$,o.value.subdivision]])])]),e("div",Ht,[t[41]||(t[41]=e("h4",null,"ğŸ¯ è®­ç»ƒç›®æ ‡",-1)),e("div",Jt,[e("label",Qt,[c(e("input",{type:"radio","onUpdate:modelValue":t[11]||(t[11]=s=>o.value.goal=s),value:"focus"},null,512),[[K,o.value.goal]]),t[38]||(t[38]=S(" ä¸“æ³¨åŠ›è®­ç»ƒ ",-1))])]),e("div",Wt,[e("label",Xt,[c(e("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=s=>o.value.goal=s),value:"rhythm"},null,512),[[K,o.value.goal]]),t[39]||(t[39]=S(" èŠ‚å¥æ„ŸåŸ¹å…» ",-1))])]),e("div",Yt,[e("label",Zt,[c(e("input",{type:"radio","onUpdate:modelValue":t[13]||(t[13]=s=>o.value.goal=s),value:"meditation"},null,512),[[K,o.value.goal]]),t[40]||(t[40]=S(" å†¥æƒ³è¾…åŠ© ",-1))])])])])]),e("div",es,[t[57]||(t[57]=e("h3",null,"ä½¿ç”¨åˆ†æ",-1)),e("div",ts,[e("div",ss,[e("div",as,[t[44]||(t[44]=e("h4",null,"ğŸ“Š è®­ç»ƒç»Ÿè®¡",-1)),c(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>Z.value=s),class:"time-range-select"},t[43]||(t[43]=[e("option",{value:"week"},"æœ€è¿‘ä¸€å‘¨",-1),e("option",{value:"month"},"æœ€è¿‘ä¸€æœˆ",-1),e("option",{value:"quarter"},"æœ€è¿‘ä¸‰æœˆ",-1)]),512),[[$,Z.value]])]),e("div",ns,[e("div",is,[t[46]||(t[46]=e("div",{class:"stat-icon"},"â±ï¸",-1)),e("div",os,[e("span",ls,n(w.value),1),t[45]||(t[45]=e("span",{class:"stat-label"},"æ€»è®­ç»ƒæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰",-1))])]),e("div",ds,[t[48]||(t[48]=e("div",{class:"stat-icon"},"ğŸ¯",-1)),e("div",us,[e("span",rs,n(R.value),1),t[47]||(t[47]=e("span",{class:"stat-label"},"æ€»ä¼šè¯æ¬¡æ•°",-1))])]),e("div",cs,[t[50]||(t[50]=e("div",{class:"stat-icon"},"ğŸµ",-1)),e("div",vs,[e("span",ms,n(q.value),1),t[49]||(t[49]=e("span",{class:"stat-label"},"å¹³å‡èŠ‚æ‹ (BPM)",-1))])])])]),e("div",ps,[t[51]||(t[51]=e("h4",null,"ğŸ“ˆ èŠ‚æ‹åˆ†å¸ƒ",-1)),e("div",gs,[e("div",fs,[(u(!0),r(m,null,p(_.value,(s,d)=>(u(),r("div",{key:d,class:"chart-bar",style:A({height:s/ee.value*100+"%"}),title:`${d} BPM: ${s}æ¬¡`},[e("span",ys,n(d),1)],12,bs))),128))])])]),e("div",_s,[t[56]||(t[56]=e("h4",null,"ğŸ¯ è®­ç»ƒæ•ˆæœ",-1)),e("div",hs,[e("div",Ss,[t[52]||(t[52]=e("span",{class:"rating-label"},"ä¸“æ³¨åŠ›ï¼š",-1)),e("div",Ms,[(u(),r(m,null,p(5,s=>e("span",{key:s,class:v(["star",{filled:s<=h.value.focus}])},"â­",2)),64))])]),e("div",ks,[t[53]||(t[53]=e("span",{class:"rating-label"},"èŠ‚å¥æ„Ÿï¼š",-1)),e("div",Ts,[(u(),r(m,null,p(5,s=>e("span",{key:s,class:v(["star",{filled:s<=h.value.rhythm}])},"â­",2)),64))])]),e("div",Cs,[t[54]||(t[54]=e("span",{class:"rating-label"},"æ”¾æ¾åº¦ï¼š",-1)),e("div",xs,[(u(),r(m,null,p(5,s=>e("span",{key:s,class:v(["star",{filled:s<=h.value.relaxation}])},"â­",2)),64))])]),e("div",Bs,[t[55]||(t[55]=e("span",{class:"rating-label"},"æ—¶é—´æ„Ÿï¼š",-1)),e("div",Vs,[(u(),r(m,null,p(5,s=>e("span",{key:s,class:v(["star",{filled:s<=h.value.timing}])},"â­",2)),64))])])])])])]),F.value?(u(),r("div",{key:0,class:"modal-overlay",onClick:I},[e("div",{class:"session-modal",onClick:t[15]||(t[15]=Re(()=>{},["stop"]))},[e("div",{class:"modal-header"},[t[58]||(t[58]=e("h3",null,"ğŸ‰ è®­ç»ƒå®Œæˆ",-1)),e("button",{class:"close-btn",onClick:I},"Ã—")]),e("div",Ps,[e("p",null,"æ‚¨å·²å®Œæˆ "+n(b.value)+" åˆ†é’Ÿçš„èŠ‚æ‹å™¨è®­ç»ƒï¼",1),e("div",ws,[e("div",Rs,[t[59]||(t[59]=e("span",{class:"summary-label"},"å¹³å‡èŠ‚æ‹ï¼š",-1)),e("span",Us,n(Q.value)+" BPM",1)]),e("div",Is,[t[60]||(t[60]=e("span",{class:"summary-label"},"æ€»èŠ‚æ‹æ•°ï¼š",-1)),e("span",As,n(E.value),1)]),e("div",Ds,[t[61]||(t[61]=e("span",{class:"summary-label"},"è®­ç»ƒæ¨¡å¼ï¼š",-1)),e("span",$s,n(Se()),1)])]),e("div",Ns,[t[62]||(t[62]=e("h4",null,"è¯·è¯„ä»·æœ¬æ¬¡è®­ç»ƒæ•ˆæœï¼š",-1)),e("div",Os,[(u(!0),r(m,null,p(ae.value,s=>(u(),r("button",{key:s.value,class:v(["feedback-btn",{selected:L.value===s.value}]),onClick:d=>L.value=s.value},n(s.icon)+" "+n(s.label),11,zs))),128))])]),e("div",{class:"modal-actions"},[e("button",{class:"secondary-btn",onClick:I},"å®Œæˆ"),e("button",{class:"primary-btn",onClick:Me},"å†æ¥ä¸€æ¬¡")])])])])):Ue("",!0)]))}},Hs=De(qs,[["__scopeId","data-v-da8e88ed"]]);export{Hs as default};
