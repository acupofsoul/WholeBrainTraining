import{u as Be,i,c as se,k as Ve,A as Pe,o as u,a as r,b as e,t as n,n as v,m as A,F as m,h as p,p as c,v as D,z as $,d as we,B as N,f as S,C as K,l as Re,g as Ue}from"./index-e0b54b24.js";import{a as Ie,b as Ae}from"./audioUtils-91973d70.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";const $e={class:"metronome-container"},Ne={class:"metronome-player"},Oe={class:"player-card"},ze={class:"metronome-display"},Ee={class:"tempo-info"},qe={class:"tempo-description"},Fe={class:"visual-metronome"},Le={class:"beat-indicator"},je={class:"measure-counter"},Ge={class:"measure-number"},Ke={class:"session-timer"},He={class:"timer-display"},Je={class:"time-elapsed"},Qe={class:"session-duration"},We={class:"timer-progress"},Xe={class:"progress-bar"},Ye={class:"metronome-controls"},Ze={class:"tempo-control"},et={class:"tempo-input-group"},tt=["disabled"],st=["disabled"],at={class:"time-signature-control"},nt={class:"play-controls"},it={class:"audio-settings"},ot={class:"volume-control"},lt={class:"volume-value"},dt={class:"sound-selection"},ut={class:"preset-tempos"},rt={class:"presets-grid"},ct=["onClick"],vt={class:"preset-icon"},mt={class:"preset-bpm"},pt={class:"preset-description"},gt={class:"preset-benefits"},ft={class:"training-modes"},bt={class:"modes-grid"},yt=["onClick"],_t={class:"mode-header"},ht={class:"mode-icon"},St={class:"mode-description"},Mt={class:"mode-details"},kt={class:"detail-item"},Tt={class:"detail-value"},Ct={class:"detail-item"},xt={class:"detail-value"},Bt={class:"detail-item"},Vt={class:"detail-value"},Pt={class:"mode-progress"},wt={class:"progress-bar"},Rt={class:"progress-text"},Ut={class:"start-mode-btn"},It={class:"session-settings"},At={class:"settings-grid"},Dt={class:"setting-card"},$t={class:"setting-item"},Nt={class:"setting-item"},Ot={class:"setting-label"},zt={class:"setting-item"},Et={class:"setting-label"},qt={class:"setting-card"},Ft={class:"setting-item"},Lt={class:"setting-label"},jt={class:"setting-item"},Gt={class:"setting-label"},Kt={class:"setting-item"},Ht={class:"setting-card"},Jt={class:"setting-item"},Qt={class:"setting-label"},Wt={class:"setting-item"},Xt={class:"setting-label"},Yt={class:"setting-item"},Zt={class:"setting-label"},es={class:"usage-analytics"},ts={class:"analytics-grid"},ss={class:"analytics-card"},as={class:"analytics-header"},ns={class:"stats-overview"},is={class:"stat-item"},os={class:"stat-info"},ls={class:"stat-value"},ds={class:"stat-item"},us={class:"stat-info"},rs={class:"stat-value"},cs={class:"stat-item"},vs={class:"stat-info"},ms={class:"stat-value"},ps={class:"analytics-card"},gs={class:"tempo-chart"},fs={class:"chart-bars"},bs=["title"],ys={class:"bar-label"},_s={class:"analytics-card"},hs={class:"effect-ratings"},Ss={class:"rating-item"},Ms={class:"rating-stars"},ks={class:"rating-item"},Ts={class:"rating-stars"},Cs={class:"rating-item"},xs={class:"rating-stars"},Bs={class:"rating-item"},Vs={class:"rating-stars"},Ps={class:"modal-content"},ws={class:"session-summary"},Rs={class:"summary-item"},Us={class:"summary-value"},Is={class:"summary-item"},As={class:"summary-value"},Ds={class:"summary-item"},$s={class:"summary-value"},Ns={class:"effect-feedback"},Os={class:"feedback-options"},zs=["onClick"],Es=3e3,qs={__name:"Metronome",emits:["back"],setup(Fs,{emit:Ls}){const H=Be(),g=i(!1),l=i(120),x=i("4/4"),O=i(4),f=i(0),B=i(0),V=i(70),J=i("click"),b=i(15),T=i(0),z=i("basic"),E=i(0),Q=i(120),y=i([]),P=i(!1),W=i(null);i(null);let X=null,Y=null;const o=i({autoStop:!0,countIn:!0,accentBeat:!0,visualOnly:!1,subdivision:"quarter",goal:"focus",soundType:"click",accentSoundType:"bell",volume:70,accentVolume:80,fadeIn:!1,fadeOut:!1,visualStyle:"pendulum",colorTheme:"auto",showBeatNumbers:!0,showMeasureCount:!0,showTimer:!0,fullscreenMode:!1,beatAnimation:"pulse",adaptiveTempo:!1,tempoVariation:0,progressiveTraining:!1,sessionReminders:!0,reminderInterval:5,preferredTempos:[60,80,120],customTimeSignatures:["4/4","3/4","2/4"],trainingGoals:{daily:20,weekly:140,monthly:600},polyrhythm:!1,polyrhythmRatio:"3:2",metronomeChain:!1,biofeedback:!1,heartRateSync:!1,hapticFeedback:!1,voiceCount:!1,accessibilityMode:!1,largeText:!1,highContrast:!1,maxVolume:85,maxSessionTime:60,breakReminders:!0,eyeStrainProtection:!0}),Z=i("month"),w=i(0),R=i(0),q=i(120),_=i({}),ee=i(0),h=i({focus:4,rhythm:4,relaxation:3,timing:4}),F=i(!1),L=i("");i([{id:1,name:"深度冥想",bpm:60,icon:"🧘",description:"缓慢节拍，适合深度冥想和放松",benefits:["深度放松","内心平静","压力释放"],category:"meditation",timeSignature:"4/4",difficulty:"beginner"},{id:2,name:"专注训练",bpm:80,icon:"🎯",description:"中慢节拍，提升专注力和集中度",benefits:["专注力","集中度","心理稳定"],category:"focus",timeSignature:"4/4",difficulty:"beginner"},{id:3,name:"标准节拍",bpm:120,icon:"⚡",description:"标准节拍，适合日常训练",benefits:["节奏感","时间感","协调性"],category:"rhythm",timeSignature:"4/4",difficulty:"intermediate"},{id:4,name:"活力训练",bpm:140,icon:"🔥",description:"快速节拍，激发活力和能量",benefits:["活力提升","反应速度","动态平衡"],category:"energy",timeSignature:"4/4",difficulty:"intermediate"},{id:5,name:"挑战模式",bpm:180,icon:"🚀",description:"高速节拍，挑战极限专注力",benefits:["极限专注","快速反应","高度集中"],category:"challenge",timeSignature:"4/4",difficulty:"advanced"},{id:6,name:"呼吸同步",bpm:45,icon:"🌬️",description:"超慢节拍，与深呼吸节奏同步",benefits:["呼吸调节","心率平稳","深度放松"],category:"breathing",timeSignature:"4/4",difficulty:"beginner"},{id:7,name:"学习辅助",bpm:100,icon:"📚",description:"适中节拍，提升学习效率和记忆力",benefits:["学习效率","记忆增强","思维清晰"],category:"study",timeSignature:"4/4",difficulty:"beginner"},{id:8,name:"创意激发",bpm:90,icon:"🎨",description:"灵感节拍，激发创造力和想象力",benefits:["创造力","灵感激发","思维发散"],category:"creativity",timeSignature:"3/4",difficulty:"intermediate"},{id:9,name:"运动协调",bpm:160,icon:"🏃",description:"运动节拍，提升身体协调性",benefits:["身体协调","运动节奏","肌肉记忆"],category:"movement",timeSignature:"2/4",difficulty:"intermediate"},{id:10,name:"复合节拍",bpm:110,icon:"🎼",description:"复杂拍号，训练高级节奏感",benefits:["复杂节奏","音乐感知","认知灵活"],category:"complex",timeSignature:"7/8",difficulty:"advanced"},{id:11,name:"睡前放松",bpm:40,icon:"🌙",description:"极慢节拍，帮助入睡和深度休息",benefits:["助眠效果","深度放松","心率下降"],category:"sleep",timeSignature:"4/4",difficulty:"beginner"},{id:12,name:"晨间唤醒",bpm:130,icon:"☀️",description:"活力节拍，唤醒身心状态",benefits:["精神唤醒","活力提升","状态调整"],category:"morning",timeSignature:"4/4",difficulty:"intermediate"}]);const U=i([{id:"basic",name:"基础训练",description:"固定节拍训练，建立稳定的内在节奏感",icon:"🎵",level:"beginner",duration:10,tempoRange:"60-120 BPM",difficulty:"简单",totalSessions:10,completedSessions:0,benefits:["节奏感建立","时间感培养","基础协调"],targetAudience:"初学者、节拍器新手",stages:[{name:"适应阶段",duration:3,tempo:80,description:"熟悉节拍器节奏"},{name:"稳定阶段",duration:4,tempo:100,description:"保持稳定跟随"},{name:"巩固阶段",duration:3,tempo:120,description:"巩固节奏感"}]},{id:"progressive",name:"渐进训练",description:"节拍逐渐加快，提升适应能力",icon:"📈",level:"intermediate",duration:15,tempoRange:"80-160 BPM",difficulty:"中等",totalSessions:8,completedSessions:0,benefits:["适应能力","反应速度","节奏控制"],targetAudience:"有基础的练习者",stages:[{name:"慢速起步",duration:5,tempo:80,description:"从慢速开始适应"},{name:"逐步加速",duration:5,tempo:120,description:"逐渐提升节拍速度"},{name:"快速挑战",duration:5,tempo:160,description:"挑战快速节拍"}]},{id:"variable",name:"变速训练",description:"节拍随机变化，增强专注力和适应性",icon:"🔄",level:"advanced",duration:20,tempoRange:"60-180 BPM",difficulty:"困难",totalSessions:12,completedSessions:0,benefits:["专注力","适应性","反应灵敏"],targetAudience:"高级练习者",stages:[{name:"小幅变化",duration:6,tempo:100,description:"小范围节拍变化"},{name:"中幅变化",duration:7,tempo:120,description:"中等范围变化"},{name:"大幅变化",duration:7,tempo:140,description:"大范围随机变化"}]},{id:"meditation",name:"冥想辅助",description:"缓慢稳定节拍，辅助冥想练习",icon:"🌊",level:"beginner",duration:25,tempoRange:"40-80 BPM",difficulty:"简单",totalSessions:15,completedSessions:0,benefits:["深度放松","冥想专注","心率调节"],targetAudience:"冥想练习者、放松需求者",stages:[{name:"入静准备",duration:5,tempo:60,description:"进入冥想状态"},{name:"深度冥想",duration:15,tempo:45,description:"深度冥想练习"},{name:"回归调整",duration:5,tempo:60,description:"逐渐回到正常状态"}]},{id:"complex",name:"复合节拍",description:"复杂拍号训练，提升音乐感知能力",icon:"🎼",level:"advanced",duration:18,tempoRange:"90-150 BPM",difficulty:"困难",totalSessions:10,completedSessions:0,benefits:["音乐感知","复杂节奏","认知灵活"],targetAudience:"音乐学习者、高级练习者",stages:[{name:"3/4拍练习",duration:6,tempo:100,description:"三拍子节奏训练"},{name:"5/4拍练习",duration:6,tempo:110,description:"五拍子节奏训练"},{name:"7/8拍练习",duration:6,tempo:120,description:"复杂拍号训练"}]},{id:"breathing",name:"呼吸同步",description:"与呼吸节奏同步，调节身心状态",icon:"🌬️",level:"beginner",duration:20,tempoRange:"30-60 BPM",difficulty:"简单",totalSessions:12,completedSessions:0,benefits:["呼吸调节","心率平稳","压力缓解"],targetAudience:"压力大的人群、呼吸练习者",stages:[{name:"自然呼吸",duration:5,tempo:45,description:"跟随自然呼吸节奏"},{name:"深度呼吸",duration:10,tempo:30,description:"深度呼吸练习"},{name:"节奏呼吸",duration:5,tempo:40,description:"建立规律呼吸"}]},{id:"focus",name:"专注力强化",description:"通过节拍训练提升专注力和注意力",icon:"🎯",level:"intermediate",duration:12,tempoRange:"80-120 BPM",difficulty:"中等",totalSessions:14,completedSessions:0,benefits:["专注力","注意力","心理稳定"],targetAudience:"学生、需要专注的工作者",stages:[{name:"注意力集中",duration:4,tempo:80,description:"集中注意力训练"},{name:"持续专注",duration:4,tempo:100,description:"维持专注状态"},{name:"深度专注",duration:4,tempo:120,description:"深度专注训练"}]},{id:"creativity",name:"创意激发",description:"特殊节拍模式激发创造力和灵感",icon:"🎨",level:"intermediate",duration:16,tempoRange:"70-110 BPM",difficulty:"中等",totalSessions:8,completedSessions:0,benefits:["创造力","灵感激发","思维发散"],targetAudience:"创作者、设计师、艺术家",stages:[{name:"思维放松",duration:5,tempo:70,description:"放松思维状态"},{name:"灵感涌现",duration:6,tempo:90,description:"激发创意灵感"},{name:"创意整合",duration:5,tempo:110,description:"整合创意思路"}]}]),ae=i([{value:"excellent",label:"非常好",icon:"😊"},{value:"good",label:"不错",icon:"🙂"},{value:"average",label:"一般",icon:"😐"},{value:"poor",label:"不太好",icon:"😕"}]),ne=se(()=>60/l.value),ie=se(()=>{const a=b.value*60;return T.value/a*100}),oe=a=>a<60?"极慢 - 深度冥想":a<80?"慢速 - 放松冥想":a<100?"中慢 - 专注训练":a<120?"中速 - 标准节拍":a<140?"中快 - 活力训练":a<160?"快速 - 挑战模式":"极快 - 极限挑战",le=()=>{g.value?C():j()},j=async()=>{g.value=!0,f.value=0,B.value=0,E.value=0,await de(),P.value?(re(),ce()):g.value=!1},C=()=>{g.value=!1,clearInterval(X),clearInterval(Y)},de=async()=>{try{P.value=!1,W.value=null,await Ie.initialize(),P.value=!0}catch(a){console.error("节拍器音频初始化失败:",a),W.value=a.message}},ue=async(a=!1)=>{if(!(o.value.visualOnly||!P.value))try{const t=a&&o.value.accentBeat?800:600,s=V.value/100,d=.1;await Ae.playMetronomeSound(t,s,d)}catch(t){console.error("播放节拍音频失败:",t)}},re=()=>{const a=60/l.value*1e3;X=setInterval(()=>{f.value++,E.value++,f.value>O.value&&(f.value=1,B.value++);const t=f.value===1;ue(t)},a)},ce=()=>{Y=setInterval(()=>{T.value++,T.value>=b.value*60&&ve()},1e3)},ve=()=>{C(),R.value++,w.value+=b.value,Q.value=l.value;const a=Math.floor(l.value/20)*20,t=`${a}-${a+19}`;_.value[t]=(_.value[t]||0)+1,ke(),o.value.autoStop&&(F.value=!0)},M=async()=>{g.value&&(C(),setTimeout(async()=>{await j()},100))},me=()=>{l.value<200&&(l.value+=5,M())},pe=()=>{l.value>40&&(l.value-=5,M())},G=()=>{const[a]=x.value.split("/");O.value=parseInt(a),g.value&&(f.value=0,B.value=0)},ge=()=>{},fe=()=>{},be=()=>{const a=Date.now();if(y.value.push(a),y.value=y.value.filter(t=>a-t<Es),y.value.length>=2){const t=[];for(let k=1;k<y.value.length;k++)t.push(y.value[k]-y.value[k-1]);const s=t.reduce((k,xe)=>k+xe)/t.length,d=Math.round(6e4/s);d>=40&&d<=200&&(l.value=d,M())}},ye=a=>{l.value=a.bpm,M()},_e=a=>{switch(z.value=a.id,a.id){case"meditation":l.value=60,o.value.goal="meditation";break;case"progressive":l.value=80,o.value.goal="focus";break;case"variable":l.value=120,o.value.goal="focus";break;case"complex":x.value="3/4",G();break;default:l.value=120,o.value.goal="rhythm"}},he=a=>({beginner:"初级",intermediate:"中级",advanced:"高级"})[a]||"中级",Se=()=>{const a=U.value.find(t=>t.id===z.value);return a?a.name:"基础训练"},te=a=>{const t=Math.floor(a/60),s=a%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},I=()=>{F.value=!1,L.value="",T.value=0},Me=()=>{I(),j()},ke=()=>{const a={settings:o.value,modes:U.value,analytics:{totalTrainingMinutes:w.value,totalSessions:R.value,averageTempo:q.value,tempoUsage:_.value,effectRatings:h.value}};H.saveMeditationModuleData("metronome",a)},Te=()=>{const a=H.getMeditationModuleData("metronome");a&&(a.settings&&(o.value={...o.value,...a.settings}),a.modes&&(U.value=a.modes),a.analytics&&(w.value=a.analytics.totalTrainingMinutes||0,R.value=a.analytics.totalSessions||0,q.value=a.analytics.averageTempo||120,_.value=a.analytics.tempoUsage||{},h.value={...h.value,...a.analytics.effectRatings})),Ce()},Ce=()=>{["40-59","60-79","80-99","100-119","120-139","140-159","160-179","180-199"].forEach(t=>{_.value[t]=Math.floor(Math.random()*30)+5}),ee.value=Math.max(...Object.values(_.value))};return Ve(()=>{Te(),G()}),Pe(()=>{C(),audioContext&&audioContext.close()}),(a,t)=>(u(),r("div",$e,[e("div",Ne,[e("div",Oe,[e("div",ze,[e("div",Ee,[e("h3",null,n(l.value)+" BPM",1),e("p",qe,n(oe(l.value)),1)]),e("div",Fe,[e("div",{class:v(["metronome-pendulum",{active:g.value}])},[e("div",{class:"pendulum-rod",style:A({animationDuration:ne.value+"s"})},t[16]||(t[16]=[e("div",{class:"pendulum-weight"},null,-1)]),4)],2),e("div",Le,[(u(!0),r(m,null,p(O.value,(s,d)=>(u(),r("div",{key:d,class:v(["beat-dot",{active:f.value===d+1,accent:d===0&&f.value===1}])},n(d+1),3))),128))]),e("div",je,[t[17]||(t[17]=e("span",{class:"measure-label"},"小节：",-1)),e("span",Ge,n(B.value),1)])]),e("div",Ke,[e("div",He,[e("span",Je,n(te(T.value)),1),e("span",Qe,"/ "+n(te(b.value*60)),1)]),e("div",We,[e("div",Xe,[e("div",{class:"progress-fill",style:A({width:ie.value+"%"})},null,4)])])])]),e("div",Ye,[e("div",Ze,[t[18]||(t[18]=e("label",null,"节拍速度 (BPM)：",-1)),e("div",et,[e("button",{class:"tempo-btn",onClick:pe,disabled:l.value<=40},"-",8,tt),c(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),min:"40",max:"200",class:"tempo-input",onInput:M},null,544),[[D,l.value]]),e("button",{class:"tempo-btn",onClick:me,disabled:l.value>=200},"+",8,st)]),c(e("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>l.value=s),min:"40",max:"200",class:"tempo-slider",onInput:M},null,544),[[D,l.value]])]),e("div",at,[t[20]||(t[20]=e("label",null,"拍号：",-1)),c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value=s),onChange:G,class:"time-signature-select"},t[19]||(t[19]=[e("option",{value:"4/4"},"4/4",-1),e("option",{value:"3/4"},"3/4",-1),e("option",{value:"2/4"},"2/4",-1),e("option",{value:"6/8"},"6/8",-1)]),544),[[$,x.value]])]),e("div",nt,[e("button",{class:"control-btn",onClick:le},n(g.value?"⏸️":"▶️"),1),e("button",{class:"control-btn",onClick:C},"⏹️"),e("button",{class:"control-btn",onClick:be},"👆 Tap")]),e("div",it,[e("div",ot,[t[21]||(t[21]=e("label",null,"音量：",-1)),c(e("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":t[3]||(t[3]=s=>V.value=s),class:"volume-slider",onInput:ge},null,544),[[D,V.value]]),e("span",lt,n(V.value)+"%",1)]),e("div",dt,[t[23]||(t[23]=e("label",null,"节拍音效：",-1)),c(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>J.value=s),onChange:fe,class:"sound-select"},t[22]||(t[22]=[we('<option value="click" data-v-da8e88ed>咔嗒声</option><option value="beep" data-v-da8e88ed>蜂鸣声</option><option value="wood" data-v-da8e88ed>木块声</option><option value="bell" data-v-da8e88ed>铃声</option><option value="drum" data-v-da8e88ed>鼓声</option>',5)]),544),[[$,J.value]])])])])])]),e("div",ut,[t[24]||(t[24]=e("h3",null,"预设节拍",-1)),e("div",rt,[(u(!0),r(m,null,p(a.tempoPresets,s=>(u(),r("div",{key:s.id,class:v(["preset-card",{active:l.value===s.bpm}]),onClick:d=>ye(s)},[e("div",vt,n(s.icon),1),e("h4",null,n(s.name),1),e("p",mt,n(s.bpm)+" BPM",1),e("p",pt,n(s.description),1),e("div",gt,[(u(!0),r(m,null,p(s.benefits,d=>(u(),r("span",{key:d,class:"benefit-tag"},n(d),1))),128))])],10,ct))),128))])]),e("div",ft,[t[28]||(t[28]=e("h3",null,"训练模式",-1)),e("div",bt,[(u(!0),r(m,null,p(U.value,s=>(u(),r("div",{key:s.id,class:v(["mode-card",{active:z.value===s.id}]),onClick:d=>_e(s)},[e("div",_t,[e("div",ht,n(s.icon),1),e("div",{class:v(["mode-level",s.level])},n(he(s.level)),3)]),e("h4",null,n(s.name),1),e("p",St,n(s.description),1),e("div",Mt,[e("div",kt,[t[25]||(t[25]=e("span",{class:"detail-label"},"时长：",-1)),e("span",Tt,n(s.duration)+"分钟",1)]),e("div",Ct,[t[26]||(t[26]=e("span",{class:"detail-label"},"节拍范围：",-1)),e("span",xt,n(s.tempoRange),1)]),e("div",Bt,[t[27]||(t[27]=e("span",{class:"detail-label"},"难度：",-1)),e("span",Vt,n(s.difficulty),1)])]),e("div",Pt,[e("div",wt,[e("div",{class:"progress-fill",style:A({width:s.completedSessions/s.totalSessions*100+"%"})},null,4)]),e("span",Rt,n(s.completedSessions)+"/"+n(s.totalSessions)+" 完成",1)]),e("button",Ut,n(s.completedSessions===0?"开始训练":"继续训练"),1)],10,yt))),128))])]),e("div",It,[t[42]||(t[42]=e("h3",null,"会话设置",-1)),e("div",At,[e("div",Dt,[t[32]||(t[32]=e("h4",null,"⏰ 时间设置",-1)),e("div",$t,[t[29]||(t[29]=e("label",null,"会话时长（分钟）：",-1)),c(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>b.value=s),min:"5",max:"60",class:"number-input"},null,512),[[D,b.value]])]),e("div",Nt,[e("label",Ot,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>o.value.autoStop=s)},null,512),[[N,o.value.autoStop]]),t[30]||(t[30]=S(" 时间到自动停止 ",-1))])]),e("div",zt,[e("label",Et,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=s=>o.value.countIn=s)},null,512),[[N,o.value.countIn]]),t[31]||(t[31]=S(" 开始前预备拍 ",-1))])])]),e("div",qt,[t[37]||(t[37]=e("h4",null,"🎵 音频设置",-1)),e("div",Ft,[e("label",Lt,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>o.value.accentBeat=s)},null,512),[[N,o.value.accentBeat]]),t[33]||(t[33]=S(" 强拍重音 ",-1))])]),e("div",jt,[e("label",Gt,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=s=>o.value.visualOnly=s)},null,512),[[N,o.value.visualOnly]]),t[34]||(t[34]=S(" 仅视觉模式 ",-1))])]),e("div",Kt,[t[36]||(t[36]=e("label",null,"节拍细分：",-1)),c(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.subdivision=s),class:"select-input"},t[35]||(t[35]=[e("option",{value:"quarter"},"四分音符",-1),e("option",{value:"eighth"},"八分音符",-1),e("option",{value:"sixteenth"},"十六分音符",-1)]),512),[[$,o.value.subdivision]])])]),e("div",Ht,[t[41]||(t[41]=e("h4",null,"🎯 训练目标",-1)),e("div",Jt,[e("label",Qt,[c(e("input",{type:"radio","onUpdate:modelValue":t[11]||(t[11]=s=>o.value.goal=s),value:"focus"},null,512),[[K,o.value.goal]]),t[38]||(t[38]=S(" 专注力训练 ",-1))])]),e("div",Wt,[e("label",Xt,[c(e("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=s=>o.value.goal=s),value:"rhythm"},null,512),[[K,o.value.goal]]),t[39]||(t[39]=S(" 节奏感培养 ",-1))])]),e("div",Yt,[e("label",Zt,[c(e("input",{type:"radio","onUpdate:modelValue":t[13]||(t[13]=s=>o.value.goal=s),value:"meditation"},null,512),[[K,o.value.goal]]),t[40]||(t[40]=S(" 冥想辅助 ",-1))])])])])]),e("div",es,[t[57]||(t[57]=e("h3",null,"使用分析",-1)),e("div",ts,[e("div",ss,[e("div",as,[t[44]||(t[44]=e("h4",null,"📊 训练统计",-1)),c(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>Z.value=s),class:"time-range-select"},t[43]||(t[43]=[e("option",{value:"week"},"最近一周",-1),e("option",{value:"month"},"最近一月",-1),e("option",{value:"quarter"},"最近三月",-1)]),512),[[$,Z.value]])]),e("div",ns,[e("div",is,[t[46]||(t[46]=e("div",{class:"stat-icon"},"⏱️",-1)),e("div",os,[e("span",ls,n(w.value),1),t[45]||(t[45]=e("span",{class:"stat-label"},"总训练时长（分钟）",-1))])]),e("div",ds,[t[48]||(t[48]=e("div",{class:"stat-icon"},"🎯",-1)),e("div",us,[e("span",rs,n(R.value),1),t[47]||(t[47]=e("span",{class:"stat-label"},"总会话次数",-1))])]),e("div",cs,[t[50]||(t[50]=e("div",{class:"stat-icon"},"🎵",-1)),e("div",vs,[e("span",ms,n(q.value),1),t[49]||(t[49]=e("span",{class:"stat-label"},"平均节拍 (BPM)",-1))])])])]),e("div",ps,[t[51]||(t[51]=e("h4",null,"📈 节拍分布",-1)),e("div",gs,[e("div",fs,[(u(!0),r(m,null,p(_.value,(s,d)=>(u(),r("div",{key:d,class:"chart-bar",style:A({height:s/ee.value*100+"%"}),title:`${d} BPM: ${s}次`},[e("span",ys,n(d),1)],12,bs))),128))])])]),e("div",_s,[t[56]||(t[56]=e("h4",null,"🎯 训练效果",-1)),e("div",hs,[e("div",Ss,[t[52]||(t[52]=e("span",{class:"rating-label"},"专注力：",-1)),e("div",Ms,[(u(),r(m,null,p(5,s=>e("span",{key:s,class:v(["star",{filled:s<=h.value.focus}])},"⭐",2)),64))])]),e("div",ks,[t[53]||(t[53]=e("span",{class:"rating-label"},"节奏感：",-1)),e("div",Ts,[(u(),r(m,null,p(5,s=>e("span",{key:s,class:v(["star",{filled:s<=h.value.rhythm}])},"⭐",2)),64))])]),e("div",Cs,[t[54]||(t[54]=e("span",{class:"rating-label"},"放松度：",-1)),e("div",xs,[(u(),r(m,null,p(5,s=>e("span",{key:s,class:v(["star",{filled:s<=h.value.relaxation}])},"⭐",2)),64))])]),e("div",Bs,[t[55]||(t[55]=e("span",{class:"rating-label"},"时间感：",-1)),e("div",Vs,[(u(),r(m,null,p(5,s=>e("span",{key:s,class:v(["star",{filled:s<=h.value.timing}])},"⭐",2)),64))])])])])])]),F.value?(u(),r("div",{key:0,class:"modal-overlay",onClick:I},[e("div",{class:"session-modal",onClick:t[15]||(t[15]=Re(()=>{},["stop"]))},[e("div",{class:"modal-header"},[t[58]||(t[58]=e("h3",null,"🎉 训练完成",-1)),e("button",{class:"close-btn",onClick:I},"×")]),e("div",Ps,[e("p",null,"您已完成 "+n(b.value)+" 分钟的节拍器训练！",1),e("div",ws,[e("div",Rs,[t[59]||(t[59]=e("span",{class:"summary-label"},"平均节拍：",-1)),e("span",Us,n(Q.value)+" BPM",1)]),e("div",Is,[t[60]||(t[60]=e("span",{class:"summary-label"},"总节拍数：",-1)),e("span",As,n(E.value),1)]),e("div",Ds,[t[61]||(t[61]=e("span",{class:"summary-label"},"训练模式：",-1)),e("span",$s,n(Se()),1)])]),e("div",Ns,[t[62]||(t[62]=e("h4",null,"请评价本次训练效果：",-1)),e("div",Os,[(u(!0),r(m,null,p(ae.value,s=>(u(),r("button",{key:s.value,class:v(["feedback-btn",{selected:L.value===s.value}]),onClick:d=>L.value=s.value},n(s.icon)+" "+n(s.label),11,zs))),128))])]),e("div",{class:"modal-actions"},[e("button",{class:"secondary-btn",onClick:I},"完成"),e("button",{class:"primary-btn",onClick:Me},"再来一次")])])])])):Ue("",!0)]))}},Hs=De(qs,[["__scopeId","data-v-da8e88ed"]]);export{Hs as default};
