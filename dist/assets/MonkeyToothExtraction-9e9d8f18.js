import{o as n,a as c,b as t,F as f,h as S,p as y,B as b,g as u,t as d,m as T,n as m,d as p,l as k}from"./index-e0b54b24.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";class _{constructor(){this.storageKeys={afterimage:"photo-memory-afterimage",colorPerception:"photo-memory-color-perception",threeDCard:"photo-memory-3d-card",thousandImages:"photo-memory-thousand-images",memoryTraining:"photo-memory-memory-training",instantCalculation:"photo-memory-instant-calculation",monkeyTooth:"photo-memory-monkey-tooth",overall:"photo-memory-overall"}}getDefaultStats(e){const a={totalSessions:0,totalTime:0,averageAccuracy:0,bestScore:0,lastTrainingDate:null,currentStreak:0,longestStreak:0};return{afterimage:{...a,averageGazeTime:0,totalGazeTime:0,preferredImageType:"circle",preferredColor:"red"},colorPerception:{...a,averageReactionTime:0,difficultyProgress:{easy:{completed:0,accuracy:0},medium:{completed:0,accuracy:0},hard:{completed:0,accuracy:0}},colorAccuracy:{}},threeDCard:{...a,maxLevel:1,cardsMemorized:0,averageMemoryTime:0,sequenceAccuracy:0},thousandImages:{...a,imagesRecognized:0,categoriesCompleted:[],averageRecognitionTime:0,difficultyLevels:{beginner:{completed:0,accuracy:0},intermediate:{completed:0,accuracy:0},advanced:{completed:0,accuracy:0}}},memoryTraining:{...a,modeStats:{numbers:{sessions:0,accuracy:0,bestScore:0},images:{sessions:0,accuracy:0,bestScore:0},words:{sessions:0,accuracy:0,bestScore:0},colors:{sessions:0,accuracy:0,bestScore:0},shapes:{sessions:0,accuracy:0,bestScore:0},faces:{sessions:0,accuracy:0,bestScore:0}},memoryCapacity:{numbers:5,images:6,words:4,colors:5,shapes:5,faces:3},preferredSettings:{mode:"numbers",difficulty:"medium",memoryTime:3,itemCount:6}},instantCalculation:{...a,calculationTypes:{addition:{completed:0,accuracy:0,avgTime:0},subtraction:{completed:0,accuracy:0,avgTime:0},multiplication:{completed:0,accuracy:0,avgTime:0},division:{completed:0,accuracy:0,avgTime:0}},speedLevels:{slow:{completed:0,accuracy:0},normal:{completed:0,accuracy:0},fast:{completed:0,accuracy:0},lightning:{completed:0,accuracy:0}},maxDigits:2},monkeyTooth:{...a,difficultyLevels:{easy:{completed:0,accuracy:0,avgTime:0},medium:{completed:0,accuracy:0,avgTime:0},hard:{completed:0,accuracy:0,avgTime:0},expert:{completed:0,accuracy:0,avgTime:0}},gameStats:{totalTeethExtracted:0,perfectGames:0,averageReactionTime:0,bestComboStreak:0},preferredSettings:{difficulty:"easy",rounds:5,soundEnabled:!0,animationSpeed:"normal",hintsEnabled:!0}}}[e]||a}getStats(e){try{const a=this.storageKeys[e];if(!a)return console.warn(`Unknown module: ${e}`),this.getDefaultStats(e);const r=localStorage.getItem(a);if(r){const i=JSON.parse(r);return{...this.getDefaultStats(e),...i}}return this.getDefaultStats(e)}catch(a){return console.error(`Error loading stats for ${e}:`,a),this.getDefaultStats(e)}}saveStats(e,a){try{const r=this.storageKeys[e];return r?(a.lastTrainingDate=new Date().toISOString(),localStorage.setItem(r,JSON.stringify(a)),this.updateOverallStats(),!0):(console.warn(`Unknown module: ${e}`),!1)}catch(r){return console.error(`Error saving stats for ${e}:`,r),!1}}updateStats(e,a){const r=this.getStats(e);if(r.totalSessions++,r.totalTime+=a.duration||0,a.score!==void 0&&a.maxScore!==void 0){const o=a.score/a.maxScore*100;r.averageAccuracy=(r.averageAccuracy*(r.totalSessions-1)+o)/r.totalSessions,a.score>r.bestScore&&(r.bestScore=a.score)}const i=new Date().toDateString(),l=r.lastTrainingDate?new Date(r.lastTrainingDate).toDateString():null;return l===i||(l===new Date(Date.now()-864e5).toDateString()?(r.currentStreak++,r.currentStreak>r.longestStreak&&(r.longestStreak=r.currentStreak)):r.currentStreak=1),this.updateModuleSpecificStats(e,r,a),this.saveStats(e,r),r}updateModuleSpecificStats(e,a,r){switch(e){case"afterimage":r.gazeTime&&(a.totalGazeTime+=r.gazeTime,a.averageGazeTime=a.totalGazeTime/a.totalSessions),r.imageType&&(a.preferredImageType=r.imageType),r.color&&(a.preferredColor=r.color);break;case"colorPerception":if(r.reactionTime&&(a.averageReactionTime=(a.averageReactionTime*(a.totalSessions-1)+r.reactionTime)/a.totalSessions),r.difficulty&&r.accuracy!==void 0){const i=a.difficultyProgress[r.difficulty];i&&(i.completed++,i.accuracy=(i.accuracy*(i.completed-1)+r.accuracy)/i.completed)}break;case"memoryTraining":if(r.mode&&r.accuracy!==void 0){const i=a.modeStats[r.mode];i&&(i.sessions++,i.accuracy=(i.accuracy*(i.sessions-1)+r.accuracy)/i.sessions,r.score>i.bestScore&&(i.bestScore=r.score))}r.settings&&(a.preferredSettings={...a.preferredSettings,...r.settings});break;case"instantCalculation":if(r.calculationType&&r.accuracy!==void 0){const i=a.calculationTypes[r.calculationType];i&&(i.completed++,i.accuracy=(i.accuracy*(i.completed-1)+r.accuracy)/i.completed,r.avgTime&&(i.avgTime=(i.avgTime*(i.completed-1)+r.avgTime)/i.completed))}break;case"monkeyTooth":if(r.difficulty&&r.accuracy!==void 0){const i=a.difficultyLevels[r.difficulty];i&&(i.completed++,i.accuracy=(i.accuracy*(i.completed-1)+r.accuracy)/i.completed,r.avgTime&&(i.avgTime=(i.avgTime*(i.completed-1)+r.avgTime)/i.completed))}r.teethExtracted&&(a.gameStats.totalTeethExtracted+=r.teethExtracted),r.isPerfectGame&&a.gameStats.perfectGames++,r.reactionTime&&(a.gameStats.averageReactionTime=(a.gameStats.averageReactionTime*(a.totalSessions-1)+r.reactionTime)/a.totalSessions),r.comboStreak>a.gameStats.bestComboStreak&&(a.gameStats.bestComboStreak=r.comboStreak),r.settings&&(a.preferredSettings={...a.preferredSettings,...r.settings});break}}getOverallStats(){try{const e=localStorage.getItem(this.storageKeys.overall);return e?JSON.parse(e):{totalSessions:0,totalTime:0,averageAccuracy:0,modulesCompleted:[],favoriteModule:null,weeklyProgress:[],monthlyProgress:[],achievements:[]}}catch(e){return console.error("Error loading overall stats:",e),{}}}updateOverallStats(){try{const e=["afterimage","colorPerception","threeDCard","thousandImages","memoryTraining","instantCalculation"],a=this.getOverallStats();let r=0,i=0,l=0,o=0,h={};e.forEach(v=>{const g=this.getStats(v);g.totalSessions>0&&(r+=g.totalSessions,i+=g.totalTime,l+=g.averageAccuracy,o++,h[v]=g.totalSessions)}),a.totalSessions=r,a.totalTime=i,a.averageAccuracy=o>0?l/o:0,Object.keys(h).length>0&&(a.favoriteModule=Object.keys(h).reduce((v,g)=>h[v]>h[g]?v:g)),localStorage.setItem(this.storageKeys.overall,JSON.stringify(a))}catch(e){console.error("Error updating overall stats:",e)}}getProgressAnalysis(e,a=30){const r=this.getStats(e),i={improvement:0,consistency:0,recommendations:[],strengths:[],weaknesses:[]};return r.totalSessions>0&&(r.currentStreak>0&&(i.improvement=Math.min(r.currentStreak*10,100)),i.consistency=Math.min(r.currentStreak/r.longestStreak*100,100)||0,r.averageAccuracy<60?i.recommendations.push("建议降低难度，专注于基础训练"):r.averageAccuracy>85&&i.recommendations.push("可以尝试更高难度的训练"),r.currentStreak<3&&i.recommendations.push("建议保持每日训练，提高训练一致性"),r.averageAccuracy>75&&i.strengths.push("准确率表现优秀"),r.currentStreak>7&&i.strengths.push("训练坚持性很好"),r.averageAccuracy<50&&i.weaknesses.push("准确率需要提高")),i}exportAllData(){const e={};return Object.keys(this.storageKeys).forEach(a=>{e[a]=this.getStats(a)}),e}importData(e){try{return Object.keys(e).forEach(a=>{this.storageKeys[a]&&this.saveStats(a,e[a])}),!0}catch(a){return console.error("Error importing data:",a),!1}}clearAllData(){try{return Object.values(this.storageKeys).forEach(e=>{localStorage.removeItem(e)}),!0}catch(e){return console.error("Error clearing data:",e),!1}}clearModuleData(e){try{const a=this.storageKeys[e];return a?(localStorage.removeItem(a),this.updateOverallStats(),!0):!1}catch(a){return console.error(`Error clearing data for ${e}:`,a),!1}}}const x=new _;const M={name:"MonkeyToothExtraction",data(){return{isPlaying:!1,isPaused:!1,gamePhase:"prepare",currentStage:1,currentSession:0,timeLeft:0,prepareCountdown:3,totalGameTime:0,selectedStage:null,currentTeeth:[],selectedTeeth:[],sessionResults:[],currentCombo:0,maxComboAchieved:0,comboMultiplier:1,gorillaExpression:"normal",rageMode:!1,rageModeTimer:null,errorCount:0,gameSettings:{soundEnabled:!0,vibrationEnabled:!0,animationEnabled:!0},showGameComplete:!1,isGameComplete:!1,trainingStages:[{id:1,name:"基础训练",description:"显示所有蛀牙位置3秒后隐藏",icon:"🌟",teethRows:6,teethCols:8,badTeethCount:12,observeTime:3,showAllBadTeeth:!0,showPercentage:100,unlockScore:0,locked:!1},{id:2,name:"进阶训练",description:"随机显示50%蛀牙位置",icon:"⚡",teethRows:6,teethCols:8,badTeethCount:12,observeTime:3,showAllBadTeeth:!1,showPercentage:50,unlockScore:500,locked:!0},{id:3,name:"挑战训练",description:"完全依赖玩家记忆",icon:"🔥",teethRows:6,teethCols:8,badTeethCount:12,observeTime:3,showAllBadTeeth:!1,showPercentage:0,unlockScore:1e3,locked:!0}],prepareMessages:["准备好了吗？我们要开始拔牙啦！","仔细观察哪些牙齿是坏的哦～","记住坏牙齿的位置，帮我拔掉它们！","加油！你一定可以的！"],currentPrepareMessage:0,timers:{game:null,prepare:null,phase:null},achievements:[]}},computed:{totalScore(){return this.sessionResults.reduce((s,e)=>s+e.score,0)},accuracy(){if(this.sessionResults.length===0)return 0;const s=this.sessionResults.reduce((a,r)=>a+r.correct,0),e=this.sessionResults.reduce((a,r)=>a+r.total,0);return Math.round(s/e*100)},observeProgress(){return this.selectedStage?(this.selectedStage.observeTime-this.timeLeft)/this.selectedStage.observeTime*100:0},gameRating(){const s=this.accuracy;return s>=95?"S+":s>=90?"S":s>=85?"A+":s>=80?"A":s>=75?"B+":s>=70?"B":s>=60?"C":"D"},sessionResult(){return this.sessionResults[this.sessionResults.length-1]||{}},currentStageConfig(){return this.trainingStages.find(s=>s.id===this.currentStage)||this.trainingStages[0]},canUnlockNextStage(){const s=this.trainingStages.find(e=>e.id===this.currentStage+1);return s&&this.totalScore>=s.unlockScore}},mounted(){this.loadGameData(),this.selectFirstUnlockedStage()},methods:{loadGameData(){try{const s=localStorage.getItem("monkeyToothGame");if(s){const e=JSON.parse(s);e.totalScore&&(this.sessionResults=e.sessionResults||[])}}catch(s){console.log("加载游戏数据失败:",s)}},selectFirstUnlockedStage(){const s=this.trainingStages.find(e=>this.isStageUnlocked(e));s&&this.selectStage(s)},isStageUnlocked(s){return s.locked?this.totalScore>=s.unlockScore:!0},selectStage(s){s.locked&&!this.isStageUnlocked(s)||(this.selectedStage=s,this.currentStage=s.id)},startGame(){this.selectedStage&&(this.isPlaying=!0,this.currentSession=0,this.sessionResults=[],this.totalGameTime=0,this.achievements=[],this.currentCombo=0,this.maxComboAchieved=0,this.errorCount=0,this.rageMode=!1,this.gorillaExpression="normal",this.startTotalTimer(),this.nextSession())},nextSession(){this.currentSession++,this.selectedTeeth=[],this.generateTeeth(),this.startPreparePhase()},generateTeeth(){const s=this.selectedStage,e=s.teethRows*s.teethCols,a=[];for(let i=0;i<e;i++)a.push({id:i,row:Math.floor(i/s.teethCols),col:i%s.teethCols,isBad:!1,isSelected:!1,isVisible:!0,decayType:"none"});this.getRandomIndices(e,s.badTeethCount).forEach(i=>{a[i].isBad=!0,a[i].decayType=Math.random()>.5?"black":"broken"}),this.currentTeeth=a},getRandomIndices(s,e){const a=[];for(;a.length<e;){const r=Math.floor(Math.random()*s);a.includes(r)||a.push(r)}return a},startPreparePhase(){this.gamePhase="prepare",this.prepareCountdown=3,this.currentPrepareMessage=Math.floor(Math.random()*this.prepareMessages.length),this.gorillaExpression="normal",this.timers.prepare=setInterval(()=>{this.prepareCountdown--,this.prepareCountdown<=0&&(clearInterval(this.timers.prepare),this.startObservePhase())},1e3)},startObservePhase(){this.gamePhase="observe",this.timeLeft=this.selectedStage.observeTime,this.gorillaExpression="pain",this.showBadTeethByStage(),this.timers.phase=setInterval(()=>{this.timeLeft--,this.timeLeft<=0&&(clearInterval(this.timers.phase),this.startMemoryPhase())},1e3)},showBadTeethByStage(){const s=this.selectedStage;if(s.showAllBadTeeth)this.currentTeeth.forEach(e=>{e.isVisible=e.isBad});else{const e=this.currentTeeth.filter(i=>i.isBad),a=Math.floor(e.length*(s.showPercentage/100)),r=[...e].sort(()=>Math.random()-.5);this.currentTeeth.forEach(i=>{if(i.isBad){const l=r.indexOf(i);i.isVisible=l<a}else i.isVisible=!1})}},startMemoryPhase(){this.gamePhase="memory",this.gorillaExpression="normal",this.currentTeeth.forEach(s=>{s.isVisible=!1})},selectTooth(s){if(this.gamePhase!=="memory")return;const e=this.currentTeeth[s];if(e.isSelected){e.isSelected=!1;const a=this.selectedTeeth.indexOf(s);a>-1&&this.selectedTeeth.splice(a,1);return}e.isSelected=!0,this.selectedTeeth.push(s),this.checkToothSelection(e,s)},checkToothSelection(s,e){s.isBad?this.handleCorrectSelection(s,e):this.handleWrongSelection(s,e)},handleCorrectSelection(s,e){this.currentCombo++,this.maxComboAchieved=Math.max(this.maxComboAchieved,this.currentCombo);let a=10;if(this.currentCombo>=2){const r=Math.min(this.currentCombo,5);a*=Math.min(2,1+(r-1)*.2)}this.playCorrectFeedback(a),this.gorillaExpression="happy",setTimeout(()=>{this.gorillaExpression==="happy"&&(this.gorillaExpression="normal")},1e3),this.checkSessionComplete()},handleWrongSelection(s,e){this.currentCombo=0,this.errorCount++,s.isSelected=!1;const a=this.selectedTeeth.indexOf(e);a>-1&&this.selectedTeeth.splice(a,1),this.playWrongFeedback(),this.gorillaExpression="angry",setTimeout(()=>{this.gorillaExpression==="angry"&&(this.gorillaExpression="normal")},1500),this.errorCount>=3&&this.activateRageMode()},clearSelection(){this.selectedTeeth=[],this.currentTeeth.forEach(s=>{s.isSelected=!1})},playCorrectFeedback(s){this.gameSettings.soundEnabled&&this.playSound("tooth-crack"),this.gameSettings.animationEnabled&&this.showCoinAnimation(s)},playWrongFeedback(){this.gameSettings.soundEnabled&&this.playSound("gorilla-roar"),this.gameSettings.vibrationEnabled&&this.triggerVibration()},activateRageMode(){this.rageMode=!0,this.errorCount=0,this.rageModeTimer=setTimeout(()=>{this.rageMode=!1},1e4)},checkSessionComplete(){const s=this.selectedTeeth.filter(a=>this.currentTeeth[a].isBad).length,e=this.currentTeeth.filter(a=>a.isBad).length;s===e&&this.completeSession()},completeSession(){this.rageModeTimer&&(clearTimeout(this.rageModeTimer),this.rageMode=!1);const s=this.calculateSessionResult();this.sessionResults.push(s),this.sessionResults.length>=5&&(this.isGameComplete=!0),this.gamePhase="result",this.gorillaExpression=s.isSuccess?"happy":"normal"},calculateSessionResult(){const s=this.selectedTeeth.filter(l=>this.currentTeeth[l].isBad).length,e=this.currentTeeth.filter(l=>l.isBad).length,a=s*10;let r=0;if(this.maxComboAchieved>=2){const l=Math.min(this.maxComboAchieved,5);r=Math.floor(a*(l-1)*.2)}const i=a+r;return{correct:s,total:e,baseScore:a,comboBonus:r,score:i,maxCombo:this.maxComboAchieved,isSuccess:s===e,message:this.getResultMessage(s,e)}},getResultMessage(s,e){const a=s/e*100;return a===100?"完美！所有蛀牙都被成功拔除了！":a>=80?"很好！大部分蛀牙都被拔除了！":a>=60?"不错！还有一些蛀牙需要处理。":"需要更仔细地观察和记忆哦！"},playSound(s){console.log(`Playing sound: ${s}`)},showCoinAnimation(s){console.log(`Showing coin animation: +${s}`)},triggerVibration(){navigator.vibrate&&navigator.vibrate(500)},getCurrentStageName(){const s=this.trainingStages.find(e=>e.id===this.currentStage);return s?s.name:"未知阶段"},getStageProgress(){const s=this.trainingStages.find(a=>a.id===this.currentStage+1);if(!s)return"已完成";const e=Math.min(100,this.totalScore/s.unlockScore*100);return`${Math.floor(e)}%`},canContinueToNextStage(){return this.canUnlockNextStage},continueTraining(){this.canUnlockNextStage&&(this.currentStage++,this.selectedStage=this.trainingStages.find(s=>s.id===this.currentStage),this.showGameComplete=!1,this.startGame())},getCompletionMessage(){if(this.canUnlockNextStage)return"恭喜！你已经解锁了下一个训练阶段！";{const s=this.trainingStages.find(e=>e.id===this.currentStage+1);return s?`还需要 ${s.unlockScore-this.totalScore} 分才能解锁下一阶段！`:"你已经完成了所有训练阶段！"}},confirmAnswer(){this.completeSession()},resetSelection(){this.clearSelection(),this.currentCombo=0,this.errorCount=0,this.gorillaExpression="normal"},nextRound(){this.nextSession()},finishGame(){this.showGameComplete=!0,this.isGameComplete=!0,this.saveGameStats()},playAgain(){this.showGameComplete=!1,this.isGameComplete=!1,this.startGame()},closeGameComplete(){this.showGameComplete=!1,this.isGameComplete=!1,this.isPlaying=!1},restartTraining(){this.isGameComplete=!1,this.isPlaying=!1,this.gamePhase="prepare",this.currentSession=0,this.sessionResults=[],this.totalGameTime=0,this.currentCombo=0,this.maxComboAchieved=0,this.errorCount=0,this.gorillaExpression="normal",this.rageMode=!1},returnToHome(){this.isGameComplete=!1,this.isPlaying=!1,this.$router.push("/memory")},saveGameStats(){const s={stage:this.selectedStage,sessions:this.sessionResults.length,totalScore:this.totalScore,accuracy:this.accuracy,maxCombo:this.maxComboAchieved,totalTime:this.totalGameTime,achievements:this.achievements.map(e=>e.id),completedAt:new Date().toISOString(),sessionResults:this.sessionResults};try{localStorage.setItem("monkeyToothGame",JSON.stringify(s)),x.saveStats("monkeyTooth",s)}catch(e){console.log("保存游戏数据失败:",e)}},pauseGame(){this.isPaused=!0,this.clearAllTimers()},resumeGame(){this.isPaused=!1,this.gamePhase==="observe"?this.startObservePhase():this.gamePhase==="memory"&&this.startMemoryPhase()},quitGame(){confirm("确定要退出训练吗？进度将不会保存。")&&(this.clearAllTimers(),this.isPlaying=!1,this.gamePhase="prepare",this.gorillaExpression="normal",this.rageMode=!1)},startTotalTimer(){this.timers.game=setInterval(()=>{this.totalGameTime++},1e3)},clearAllTimers(){Object.values(this.timers).forEach(s=>{s&&clearInterval(s)})},formatTime(s){const e=Math.floor(s/60),a=s%60;return`${e}:${a.toString().padStart(2,"0")}`}},beforeUnmount(){this.clearAllTimers()}},P={class:"monkey-tooth-container"},E={key:0,class:"game-selection"},w={class:"stage-selection"},G={class:"stage-grid"},R=["onClick"],A={class:"stage-icon"},B={class:"stage-stats"},I={key:0,class:"unlock-requirement"},O={class:"game-settings"},U={class:"settings-grid"},N={class:"setting-item"},L={class:"setting-item"},V={class:"setting-item"},z=["disabled"],K={key:1,class:"game-interface"},F={class:"game-status"},j={class:"status-left"},J={class:"stage-info"},q={class:"stage-text"},W={class:"progress-bar"},H={class:"status-center"},Q={class:"timer-text"},X={class:"status-right"},Y={class:"score-info"},Z={class:"score-text"},D={key:0,class:"combo-text"},$={class:"game-stage"},ee={key:0,class:"prepare-stage"},te={class:"gorilla-character"},se={class:"speech-bubble"},ae={class:"prepare-countdown"},ie={key:1,class:"observe-stage"},re={class:"gorilla-character-main"},oe={class:"gorilla-head"},le={class:"mouth-area"},ne={class:"mouth-opening"},ce={class:"teeth-matrix"},de={class:"tooth-visual"},ue={key:0,class:"bad-tooth-visual"},he={key:1,class:"healthy-tooth-visual"},me={class:"observe-info"},ge={class:"progress-bar"},ve={key:2,class:"memory-stage"},pe={class:"gorilla-character-main"},fe={class:"gorilla-head"},Se={class:"mouth-area"},ye={class:"mouth-opening"},be={class:"teeth-matrix clickable-matrix"},Te=["onClick"],ke={class:"tooth-visual"},Ce={key:0,class:"revealed-bad-tooth"},_e={key:1,class:"normal-tooth-visual"},xe={key:2,class:"selection-indicator"},Me={class:"memory-controls"},Pe=["disabled"],Ee={key:3,class:"result-stage"},we={class:"result-header"},Ge={class:"result-stats"},Re={class:"stat-item"},Ae={class:"stat-value correct"},Be={class:"stat-item"},Ie={class:"stat-value"},Oe={key:0,class:"stat-item"},Ue={class:"stat-value bonus"},Ne={class:"stat-item"},Le={class:"stat-value total"},Ve={class:"result-actions"},ze={class:"game-controls"},Ke={class:"modal-header"},Fe={class:"final-score"},je={class:"final-stats"},Je={class:"stat-card"},qe={class:"stat-number"},We={class:"stat-card"},He={class:"stat-number"},Qe={class:"stat-card"},Xe={class:"stat-number"},Ye={class:"stat-card"},Ze={class:"stat-number"},De={key:0,class:"achievement-section"},$e={class:"achievements"},et={class:"achievement-icon"},tt={class:"achievement-name"},st={class:"modal-actions"},at={key:3,class:"game-instructions"};function it(s,e,a,r,i,l){return n(),c("div",P,[i.isPlaying?u("",!0):(n(),c("div",E,[e[22]||(e[22]=t("div",{class:"game-header"},[t("h1",null,"🐵 给大猩猩拔牙 🦷"),t("p",{class:"game-description"},"大猩猩因过量食用零食导致蛀牙，帮助它拔除病变牙齿，训练你的记忆力！")],-1)),t("div",w,[e[17]||(e[17]=t("h2",null,"选择训练阶段",-1)),t("div",G,[(n(!0),c(f,null,S(i.trainingStages,o=>{var h;return n(),c("div",{key:o.id,class:m(["stage-card",{active:((h=i.selectedStage)==null?void 0:h.id)===o.id,locked:o.locked&&!l.isStageUnlocked(o)}]),onClick:v=>l.selectStage(o)},[t("div",A,d(o.icon),1),t("h3",null,d(o.name),1),t("p",null,d(o.description),1),t("div",B,[e[16]||(e[16]=t("span",null,"牙齿矩阵: 6×8 (48颗)",-1)),t("span",null,"病变牙齿: "+d(o.badTeethCount)+"颗",1),t("span",null,d(o.memoryHint),1)]),o.locked&&!l.isStageUnlocked(o)?(n(),c("div",I,[t("span",null,"🔒 需要"+d(o.unlockScore)+"分解锁",1)])):u("",!0)],10,R)}),128))])]),t("div",O,[e[21]||(e[21]=t("h2",null,"游戏设置",-1)),t("div",U,[t("div",N,[e[18]||(e[18]=t("label",null,"音效:",-1)),y(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>i.gameSettings.soundEnabled=o)},null,512),[[b,i.gameSettings.soundEnabled]])]),t("div",L,[e[19]||(e[19]=t("label",null,"震动反馈:",-1)),y(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=o=>i.gameSettings.vibrationEnabled=o)},null,512),[[b,i.gameSettings.vibrationEnabled]])]),t("div",V,[e[20]||(e[20]=t("label",null,"动画效果:",-1)),y(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=o=>i.gameSettings.animationEnabled=o)},null,512),[[b,i.gameSettings.animationEnabled]])])])]),t("button",{class:"start-game-btn",disabled:!i.selectedStage||i.selectedStage.locked&&!l.isStageUnlocked(i.selectedStage),onClick:e[3]||(e[3]=(...o)=>l.startGame&&l.startGame(...o))}," 🎮 开始训练 ",8,z)])),i.isPlaying?(n(),c("div",K,[t("div",F,[t("div",j,[t("div",J,[t("span",q,d(i.selectedStage.name),1),t("div",W,[t("div",{class:"progress-fill",style:T({width:s.stageProgress+"%"})},null,4)])])]),t("div",H,[t("div",{class:m(["timer",{warning:i.timeLeft<=3}])},[e[23]||(e[23]=t("span",{class:"timer-icon"},"⏰",-1)),t("span",Q,d(i.timeLeft)+"秒",1)],2)]),t("div",X,[t("div",Y,[t("span",Z,"得分: "+d(l.totalScore),1),s.comboCount>1?(n(),c("span",D,"连击: "+d(s.comboCount)+"x",1)):u("",!0)])])]),t("div",$,[i.gamePhase==="prepare"?(n(),c("div",ee,[t("div",te,[t("div",{class:m(["gorilla-face",i.gorillaExpression])},[e[24]||(e[24]=p('<div class="gorilla-eyes" data-v-2a12215b><div class="eye left-eye" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div><div class="eye right-eye" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div></div><div class="gorilla-nose" data-v-2a12215b>👃</div>',2)),t("div",{class:m(["gorilla-mouth",i.gorillaExpression])},null,2)],2),t("div",se,[t("p",null,d(i.prepareMessages[i.currentPrepareMessage]),1)])]),t("div",ae,d(i.prepareCountdown),1)])):u("",!0),i.gamePhase==="observe"?(n(),c("div",ie,[e[29]||(e[29]=t("div",{class:"stage-title"},[t("h2",null,"👀 仔细观察大猩猩的牙齿"),t("p",null,"记住哪些牙齿是病变的（发黑、缺损的）")],-1)),t("div",re,[t("div",oe,[e[27]||(e[27]=t("div",{class:"ear left-ear"},null,-1)),e[28]||(e[28]=t("div",{class:"ear right-ear"},null,-1)),t("div",{class:m(["gorilla-face",i.gorillaExpression])},[e[26]||(e[26]=p('<div class="eye-area" data-v-2a12215b><div class="eye left-eye" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div><div class="eye right-eye" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div></div><div class="nose-area" data-v-2a12215b><div class="nostril left-nostril" data-v-2a12215b></div><div class="nostril right-nostril" data-v-2a12215b></div></div>',2)),t("div",le,[t("div",ne,[t("div",ce,[(n(!0),c(f,null,S(s.teethMatrix,(o,h)=>(n(),c("div",{key:h,class:m(["tooth-slot",{"bad-tooth":o.isBad&&s.shouldShowBadTeeth,"healthy-tooth":!o.isBad}])},[t("div",de,[o.isBad&&s.shouldShowBadTeeth?(n(),c("div",ue,e[25]||(e[25]=[t("div",{class:"tooth-decay"},null,-1),t("div",{class:"tooth-damage"},null,-1)]))):(n(),c("div",he))])],2))),128))])])])],2)])]),t("div",me,[t("div",ge,[t("div",{class:"progress-fill",style:T({width:l.observeProgress+"%"})},null,4)]),t("p",null,"观察时间剩余: "+d(Math.ceil(i.timeLeft))+"秒",1)])])):u("",!0),i.gamePhase==="memory"?(n(),c("div",ve,[e[34]||(e[34]=t("div",{class:"stage-title"},[t("h2",null,"🧠 回忆病变牙齿的位置"),t("p",null,"点击你记得的病变牙齿位置，帮助大猩猩拔除它们")],-1)),t("div",pe,[t("div",fe,[e[32]||(e[32]=t("div",{class:"ear left-ear"},null,-1)),e[33]||(e[33]=t("div",{class:"ear right-ear"},null,-1)),t("div",{class:m(["gorilla-face",i.gorillaExpression])},[e[31]||(e[31]=p('<div class="eye-area" data-v-2a12215b><div class="eye left-eye" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div><div class="eye right-eye" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div></div><div class="nose-area" data-v-2a12215b><div class="nostril left-nostril" data-v-2a12215b></div><div class="nostril right-nostril" data-v-2a12215b></div></div>',2)),t("div",Se,[t("div",ye,[t("div",be,[(n(!0),c(f,null,S(s.teethMatrix,(o,h)=>(n(),c("div",{key:h,class:m(["tooth-slot clickable",{selected:o.isSelected,correct:o.isRevealed&&o.isBad,incorrect:o.isRevealed&&!o.isBad&&o.isSelected,missed:o.isRevealed&&o.isBad&&!o.isSelected}]),onClick:v=>l.selectTooth(h)},[t("div",ke,[o.isBad&&o.isRevealed?(n(),c("div",Ce,e[30]||(e[30]=[t("div",{class:"tooth-decay"},null,-1),t("div",{class:"tooth-damage"},null,-1),t("div",{class:"pain-indicator"},"⚡",-1)]))):(n(),c("div",_e)),o.isSelected?(n(),c("div",xe)):u("",!0)])],10,Te))),128))])])])],2)])]),t("div",Me,[t("button",{class:"control-btn primary",onClick:e[4]||(e[4]=(...o)=>s.submitAnswer&&s.submitAnswer(...o)),disabled:s.selectedTeethCount===0}," ✅ 确认拔牙 ("+d(s.selectedTeethCount)+"/"+d(s.badTeethCount)+") ",9,Pe),t("button",{class:"control-btn secondary",onClick:e[5]||(e[5]=(...o)=>l.clearSelection&&l.clearSelection(...o))}," 🔄 重新选择 ")])])):u("",!0),i.gamePhase==="result"?(n(),c("div",Ee,[t("div",we,[t("div",{class:m(["gorilla-reaction",i.gorillaExpression])},[t("div",{class:m(["gorilla-face-result",i.gorillaExpression])},[e[35]||(e[35]=p('<div class="eye left-eye" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div><div class="eye right-eye" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div>',2)),t("div",{class:m(["mouth-result",i.gorillaExpression])},null,2)],2)],2),t("h2",null,d(s.roundResult.isSuccess?"🎉 太棒了！大猩猩感觉好多了！":"😅 再接再厉！还有蛀牙没拔完！"),1),t("p",null,d(s.roundResult.message),1)]),t("div",Ge,[t("div",Re,[e[36]||(e[36]=t("span",{class:"stat-label"},"正确拔除:",-1)),t("span",Ae,d(s.roundResult.correct)+"/"+d(s.roundResult.total),1)]),t("div",Be,[e[37]||(e[37]=t("span",{class:"stat-label"},"基础得分:",-1)),t("span",Ie,"+"+d(s.roundResult.baseScore),1)]),s.roundResult.comboBonus>0?(n(),c("div",Oe,[e[38]||(e[38]=t("span",{class:"stat-label"},"连击奖励:",-1)),t("span",Ue,"+"+d(s.roundResult.comboBonus)+" ("+d(s.roundResult.maxCombo)+"连击)",1)])):u("",!0),t("div",Ne,[e[39]||(e[39]=t("span",{class:"stat-label"},"总得分:",-1)),t("span",Le,"+"+d(s.roundResult.score),1)])]),t("div",Ve,[i.isGameComplete?(n(),c("button",{key:1,class:"finish-btn",onClick:e[7]||(e[7]=(...o)=>l.finishGame&&l.finishGame(...o))}," 🏆 完成训练 ")):(n(),c("button",{key:0,class:"next-btn",onClick:e[6]||(e[6]=(...o)=>l.nextRound&&l.nextRound(...o))}," ➡️ 继续训练 "))])])):u("",!0)]),t("div",ze,[!i.isPaused&&i.gamePhase!=="result"?(n(),c("button",{key:0,class:"control-btn",onClick:e[8]||(e[8]=(...o)=>l.pauseGame&&l.pauseGame(...o))}," ⏸️ 暂停 ")):u("",!0),i.isPaused?(n(),c("button",{key:1,class:"control-btn",onClick:e[9]||(e[9]=(...o)=>l.resumeGame&&l.resumeGame(...o))}," ▶️ 继续 ")):u("",!0),t("button",{class:"control-btn danger",onClick:e[10]||(e[10]=(...o)=>l.quitGame&&l.quitGame(...o))}," 🚪 退出游戏 ")])])):u("",!0),i.showGameComplete?(n(),c("div",{key:2,class:"modal-overlay",onClick:e[15]||(e[15]=(...o)=>l.closeGameComplete&&l.closeGameComplete(...o))},[t("div",{class:"game-complete-modal",onClick:e[14]||(e[14]=k(()=>{},["stop"]))},[t("div",Ke,[e[40]||(e[40]=p('<div class="gorilla-celebration" data-v-2a12215b><div class="gorilla-face-celebration" data-v-2a12215b><div class="eye left-eye happy" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div><div class="eye right-eye happy" data-v-2a12215b><div class="eyeball" data-v-2a12215b></div><div class="pupil" data-v-2a12215b></div></div><div class="mouth-celebration" data-v-2a12215b></div></div></div><h2 data-v-2a12215b>🎊 训练完成！大猩猩的牙齿健康多了！</h2>',2)),t("div",Fe,"总分: "+d(l.totalScore),1)]),t("div",je,[t("div",Je,[t("div",qe,d(l.getCurrentStageName()),1),e[41]||(e[41]=t("div",{class:"stat-label"},"当前阶段",-1))]),t("div",We,[t("div",He,d(i.maxComboAchieved),1),e[42]||(e[42]=t("div",{class:"stat-label"},"最高连击",-1))]),t("div",Qe,[t("div",Xe,d(l.accuracy)+"%",1),e[43]||(e[43]=t("div",{class:"stat-label"},"总准确率",-1))]),t("div",Ye,[t("div",Ze,d(l.getStageProgress()),1),e[44]||(e[44]=t("div",{class:"stat-label"},"阶段进度",-1))])]),i.achievements.length>0?(n(),c("div",De,[e[45]||(e[45]=t("h3",null,"🏅 获得成就",-1)),t("div",$e,[(n(!0),c(f,null,S(i.achievements,o=>(n(),c("div",{key:o.id,class:"achievement-item"},[t("span",et,d(o.icon),1),t("span",tt,d(o.name),1)]))),128))])])):u("",!0),t("div",st,[l.canContinueToNextStage()?(n(),c("button",{key:0,class:"primary-btn",onClick:e[11]||(e[11]=(...o)=>l.continueTraining&&l.continueTraining(...o))}," 🚀 进入下一阶段 ")):u("",!0),t("button",{class:"primary-btn",onClick:e[12]||(e[12]=(...o)=>l.playAgain&&l.playAgain(...o))},"🔄 重新训练"),t("button",{class:"secondary-btn",onClick:e[13]||(e[13]=(...o)=>l.closeGameComplete&&l.closeGameComplete(...o))},"🏠 返回主页")])])])):u("",!0),i.isPlaying?u("",!0):(n(),c("div",at,e[46]||(e[46]=[p('<h2 data-v-2a12215b>🎯 游戏说明</h2><div class="instructions-content" data-v-2a12215b><div class="instruction-item" data-v-2a12215b><div class="instruction-icon" data-v-2a12215b>👀</div><div class="instruction-text" data-v-2a12215b><h4 data-v-2a12215b>观察阶段</h4><p data-v-2a12215b>仔细观察猩猩嘴里的牙齿，记住哪些是坏牙齿（红色）</p></div></div><div class="instruction-item" data-v-2a12215b><div class="instruction-icon" data-v-2a12215b>🧠</div><div class="instruction-text" data-v-2a12215b><h4 data-v-2a12215b>记忆阶段</h4><p data-v-2a12215b>根据记忆点击坏牙齿的位置，帮助猩猩拔掉它们</p></div></div><div class="instruction-item" data-v-2a12215b><div class="instruction-icon" data-v-2a12215b>🏆</div><div class="instruction-text" data-v-2a12215b><h4 data-v-2a12215b>得分规则</h4><p data-v-2a12215b>正确识别坏牙齿得分，错误选择会扣分，速度越快奖励越高</p></div></div></div>',2)])))])}const lt=C(M,[["render",it],["__scopeId","data-v-2a12215b"]]);export{lt as default};
