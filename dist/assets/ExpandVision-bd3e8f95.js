import{u as Yt,a as Zt,b as $t}from"./useBasicTraining-91a9c65c.js";import{i as v,D as te,c as mt,k as ee,A as se,r as ht,o as r,a as c,b as t,F as m,h,g,t as l,m as k,f as st,p as ne,v as ae,E as oe,y as pt,n as p,l as ie}from"./index-e0b54b24.js";import{S as le,a as re}from"./configService-cad34a82.js";import{u as ce}from"./useTrainingSettings-353bc7b0.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";const ve={name:"ExpandVision",components:{SettingsModal:le,SettingsButton:re},emits:["back"],setup(_t,{emit:n}){const _=Yt("expand_vision"),e=$t(_),nt=Zt(_),{settings:at,settingsSections:Z,showSettingsModal:$,isLoading:a,error:M,saveSettings:bn,resetSettings:yn,openSettings:Mt,closeSettings:bt}=ce("expandVision"),b=v(null),T=v(1),F=v(5),E=v(0),O=v(!1),ot=v({}),A=v([{id:"dots",name:"ç‚¹é˜µè®­ç»ƒ",icon:"ğŸ”´",description:"é€šè¿‡ç‚¹å‡»å‘¨è¾¹å‡ºç°çš„å½©è‰²åœ†ç‚¹ï¼Œæ‰©å¤§è§†è§‰æ„ŸçŸ¥èŒƒå›´",level:"beginner",levelText:"åˆçº§",duration:5,difficulty:2,ageRange:"6-12å²",progress:0,features:["åŸºç¡€è§†é‡æ‰©å±•","é¢œè‰²è¯†åˆ«","ååº”è®­ç»ƒ","æ³¨æ„åŠ›é›†ä¸­"],benefits:["æé«˜å‘¨è¾¹è§†è§‰","å¢å¼ºååº”é€Ÿåº¦","æ”¹å–„æ³¨æ„åŠ›åˆ†é…","æ‰©å¤§è§†è§‰èŒƒå›´"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"numbers",name:"æ•°å­—è¿½è¸ª",icon:"ğŸ”¢",description:"åœ¨è§†é‡èŒƒå›´å†…å¿«é€Ÿæ‰¾åˆ°æŒ‡å®šçš„æ•°å­—ï¼Œæé«˜æ•°å­—è¯†åˆ«èƒ½åŠ›",level:"intermediate",levelText:"ä¸­çº§",duration:8,difficulty:3,ageRange:"8-16å²",progress:0,features:["æ•°å­—è¯†åˆ«","è§†è§‰æœç´¢","ç›®æ ‡å®šä½","å¿«é€Ÿæ‰«æ"],benefits:["æé«˜æ•°å­—æ•æ„Ÿåº¦","å¢å¼ºæœç´¢æ•ˆç‡","æ”¹å–„ç›®æ ‡è¯†åˆ«","è®­ç»ƒè§†è§‰æ‰«æ"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"shapes",name:"å½¢çŠ¶è¯†åˆ«",icon:"ğŸ”º",description:"è¯†åˆ«ä¸åŒå½¢çŠ¶å’Œé¢œè‰²çš„ç›®æ ‡ï¼Œè®­ç»ƒå½¢çŠ¶æ„ŸçŸ¥å’Œé¢œè‰²è¾¨è¯†",level:"intermediate",levelText:"ä¸­çº§",duration:10,difficulty:3,ageRange:"10-18å²",progress:0,features:["å½¢çŠ¶è¯†åˆ«","é¢œè‰²è¾¨è¯†","è§†è§‰åˆ†ç±»","ç‰¹å¾æå–"],benefits:["æé«˜å½¢çŠ¶æ„ŸçŸ¥","å¢å¼ºé¢œè‰²æ•æ„Ÿåº¦","æ”¹å–„è§†è§‰åˆ†ç±»","è®­ç»ƒç‰¹å¾è¯†åˆ«"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"text",name:"æ–‡å­—æ‰«æ",icon:"ğŸ“",description:"åœ¨è§†é‡ä¸­å¿«é€Ÿå®šä½ç‰¹å®šè¯æ±‡ï¼Œæå‡æ–‡å­—è¯†åˆ«å’Œé˜…è¯»æ•ˆç‡",level:"advanced",levelText:"é«˜çº§",duration:12,difficulty:4,ageRange:"12-20å²",progress:0,features:["æ–‡å­—è¯†åˆ«","è¯æ±‡æœç´¢","é˜…è¯»æ‰«æ","è¯­è¨€å¤„ç†"],benefits:["æé«˜é˜…è¯»é€Ÿåº¦","å¢å¼ºæ–‡å­—æ•æ„Ÿåº¦","æ”¹å–„æ‰«ææŠ€å·§","è®­ç»ƒè§†è§‰è¯æ±‡"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"motion",name:"åŠ¨æ€è¿½è¸ª",icon:"ğŸ¯",description:"è¿½è¸ªç§»åŠ¨çš„ç›®æ ‡ç‰©ä½“ï¼Œè®­ç»ƒåŠ¨æ€è§†è§‰å’Œé¢„æµ‹èƒ½åŠ›",level:"advanced",levelText:"é«˜çº§",duration:10,difficulty:4,ageRange:"12-20å²",progress:0,features:["åŠ¨æ€è¿½è¸ª","è¿åŠ¨é¢„æµ‹","è§†è§‰è·Ÿè¸ª","ååº”åè°ƒ"],benefits:["æé«˜åŠ¨æ€è§†è§‰","å¢å¼ºé¢„æµ‹èƒ½åŠ›","æ”¹å–„çœ¼çƒè¿åŠ¨","è®­ç»ƒè§†è§‰åè°ƒ"],bestScore:0,totalAttempts:0,averageAccuracy:0},{id:"peripheral",name:"å‘¨è¾¹æ„ŸçŸ¥",icon:"ğŸ‘ï¸",description:"ä¸“æ³¨ä¸­å¿ƒçš„åŒæ—¶æ„ŸçŸ¥å‘¨è¾¹å˜åŒ–ï¼Œè®­ç»ƒå‘¨è¾¹è§†è§‰æ•æ„Ÿåº¦",level:"expert",levelText:"ä¸“å®¶",duration:15,difficulty:5,ageRange:"15-25å²",progress:0,features:["å‘¨è¾¹è§†è§‰","åŒé‡ä»»åŠ¡","æ³¨æ„åˆ†é…","è§†è§‰ç›‘æ§"],benefits:["å¢å¼ºå‘¨è¾¹æ„ŸçŸ¥","æé«˜å¤šä»»åŠ¡èƒ½åŠ›","æ”¹å–„æ³¨æ„åˆ†é…","è®­ç»ƒè§†è§‰ç›‘æ§"],bestScore:0,totalAttempts:0,averageAccuracy:0}]),D=v([]),j=v(0),V=v(0),P=v([]),B=v(0),W=v(0),x=v(5),S=v([]),C=v({type:"circle",color:"#ff0000",name:"çº¢è‰²åœ†å½¢"}),q=v(0),I=v([]),z=v(""),L=v(0),R=v([]),H=v(null),y=te({centerTask:{numbers:[],correctAnswer:0},peripheralTargets:[]}),K=v(""),J=v(0),Q=v(0),yt=v(3),kt=v(3),Tt=v(3),xt=v(3),St=mt(()=>{const s=U();if(!s)return 0;const o=s.duration*60;return(o-E.value)/o*100}),X=mt(()=>V.value===0?0:Math.round(j.value/V.value*100)),Ct=s=>{b.value=s},U=()=>A.value.find(s=>s.id===b.value),Rt=()=>({dots:"ä¿æŒæ³¨è§†ä¸­å¿ƒåå­—ï¼Œç”¨ä½™å…‰å‘ç°å¹¶ç‚¹å‡»å‘¨è¾¹å‡ºç°çš„å½©è‰²åœ†ç‚¹",numbers:"ä¿æŒæ³¨è§†ä¸­å¿ƒåå­—ï¼Œå¿«é€Ÿæ‰¾åˆ°å¹¶ç‚¹å‡»æŒ‡å®šçš„æ•°å­—",shapes:"ä¿æŒæ³¨è§†ä¸­å¿ƒåå­—ï¼Œè¯†åˆ«å¹¶ç‚¹å‡»æŒ‡å®šå½¢çŠ¶å’Œé¢œè‰²çš„ç›®æ ‡",text:"ä¿æŒæ³¨è§†ä¸­å¿ƒåå­—ï¼Œå¿«é€Ÿå®šä½å¹¶ç‚¹å‡»æŒ‡å®šçš„è¯æ±‡",motion:"ä¿æŒæ³¨è§†ä¸­å¿ƒåå­—ï¼Œè¿½è¸ªå¹¶ç‚¹å‡»ç§»åŠ¨çš„ç›®æ ‡",peripheral:"ä¸“æ³¨è®¡ç®—ä¸­å¿ƒæ•°å­—çš„å’Œï¼ŒåŒæ—¶ç‚¹å‡»å‘¨è¾¹é—ªçƒçš„ç›®æ ‡"})[b.value]||"è¯·é€‰æ‹©è®­ç»ƒæ¨¡å¼",tt=s=>{b.value=s;const o=U();T.value=1,F.value=e.settings.sessionCount||5,E.value=o.duration*60,Ft(),Et(),_.startTrainingSession({mode:s,duration:o.duration,sessions:F.value}),it()},wt=()=>{_.pauseTraining(),Y()},At=()=>{_.resumeTraining(),it()},Dt=()=>{_.cancelTrainingSession(),Y(),rt()};let N=null;const it=()=>{N&&clearInterval(N),N=setInterval(()=>{_.isPaused.value||(E.value--,E.value<=0&&lt())},1e3)},Y=()=>{N&&(clearInterval(N),N=null)},lt=()=>{Y();const s=Pt();It(s),_.endTrainingSession({score:s,completed:!0,accuracy:X.value,mode:b.value,sessions:T.value}),Nt(),O.value=!0},Pt=()=>{let s=0;switch(b.value){case"dots":s=X.value;break;case"numbers":s=W.value/x.value*100;break;case"shapes":s=q.value/x.value*100;break;case"text":s=L.value/x.value*100;break;case"motion":s=T.value/F.value*100;break;case"peripheral":s=J.value/Q.value*50+(K.value===y.centerTask.correctAnswer?50:0);break;default:s=50}return Math.round(s)},It=s=>{const o=U();ot.value={accuracy:X.value,duration:o.duration*60,sessions:T.value,averageReaction:450+Math.random()*200,visionRange:e.settings.visionRange,newAchievement:s>80,achievementTitle:"è§†é‡å¤§å¸ˆ",achievementDescription:"åœ¨æ‰©å¤§è§†é‡è®­ç»ƒä¸­è¾¾åˆ°80%ä»¥ä¸Šå‡†ç¡®ç‡ï¼"}},Nt=()=>{const s=U();s&&(s.progress=Math.min(100,s.progress+20))},Ft=()=>{j.value=0,V.value=0,W.value=0,q.value=0,L.value=0,J.value=0,Q.value=0,K.value=""},rt=()=>{D.value=[],P.value=[],S.value=[],I.value=[],R.value=[],H.value&&(cancelAnimationFrame(H.value),H.value=null)},Et=()=>{switch(b.value){case"dots":Vt();break;case"numbers":Bt();break;case"shapes":Wt();break;case"text":qt();break;case"motion":zt();break;case"peripheral":dt();break}},Vt=()=>{const s=e.settings.visionRange||400,o=8+Math.floor(Math.random()*5),i=["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff","#44ffff"];D.value=[],V.value=o;for(let d=0;d<o;d++){const u=Math.PI*2*d/o+Math.random()*.5,f=100+Math.random()*(s/2-100);D.value.push({id:d,x:300+Math.cos(u)*f,y:200+Math.sin(u)*f,color:i[Math.floor(Math.random()*i.length)],active:!1,clicked:!1})}et()},et=()=>{const s=D.value.filter(o=>!o.active&&!o.clicked);if(s.length>0){const o=s[Math.floor(Math.random()*s.length)];o.active=!0,setTimeout(()=>{o.active&&(o.active=!1,et())},2e3+Math.random()*1e3)}},Bt=()=>{const s=e.settings.visionRange||400,o=12;P.value=[],B.value=Math.floor(Math.random()*9)+1;for(let d=0;d<o;d++){const u=Math.PI*2*d/o,f=80+Math.random()*(s/2-80);P.value.push({id:d,x:300+Math.cos(u)*f,y:200+Math.sin(u)*f,value:Math.floor(Math.random()*9)+1,found:!1})}const i=Math.floor(Math.random()*o);P.value[i].value=B.value},Wt=()=>{const s=e.settings.visionRange||400,o=10,i=["circle","square","triangle"],d=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff"];S.value=[],C.value={type:i[Math.floor(Math.random()*i.length)],color:d[Math.floor(Math.random()*d.length)],name:gt(i[Math.floor(Math.random()*i.length)],d[Math.floor(Math.random()*d.length)])};for(let f=0;f<o;f++){const G=Math.PI*2*f/o,ft=80+Math.random()*(s/2-80);S.value.push({id:f,x:300+Math.cos(G)*ft,y:200+Math.sin(G)*ft,type:i[Math.floor(Math.random()*i.length)],color:d[Math.floor(Math.random()*d.length)],found:!1})}const u=Math.floor(Math.random()*o);S.value[u].type=C.value.type,S.value[u].color=C.value.color},qt=()=>{const s=e.settings.visionRange||400,o=8,i=["è‹¹æœ","é¦™è•‰","æ©™å­","è‘¡è„","è‰è“","è¥¿ç“œ","æ¡ƒå­","æ¢¨å­","æ¨±æ¡ƒ","æŸ æª¬"];I.value=[],z.value=i[Math.floor(Math.random()*i.length)];for(let u=0;u<o;u++){const f=Math.PI*2*u/o,G=100+Math.random()*(s/2-100);I.value.push({id:u,x:300+Math.cos(f)*G,y:200+Math.sin(f)*G,text:i[Math.floor(Math.random()*i.length)],found:!1})}const d=Math.floor(Math.random()*o);I.value[d].text=z.value},zt=()=>{R.value=[];for(let o=0;o<3;o++)R.value.push({id:o,x:Math.random()*500,y:Math.random()*300,vx:(Math.random()-.5)*4,vy:(Math.random()-.5)*4});ct()},ct=()=>{R.value.forEach(s=>{s.x+=s.vx,s.y+=s.vy,(s.x<=0||s.x>=580)&&(s.vx*=-1),(s.y<=0||s.y>=380)&&(s.vy*=-1),s.x=Math.max(0,Math.min(580,s.x)),s.y=Math.max(0,Math.min(380,s.y))}),H.value=requestAnimationFrame(ct)},dt=()=>{const s=[];for(let i=0;i<5;i++)s.push(Math.floor(Math.random()*9)+1);y.centerTask.numbers=s,y.centerTask.correctAnswer=s.reduce((i,d)=>i+d,0);const o=6;Q.value=o,y.peripheralTargets=[];for(let i=0;i<o;i++){const d=Math.PI*2*i/o,u=150+Math.random()*100;y.peripheralTargets.push({id:i,x:300+Math.cos(d)*u,y:200+Math.sin(d)*u,color:"#ff4444",active:!1})}vt()},vt=()=>{const s=y.peripheralTargets.filter(o=>!o.active);if(s.length>0){const o=s[Math.floor(Math.random()*s.length)];o.active=!0,setTimeout(()=>{o.active=!1,setTimeout(vt,1e3+Math.random()*2e3)},1500)}},Lt=s=>{const o=D.value.find(i=>i.id===s);o&&o.active&&(o.clicked=!0,o.active=!1,j.value++,e.settings.soundEnabled&&w(),et())},Kt=s=>{const o=P.value.find(i=>i.id===s);o&&o.value===B.value&&!o.found&&(o.found=!0,W.value++,e.settings.soundEnabled&&w(),W.value<x.value&&(B.value=Math.floor(Math.random()*9)+1))},Ut=s=>{const o=S.value.find(i=>i.id===s);if(o&&ut(o)&&!o.found&&(o.found=!0,q.value++,e.settings.soundEnabled&&w(),q.value<x.value)){const i=["circle","square","triangle"],d=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff"];C.value={type:i[Math.floor(Math.random()*i.length)],color:d[Math.floor(Math.random()*d.length)],name:gt(i[Math.floor(Math.random()*i.length)],d[Math.floor(Math.random()*d.length)])}}},Gt=s=>{const o=I.value.find(i=>i.id===s);if(o&&o.text===z.value&&!o.found&&(o.found=!0,L.value++,e.settings.soundEnabled&&w(),L.value<x.value)){const i=["è‹¹æœ","é¦™è•‰","æ©™å­","è‘¡è„","è‰è“","è¥¿ç“œ","æ¡ƒå­","æ¢¨å­","æ¨±æ¡ƒ","æŸ æª¬"];z.value=i[Math.floor(Math.random()*i.length)]}},Ot=s=>{const o=R.value.findIndex(i=>i.id===s);o!==-1&&(R.value.splice(o,1),T.value++,e.settings.soundEnabled&&w(),T.value>=F.value&&lt())},jt=s=>{const o=y.peripheralTargets.find(i=>i.id===s);o&&o.active&&(o.active=!1,J.value++,e.settings.soundEnabled&&w())},Ht=()=>{parseInt(K.value)===y.centerTask.correctAnswer&&e.settings.soundEnabled&&w(),dt(),K.value=""},ut=s=>s.type===C.value.type&&s.color===C.value.color,gt=(s,o)=>{const i={circle:"åœ†å½¢",square:"æ–¹å½¢",triangle:"ä¸‰è§’å½¢"};return`${{"#ff0000":"çº¢è‰²","#00ff00":"ç»¿è‰²","#0000ff":"è“è‰²","#ffff00":"é»„è‰²","#ff00ff":"ç´«è‰²"}[o]||""}${i[s]||""}`},w=()=>{try{const s=new(window.AudioContext||window.webkitAudioContext),o=s.createOscillator(),i=s.createGain();o.connect(i),i.connect(s.destination),o.frequency.setValueAtTime(800,s.currentTime),i.gain.setValueAtTime(.1,s.currentTime),i.gain.exponentialRampToValueAtTime(.01,s.currentTime+.1),o.start(s.currentTime),o.stop(s.currentTime+.1)}catch(s){console.log("éŸ³æ•ˆæ’­æ”¾å¤±è´¥:",s)}},Jt=s=>{switch(s){case"improving":return"ä¸Šå‡";case"declining":return"ä¸‹é™";default:return"ç¨³å®š"}},Qt=()=>{O.value=!1},Xt=()=>{O.value=!1;const s=A.value.findIndex(o=>o.id===b.value)+1;s<A.value.length?tt(A.value[s].id):tt(A.value[0].id)};return ee(()=>{}),se(()=>{Y(),rt()}),{trainingManager:_,settingsManager:e,statsManager:nt,selectedMode:b,currentSession:T,totalSessions:F,timeRemaining:E,showCompletionModal:O,completionData:ot,trainingModes:A,currentDots:D,dotsClicked:j,totalDots:V,currentNumbers:P,targetNumber:B,numbersFound:W,targetCount:x,currentShapes:S,targetShape:C,shapesFound:q,currentWords:I,targetWord:z,wordsFound:L,currentMotionTargets:R,currentPeripheralData:y,peripheralAnswer:K,peripheralTargetsClicked:J,peripheralTargetsTotal:Q,visionRangeRating:yt,reactionSpeedRating:kt,attentionRating:Tt,accuracyRating:xt,timerProgress:St,accuracy:X,selectMode:Ct,getCurrentMode:U,getCurrentInstruction:Rt,startTraining:tt,pauseTraining:wt,resumeTraining:At,stopTraining:Dt,clickDot:Lt,clickNumber:Kt,clickShape:Ut,clickWord:Gt,clickMotionTarget:Ot,clickPeripheralTarget:jt,submitPeripheralAnswer:Ht,isTargetShape:ut,getTrendText:Jt,closeCompletionModal:Qt,startNextTraining:Xt,showSettingsModal:$,settings:at,settingsSections:Z,openSettings:Mt,closeSettings:bt,saveSettings,resetSettings}}},ue={class:"expand-vision-container"},ge={key:0,class:"loading-container"},fe={key:1,class:"training-modes"},me={class:"modes-grid"},he=["onClick"],pe={class:"mode-header"},_e={class:"mode-icon"},Me={class:"mode-description"},be={class:"mode-details"},ye={class:"detail-item"},ke={class:"detail-value"},Te={class:"detail-item"},xe={class:"detail-value"},Se={class:"detail-item"},Ce={class:"detail-value"},Re={class:"mode-progress"},we={class:"progress-bar"},Ae={class:"progress-text"},De=["onClick"],Pe={key:2,class:"training-interface"},Ie={class:"training-card"},Ne={class:"training-header"},Fe={class:"training-controls"},Ee={class:"training-timer"},Ve={class:"timer-display"},Be={class:"time-remaining"},We={class:"session-info"},qe={class:"timer-progress"},ze={class:"progress-bar"},Le={class:"training-content"},Ke={class:"instruction"},Ue={key:0,class:"dots-training"},Ge={class:"vision-field",ref:"visionField"},Oe=["onClick"],je={class:"training-stats"},He={class:"stat-item"},Je={class:"stat-value"},Qe={class:"stat-item"},Xe={class:"stat-value"},Ye={class:"stat-item"},Ze={class:"stat-value"},$e={key:1,class:"numbers-training"},ts={class:"vision-field",ref:"visionField"},es=["onClick"],ss={class:"target-info"},ns={class:"target-display"},as={class:"target-number"},os={class:"found-count"},is={key:2,class:"shapes-training"},ls={class:"vision-field",ref:"visionField"},rs=["onClick"],cs={class:"target-info"},ds={class:"target-display"},vs={class:"target-shape"},us={class:"found-count"},gs={key:3,class:"text-training"},fs={class:"vision-field",ref:"visionField"},ms=["onClick"],hs={class:"target-info"},ps={class:"target-display"},_s={class:"target-word"},Ms={class:"found-count"},bs={key:4,class:"motion-training"},ys={class:"vision-field",ref:"visionField"},ks=["onClick"],Ts={class:"target-info"},xs={class:"found-count"},Ss={key:5,class:"peripheral-training"},Cs={class:"vision-field",ref:"visionField"},Rs={class:"center-task-area"},ws=["onClick"],As={class:"dual-task-info"},Ds={class:"center-task"},Ps={class:"peripheral-task"},Is={key:5,class:"statistics-section"},Ns={class:"stats-overview"},Fs={class:"stats-card"},Es={class:"stats-grid"},Vs={class:"stat-item"},Bs={class:"stat-value"},Ws={class:"stat-item"},qs={class:"stat-value"},zs={class:"stat-item"},Ls={class:"stat-value"},Ks={class:"stat-item"},Us={class:"stat-value"},Gs={class:"stat-item"},Os={class:"stat-value"},js={class:"stat-item"},Hs={class:"stats-card"},Js={class:"ability-ratings"},Qs={class:"rating-item"},Xs={class:"rating-stars"},Ys={class:"rating-item"},Zs={class:"rating-stars"},$s={class:"rating-item"},tn={class:"rating-stars"},en={class:"rating-item"},sn={class:"rating-stars"},nn={key:6,class:"completion-overlay"},an={class:"completion-modal"},on={class:"completion-content"},ln={class:"completion-stats"},rn={class:"stat-item"},cn={class:"stat-value"},dn={class:"stat-item"},vn={class:"stat-value"},un={class:"stat-item"},gn={class:"stat-value"},fn={class:"stat-item"},mn={class:"stat-value"},hn={key:0,class:"achievement-notification"},pn={class:"achievement-text"},_n={class:"modal-actions"};function Mn(_t,n,_,e,nt,at){const Z=ht("SettingsButton"),$=ht("SettingsModal");return r(),c("div",ue,[e.trainingManager.isLoading.value?(r(),c("div",ge,n[8]||(n[8]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"æ­£åœ¨åŠ è½½è®­ç»ƒæ•°æ®...",-1)]))):e.trainingManager.isTraining.value?g("",!0):(r(),c("div",fe,[n[12]||(n[12]=t("h3",null,"é€‰æ‹©è®­ç»ƒæ¨¡å¼",-1)),t("div",me,[(r(!0),c(m,null,h(e.trainingModes,a=>(r(),c("div",{key:a.id,class:p(["mode-card",{active:e.selectedMode===a.id}]),onClick:M=>e.selectMode(a.id)},[t("div",pe,[t("span",_e,l(a.icon),1),t("span",{class:p(["mode-level",a.level])},l(a.levelText),3)]),t("h4",null,l(a.name),1),t("p",Me,l(a.description),1),t("div",be,[t("div",ye,[n[9]||(n[9]=t("span",{class:"detail-label"},"è®­ç»ƒæ—¶é•¿:",-1)),t("span",ke,l(a.duration)+"åˆ†é’Ÿ",1)]),t("div",Te,[n[10]||(n[10]=t("span",{class:"detail-label"},"éš¾åº¦ç­‰çº§:",-1)),t("span",xe,l(a.difficulty)+"/5",1)]),t("div",Se,[n[11]||(n[11]=t("span",{class:"detail-label"},"æ¨èå¹´é¾„:",-1)),t("span",Ce,l(a.ageRange),1)])]),t("div",Re,[t("div",we,[t("div",{class:"progress-fill",style:k({width:a.progress+"%"})},null,4)]),t("div",Ae,"å®Œæˆåº¦: "+l(a.progress)+"%",1)]),t("button",{class:"start-mode-btn",onClick:ie(M=>e.startTraining(a.id),["stop"])},l(a.progress>0?"ç»§ç»­è®­ç»ƒ":"å¼€å§‹è®­ç»ƒ"),9,De)],10,he))),128))])])),e.trainingManager.isTraining.value?(r(),c("div",Pe,[t("div",Ie,[t("div",Ne,[t("h3",null,l(e.getCurrentMode().name),1),t("div",Fe,[e.trainingManager.canPauseTraining.value?(r(),c("button",{key:0,class:"control-btn",onClick:n[0]||(n[0]=(...a)=>e.pauseTraining&&e.pauseTraining(...a))}," â¸ï¸ ")):g("",!0),e.trainingManager.canResumeTraining.value?(r(),c("button",{key:1,class:"control-btn",onClick:n[1]||(n[1]=(...a)=>e.resumeTraining&&e.resumeTraining(...a))}," â–¶ï¸ ")):g("",!0),t("button",{class:"control-btn",onClick:n[2]||(n[2]=(...a)=>e.stopTraining&&e.stopTraining(...a))}," â¹ï¸ ")])]),t("div",Ee,[t("div",Ve,[t("div",Be,l(e.trainingManager.formatDuration(e.timeRemaining)),1),t("div",We,"ç¬¬ "+l(e.currentSession)+"/"+l(e.totalSessions)+" è½®",1)]),t("div",qe,[t("div",ze,[t("div",{class:"progress-fill",style:k({width:e.timerProgress+"%"})},null,4)])])]),t("div",Le,[t("div",Ke,l(e.getCurrentInstruction()),1),e.selectedMode==="dots"?(r(),c("div",Ue,[t("div",Ge,[n[13]||(n[13]=t("div",{class:"center-point"},"+",-1)),(r(!0),c(m,null,h(e.currentDots,a=>(r(),c("div",{key:a.id,class:p(["dot-item",{active:a.active,clicked:a.clicked}]),style:k({left:a.x+"px",top:a.y+"px",backgroundColor:a.color}),onClick:M=>e.clickDot(a.id)},null,14,Oe))),128))],512),t("div",je,[t("div",He,[n[14]||(n[14]=t("span",{class:"stat-label"},"å·²ç‚¹å‡»",-1)),t("span",Je,l(e.dotsClicked),1)]),t("div",Qe,[n[15]||(n[15]=t("span",{class:"stat-label"},"æ€»æ•°",-1)),t("span",Xe,l(e.totalDots),1)]),t("div",Ye,[n[16]||(n[16]=t("span",{class:"stat-label"},"å‡†ç¡®ç‡",-1)),t("span",Ze,l(e.accuracy)+"%",1)])])])):g("",!0),e.selectedMode==="numbers"?(r(),c("div",$e,[t("div",ts,[n[17]||(n[17]=t("div",{class:"center-point"},"+",-1)),(r(!0),c(m,null,h(e.currentNumbers,a=>(r(),c("div",{key:a.id,class:p(["number-item",{target:a.value===e.targetNumber,found:a.found}]),style:k({left:a.x+"px",top:a.y+"px"}),onClick:M=>e.clickNumber(a.id)},l(a.value),15,es))),128))],512),t("div",ss,[t("div",ns,[n[18]||(n[18]=st(" å¯»æ‰¾æ•°å­—: ",-1)),t("span",as,l(e.targetNumber),1)]),t("div",os," å·²æ‰¾åˆ°: "+l(e.numbersFound)+"/"+l(e.targetCount),1)])])):g("",!0),e.selectedMode==="shapes"?(r(),c("div",is,[t("div",ls,[n[19]||(n[19]=t("div",{class:"center-point"},"+",-1)),(r(!0),c(m,null,h(e.currentShapes,a=>(r(),c("div",{key:a.id,class:p(["shape-item",[a.type,{target:e.isTargetShape(a),found:a.found}]]),style:k({left:a.x+"px",top:a.y+"px",backgroundColor:a.color,borderColor:a.type==="triangle"?a.color:"transparent"}),onClick:M=>e.clickShape(a.id)},null,14,rs))),128))],512),t("div",cs,[t("div",ds,[n[20]||(n[20]=st(" å¯»æ‰¾: ",-1)),t("span",vs,l(e.targetShape.name),1)]),t("div",us," å·²æ‰¾åˆ°: "+l(e.shapesFound)+"/"+l(e.targetCount),1)])])):g("",!0),e.selectedMode==="text"?(r(),c("div",gs,[t("div",fs,[n[21]||(n[21]=t("div",{class:"center-point"},"+",-1)),(r(!0),c(m,null,h(e.currentWords,a=>(r(),c("div",{key:a.id,class:p(["word-item",{target:a.text===e.targetWord,found:a.found}]),style:k({left:a.x+"px",top:a.y+"px"}),onClick:M=>e.clickWord(a.id)},l(a.text),15,ms))),128))],512),t("div",hs,[t("div",ps,[n[22]||(n[22]=st(" å¯»æ‰¾è¯æ±‡: ",-1)),t("span",_s,l(e.targetWord),1)]),t("div",Ms," å·²æ‰¾åˆ°: "+l(e.wordsFound)+"/"+l(e.targetCount),1)])])):g("",!0),e.selectedMode==="motion"?(r(),c("div",bs,[t("div",ys,[n[23]||(n[23]=t("div",{class:"center-point"},"+",-1)),(r(!0),c(m,null,h(e.currentMotionTargets,a=>(r(),c("div",{key:a.id,class:"motion-target",style:k({left:a.x+"px",top:a.y+"px",width:e.settingsManager.settings.targetSize+"px",height:e.settingsManager.settings.targetSize+"px"}),onClick:M=>e.clickMotionTarget(a.id)},null,12,ks))),128))],512),t("div",Ts,[n[24]||(n[24]=t("div",{class:"target-display"}," è¿½è¸ªç§»åŠ¨ç›®æ ‡ ",-1)),t("div",xs," å·²å‡»ä¸­: "+l(e.currentSession)+"/"+l(e.settingsManager.settings.sessionCount),1)])])):g("",!0),e.selectedMode==="peripheral"?(r(),c("div",Ss,[t("div",Cs,[t("div",Rs,[(r(!0),c(m,null,h(e.currentPeripheralData.centerTask.numbers,(a,M)=>(r(),c("div",{key:"center-"+M,class:"center-number"},l(a),1))),128))]),(r(!0),c(m,null,h(e.currentPeripheralData.peripheralTargets,a=>(r(),c("div",{key:a.id,class:p(["peripheral-target",{active:a.active}]),style:k({left:a.x+"px",top:a.y+"px",backgroundColor:a.color}),onClick:M=>e.clickPeripheralTarget(a.id)},null,14,ws))),128))],512),t("div",As,[t("div",Ds,[n[25]||(n[25]=t("span",null,"ä¸­å¿ƒä»»åŠ¡: è®¡ç®—æ•°å­—å’Œ",-1)),ne(t("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>e.peripheralAnswer=a),type:"number",class:"answer-input",onKeyup:n[4]||(n[4]=oe((...a)=>e.submitPeripheralAnswer&&e.submitPeripheralAnswer(...a),["enter"]))},null,544),[[ae,e.peripheralAnswer]]),t("button",{onClick:n[5]||(n[5]=(...a)=>e.submitPeripheralAnswer&&e.submitPeripheralAnswer(...a)),class:"submit-btn"},"æäº¤")]),t("div",Ps,[n[26]||(n[26]=t("span",null,"å‘¨è¾¹ä»»åŠ¡: ç‚¹å‡»é—ªçƒç›®æ ‡",-1)),t("span",null,"å·²ç‚¹å‡»: "+l(e.peripheralTargetsClicked)+"/"+l(e.peripheralTargetsTotal),1)])])])):g("",!0)])])])):g("",!0),e.trainingManager.isTraining.value?g("",!0):(r(),pt(Z,{key:3,onClick:e.openSettings},null,8,["onClick"])),e.showSettingsModal?(r(),pt($,{key:4,sections:e.settingsSections,settings:e.settings,onClose:e.closeSettings,onSave:e.saveSettings,onReset:e.resetSettings},null,8,["sections","settings","onClose","onSave","onReset"])):g("",!0),e.trainingManager.isTraining.value?g("",!0):(r(),c("div",Is,[n[39]||(n[39]=t("h3",null,"è®­ç»ƒç»Ÿè®¡",-1)),t("div",Ns,[t("div",Fs,[n[33]||(n[33]=t("h4",null,"æ€»ä½“è¡¨ç°",-1)),t("div",Es,[t("div",Vs,[n[27]||(n[27]=t("span",{class:"stat-label"},"æ€»è®­ç»ƒæ¬¡æ•°",-1)),t("span",Bs,l(e.statsManager.formattedStats.value.totalSessions),1)]),t("div",Ws,[n[28]||(n[28]=t("span",{class:"stat-label"},"ç´¯è®¡è®­ç»ƒæ—¶é—´",-1)),t("span",qs,l(e.statsManager.formattedStats.value.totalTimeFormatted),1)]),t("div",zs,[n[29]||(n[29]=t("span",{class:"stat-label"},"å¹³å‡å‡†ç¡®ç‡",-1)),t("span",Ls,l(e.statsManager.formattedStats.value.averageScore)+"%",1)]),t("div",Ks,[n[30]||(n[30]=t("span",{class:"stat-label"},"æœ€ä½³æˆç»©",-1)),t("span",Us,l(e.statsManager.formattedStats.value.bestScore||0)+"åˆ†",1)]),t("div",Gs,[n[31]||(n[31]=t("span",{class:"stat-label"},"å®Œæˆç‡",-1)),t("span",Os,l(e.statsManager.formattedStats.value.completionRate)+"%",1)]),t("div",js,[n[32]||(n[32]=t("span",{class:"stat-label"},"è¿›æ­¥è¶‹åŠ¿",-1)),t("span",{class:p(["stat-value trend",e.statsManager.formattedStats.value.recentTrend])},l(e.getTrendText(e.statsManager.formattedStats.value.recentTrend)),3)])])]),t("div",Hs,[n[38]||(n[38]=t("h4",null,"èƒ½åŠ›è¯„çº§",-1)),t("div",Js,[t("div",Qs,[n[34]||(n[34]=t("span",{class:"rating-label"},"è§†é‡èŒƒå›´",-1)),t("div",Xs,[(r(),c(m,null,h(5,a=>t("span",{key:a,class:p(["star",{active:a<=e.visionRangeRating}])},"â­",2)),64))])]),t("div",Ys,[n[35]||(n[35]=t("span",{class:"rating-label"},"ååº”é€Ÿåº¦",-1)),t("div",Zs,[(r(),c(m,null,h(5,a=>t("span",{key:a,class:p(["star",{active:a<=e.reactionSpeedRating}])},"â­",2)),64))])]),t("div",$s,[n[36]||(n[36]=t("span",{class:"rating-label"},"æ³¨æ„åŠ›",-1)),t("div",tn,[(r(),c(m,null,h(5,a=>t("span",{key:a,class:p(["star",{active:a<=e.attentionRating}])},"â­",2)),64))])]),t("div",en,[n[37]||(n[37]=t("span",{class:"rating-label"},"å‡†ç¡®æ€§",-1)),t("div",sn,[(r(),c(m,null,h(5,a=>t("span",{key:a,class:p(["star",{active:a<=e.accuracyRating}])},"â­",2)),64))])])])])])])),e.showCompletionModal?(r(),c("div",nn,[t("div",an,[n[45]||(n[45]=t("div",{class:"completion-header"},[t("h3",null,"ğŸ‰ è®­ç»ƒå®Œæˆï¼")],-1)),t("div",on,[t("div",ln,[t("div",rn,[n[40]||(n[40]=t("span",{class:"stat-label"},"å‡†ç¡®ç‡",-1)),t("span",cn,l(e.completionData.accuracy)+"%",1)]),t("div",dn,[n[41]||(n[41]=t("span",{class:"stat-label"},"è®­ç»ƒæ—¶é•¿",-1)),t("span",vn,l(e.trainingManager.formatDuration(e.completionData.duration)),1)]),t("div",un,[n[42]||(n[42]=t("span",{class:"stat-label"},"å®Œæˆè½®æ•°",-1)),t("span",gn,l(e.completionData.sessions),1)]),t("div",fn,[n[43]||(n[43]=t("span",{class:"stat-label"},"å¹³å‡ååº”",-1)),t("span",mn,l(Math.round(e.completionData.averageReaction))+"ms",1)])]),e.completionData.newAchievement?(r(),c("div",hn,[n[44]||(n[44]=t("div",{class:"achievement-icon"},"ğŸ†",-1)),t("div",pn,[t("h4",null,l(e.completionData.achievementTitle),1),t("p",null,l(e.completionData.achievementDescription),1)])])):g("",!0)]),t("div",_n,[t("button",{class:"secondary-btn",onClick:n[6]||(n[6]=(...a)=>e.closeCompletionModal&&e.closeCompletionModal(...a))},"è¿”å›"),t("button",{class:"primary-btn",onClick:n[7]||(n[7]=(...a)=>e.startNextTraining&&e.startNextTraining(...a))},"ç»§ç»­è®­ç»ƒ")])])])):g("",!0)])}const Rn=de(ve,[["render",Mn],["__scopeId","data-v-538420fe"]]);export{Rn as default};
