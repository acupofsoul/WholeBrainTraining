import{i as K,k as u,c as x,q as Q,o as n,a as i,b as t,n as F,s as T,v as X,t as o,g as d,z as O,f as Y,F as Z,h as tt,x as W,d as st,y as et,m as at}from"./index-7434e420.js";import{_ as lt}from"./_plugin-vue_export-helper-c27b6911.js";const ot={class:"custom-word-flash"},nt={key:0,class:"setup-stage"},it={class:"setup-container"},rt={class:"word-input-section"},ut={class:"input-methods"},dt={key:0,class:"manual-input"},vt={class:"input-tips"},ct={key:1,class:"file-input"},pt={class:"drop-content"},mt={key:2,class:"word-preview"},gt={class:"word-tags"},ft={key:0,class:"more-words"},bt={class:"parameter-section"},_t={class:"parameter-grid"},ht={class:"parameter-item"},kt={class:"parameter-item"},Tt={class:"parameter-item"},yt={class:"parameter-item"},wt={class:"toggle-switch"},St={class:"preview-section"},Ct={class:"preview-info"},xt={class:"info-item"},Wt={class:"info-value"},It={class:"info-item"},Dt={class:"info-value"},Mt={class:"info-item"},Ft={class:"info-value"},Ot={class:"action-buttons"},Vt=["disabled"],Nt={key:1,class:"training-stage"},$t={class:"training-header"},Rt={class:"progress-info"},Ut={class:"progress-bar"},Pt={class:"flash-area"},zt={key:1,class:"flash-placeholder"},Bt={class:"training-controls"},Jt={key:2,class:"result-stage"},Lt={class:"result-stats"},qt={class:"stat-card"},At={class:"stat-number"},Et={class:"stat-card"},jt={class:"stat-number"},Gt={class:"stat-card"},Ht={class:"stat-number"},Kt={class:"stat-card"},Qt={class:"stat-number"},Xt={__name:"CustomWordFlash",setup(Yt){const V=K(),v=u("setup"),m=u("manual"),f=u(""),r=x(()=>f.value.trim()?f.value.split(/[\n,]+/).map(e=>e.trim()).filter(e=>e.length>0):[]),a=u({speed:1e3,interval:1e3,rounds:1,randomOrder:!1}),N=x(()=>{const e=r.value.length*(parseInt(a.value.speed)+parseInt(a.value.interval))*a.value.rounds,s=Math.floor(e/6e4),l=Math.floor(e%6e4/1e3);return`${s}åˆ†${l}ç§’`}),c=u(0),b=u(1),y=u(""),w=u(!1),g=u(!1),_=u([]),p=u(0),I=u(0),S=u(0);let h=null,k=null;const $=x(()=>{if(p.value===0)return 0;const e=(b.value-1)*p.value+c.value,s=a.value.rounds*p.value;return Math.round(e/s*100)}),R=e=>{const s=e.target.files[0];s&&D(s)},U=e=>{e.preventDefault();const s=e.dataTransfer.files[0];s&&D(s)},D=e=>{const s=new FileReader;s.onload=l=>{f.value=l.target.result},s.readAsText(e)},M=()=>{r.value.length!==0&&(v.value="training",_.value=a.value.randomOrder?[...r.value].sort(()=>Math.random()-.5):[...r.value],p.value=_.value.length,c.value=0,b.value=1,I.value=Date.now(),C())},C=()=>{if(!g.value){if(c.value>=_.value.length)if(b.value>=a.value.rounds){J();return}else b.value++,c.value=0,a.value.randomOrder&&(_.value=[...r.value].sort(()=>Math.random()-.5));y.value=_.value[c.value],w.value=!0,h=setTimeout(()=>{w.value=!1,k=setTimeout(()=>{c.value++,C()},parseInt(a.value.interval))},parseInt(a.value.speed))}},P=()=>{g.value=!0,clearTimeout(h),clearTimeout(k)},z=()=>{g.value=!1,C()},B=()=>{clearTimeout(h),clearTimeout(k),v.value="setup",g.value=!1},J=()=>{clearTimeout(h),clearTimeout(k),S.value=Date.now()-I.value,v.value="result",j()},L=()=>{M()},q=()=>{v.value="setup"},A=()=>{V.push("/flash-training")},E=e=>{const s=Math.floor(e/6e4),l=Math.floor(e%6e4/1e3);return`${s}åˆ†${l}ç§’`},j=()=>{const e={date:new Date().toISOString(),wordCount:p.value,rounds:a.value.rounds,duration:S.value,speed:a.value.speed},s=localStorage.getItem("customWordFlashRecords")||"[]",l=JSON.parse(s);l.push(e),localStorage.setItem("customWordFlashRecords",JSON.stringify(l)),G()},G=()=>{const e=JSON.parse(localStorage.getItem("flashTrainingStats")||"{}");e.customWord||(e.customWord={completed:0,bestScore:0}),e.customWord.completed++,localStorage.setItem("flashTrainingStats",JSON.stringify(e))};return Q(()=>{clearTimeout(h),clearTimeout(k)}),(e,s)=>(n(),i("div",ot,[v.value==="setup"?(n(),i("div",nt,[s[28]||(s[28]=t("div",{class:"page-header"},[t("h1",null,"è‡ªå®šä¹‰å•è¯é—ªè§†è®­ç»ƒ"),t("p",{class:"page-description"}," è¾“å…¥æ‚¨æƒ³è¦è®­ç»ƒçš„å•è¯åˆ—è¡¨ï¼Œè®¾ç½®é—ªè§†å‚æ•°ï¼Œå¼€å§‹ä¸ªæ€§åŒ–çš„å•è¯è®°å¿†è®­ç»ƒ ")],-1)),t("div",it,[t("div",rt,[s[14]||(s[14]=t("h3",null,"å•è¯åˆ—è¡¨è®¾ç½®",-1)),t("div",ut,[t("button",{class:F(["method-btn",{active:m.value==="manual"}]),onClick:s[0]||(s[0]=l=>m.value="manual")}," æ‰‹åŠ¨è¾“å…¥ ",2),t("button",{class:F(["method-btn",{active:m.value==="file"}]),onClick:s[1]||(s[1]=l=>m.value="file")}," æ–‡ä»¶å¯¼å…¥ ",2)]),m.value==="manual"?(n(),i("div",dt,[T(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=l=>f.value=l),placeholder:"è¯·è¾“å…¥å•è¯åˆ—è¡¨ï¼Œæ¯è¡Œä¸€ä¸ªå•è¯æˆ–ç”¨é€—å·åˆ†éš”\\nä¾‹å¦‚ï¼š\\napple\\nbanana\\norange",class:"word-textarea"},null,512),[[X,f.value]]),t("div",vt,[s[10]||(s[10]=t("span",null,"ğŸ’¡ æ”¯æŒæ¯è¡Œä¸€ä¸ªå•è¯æˆ–ç”¨é€—å·åˆ†éš”",-1)),t("span",null,"å½“å‰å•è¯æ•°ï¼š"+o(r.value.length),1)])])):d("",!0),m.value==="file"?(n(),i("div",ct,[t("div",{class:"file-drop-zone",onDrop:U,onDragover:s[4]||(s[4]=O(()=>{},["prevent"])),onDragenter:s[5]||(s[5]=O(()=>{},["prevent"]))},[t("input",{type:"file",ref:"fileInput",onChange:R,accept:".txt,.csv",style:{display:"none"}},null,544),t("div",pt,[s[12]||(s[12]=t("div",{class:"drop-icon"},"ğŸ“",-1)),t("p",null,[s[11]||(s[11]=Y("æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„æˆ– ",-1)),t("button",{onClick:s[3]||(s[3]=l=>e.$refs.fileInput.click()),class:"browse-btn"},"æµè§ˆæ–‡ä»¶")]),s[13]||(s[13]=t("p",{class:"file-hint"},"æ”¯æŒ .txt å’Œ .csv æ ¼å¼",-1))])],32)])):d("",!0),r.value.length>0?(n(),i("div",mt,[t("h4",null,"å•è¯é¢„è§ˆ ("+o(r.value.length)+"ä¸ª)",1),t("div",gt,[(n(!0),i(Z,null,tt(r.value.slice(0,20),(l,H)=>(n(),i("span",{key:H,class:"word-tag"},o(l),1))),128)),r.value.length>20?(n(),i("span",ft," +"+o(r.value.length-20)+"ä¸ªæ›´å¤š... ",1)):d("",!0)])])):d("",!0)]),t("div",bt,[s[27]||(s[27]=t("h3",null,"è®­ç»ƒå‚æ•°è®¾ç½®",-1)),t("div",_t,[t("div",ht,[s[16]||(s[16]=t("label",null,"é—ªè§†é€Ÿåº¦",-1)),T(t("select",{"onUpdate:modelValue":s[6]||(s[6]=l=>a.value.speed=l)},s[15]||(s[15]=[st('<option value="2000" data-v-aa2d0261>å¾ˆæ…¢ (2ç§’)</option><option value="1500" data-v-aa2d0261>æ…¢é€Ÿ (1.5ç§’)</option><option value="1000" data-v-aa2d0261>ä¸­é€Ÿ (1ç§’)</option><option value="500" data-v-aa2d0261>å¿«é€Ÿ (0.5ç§’)</option><option value="300" data-v-aa2d0261>å¾ˆå¿« (0.3ç§’)</option><option value="200" data-v-aa2d0261>æé€Ÿ (0.2ç§’)</option>',6)]),512),[[W,a.value.speed]])]),t("div",kt,[s[18]||(s[18]=t("label",null,"é—´éš”æ—¶é—´",-1)),T(t("select",{"onUpdate:modelValue":s[7]||(s[7]=l=>a.value.interval=l)},s[17]||(s[17]=[t("option",{value:"500"},"0.5ç§’",-1),t("option",{value:"1000"},"1ç§’",-1),t("option",{value:"1500"},"1.5ç§’",-1),t("option",{value:"2000"},"2ç§’",-1)]),512),[[W,a.value.interval]])]),t("div",Tt,[s[20]||(s[20]=t("label",null,"é‡å¤æ¬¡æ•°",-1)),T(t("select",{"onUpdate:modelValue":s[8]||(s[8]=l=>a.value.rounds=l)},s[19]||(s[19]=[t("option",{value:"1"},"1æ¬¡",-1),t("option",{value:"2"},"2æ¬¡",-1),t("option",{value:"3"},"3æ¬¡",-1),t("option",{value:"5"},"5æ¬¡",-1)]),512),[[W,a.value.rounds]])]),t("div",yt,[s[22]||(s[22]=t("label",null,"éšæœºé¡ºåº",-1)),t("div",wt,[T(t("input",{type:"checkbox","onUpdate:modelValue":s[9]||(s[9]=l=>a.value.randomOrder=l),id:"random-toggle"},null,512),[[et,a.value.randomOrder]]),s[21]||(s[21]=t("label",{for:"random-toggle",class:"toggle-label"},null,-1))])])]),t("div",St,[s[26]||(s[26]=t("h4",null,"è®­ç»ƒé¢„è§ˆ",-1)),t("div",Ct,[t("div",xt,[s[23]||(s[23]=t("span",{class:"info-label"},"æ€»å•è¯æ•°ï¼š",-1)),t("span",Wt,o(r.value.length),1)]),t("div",It,[s[24]||(s[24]=t("span",{class:"info-label"},"é¢„è®¡æ—¶é•¿ï¼š",-1)),t("span",Dt,o(N.value),1)]),t("div",Mt,[s[25]||(s[25]=t("span",{class:"info-label"},"é—ªè§†é€Ÿåº¦ï¼š",-1)),t("span",Ft,o(a.value.speed)+"ms",1)])])])])]),t("div",Ot,[t("button",{onClick:M,disabled:r.value.length===0,class:"start-btn"}," å¼€å§‹è®­ç»ƒ ",8,Vt)])])):d("",!0),v.value==="training"?(n(),i("div",Nt,[t("div",$t,[t("div",Rt,[t("span",null,"è¿›åº¦ï¼š"+o(c.value+1)+" / "+o(p.value),1),t("span",null,"è½®æ¬¡ï¼š"+o(b.value)+" / "+o(a.value.rounds),1)]),t("div",Ut,[t("div",{class:"progress-fill",style:at({width:$.value+"%"})},null,4)])]),t("div",Pt,[w.value?(n(),i("div",{class:"flash-word",key:y.value},o(y.value),1)):(n(),i("div",zt,s[29]||(s[29]=[t("div",{class:"waiting-indicator"},"å‡†å¤‡ä¸­...",-1)])))]),t("div",Bt,[g.value?d("",!0):(n(),i("button",{key:0,onClick:P,class:"control-btn pause-btn"}," â¸ï¸ æš‚åœ ")),g.value?(n(),i("button",{key:1,onClick:z,class:"control-btn resume-btn"}," â–¶ï¸ ç»§ç»­ ")):d("",!0),t("button",{onClick:B,class:"control-btn stop-btn"}," â¹ï¸ åœæ­¢ ")])])):d("",!0),v.value==="result"?(n(),i("div",Jt,[s[34]||(s[34]=t("div",{class:"result-header"},[t("h2",null,"è®­ç»ƒå®Œæˆï¼"),t("div",{class:"completion-icon"},"ğŸ‰")],-1)),t("div",Lt,[t("div",qt,[t("div",At,o(p.value),1),s[30]||(s[30]=t("div",{class:"stat-label"},"è®­ç»ƒå•è¯æ•°",-1))]),t("div",Et,[t("div",jt,o(a.value.rounds),1),s[31]||(s[31]=t("div",{class:"stat-label"},"å®Œæˆè½®æ¬¡",-1))]),t("div",Gt,[t("div",Ht,o(E(S.value)),1),s[32]||(s[32]=t("div",{class:"stat-label"},"è®­ç»ƒæ—¶é•¿",-1))]),t("div",Kt,[t("div",Qt,o(a.value.speed)+"ms",1),s[33]||(s[33]=t("div",{class:"stat-label"},"é—ªè§†é€Ÿåº¦",-1))])]),t("div",{class:"result-actions"},[t("button",{onClick:L,class:"action-btn primary"}," é‡æ–°è®­ç»ƒ "),t("button",{onClick:q,class:"action-btn secondary"}," ä¿®æ”¹è®¾ç½® "),t("button",{onClick:A,class:"action-btn secondary"}," è¿”å›ä¸»é¡µ ")])])):d("",!0)]))}},ss=lt(Xt,[["__scopeId","data-v-aa2d0261"]]);export{ss as default};
