import{i as K,k as u,c as x,q as Q,o as n,a as i,b as t,n as F,s as T,v as X,t as o,g as d,z as O,f as Y,F as Z,h as tt,x as W,d as st,y as et,m as at}from"./index-7434e420.js";import{_ as lt}from"./_plugin-vue_export-helper-c27b6911.js";const ot={class:"custom-word-flash"},nt={key:0,class:"setup-stage"},it={class:"setup-container"},rt={class:"word-input-section"},ut={class:"input-methods"},dt={key:0,class:"manual-input"},vt={class:"input-tips"},ct={key:1,class:"file-input"},pt={class:"drop-content"},mt={key:2,class:"word-preview"},gt={class:"word-tags"},ft={key:0,class:"more-words"},bt={class:"parameter-section"},_t={class:"parameter-grid"},ht={class:"parameter-item"},kt={class:"parameter-item"},Tt={class:"parameter-item"},yt={class:"parameter-item"},wt={class:"toggle-switch"},St={class:"preview-section"},Ct={class:"preview-info"},xt={class:"info-item"},Wt={class:"info-value"},It={class:"info-item"},Dt={class:"info-value"},Mt={class:"info-item"},Ft={class:"info-value"},Ot={class:"action-buttons"},Vt=["disabled"],Nt={key:1,class:"training-stage"},$t={class:"training-header"},Rt={class:"progress-info"},Ut={class:"progress-bar"},Pt={class:"flash-area"},zt={key:1,class:"flash-placeholder"},Bt={class:"training-controls"},Jt={key:2,class:"result-stage"},Lt={class:"result-stats"},qt={class:"stat-card"},At={class:"stat-number"},Et={class:"stat-card"},jt={class:"stat-number"},Gt={class:"stat-card"},Ht={class:"stat-number"},Kt={class:"stat-card"},Qt={class:"stat-number"},Xt={__name:"CustomWordFlash",setup(Yt){const V=K(),v=u("setup"),m=u("manual"),f=u(""),r=x(()=>f.value.trim()?f.value.split(/[\n,]+/).map(e=>e.trim()).filter(e=>e.length>0):[]),a=u({speed:1e3,interval:1e3,rounds:1,randomOrder:!1}),N=x(()=>{const e=r.value.length*(parseInt(a.value.speed)+parseInt(a.value.interval))*a.value.rounds,s=Math.floor(e/6e4),l=Math.floor(e%6e4/1e3);return`${s}分${l}秒`}),c=u(0),b=u(1),y=u(""),w=u(!1),g=u(!1),_=u([]),p=u(0),I=u(0),S=u(0);let h=null,k=null;const $=x(()=>{if(p.value===0)return 0;const e=(b.value-1)*p.value+c.value,s=a.value.rounds*p.value;return Math.round(e/s*100)}),R=e=>{const s=e.target.files[0];s&&D(s)},U=e=>{e.preventDefault();const s=e.dataTransfer.files[0];s&&D(s)},D=e=>{const s=new FileReader;s.onload=l=>{f.value=l.target.result},s.readAsText(e)},M=()=>{r.value.length!==0&&(v.value="training",_.value=a.value.randomOrder?[...r.value].sort(()=>Math.random()-.5):[...r.value],p.value=_.value.length,c.value=0,b.value=1,I.value=Date.now(),C())},C=()=>{if(!g.value){if(c.value>=_.value.length)if(b.value>=a.value.rounds){J();return}else b.value++,c.value=0,a.value.randomOrder&&(_.value=[...r.value].sort(()=>Math.random()-.5));y.value=_.value[c.value],w.value=!0,h=setTimeout(()=>{w.value=!1,k=setTimeout(()=>{c.value++,C()},parseInt(a.value.interval))},parseInt(a.value.speed))}},P=()=>{g.value=!0,clearTimeout(h),clearTimeout(k)},z=()=>{g.value=!1,C()},B=()=>{clearTimeout(h),clearTimeout(k),v.value="setup",g.value=!1},J=()=>{clearTimeout(h),clearTimeout(k),S.value=Date.now()-I.value,v.value="result",j()},L=()=>{M()},q=()=>{v.value="setup"},A=()=>{V.push("/flash-training")},E=e=>{const s=Math.floor(e/6e4),l=Math.floor(e%6e4/1e3);return`${s}分${l}秒`},j=()=>{const e={date:new Date().toISOString(),wordCount:p.value,rounds:a.value.rounds,duration:S.value,speed:a.value.speed},s=localStorage.getItem("customWordFlashRecords")||"[]",l=JSON.parse(s);l.push(e),localStorage.setItem("customWordFlashRecords",JSON.stringify(l)),G()},G=()=>{const e=JSON.parse(localStorage.getItem("flashTrainingStats")||"{}");e.customWord||(e.customWord={completed:0,bestScore:0}),e.customWord.completed++,localStorage.setItem("flashTrainingStats",JSON.stringify(e))};return Q(()=>{clearTimeout(h),clearTimeout(k)}),(e,s)=>(n(),i("div",ot,[v.value==="setup"?(n(),i("div",nt,[s[28]||(s[28]=t("div",{class:"page-header"},[t("h1",null,"自定义单词闪视训练"),t("p",{class:"page-description"}," 输入您想要训练的单词列表，设置闪视参数，开始个性化的单词记忆训练 ")],-1)),t("div",it,[t("div",rt,[s[14]||(s[14]=t("h3",null,"单词列表设置",-1)),t("div",ut,[t("button",{class:F(["method-btn",{active:m.value==="manual"}]),onClick:s[0]||(s[0]=l=>m.value="manual")}," 手动输入 ",2),t("button",{class:F(["method-btn",{active:m.value==="file"}]),onClick:s[1]||(s[1]=l=>m.value="file")}," 文件导入 ",2)]),m.value==="manual"?(n(),i("div",dt,[T(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=l=>f.value=l),placeholder:"请输入单词列表，每行一个单词或用逗号分隔\\n例如：\\napple\\nbanana\\norange",class:"word-textarea"},null,512),[[X,f.value]]),t("div",vt,[s[10]||(s[10]=t("span",null,"💡 支持每行一个单词或用逗号分隔",-1)),t("span",null,"当前单词数："+o(r.value.length),1)])])):d("",!0),m.value==="file"?(n(),i("div",ct,[t("div",{class:"file-drop-zone",onDrop:U,onDragover:s[4]||(s[4]=O(()=>{},["prevent"])),onDragenter:s[5]||(s[5]=O(()=>{},["prevent"]))},[t("input",{type:"file",ref:"fileInput",onChange:R,accept:".txt,.csv",style:{display:"none"}},null,544),t("div",pt,[s[12]||(s[12]=t("div",{class:"drop-icon"},"📁",-1)),t("p",null,[s[11]||(s[11]=Y("拖拽文件到此处或 ",-1)),t("button",{onClick:s[3]||(s[3]=l=>e.$refs.fileInput.click()),class:"browse-btn"},"浏览文件")]),s[13]||(s[13]=t("p",{class:"file-hint"},"支持 .txt 和 .csv 格式",-1))])],32)])):d("",!0),r.value.length>0?(n(),i("div",mt,[t("h4",null,"单词预览 ("+o(r.value.length)+"个)",1),t("div",gt,[(n(!0),i(Z,null,tt(r.value.slice(0,20),(l,H)=>(n(),i("span",{key:H,class:"word-tag"},o(l),1))),128)),r.value.length>20?(n(),i("span",ft," +"+o(r.value.length-20)+"个更多... ",1)):d("",!0)])])):d("",!0)]),t("div",bt,[s[27]||(s[27]=t("h3",null,"训练参数设置",-1)),t("div",_t,[t("div",ht,[s[16]||(s[16]=t("label",null,"闪视速度",-1)),T(t("select",{"onUpdate:modelValue":s[6]||(s[6]=l=>a.value.speed=l)},s[15]||(s[15]=[st('<option value="2000" data-v-aa2d0261>很慢 (2秒)</option><option value="1500" data-v-aa2d0261>慢速 (1.5秒)</option><option value="1000" data-v-aa2d0261>中速 (1秒)</option><option value="500" data-v-aa2d0261>快速 (0.5秒)</option><option value="300" data-v-aa2d0261>很快 (0.3秒)</option><option value="200" data-v-aa2d0261>极速 (0.2秒)</option>',6)]),512),[[W,a.value.speed]])]),t("div",kt,[s[18]||(s[18]=t("label",null,"间隔时间",-1)),T(t("select",{"onUpdate:modelValue":s[7]||(s[7]=l=>a.value.interval=l)},s[17]||(s[17]=[t("option",{value:"500"},"0.5秒",-1),t("option",{value:"1000"},"1秒",-1),t("option",{value:"1500"},"1.5秒",-1),t("option",{value:"2000"},"2秒",-1)]),512),[[W,a.value.interval]])]),t("div",Tt,[s[20]||(s[20]=t("label",null,"重复次数",-1)),T(t("select",{"onUpdate:modelValue":s[8]||(s[8]=l=>a.value.rounds=l)},s[19]||(s[19]=[t("option",{value:"1"},"1次",-1),t("option",{value:"2"},"2次",-1),t("option",{value:"3"},"3次",-1),t("option",{value:"5"},"5次",-1)]),512),[[W,a.value.rounds]])]),t("div",yt,[s[22]||(s[22]=t("label",null,"随机顺序",-1)),t("div",wt,[T(t("input",{type:"checkbox","onUpdate:modelValue":s[9]||(s[9]=l=>a.value.randomOrder=l),id:"random-toggle"},null,512),[[et,a.value.randomOrder]]),s[21]||(s[21]=t("label",{for:"random-toggle",class:"toggle-label"},null,-1))])])]),t("div",St,[s[26]||(s[26]=t("h4",null,"训练预览",-1)),t("div",Ct,[t("div",xt,[s[23]||(s[23]=t("span",{class:"info-label"},"总单词数：",-1)),t("span",Wt,o(r.value.length),1)]),t("div",It,[s[24]||(s[24]=t("span",{class:"info-label"},"预计时长：",-1)),t("span",Dt,o(N.value),1)]),t("div",Mt,[s[25]||(s[25]=t("span",{class:"info-label"},"闪视速度：",-1)),t("span",Ft,o(a.value.speed)+"ms",1)])])])])]),t("div",Ot,[t("button",{onClick:M,disabled:r.value.length===0,class:"start-btn"}," 开始训练 ",8,Vt)])])):d("",!0),v.value==="training"?(n(),i("div",Nt,[t("div",$t,[t("div",Rt,[t("span",null,"进度："+o(c.value+1)+" / "+o(p.value),1),t("span",null,"轮次："+o(b.value)+" / "+o(a.value.rounds),1)]),t("div",Ut,[t("div",{class:"progress-fill",style:at({width:$.value+"%"})},null,4)])]),t("div",Pt,[w.value?(n(),i("div",{class:"flash-word",key:y.value},o(y.value),1)):(n(),i("div",zt,s[29]||(s[29]=[t("div",{class:"waiting-indicator"},"准备中...",-1)])))]),t("div",Bt,[g.value?d("",!0):(n(),i("button",{key:0,onClick:P,class:"control-btn pause-btn"}," ⏸️ 暂停 ")),g.value?(n(),i("button",{key:1,onClick:z,class:"control-btn resume-btn"}," ▶️ 继续 ")):d("",!0),t("button",{onClick:B,class:"control-btn stop-btn"}," ⏹️ 停止 ")])])):d("",!0),v.value==="result"?(n(),i("div",Jt,[s[34]||(s[34]=t("div",{class:"result-header"},[t("h2",null,"训练完成！"),t("div",{class:"completion-icon"},"🎉")],-1)),t("div",Lt,[t("div",qt,[t("div",At,o(p.value),1),s[30]||(s[30]=t("div",{class:"stat-label"},"训练单词数",-1))]),t("div",Et,[t("div",jt,o(a.value.rounds),1),s[31]||(s[31]=t("div",{class:"stat-label"},"完成轮次",-1))]),t("div",Gt,[t("div",Ht,o(E(S.value)),1),s[32]||(s[32]=t("div",{class:"stat-label"},"训练时长",-1))]),t("div",Kt,[t("div",Qt,o(a.value.speed)+"ms",1),s[33]||(s[33]=t("div",{class:"stat-label"},"闪视速度",-1))])]),t("div",{class:"result-actions"},[t("button",{onClick:L,class:"action-btn primary"}," 重新训练 "),t("button",{onClick:q,class:"action-btn secondary"}," 修改设置 "),t("button",{onClick:A,class:"action-btn secondary"}," 返回主页 ")])])):d("",!0)]))}},ss=lt(Xt,[["__scopeId","data-v-aa2d0261"]]);export{ss as default};
