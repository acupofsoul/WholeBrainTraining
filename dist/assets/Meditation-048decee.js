import{i as r,c as q,j as es,k as Y,o as c,a as u,e as os,w as ns,b as s,t as e,g as _,l as is,T as as,F as Q,h as J,n as T,m as R,p as ss,v as ts,q as ls,s as ds,x as rs,u as cs,r as us,y as X,d as vs}from"./index-e0b54b24.js";import{m as C}from"./meditationStorage-bc872dc6.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import{B as ps}from"./BreadcrumbDropdown-7f07e8d4.js";const ms={class:"achievement-system"},gs={class:"achievement-popup-content"},hs={class:"achievement-popup-badge"},_s={class:"achievement-badge-icon"},ys={class:"achievement-badge-info"},fs={key:0,class:"achievement-badge-reward"},ks={key:0,class:"achievements-display"},bs={class:"achievements-header"},$s={class:"achievements-stats"},ws={class:"unlocked-count"},Cs={class:"completion-rate"},Ss={class:"achievement-categories"},As=["onClick"],Ms={class:"category-icon"},Ts={class:"category-name"},xs={class:"category-count"},Ps={class:"achievements-grid"},Ds={class:"achievement-card-icon"},Rs={class:"achievement-card-content"},zs={class:"achievement-title"},Bs={class:"achievement-description"},Us={key:0,class:"achievement-progress"},Es={class:"progress-bar"},Gs={class:"progress-text"},Is={key:1,class:"achievement-meta"},Ns={class:"achievement-date"},Vs={key:0,class:"achievement-reward"},js={__name:"AchievementSystem",props:{showAchievements:{type:Boolean,default:!0},sessionData:{type:Object,default:()=>({})}},emits:["achievement-unlocked"],setup(z,{expose:L,emit:W}){const B=z,U=W,y=r(!1),p=r(null),f=r("training"),b=r([]),x=[{id:"training",name:"训练成就",icon:"🎯"},{id:"streak",name:"坚持成就",icon:"🔥"},{id:"time",name:"时长成就",icon:"⏰"},{id:"special",name:"特殊成就",icon:"⭐"}],S=[{id:"first_session",title:"初次体验",description:"完成第一次冥想练习",hint:"完成一次冥想训练",icon:"🌟",category:"training",reward:"经验值 +10",checkCondition:a=>a.totalSessions>=1},{id:"session_10",title:"入门修行者",description:"完成10次冥想练习",hint:"完成10次冥想训练",icon:"🧘",category:"training",reward:"经验值 +50",progress:0,target:10,checkCondition:a=>a.totalSessions>=10},{id:"session_50",title:"专注行者",description:"完成50次冥想练习",hint:"完成50次冥想训练",icon:"🎯",category:"training",reward:"经验值 +200",progress:0,target:50,checkCondition:a=>a.totalSessions>=50},{id:"session_100",title:"冥想大师",description:"完成100次冥想练习",hint:"完成100次冥想训练",icon:"🏆",category:"training",reward:"经验值 +500",progress:0,target:100,checkCondition:a=>a.totalSessions>=100},{id:"streak_3",title:"坚持不懈",description:"连续训练3天",hint:"连续多天进行冥想训练",icon:"🔥",category:"streak",reward:"经验值 +30",progress:0,target:3,checkCondition:a=>a.currentStreak>=3},{id:"streak_7",title:"一周坚持",description:"连续训练7天",hint:"连续一周进行冥想训练",icon:"📅",category:"streak",reward:"经验值 +100",progress:0,target:7,checkCondition:a=>a.currentStreak>=7},{id:"streak_30",title:"月度坚持",description:"连续训练30天",hint:"连续一个月进行冥想训练",icon:"🌙",category:"streak",reward:"经验值 +500",progress:0,target:30,checkCondition:a=>a.currentStreak>=30},{id:"time_1hour",title:"时间投入者",description:"累计训练1小时",hint:"累计训练时长达到一定程度",icon:"⏰",category:"time",reward:"经验值 +50",progress:0,target:3600,checkCondition:a=>a.totalDuration>=3600},{id:"time_10hours",title:"专注修行者",description:"累计训练10小时",hint:"累计训练时长达到更高程度",icon:"🕐",category:"time",reward:"经验值 +200",progress:0,target:36e3,checkCondition:a=>a.totalDuration>=36e3},{id:"time_50hours",title:"冥想专家",description:"累计训练50小时",hint:"累计训练时长达到专家级别",icon:"⏳",category:"time",reward:"经验值 +1000",progress:0,target:18e4,checkCondition:a=>a.totalDuration>=18e4},{id:"long_session",title:"深度冥想",description:"单次训练超过30分钟",hint:"进行一次长时间的深度冥想",icon:"🌊",category:"special",reward:"经验值 +100",checkCondition:(a,n)=>(n==null?void 0:n.duration)>=1800},{id:"early_bird",title:"晨间修行者",description:"在早上6点前完成冥想",hint:"在清晨时分进行冥想练习",icon:"🌅",category:"special",reward:"经验值 +50",checkCondition:(a,n)=>n!=null&&n.startTime?new Date(n.startTime).getHours()<6:!1},{id:"night_owl",title:"夜间修行者",description:"在晚上10点后完成冥想",hint:"在夜深人静时进行冥想练习",icon:"🌙",category:"special",reward:"经验值 +50",checkCondition:(a,n)=>n!=null&&n.startTime?new Date(n.startTime).getHours()>=22:!1},{id:"perfect_focus",title:"完美专注",description:"单次训练中注意力保持在90%以上",hint:"在训练中保持极高的专注度",icon:"💎",category:"special",reward:"经验值 +200",checkCondition:(a,n)=>{var v;return(v=n==null?void 0:n.attentionHistory)!=null&&v.length?n.attentionHistory.reduce((M,o)=>M+o,0)/n.attentionHistory.length>=90:!1}}],A=q(()=>S.length),E=q(()=>A.value===0?0:Math.round(b.value.length/A.value*100)),G=q(()=>S.filter(a=>a.category===f.value)),I=()=>{b.value=C.getAchievements()},k=a=>b.value.some(n=>n.id===a),g=a=>{const n=b.value.find(M=>M.id===a);if(!n)return!1;const l=new Date(n.unlockedAt);return new Date-l<24*60*60*1e3},P=a=>{const n=S.filter(v=>v.category===a);return`${n.filter(v=>k(v.id)).length}/${n.length}`},H=a=>!a.progress||!a.target?0:Math.min(a.progress/a.target*100,100),N=a=>{const n=b.value.find(v=>v.id===a);return n?new Date(n.unlockedAt).toLocaleDateString("zh-CN"):""},V=()=>{const a=C.getProgress();S.forEach(n=>{n.target&&n.progress!==void 0&&(n.category==="training"?n.progress=Math.min(a.totalSessions,n.target):n.category==="streak"?n.progress=Math.min(a.currentStreak,n.target):n.category==="time"&&(n.progress=Math.min(a.totalDuration,n.target)))})},j=(a={})=>{const n=C.getProgress(),l=[];S.forEach(v=>{!k(v.id)&&v.checkCondition(n,a)&&C.unlockAchievement(v.id)&&l.push(v)}),l.length>0&&(F(l[0]),I(),U("achievement-unlocked",l))},F=a=>{p.value=a,y.value=!0,setTimeout(()=>{y.value&&$()},3e3)},$=()=>{y.value=!1,p.value=null};return es(()=>B.sessionData,a=>{a&&Object.keys(a).length>0&&j(a)},{deep:!0}),Y(()=>{I(),V(),j()}),L({checkAchievements:j,updateAchievementProgress:V}),(a,n)=>(c(),u("div",ms,[os(as,{name:"achievement-popup"},{default:ns(()=>{var l,v,M,o;return[y.value?(c(),u("div",{key:0,class:"achievement-popup-overlay",onClick:$},[s("div",{class:"achievement-popup",onClick:n[0]||(n[0]=is(()=>{},["stop"]))},[n[2]||(n[2]=s("div",{class:"achievement-popup-header"},[s("div",{class:"achievement-popup-icon"},"🏆"),s("h3",null,"恭喜解锁新成就！")],-1)),s("div",gs,[s("div",hs,[s("div",_s,e((l=p.value)==null?void 0:l.icon),1),s("div",ys,[s("h4",null,e((v=p.value)==null?void 0:v.title),1),s("p",null,e((M=p.value)==null?void 0:M.description),1),(o=p.value)!=null&&o.reward?(c(),u("div",fs,[n[1]||(n[1]=s("span",{class:"reward-icon"},"💎",-1)),s("span",null,e(p.value.reward),1)])):_("",!0)])])]),s("div",{class:"achievement-popup-actions"},[s("button",{class:"achievement-close-btn",onClick:$}," 继续训练 ")])])])):_("",!0)]}),_:1}),z.showAchievements?(c(),u("div",ks,[s("div",bs,[n[3]||(n[3]=s("h3",null,"🏆 成就系统",-1)),s("div",$s,[s("span",ws,e(b.value.length)+"/"+e(A.value),1),s("span",Cs,e(E.value)+"% 完成",1)])]),s("div",Ss,[(c(),u(Q,null,J(x,l=>s("button",{key:l.id,class:T(["category-btn",{active:f.value===l.id}]),onClick:v=>f.value=l.id},[s("span",Ms,e(l.icon),1),s("span",Ts,e(l.name),1),s("span",xs,e(P(l.id)),1)],10,As)),64))]),s("div",Ps,[(c(!0),u(Q,null,J(G.value,l=>(c(),u("div",{key:l.id,class:T(["achievement-card",{unlocked:k(l.id),locked:!k(l.id),recent:g(l.id)}])},[s("div",Ds,e(k(l.id)?l.icon:"🔒"),1),s("div",Rs,[s("h4",zs,e(k(l.id)?l.title:"???"),1),s("p",Bs,e(k(l.id)?l.description:l.hint),1),l.progress!==void 0?(c(),u("div",Us,[s("div",Es,[s("div",{class:"progress-fill",style:R({width:H(l)+"%"})},null,4)]),s("span",Gs,e(l.progress)+"/"+e(l.target),1)])):_("",!0),k(l.id)?(c(),u("div",Is,[s("span",Ns,e(N(l.id)),1),l.reward?(c(),u("span",Vs," 💎 "+e(l.reward),1)):_("",!0)])):_("",!0)])],2))),128))])])):_("",!0)]))}},qs=Z(js,[["__scopeId","data-v-05c24386"]]);const Hs={class:"meditation-analytics"},Os={class:"analytics-content"},Ls={class:"analytics-body"},Ws={class:"overview-section"},Fs={class:"overview-grid"},Qs={class:"overview-card"},Js={class:"card-content"},Ks={class:"card-value"},Xs={class:"overview-card"},Ys={class:"card-content"},Zs={class:"card-value"},st={class:"overview-card"},tt={class:"card-content"},et={class:"card-value"},ot={class:"overview-card"},it={class:"card-content"},nt={class:"card-value"},at={class:"trend-section"},lt={class:"trend-chart"},dt={class:"chart-container"},rt={class:"trend-insights"},ct={class:"insight-content"},ut={class:"modules-section"},vt={class:"modules-grid"},pt={class:"module-header"},mt={class:"module-icon"},gt={class:"module-name"},ht={class:"module-stats"},_t={class:"stat-row"},yt={class:"stat-value"},ft={class:"stat-row"},kt={class:"stat-value"},bt={class:"stat-row"},$t={class:"stat-value"},wt={class:"stat-row"},Ct={class:"module-progress"},St={class:"progress-bar"},At={class:"progress-text"},Mt={class:"recommendations-section"},Tt={class:"recommendations-list"},xt={class:"rec-content"},Pt={class:"rec-actions"},Dt=["onClick"],Rt=["onClick"],zt={class:"goals-section"},Bt={class:"goals-grid"},Ut={class:"goal-card"},Et={class:"goal-input"},Gt={class:"goal-progress"},It={class:"progress-bar"},Nt={class:"progress-text"},Vt={class:"goal-card"},jt={class:"goal-input"},qt={class:"goal-progress"},Ht={class:"progress-bar"},Ot={class:"progress-text"},Lt={key:1,class:"quick-stats"},Wt={class:"stats-grid"},Ft={class:"stat-item"},Qt={class:"stat-content"},Jt={class:"stat-value"},Kt={class:"stat-item"},Xt={class:"stat-content"},Yt={class:"stat-value"},Zt={class:"stat-item"},se={class:"stat-content"},te={class:"stat-value"},ee={__name:"MeditationAnalytics",props:{showAnalytics:{type:Boolean,default:!1},sessionData:{type:Object,default:()=>({})}},emits:["close","recommendation-applied"],setup(z,{emit:L}){const W=z,B=L,U=r(null),y=r(20),p=r(150),f=r(0),b=r(0),x=r(0),S=r(0),A=r(0),E=r(0),G=r([{name:"呼吸训练",icon:"🫁",sessions:0,duration:0,averageScore:0,improvement:0,progress:0},{name:"正念冥想",icon:"🧘‍♀️",sessions:0,duration:0,averageScore:0,improvement:0,progress:0},{name:"想象训练",icon:"🌟",sessions:0,duration:0,averageScore:0,improvement:0,progress:0},{name:"脑波生成",icon:"🧠",sessions:0,duration:0,averageScore:0,improvement:0,progress:0}]),I=r([{type:"positive",icon:"📈",title:"训练频率提升",description:"相比上周，您的训练频率提升了25%，保持这个节奏！"},{type:"neutral",icon:"⏰",title:"最佳训练时间",description:"数据显示您在晚上8-9点的训练效果最佳"},{type:"suggestion",icon:"💡",title:"建议尝试新模块",description:"您在呼吸训练方面表现优秀，建议尝试进阶的正念冥想"}]),k=r([{id:"breathing-advanced",priority:"high",title:"尝试进阶呼吸训练",description:"基于您的训练数据，建议尝试4-7-8呼吸法来进一步提升放松效果",action:"breathing-478"},{id:"consistency-improvement",priority:"medium",title:"提升训练一致性",description:"设置每日提醒，建议在固定时间进行训练以建立习惯",action:"set-reminder"},{id:"mindfulness-intro",priority:"low",title:"探索正念冥想",description:"您在专注力方面有很好的基础，正念冥想可以进一步提升觉察能力",action:"mindfulness-basic"}]),g=q(()=>y.value>0?f.value/y.value*100:0),P=q(()=>p.value>0?b.value/p.value*100:0),H=o=>{const t=Math.floor(o/3600),i=Math.floor(o%3600/60);return t>0?`${t}小时${i}分钟`:`${i}分钟`},N=()=>{try{const o=C.getProgress(),t=C.getStatistics(),i=C.getSessionHistory();if(x.value=o.totalSessions||0,S.value=o.totalDuration||0,A.value=o.currentStreak||0,i.length>0){const d=i.reduce((m,w)=>m+(w.rating||0),0);E.value=Math.round(d/i.length)}V(o),j(i),F(o,t,i)}catch(o){console.error("加载分析数据失败:",o)}},V=o=>{const t=["breathing","mindfulness","visualization","brainwave"],i=["呼吸训练","正念冥想","想象训练","脑波生成"],d=["🫁","🧘‍♀️","🌟","🧠"];t.forEach((m,w)=>{const h=o[m]||{};G.value[w]={name:i[w],icon:d[w],sessions:h.sessions||0,duration:h.duration||0,averageScore:Math.round(Math.random()*20+70),improvement:Math.round((Math.random()-.5)*20),progress:Math.min((h.sessions||0)*10,100)}})},j=o=>{const t=new Date,i=new Date(t);i.setDate(t.getDate()-t.getDay()),f.value=0,b.value=0,o.forEach(d=>{const m=new Date(d.date),w=Math.round((d.duration||0)/60);m.toDateString()===t.toDateString()&&(f.value+=w),m>=i&&(b.value+=w)})},F=(o,t,i)=>{const d=[];A.value<3&&d.push({id:"consistency-improvement",priority:"high",title:"建立训练习惯",description:"连续训练可以显著提升效果，建议设置每日提醒",action:"set-reminder"});const m=o.breathing||{};m.sessions>5&&m.sessions<15&&d.push({id:"breathing-advanced",priority:"medium",title:"尝试进阶呼吸训练",description:"您在基础呼吸训练方面表现良好，可以尝试更高级的技巧",action:"breathing-advanced"}),f.value<y.value*.5&&d.push({id:"increase-duration",priority:"medium",title:"增加训练时长",description:"适当延长训练时间可以获得更好的效果",action:"extend-session"}),k.value=d.slice(0,3)},$=()=>{if(!U.value)return;const o=U.value,t=o.getContext("2d"),i=o.width,d=o.height;t.clearRect(0,0,i,d);const m=[15,20,18,25,22,30,28],w=["周一","周二","周三","周四","周五","周六","周日"];t.strokeStyle="#e5e7eb",t.lineWidth=1;for(let h=0;h<=4;h++){const D=(d-40)*h/4+20;t.beginPath(),t.moveTo(40,D),t.lineTo(i-20,D),t.stroke()}t.strokeStyle="#10b981",t.lineWidth=3,t.beginPath(),m.forEach((h,D)=>{const O=40+(i-60)*D/(m.length-1),K=d-40-h/35*(d-60);D===0?t.moveTo(O,K):t.lineTo(O,K)}),t.stroke(),t.fillStyle="#10b981",m.forEach((h,D)=>{const O=40+(i-60)*D/(m.length-1),K=d-40-h/35*(d-60);t.beginPath(),t.arc(O,K,4,0,2*Math.PI),t.fill()}),t.fillStyle="#6b7280",t.font="12px sans-serif",t.textAlign="center",w.forEach((h,D)=>{const O=40+(i-60)*D/(w.length-1);t.fillText(h,O,d-10)})},a=()=>{N(),B("open"),ls(()=>{$()})},n=()=>{B("close")},l=o=>{B("recommendation-applied",o)},v=o=>{const t=k.value.findIndex(i=>i.id===o.id);t>-1&&k.value.splice(t,1)},M=()=>{try{const o=C.getPreferences();o.dailyGoal=y.value,o.weeklyGoal=p.value,C.savePreferences(o),alert("目标设置已保存！")}catch(o){console.error("保存目标失败:",o),alert("保存失败，请重试")}};return es(()=>W.showAnalytics,o=>{o&&a()}),Y(()=>{N();const o=C.getPreferences();y.value=o.dailyGoal||20,p.value=o.weeklyGoal||150}),(o,t)=>(c(),u("div",Hs,[z.showAnalytics?(c(),u("div",{key:0,class:"analytics-modal",onClick:is(n,["self"])},[s("div",Os,[s("div",{class:"analytics-header"},[t[2]||(t[2]=s("h2",null,"冥想训练分析报告",-1)),s("button",{class:"close-btn",onClick:n},"×")]),s("div",Ls,[s("div",Ws,[t[11]||(t[11]=s("h3",null,"训练概览",-1)),s("div",Fs,[s("div",Qs,[t[4]||(t[4]=s("div",{class:"card-icon"},"📊",-1)),s("div",Js,[s("span",Ks,e(x.value),1),t[3]||(t[3]=s("span",{class:"card-label"},"总训练次数",-1))])]),s("div",Xs,[t[6]||(t[6]=s("div",{class:"card-icon"},"⏱️",-1)),s("div",Ys,[s("span",Zs,e(H(S.value)),1),t[5]||(t[5]=s("span",{class:"card-label"},"总训练时长",-1))])]),s("div",st,[t[8]||(t[8]=s("div",{class:"card-icon"},"🔥",-1)),s("div",tt,[s("span",et,e(A.value),1),t[7]||(t[7]=s("span",{class:"card-label"},"连续天数",-1))])]),s("div",ot,[t[10]||(t[10]=s("div",{class:"card-icon"},"📈",-1)),s("div",it,[s("span",nt,e(E.value)+"%",1),t[9]||(t[9]=s("span",{class:"card-label"},"平均评分",-1))])])])]),s("div",at,[t[12]||(t[12]=s("h3",null,"训练趋势",-1)),s("div",lt,[s("div",dt,[s("canvas",{ref_key:"trendChart",ref:U,width:"400",height:"200"},null,512)]),s("div",rt,[(c(!0),u(Q,null,J(I.value,i=>(c(),u("div",{class:"insight-item",key:i.type},[s("div",{class:T(["insight-icon",i.type])},e(i.icon),3),s("div",ct,[s("h4",null,e(i.title),1),s("p",null,e(i.description),1)])]))),128))])])]),s("div",ut,[t[17]||(t[17]=s("h3",null,"模块表现",-1)),s("div",vt,[(c(!0),u(Q,null,J(G.value,i=>(c(),u("div",{class:"module-card",key:i.name},[s("div",pt,[s("span",mt,e(i.icon),1),s("span",gt,e(i.name),1)]),s("div",ht,[s("div",_t,[t[13]||(t[13]=s("span",{class:"stat-label"},"训练次数",-1)),s("span",yt,e(i.sessions),1)]),s("div",ft,[t[14]||(t[14]=s("span",{class:"stat-label"},"总时长",-1)),s("span",kt,e(H(i.duration)),1)]),s("div",bt,[t[15]||(t[15]=s("span",{class:"stat-label"},"平均评分",-1)),s("span",$t,e(i.averageScore)+"%",1)]),s("div",wt,[t[16]||(t[16]=s("span",{class:"stat-label"},"进步幅度",-1)),s("span",{class:T(["stat-value",{positive:i.improvement>0,negative:i.improvement<0}])},e(i.improvement>0?"+":"")+e(i.improvement)+"% ",3)])]),s("div",Ct,[s("div",St,[s("div",{class:"progress-fill",style:R({width:i.progress+"%"})},null,4)]),s("span",At,e(i.progress)+"% 完成",1)])]))),128))])]),s("div",Mt,[t[18]||(t[18]=s("h3",null,"个性化建议",-1)),s("div",Tt,[(c(!0),u(Q,null,J(k.value,i=>(c(),u("div",{class:"recommendation-item",key:i.id},[s("div",{class:T(["rec-priority",i.priority])},e(i.priority==="high"?"重要":i.priority==="medium"?"建议":"可选"),3),s("div",xt,[s("h4",null,e(i.title),1),s("p",null,e(i.description),1),s("div",Pt,[s("button",{class:"rec-btn primary",onClick:d=>l(i)},"立即尝试",8,Dt),s("button",{class:"rec-btn secondary",onClick:d=>v(i)},"稍后提醒",8,Rt)])])]))),128))])]),s("div",zt,[t[23]||(t[23]=s("h3",null,"训练目标",-1)),s("div",Bt,[s("div",Ut,[t[20]||(t[20]=s("h4",null,"每日目标",-1)),s("div",Et,[ss(s("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=i=>y.value=i),min:"5",max:"120",step:"5"},null,512),[[ts,y.value]]),t[19]||(t[19]=s("span",{class:"goal-unit"},"分钟",-1))]),s("div",Gt,[s("div",It,[s("div",{class:"progress-fill",style:R({width:g.value+"%"})},null,4)]),s("span",Nt,"今日完成 "+e(f.value)+"/"+e(y.value)+" 分钟",1)])]),s("div",Vt,[t[22]||(t[22]=s("h4",null,"每周目标",-1)),s("div",jt,[ss(s("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=i=>p.value=i),min:"30",max:"840",step:"30"},null,512),[[ts,p.value]]),t[21]||(t[21]=s("span",{class:"goal-unit"},"分钟",-1))]),s("div",qt,[s("div",Ht,[s("div",{class:"progress-fill",style:R({width:P.value+"%"})},null,4)]),s("span",Ot,"本周完成 "+e(b.value)+"/"+e(p.value)+" 分钟",1)])])]),s("button",{class:"save-goals-btn",onClick:M},"保存目标")])])])])):_("",!0),z.showAnalytics?_("",!0):(c(),u("div",Lt,[s("div",{class:"stats-header"},[t[24]||(t[24]=s("h3",null,"训练统计",-1)),s("button",{class:"view-analytics-btn",onClick:a},"查看详细分析")]),s("div",Wt,[s("div",Ft,[t[26]||(t[26]=s("span",{class:"stat-icon"},"📅",-1)),s("div",Qt,[s("span",Jt,e(f.value),1),t[25]||(t[25]=s("span",{class:"stat-label"},"今日训练（分钟）",-1))])]),s("div",Kt,[t[28]||(t[28]=s("span",{class:"stat-icon"},"🎯",-1)),s("div",Xt,[s("span",Yt,e(Math.round(g.value))+"%",1),t[27]||(t[27]=s("span",{class:"stat-label"},"目标完成度",-1))])]),s("div",Zt,[t[30]||(t[30]=s("span",{class:"stat-icon"},"🔥",-1)),s("div",se,[s("span",te,e(A.value),1),t[29]||(t[29]=s("span",{class:"stat-label"},"连续天数",-1))])])])]))]))}},oe=Z(ee,[["__scopeId","data-v-738251ee"]]);const ie={class:"meditation-container"},ne={key:1,class:"page-header"},ae={key:2,class:"daily-recommendation"},le={class:"recommendation-content"},de={class:"recommendation-info"},re={class:"recommendation-meta"},ce={class:"duration"},ue={class:"type"},ve={key:3,class:"modules-section"},pe={class:"training-modules"},me={class:"module-header"},ge={class:"module-progress"},he={class:"progress-bar"},_e={class:"progress-text"},ye={class:"module-header"},fe={class:"module-progress"},ke={class:"progress-bar"},be={class:"progress-text"},$e={class:"module-header"},we={class:"module-progress"},Ce={class:"progress-bar"},Se={class:"progress-text"},Ae={key:4,class:"sub-modules-section"},Me={class:"sub-modules-grid"},Te={key:5,class:"progress-section"},xe={class:"section-header"},Pe={class:"header-actions"},De={class:"progress-overview"},Re={class:"stat-card primary"},ze={class:"stat-content"},Be={class:"stat-value"},Ue={class:"stat-trend positive"},Ee={class:"stat-card secondary"},Ge={class:"stat-content"},Ie={class:"stat-value"},Ne={class:"stat-card tertiary"},Ve={class:"stat-content"},je={class:"stat-value"},qe={class:"stat-card quaternary"},He={class:"stat-content"},Oe={class:"stat-value"},Le={class:"stat-trend positive"},We={key:0,class:"detailed-stats"},Fe={class:"stats-grid"},Qe={class:"detail-stat"},Je={class:"goal-progress"},Ke={class:"goal-bar"},Xe={class:"goal-text"},Ye={class:"detail-stat"},Ze={class:"best-streak"},so={class:"streak-number"},to={class:"detail-stat"},eo={class:"average-session"},oo={class:"session-number"},io={class:"detail-stat"},no={class:"favorite-module"},ao={class:"module-name"},lo={__name:"Meditation",setup(z){const L=ds();rs(),cs();const W=[{path:"/meditation/guided",title:"引导冥想"},{path:"/meditation/brainwave-generator",title:"脑波发生器"},{path:"/meditation/metronome",title:"节拍器训练"},{path:"/meditation/breathing",title:"呼吸训练"},{path:"/meditation/visualization",title:"想象力训练"},{path:"/meditation/mindfulness",title:"正念训练"}],B={"/meditation/guided":"引导冥想","/meditation/brainwave-generator":"脑波发生器","/meditation/metronome":"节拍器训练","/meditation/breathing":"呼吸训练","/meditation/breathing/basic":"基础呼吸训练","/meditation/breathing/relaxation":"放松呼吸训练","/meditation/breathing/focus":"专注呼吸训练","/meditation/visualization":"想象力训练","/meditation/mindfulness":"正念训练","/meditation/guided/mindfulness":"正念冥想","/meditation/guided/relaxation":"放松冥想","/meditation/guided/focus":"专注冥想","/meditation/guided/sleep":"睡眠冥想","/meditation/guided/healing":"疗愈冥想","/meditation/guided/creativity":"创造力冥想"},U=o=>B[o]||"冥想训练",y=r(0),p=r(0),f=r(0),b=r(0),x=r(!1),S=r(!1),A=r(0),E=r(150),G=r(0),I=r(0),k=r("语音引导冥想"),g=r({guidedMeditation:0,brainwave:0,metronome:0}),P=r({title:"晨间唤醒冥想",description:"以轻柔的引导和自然音效开始美好的一天",duration:10,type:"语音引导"}),H=r(null),N=r({}),V=r([]),j=q(()=>Math.min(A.value/E.value*100,100)),F=q(()=>C.getAchievements().length>0?"最新成就已解锁":"继续努力"),$=o=>{L.push(o)},a=()=>{$("/meditation/guided")},n=()=>{$("/meditation/guided")},l=o=>{console.log("新成就解锁:",o),M()},v=o=>{console.log("应用推荐:",o)},M=async()=>{var o,t,i;try{const d=C.getProgress()||{},m=C.getStatistics()||{},w=C.getAchievements()||[];y.value=Math.round((d.totalDuration||0)/60),p.value=d.currentStreak||0,f.value=Object.values(d).filter(h=>typeof h=="object"&&h&&h.sessions>0).length,b.value=m.todayDuration?Math.round(m.todayDuration/60):0,A.value=m.weeklyDuration?Math.round(m.weeklyDuration/60):0,G.value=d.longestStreak||0,I.value=(d.totalSessions||0)>0?Math.round((d.totalDuration||0)/(d.totalSessions||1)/60):0,g.value={guidedMeditation:((o=d.breathing)==null?void 0:o.sessions)||0,brainwave:((t=d.brainwave)==null?void 0:t.sessions)||0,metronome:((i=d.metronome)==null?void 0:i.sessions)||0},V.value=w,console.log("训练数据加载完成:",{progress:d,stats:m,achievements:w})}catch(d){console.error("加载训练数据失败:",d)}};return Y(()=>{M()}),(o,t)=>{const i=us("router-view");return c(),u("div",ie,[o.$route.path!=="/meditation"?(c(),X(ps,{key:0,"main-title":"冥想训练","main-path":"/meditation","current-title":U(o.$route.path),"sibling-modules":W},null,8,["current-title"])):_("",!0),o.$route.path==="/meditation"?(c(),u("div",ne,[t[11]||(t[11]=vs('<div class="header-background" data-v-fec6428b><div class="floating-elements" data-v-fec6428b><div class="floating-circle circle-1" data-v-fec6428b></div><div class="floating-circle circle-2" data-v-fec6428b></div><div class="floating-circle circle-3" data-v-fec6428b></div></div></div><h1 data-v-fec6428b>冥想与放松训练</h1><p class="page-description" data-v-fec6428b> 通过冥想训练帮助孩子放松身心，提高专注力，为后续的全脑开发训练打下良好基础。 这是七田真全脑开发的第一阶段，也是最重要的基础训练。 </p>',3)),s("div",{class:"quick-start-section"},[s("button",{class:"quick-start-btn",onClick:a},t[9]||(t[9]=[s("span",{class:"btn-icon"},"⚡",-1),s("span",null,"快速开始 5分钟冥想",-1)])),t[10]||(t[10]=s("p",{class:"quick-start-hint"},"基于您的偏好推荐最适合的冥想练习",-1))])])):_("",!0),P.value&&o.$route.path==="/meditation"?(c(),u("div",ae,[t[12]||(t[12]=s("div",{class:"recommendation-header"},[s("h3",null,"🌟 今日推荐"),s("span",{class:"recommendation-badge"},"个性化")],-1)),s("div",le,[s("div",de,[s("h4",null,e(P.value.title),1),s("p",null,e(P.value.description),1),s("div",re,[s("span",ce,"⏱️ "+e(P.value.duration)+"分钟",1),s("span",ue,"🎯 "+e(P.value.type),1)])]),s("button",{class:"start-recommendation-btn",onClick:n}," 开始练习 ")])])):_("",!0),o.currentView==="main"?(c(),u("div",ve,[t[28]||(t[28]=s("h2",{class:"section-title"},"训练模块",-1)),s("div",pe,[s("div",{class:"module-card guided-meditation",onClick:t[0]||(t[0]=d=>$("/meditation/guided"))},[s("div",me,[t[13]||(t[13]=s("div",{class:"module-icon"},"🎧",-1)),s("div",{class:T(["module-status",{active:g.value.guidedMeditation>0}])},e(g.value.guidedMeditation>0?"进行中":"未开始"),3)]),t[14]||(t[14]=s("h3",null,"引导冥想",-1)),t[15]||(t[15]=s("p",null,"通过温和的语音引导，帮助孩子学会放松和集中注意力",-1)),t[16]||(t[16]=s("div",{class:"module-features"},[s("span",{class:"feature-tag"},"🧘 深度放松"),s("span",{class:"feature-tag"},"🎵 背景音乐"),s("span",{class:"feature-tag"},"👶 适合初学者")],-1)),s("div",ge,[s("div",he,[s("div",{class:"progress-fill",style:R({width:g.value.guidedMeditation+"%"})},null,4)]),s("span",_e,e(g.value.guidedMeditation)+"% 完成",1)]),t[17]||(t[17]=s("div",{class:"module-level"},"适合年龄：3-12岁",-1))]),s("div",{class:"module-card brainwave",onClick:t[1]||(t[1]=d=>$("/meditation/brainwave-generator"))},[s("div",ye,[t[18]||(t[18]=s("div",{class:"module-icon"},"🧠",-1)),s("div",{class:T(["module-status",{active:g.value.brainwave>0}])},e(g.value.brainwave>0?"进行中":"未开始"),3)]),t[19]||(t[19]=s("h3",null,"脑波发生器",-1)),t[20]||(t[20]=s("p",null,"使用特定频率的音频帮助大脑进入最佳学习状态",-1)),t[21]||(t[21]=s("div",{class:"module-features"},[s("span",{class:"feature-tag"},"🌊 Alpha波"),s("span",{class:"feature-tag"},"⚡ Beta波"),s("span",{class:"feature-tag"},"🎯 专注训练")],-1)),s("div",fe,[s("div",ke,[s("div",{class:"progress-fill",style:R({width:g.value.brainwave+"%"})},null,4)]),s("span",be,e(g.value.brainwave)+"% 完成",1)]),t[22]||(t[22]=s("div",{class:"module-level"},"适合年龄：5-12岁",-1))]),s("div",{class:"module-card metronome",onClick:t[2]||(t[2]=d=>$("/meditation/metronome"))},[s("div",$e,[t[23]||(t[23]=s("div",{class:"module-icon"},"⏱️",-1)),s("div",{class:T(["module-status",{active:g.value.metronome>0}])},e(g.value.metronome>0?"进行中":"未开始"),3)]),t[24]||(t[24]=s("h3",null,"节拍器训练",-1)),t[25]||(t[25]=s("p",null,"通过有节奏的声音训练，提高专注力和时间感知能力",-1)),t[26]||(t[26]=s("div",{class:"module-features"},[s("span",{class:"feature-tag"},"🎵 节奏感"),s("span",{class:"feature-tag"},"⏰ 时间感知"),s("span",{class:"feature-tag"},"🎯 专注力")],-1)),s("div",we,[s("div",Ce,[s("div",{class:"progress-fill",style:R({width:g.value.metronome+"%"})},null,4)]),s("span",Se,e(g.value.metronome)+"% 完成",1)]),t[27]||(t[27]=s("div",{class:"module-level"},"适合年龄：4-12岁",-1))])])])):_("",!0),o.$route.path==="/meditation"?(c(),u("div",Ae,[t[32]||(t[32]=s("h2",{class:"section-title"},"专项训练",-1)),s("div",Me,[s("div",{class:"sub-module-card breathing",onClick:t[3]||(t[3]=d=>$("/meditation/breathing"))},t[29]||(t[29]=[s("div",{class:"sub-module-icon"},"🫁",-1),s("h4",null,"呼吸训练",-1),s("p",null,"通过呼吸节奏训练提升专注力和放松能力",-1),s("div",{class:"sub-module-features"},[s("span",{class:"sub-feature-tag"},"深呼吸"),s("span",{class:"sub-feature-tag"},"节奏控制")],-1)])),s("div",{class:"sub-module-card visualization",onClick:t[4]||(t[4]=d=>$("/meditation/visualization"))},t[30]||(t[30]=[s("div",{class:"sub-module-icon"},"🌈",-1),s("h4",null,"想象力训练",-1),s("p",null,"通过引导想象激发创造力和右脑潜能",-1),s("div",{class:"sub-module-features"},[s("span",{class:"sub-feature-tag"},"视觉化"),s("span",{class:"sub-feature-tag"},"创造力")],-1)])),s("div",{class:"sub-module-card mindfulness",onClick:t[5]||(t[5]=d=>$("/meditation/mindfulness"))},t[31]||(t[31]=[s("div",{class:"sub-module-icon"},"🧘‍♀️",-1),s("h4",null,"正念训练",-1),s("p",null,"培养当下觉察能力，提升情绪管理技能",-1),s("div",{class:"sub-module-features"},[s("span",{class:"sub-feature-tag"},"觉察力"),s("span",{class:"sub-feature-tag"},"情绪管理")],-1)]))])])):_("",!0),o.$route.path==="/meditation"?(c(),u("div",Te,[s("div",xe,[t[33]||(t[33]=s("h3",null,"训练进度",-1)),s("div",Pe,[s("button",{class:"view-analytics-btn",onClick:t[6]||(t[6]=d=>S.value=!0)}," 📊 数据分析 "),s("button",{class:"view-details-btn",onClick:t[7]||(t[7]=d=>x.value=!x.value)},e(x.value?"收起详情":"查看详情"),1)])]),s("div",De,[s("div",Re,[t[35]||(t[35]=s("div",{class:"stat-icon"},"⏱️",-1)),s("div",ze,[s("span",Be,e(y.value),1),t[34]||(t[34]=s("span",{class:"stat-label"},"总训练时长（分钟）",-1)),s("div",Ue,"+"+e(b.value)+"分钟 今日",1)])]),s("div",Ee,[t[37]||(t[37]=s("div",{class:"stat-icon"},"🔥",-1)),s("div",Ge,[s("span",Ie,e(p.value),1),t[36]||(t[36]=s("span",{class:"stat-label"},"连续训练天数",-1)),s("div",{class:T(["stat-trend",{positive:p.value>0}])},e(p.value>0?"保持连续":"开始训练"),3)])]),s("div",Ne,[t[39]||(t[39]=s("div",{class:"stat-icon"},"🎯",-1)),s("div",Ve,[s("span",je,e(f.value)+"/3",1),t[38]||(t[38]=s("span",{class:"stat-label"},"完成模块",-1)),s("div",{class:T(["stat-trend",{positive:f.value>0}])},e(Math.round(f.value/3*100))+"% 完成 ",3)])]),s("div",qe,[t[41]||(t[41]=s("div",{class:"stat-icon"},"🏆",-1)),s("div",He,[s("span",Oe,e(V.value.length),1),t[40]||(t[40]=s("span",{class:"stat-label"},"获得成就",-1)),s("div",Le,e(F.value||"继续努力"),1)])])]),x.value?(c(),u("div",We,[s("div",Fe,[s("div",Qe,[t[42]||(t[42]=s("h4",null,"本周目标",-1)),s("div",Je,[s("div",Ke,[s("div",{class:"goal-fill",style:R({width:j.value+"%"})},null,4)]),s("span",Xe,e(A.value)+"/"+e(E.value)+"分钟",1)])]),s("div",Ye,[t[44]||(t[44]=s("h4",null,"最佳连续记录",-1)),s("div",Ze,[s("span",so,e(G.value),1),t[43]||(t[43]=s("span",{class:"streak-unit"},"天",-1))])]),s("div",to,[t[46]||(t[46]=s("h4",null,"平均会话时长",-1)),s("div",eo,[s("span",oo,e(I.value),1),t[45]||(t[45]=s("span",{class:"session-unit"},"分钟",-1))])]),s("div",io,[t[47]||(t[47]=s("h4",null,"最喜欢的模块",-1)),s("div",no,[s("span",ao,e(k.value),1)])])])])):_("",!0)])):_("",!0),o.$route.path==="/meditation"?(c(),X(qs,{key:6,"show-achievements":!0,"session-data":N.value,onAchievementUnlocked:l,ref_key:"achievementSystemRef",ref:H},null,8,["session-data"])):_("",!0),os(oe,{"show-analytics":S.value,"session-data":N.value,onClose:t[8]||(t[8]=d=>S.value=!1),onRecommendationApplied:v},null,8,["show-analytics","session-data"]),o.$route.path!=="/meditation"?(c(),X(i,{key:7})):_("",!0)])}}},po=Z(lo,[["__scopeId","data-v-fec6428b"]]);export{po as default};
