import{c as h,k as c,C as ns,l as Vs,q as Rs,o as l,a,b as s,F as v,h as m,g,t as i,n as p,m as x,s as y,v as L,D as Us,x as zs,y as J,z as os}from"./index-7434e420.js";import{u as Fs,a as Bs,b as Os}from"./useBasicTraining-c6520dac.js";import{_ as Qs}from"./_plugin-vue_export-helper-c27b6911.js";const Ds={name:"OverallPerception",emits:["back"],setup(is,{emit:t}){const I=Fs("overall-perception"),{isTraining:e,isPaused:P,isCompleted:ls,selectedMode:n,currentTarget:d,foundCount:u,totalCount:N,elapsedTime:as,completionTime:ze,errorCount:Fe,showHint:Be,startTraining:rs,pauseTraining:cs,resumeTraining:ds,stopTraining:us,completeTraining:Oe,updateProgress:Qe,resetTraining:De}=I,{settings:M,updateSettings:Ae,resetSettings:Ee}=Os(I),{stats:V,formattedStats:vs,getChartData:K,getAchievementProgress:He}=Bs(I),ms=h(()=>vs.value);h(()=>K.value.weekly),h(()=>K.value.monthly),h(()=>V),h(()=>V.recentSessions||[]),h(()=>V.achievements||[]);const k=c(0),w=c(0),j=c(10),_=c(0),G=c(1),gs=c(0),R=c(!1),U=c(-1),z=c(!1),F=c(""),B=c(-1),O=c(!1),W=c(""),X=c(""),Q=c(!1),ps=c(16),bs=c([{id:"shapes",name:"图形感知训练",icon:"🔷",level:"beginner",levelText:"初级",description:"通过观察和记忆各种图形的位置、颜色和形状，提升视觉整体感知能力",duration:10,difficulty:2,completedCount:15,progress:75,features:["多种几何图形","颜色识别","位置记忆","形状匹配"],benefits:["提升视觉注意力","增强空间感知","改善图形识别能力"]},{id:"numbers",name:"数字感知训练",icon:"🔢",level:"intermediate",levelText:"中级",description:"快速识别和记忆数字序列，训练数字信息的整体处理能力",duration:15,difficulty:3,completedCount:8,progress:60,features:["数字序列记忆","快速识别","顺序重现","数字运算"],benefits:["提升数字敏感度","增强短期记忆","改善逻辑思维"]},{id:"colors",name:"颜色感知训练",icon:"🎨",level:"beginner",levelText:"初级",description:"识别颜色差异和变化，提升色彩感知的敏锐度和整体观察力",duration:8,difficulty:1,completedCount:22,progress:85,features:["色彩辨识","细微差别","颜色搭配","色调变化"],benefits:["提升色彩敏感度","增强视觉辨别力","改善美感认知"]},{id:"words",name:"文字感知训练",icon:"📝",level:"advanced",levelText:"高级",description:"快速阅读和理解文字内容，培养文字信息的整体把握能力",duration:20,difficulty:4,completedCount:5,progress:40,features:["快速阅读","理解测试","关键词提取","语义分析"],benefits:["提升阅读速度","增强理解能力","改善信息处理"]}]),Y=c([]),q=c([]),D=c([]),Z=c(""),A=c([]),_s=ns({shapes:3.5,numbers:2.8,colors:4.2,words:2.1,patterns:3,spatial:2.5,memory:3.3,attention:3.8}),C=ns({accuracy:0,duration:0,score:0,level:1,perfectRounds:0,achievement:null}),fs=h(()=>{if(!n.value)return 0;const o=n.value.duration*60;return(o-k.value)/o*100});let f=null;const hs=o=>{n.value=o},$=o=>{n.value=o,e.value=!0,P.value=!1,k.value=o.duration*60,w.value=1,_.value=0,ts(o),ss(),rs(o)},ys=()=>{P.value?(ds(),ss()):(cs(),f&&clearInterval(f))},E=()=>{f&&clearInterval(f);const o=n.value.duration*60-k.value,r=Math.round(_.value/(w.value*10)*100);C.accuracy=r,C.duration=o,C.score=_.value,C.level=G.value,C.perfectRounds=Math.floor(_.value/10*.8),updateStats({mode:n.value.id,duration:o,accuracy:r,score:_.value,completed:!0}),R.value=!0,us()},ss=()=>{f=setInterval(()=>{k.value>0?k.value--:E()},1e3)},ts=o=>{switch(o.id){case"shapes":ks();break;case"numbers":Cs();break;case"colors":Ss();break;case"words":xs();break}},ks=()=>{const o=[],r=["circle","square","triangle"],b=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57"];for(let S=0;S<M.value.elementCount;S++)o.push({type:r[Math.floor(Math.random()*r.length)],color:b[Math.floor(Math.random()*b.length)],x:Math.random()*80,y:Math.random()*80});Y.value=o},Cs=()=>{const o=[];for(let r=0;r<M.value.elementCount;r++)o.push(Math.floor(Math.random()*100));q.value=o,Ts()},Ts=()=>{let o=0;const r=setInterval(()=>{U.value=o,o++,o>=q.value.length&&(clearInterval(r),U.value=-1,z.value=!0)},1e3)},Ss=()=>{const o="#4ecdc4",r=[o];for(let S=1;S<M.value.elementCount;S++)r.push(o);const b=Math.floor(Math.random()*r.length);r[b]="#ff6b6b",D.value=r},xs=()=>{const o=["快速阅读是一种高效的阅读技巧，通过训练可以显著提升阅读速度和理解能力。","整体感知训练有助于提升大脑的信息处理能力，改善学习和工作效率。","视觉训练可以增强眼部肌肉的协调性，提高视觉注意力和专注度。"];Z.value=o[Math.floor(Math.random()*o.length)],setTimeout(()=>{Ms(),Q.value=!0},M.value.displayTime*1e3)},Ms=()=>{A.value=[{text:"文章的主要内容是什么？",options:["阅读技巧","视觉训练","记忆方法","注意力训练"],correct:0}]},ws=()=>{const o=F.value.split(",").map(b=>parseInt(b.trim()));JSON.stringify(o)===JSON.stringify(q.value)?(_.value+=10,T("正确！","correct")):T("错误，请再试一次","incorrect"),H()},Is=o=>{B.value=o,D.value[o]==="#ff6b6b"?(_.value+=10,T("正确！","correct")):T("错误，请再试一次","incorrect"),H()},Ps=(o,r)=>{const b=A.value[o];r===b.correct?(_.value+=10,T("正确！","correct")):T("错误，请再试一次","incorrect"),H()},T=(o,r)=>{X.value=o,W.value=r,O.value=!0,setTimeout(()=>{O.value=!1},2e3)},H=()=>{w.value++,w.value<=j.value?(F.value="",z.value=!1,B.value=-1,Q.value=!1,setTimeout(()=>{ts(n.value)},1e3)):E()},qs=o=>{const r=Math.floor(o/60),b=o%60;return`${r.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`},es=()=>{R.value=!1,e.value=!1,n.value=null},Ns=()=>{es(),$(n.value)};return Vs(()=>{}),Rs(()=>{f&&clearInterval(f)}),{isTraining:e,isPaused:P,selectedMode:n,timeRemaining:k,currentStep:w,totalSteps:j,currentScore:_,currentLevel:G,accuracy:gs,showCompletionModal:R,trainingModes:bs,currentShapes:Y,currentNumbers:q,currentColors:D,currentText:Z,currentQuestions:A,highlightedIndex:U,showInput:z,userInput:F,selectedColorIndex:B,showFeedback:O,feedbackType:W,feedbackMessage:X,showQuestions:Q,textSize:ps,todayStats:ms,abilityRatings:_s,completionStats:C,settings:M,timerProgress:fs,selectMode:hs,startTraining:$,togglePause:ys,stopTraining:E,checkNumberSequence:ws,selectColor:Is,selectAnswer:Ps,formatTime:qs,closeModal:es,restartTraining:Ns}}},As={class:"overall-perception-container"},Es={key:0,class:"mode-selection"},Hs={class:"modes-grid"},Ls=["onClick"],Js={class:"mode-header"},Ks={class:"mode-icon"},js={class:"mode-info"},Gs={class:"mode-name"},Ws={class:"mode-description"},Xs={class:"mode-details"},Ys={class:"detail-item"},Zs={class:"detail-value"},$s={class:"detail-item"},st={class:"difficulty-stars"},tt={class:"detail-item"},et={class:"detail-value"},nt={class:"mode-progress"},ot={class:"progress-bar"},it={class:"progress-text"},lt={class:"mode-features"},at=["onClick"],rt={key:1,class:"training-interface"},ct={class:"training-header"},dt={class:"mode-info"},ut={class:"mode-icon"},vt={class:"mode-name"},mt={class:"training-controls"},gt={class:"training-timer"},pt={class:"timer-display"},bt={class:"time-remaining"},_t={class:"timer-progress"},ft={class:"progress-bar"},ht={class:"training-content"},yt={key:0,class:"shapes-training"},kt={class:"shapes-grid"},Ct={class:"training-stats"},Tt={class:"stat-item"},St={class:"stat-value"},xt={class:"stat-item"},Mt={class:"stat-value"},wt={key:1,class:"numbers-training"},It={class:"numbers-display"},Pt={key:0,class:"number-input"},qt={key:2,class:"colors-training"},Nt={class:"colors-grid"},Vt=["onClick"],Rt={key:3,class:"words-training"},Ut={key:0,class:"questions"},zt={class:"question-text"},Ft={class:"answer-options"},Bt=["onClick"],Ot={class:"feedback-icon"},Qt={class:"feedback-message"},Dt={class:"training-progress"},At={class:"progress-info"},Et={class:"progress-bar"},Ht={class:"training-settings"},Lt={class:"settings-grid"},Jt={class:"setting-card"},Kt={class:"setting-item"},jt={class:"setting-item"},Gt={class:"range-value"},Wt={class:"setting-item"},Xt={class:"range-value"},Yt={class:"setting-card"},Zt={class:"setting-item"},$t={class:"checkbox-label"},se={class:"setting-item"},te={class:"checkbox-label"},ee={class:"setting-item"},ne={class:"checkbox-label"},oe={class:"statistics-section"},ie={class:"stats-grid"},le={class:"stat-card"},ae={class:"stat-content"},re={class:"stat-item"},ce={class:"stat-value"},de={class:"stat-item"},ue={class:"stat-value"},ve={class:"stat-item"},me={class:"stat-value"},ge={class:"stat-card"},pe={class:"ability-ratings"},be={class:"rating-item"},_e={class:"rating-stars"},fe={class:"rating-item"},he={class:"rating-stars"},ye={class:"rating-item"},ke={class:"rating-stars"},Ce={class:"modal-header"},Te={class:"modal-content"},Se={class:"completion-stats"},xe={class:"stat-item"},Me={class:"stat-value"},we={class:"stat-item"},Ie={class:"stat-value"},Pe={class:"stat-item"},qe={class:"stat-value"},Ne={key:0,class:"achievement"},Ve={class:"achievement-text"},Re={class:"modal-actions"};function Ue(is,t,I,e,P,ls){return l(),a("div",As,[e.isTraining?g("",!0):(l(),a("div",Es,[t[19]||(t[19]=s("h2",null,"选择训练模式",-1)),s("div",Hs,[(l(!0),a(v,null,m(e.trainingModes,n=>{var d;return l(),a("div",{key:n.id,class:p(["mode-card",{selected:((d=e.selectedMode)==null?void 0:d.id)===n.id}]),onClick:u=>e.selectMode(n)},[s("div",Js,[s("div",Ks,i(n.icon),1),s("div",js,[s("h3",Gs,i(n.name),1),s("span",{class:p(["mode-level",n.level])},i(n.levelText),3)])]),s("p",Ws,i(n.description),1),s("div",Xs,[s("div",Ys,[t[16]||(t[16]=s("span",{class:"detail-label"},"时长:",-1)),s("span",Zs,i(n.duration)+"分钟",1)]),s("div",$s,[t[17]||(t[17]=s("span",{class:"detail-label"},"难度:",-1)),s("div",st,[(l(),a(v,null,m(5,u=>s("span",{key:u,class:p(["star",{filled:u<=n.difficulty}])},"★",2)),64))])]),s("div",tt,[t[18]||(t[18]=s("span",{class:"detail-label"},"完成:",-1)),s("span",et,i(n.completedCount)+"次",1)])]),s("div",nt,[s("div",ot,[s("div",{class:"progress-fill",style:x({width:n.progress+"%"})},null,4)]),s("span",it,i(n.progress)+"%",1)]),s("div",lt,[(l(!0),a(v,null,m(n.features,u=>(l(),a("span",{key:u,class:"feature-tag"},i(u),1))),128))]),s("button",{class:"start-button",onClick:os(u=>e.startTraining(n),["stop"])}," 开始训练 ",8,at)],10,Ls)}),128))])])),e.isTraining?(l(),a("div",rt,[s("div",ct,[s("div",dt,[s("span",ut,i(e.selectedMode.icon),1),s("span",vt,i(e.selectedMode.name),1)]),s("div",mt,[s("button",{class:p(["control-button",{paused:e.isPaused}]),onClick:t[0]||(t[0]=(...n)=>e.togglePause&&e.togglePause(...n))},i(e.isPaused?"继续":"暂停"),3),s("button",{class:"control-button stop",onClick:t[1]||(t[1]=(...n)=>e.stopTraining&&e.stopTraining(...n))},"结束")])]),s("div",gt,[s("div",pt,[s("span",bt,i(e.formatTime(e.timeRemaining)),1),t[20]||(t[20]=s("span",{class:"time-label"},"剩余时间",-1))]),s("div",_t,[s("div",ft,[s("div",{class:"progress-fill",style:x({width:e.timerProgress+"%"})},null,4)])])]),s("div",ht,[e.selectedMode.id==="shapes"?(l(),a("div",yt,[t[23]||(t[23]=s("div",{class:"instruction"},"请观察下方图形，记住它们的位置和颜色",-1)),s("div",kt,[(l(!0),a(v,null,m(e.currentShapes,(n,d)=>(l(),a("div",{key:d,class:p(["shape-item",n.type]),style:x({backgroundColor:n.color,left:n.x+"%",top:n.y+"%"})},null,6))),128))]),s("div",Ct,[s("div",Tt,[t[21]||(t[21]=s("span",{class:"stat-label"},"当前关卡:",-1)),s("span",St,i(e.currentLevel),1)]),s("div",xt,[t[22]||(t[22]=s("span",{class:"stat-label"},"正确率:",-1)),s("span",Mt,i(e.accuracy)+"%",1)])])])):g("",!0),e.selectedMode.id==="numbers"?(l(),a("div",wt,[t[24]||(t[24]=s("div",{class:"instruction"},"记住数字序列，然后按顺序输入",-1)),s("div",It,[(l(!0),a(v,null,m(e.currentNumbers,(n,d)=>(l(),a("div",{key:d,class:p(["number-item",{highlighted:d===e.highlightedIndex}])},i(n),3))),128))]),e.showInput?(l(),a("div",Pt,[y(s("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>e.userInput=n),type:"text",placeholder:"输入数字序列",class:"input-field",onKeyup:t[3]||(t[3]=Us((...n)=>e.checkNumberSequence&&e.checkNumberSequence(...n),["enter"]))},null,544),[[L,e.userInput]]),s("button",{onClick:t[4]||(t[4]=(...n)=>e.checkNumberSequence&&e.checkNumberSequence(...n)),class:"check-button"},"确认")])):g("",!0)])):g("",!0),e.selectedMode.id==="colors"?(l(),a("div",qt,[t[25]||(t[25]=s("div",{class:"instruction"},"找出不同的颜色",-1)),s("div",Nt,[(l(!0),a(v,null,m(e.currentColors,(n,d)=>(l(),a("div",{key:d,class:p(["color-item",{selected:e.selectedColorIndex===d}]),style:x({backgroundColor:n}),onClick:u=>e.selectColor(d)},null,14,Vt))),128))])])):g("",!0),e.selectedMode.id==="words"?(l(),a("div",Rt,[t[26]||(t[26]=s("div",{class:"instruction"},"快速阅读下面的文字，然后回答问题",-1)),s("div",{class:"text-display",style:x({fontSize:e.textSize+"px"})},i(e.currentText),5),e.showQuestions?(l(),a("div",Ut,[(l(!0),a(v,null,m(e.currentQuestions,(n,d)=>(l(),a("div",{key:d,class:"question-item"},[s("p",zt,i(n.text),1),s("div",Ft,[(l(!0),a(v,null,m(n.options,(u,N)=>(l(),a("button",{key:N,class:"answer-option",onClick:as=>e.selectAnswer(d,N)},i(u),9,Bt))),128))])]))),128))])):g("",!0)])):g("",!0),e.showFeedback?(l(),a("div",{key:4,class:p(["feedback",e.feedbackType])},[s("div",Ot,i(e.feedbackType==="correct"?"✓":"✗"),1),s("div",Qt,i(e.feedbackMessage),1)],2)):g("",!0)]),s("div",Dt,[s("div",At,[s("span",null,"进度: "+i(e.currentStep)+"/"+i(e.totalSteps),1),s("span",null,"得分: "+i(e.currentScore),1)]),s("div",Et,[s("div",{class:"progress-fill",style:x({width:e.currentStep/e.totalSteps*100+"%"})},null,4)])])])):g("",!0),s("div",Ht,[t[36]||(t[36]=s("h3",null,"训练设置",-1)),s("div",Lt,[s("div",Jt,[t[31]||(t[31]=s("h4",null,"基础设置",-1)),s("div",Kt,[t[28]||(t[28]=s("label",null,"整体难度:",-1)),y(s("select",{"onUpdate:modelValue":t[5]||(t[5]=n=>e.settings.difficulty=n),class:"select-input"},t[27]||(t[27]=[s("option",{value:"1"},"简单",-1),s("option",{value:"2"},"普通",-1),s("option",{value:"3"},"困难",-1),s("option",{value:"4"},"专家",-1)]),512),[[zs,e.settings.difficulty]])]),s("div",jt,[t[29]||(t[29]=s("label",null,"显示时间:",-1)),y(s("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>e.settings.displayTime=n),type:"range",min:"1",max:"10",class:"range-input"},null,512),[[L,e.settings.displayTime,void 0,{number:!0}]]),s("span",Gt,i(e.settings.displayTime)+"秒",1)]),s("div",Wt,[t[30]||(t[30]=s("label",null,"元素数量:",-1)),y(s("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>e.settings.elementCount=n),type:"range",min:"3",max:"15",class:"range-input"},null,512),[[L,e.settings.elementCount,void 0,{number:!0}]]),s("span",Xt,i(e.settings.elementCount)+"个",1)])]),s("div",Yt,[t[35]||(t[35]=s("h4",null,"反馈设置",-1)),s("div",Zt,[s("label",$t,[y(s("input",{"onUpdate:modelValue":t[8]||(t[8]=n=>e.settings.soundEnabled=n),type:"checkbox",class:"checkbox-input"},null,512),[[J,e.settings.soundEnabled]]),t[32]||(t[32]=s("span",{class:"checkbox-text"},"声音反馈",-1))])]),s("div",se,[s("label",te,[y(s("input",{"onUpdate:modelValue":t[9]||(t[9]=n=>e.settings.visualFeedback=n),type:"checkbox",class:"checkbox-input"},null,512),[[J,e.settings.visualFeedback]]),t[33]||(t[33]=s("span",{class:"checkbox-text"},"视觉反馈",-1))])]),s("div",ee,[s("label",ne,[y(s("input",{"onUpdate:modelValue":t[10]||(t[10]=n=>e.settings.showHints=n),type:"checkbox",class:"checkbox-input"},null,512),[[J,e.settings.showHints]]),t[34]||(t[34]=s("span",{class:"checkbox-text"},"显示提示",-1))])])])])]),s("div",oe,[t[45]||(t[45]=s("h3",null,"训练统计",-1)),s("div",ie,[s("div",le,[t[40]||(t[40]=s("h4",null,"今日表现",-1)),s("div",ae,[s("div",re,[t[37]||(t[37]=s("span",{class:"stat-label"},"训练时长:",-1)),s("span",ce,i(e.todayStats.totalTime),1)]),s("div",de,[t[38]||(t[38]=s("span",{class:"stat-label"},"平均准确率:",-1)),s("span",ue,i(e.todayStats.accuracy)+"%",1)]),s("div",ve,[t[39]||(t[39]=s("span",{class:"stat-label"},"进步幅度:",-1)),s("span",me,"+"+i(e.todayStats.improvement)+"%",1)])])]),s("div",ge,[t[44]||(t[44]=s("h4",null,"能力评级",-1)),s("div",pe,[s("div",be,[t[41]||(t[41]=s("span",{class:"rating-label"},"图形感知:",-1)),s("div",_e,[(l(),a(v,null,m(5,n=>s("span",{key:n,class:p(["star",{filled:n<=e.abilityRatings.shapes}])},"★",2)),64))])]),s("div",fe,[t[42]||(t[42]=s("span",{class:"rating-label"},"数字感知:",-1)),s("div",he,[(l(),a(v,null,m(5,n=>s("span",{key:n,class:p(["star",{filled:n<=e.abilityRatings.numbers}])},"★",2)),64))])]),s("div",ye,[t[43]||(t[43]=s("span",{class:"rating-label"},"颜色感知:",-1)),s("div",ke,[(l(),a(v,null,m(5,n=>s("span",{key:n,class:p(["star",{filled:n<=e.abilityRatings.colors}])},"★",2)),64))])])])])])]),e.showCompletionModal?(l(),a("div",{key:2,class:"modal-overlay",onClick:t[15]||(t[15]=(...n)=>e.closeModal&&e.closeModal(...n))},[s("div",{class:"completion-modal",onClick:t[14]||(t[14]=os(()=>{},["stop"]))},[s("div",Ce,[t[46]||(t[46]=s("h3",null,"训练完成！",-1)),s("button",{class:"close-button",onClick:t[11]||(t[11]=(...n)=>e.closeModal&&e.closeModal(...n))},"×")]),s("div",Te,[s("div",Se,[s("div",xe,[t[47]||(t[47]=s("span",{class:"stat-label"},"准确率:",-1)),s("span",Me,i(e.completionStats.accuracy)+"%",1)]),s("div",we,[t[48]||(t[48]=s("span",{class:"stat-label"},"用时:",-1)),s("span",Ie,i(e.formatTime(e.completionStats.duration)),1)]),s("div",Pe,[t[49]||(t[49]=s("span",{class:"stat-label"},"得分:",-1)),s("span",qe,i(e.completionStats.score),1)])]),e.completionStats.achievement?(l(),a("div",Ne,[t[50]||(t[50]=s("div",{class:"achievement-icon"},"🏆",-1)),s("div",Ve,i(e.completionStats.achievement),1)])):g("",!0)]),s("div",Re,[s("button",{class:"primary-button",onClick:t[12]||(t[12]=(...n)=>e.restartTraining&&e.restartTraining(...n))},"再次训练"),s("button",{class:"secondary-button",onClick:t[13]||(t[13]=(...n)=>e.closeModal&&e.closeModal(...n))},"返回")])])])):g("",!0)])}const je=Qs(Ds,[["render",Ue],["__scopeId","data-v-1d2c74a1"]]);export{je as default};
