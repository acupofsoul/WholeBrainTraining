import{S as D,a as M}from"./configService-cad34a82.js";import{u as B}from"./useTrainingSettings-353bc7b0.js";import{i as E,r as k,o as c,a as u,y as C,g as m,b as e,F as _,h as R,t as r,n as f,m as h,p as d,v as F,E as V,f as y,z as w,B as b,d as x,l as Q}from"./index-e0b54b24.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const P={name:"ImageFlash",components:{SettingsModal:D,SettingsButton:M},emits:["go-back"],setup(){const{settings:i,isLoading:t,error:o,updateSettings:a,resetSettings:s,settingsSections:l}=B("imageFlash"),g=E(!1);return{settings:i,settingsLoading:t,settingsError:o,settingsSections:l,showSettingsModal:g,handleSettingsSave:async p=>{try{await a(p,{immediate:!0}),g.value=!1}catch(v){console.error("保存设置失败:",v)}},handleSettingsReset:async()=>{try{await s(),g.value=!1}catch(p){console.error("重置设置失败:",p)}}}},data(){return{isTraining:!1,isPaused:!1,isCompleted:!1,selectedMode:null,currentRound:0,totalRounds:10,correctCount:0,errorCount:0,isFlashing:!1,currentFlashImage:{},showRecognitionTest:!1,showResult:!1,isAnswerCorrect:!1,countdown:3,recognitionQuestion:{},selectedAnswer:null,userCount:null,reactionTimes:[],roundStartTime:null,trainingModes:[{id:"simple_shapes",name:"基础图形",icon:"🔷",level:"beginner",levelText:"初级",description:"简单几何图形闪视，训练基础识别能力",flashSpeed:800,imageType:"几何图形",difficulty:"简单",bestRecognition:95,averageRecognition:88},{id:"color_shapes",name:"彩色图形",icon:"🌈",level:"intermediate",levelText:"中级",description:"彩色几何图形闪视，训练颜色识别",flashSpeed:600,imageType:"彩色图形",difficulty:"中等",bestRecognition:82,averageRecognition:75},{id:"complex_patterns",name:"复杂图案",icon:"🔸",level:"advanced",levelText:"高级",description:"复杂图案闪视，挑战视觉识别极限",flashSpeed:400,imageType:"复杂图案",difficulty:"困难",bestRecognition:68,averageRecognition:61},{id:"symbol_recognition",name:"符号识别",icon:"🔣",level:"intermediate",levelText:"中级",description:"各种符号闪视，训练符号记忆",flashSpeed:700,imageType:"符号标记",difficulty:"中等",bestRecognition:79,averageRecognition:72},{id:"dot_patterns",name:"点阵图案",icon:"⚫",level:"advanced",levelText:"高级",description:"点阵图案闪视，训练空间记忆",flashSpeed:500,imageType:"点阵图案",difficulty:"困难",bestRecognition:71,averageRecognition:64},{id:"mixed_challenge",name:"综合挑战",icon:"🎯",level:"expert",levelText:"专家",description:"混合类型闪视，全面挑战视觉能力",flashSpeed:300,imageType:"混合类型",difficulty:"极难",bestRecognition:59,averageRecognition:52}],currentModeData:{},imageLibrary:{shapes:[{type:"shape",shape:"circle",color:"#FF5722",difficulty:"easy",category:"basic"},{type:"shape",shape:"square",color:"#2196F3",difficulty:"easy",category:"basic"},{type:"shape",shape:"triangle",color:"#4CAF50",difficulty:"easy",category:"basic"},{type:"shape",shape:"diamond",color:"#FF9800",difficulty:"medium",category:"basic"},{type:"shape",shape:"hexagon",color:"#9C27B0",difficulty:"medium",category:"basic"},{type:"shape",shape:"pentagon",color:"#E91E63",difficulty:"medium",category:"basic"},{type:"shape",shape:"octagon",color:"#795548",difficulty:"hard",category:"basic"},{type:"shape",shape:"star",color:"#FFC107",difficulty:"hard",category:"basic"},{type:"shape",shape:"oval",color:"#607D8B",difficulty:"medium",category:"basic"},{type:"shape",shape:"rhombus",color:"#3F51B5",difficulty:"hard",category:"basic"}],symbols:[{type:"symbol",symbol:"★",color:"#FFD700",difficulty:"easy",category:"symbols"},{type:"symbol",symbol:"♦",color:"#FF5722",difficulty:"easy",category:"symbols"},{type:"symbol",symbol:"♠",color:"#333",difficulty:"easy",category:"symbols"},{type:"symbol",symbol:"♥",color:"#E91E63",difficulty:"easy",category:"symbols"},{type:"symbol",symbol:"♣",color:"#4CAF50",difficulty:"easy",category:"symbols"},{type:"symbol",symbol:"◆",color:"#2196F3",difficulty:"medium",category:"symbols"},{type:"symbol",symbol:"▲",color:"#FF9800",difficulty:"medium",category:"symbols"},{type:"symbol",symbol:"●",color:"#9C27B0",difficulty:"medium",category:"symbols"},{type:"symbol",symbol:"◎",color:"#00BCD4",difficulty:"hard",category:"symbols"},{type:"symbol",symbol:"※",color:"#FF5722",difficulty:"hard",category:"symbols"},{type:"symbol",symbol:"☆",color:"#FFEB3B",difficulty:"medium",category:"symbols"},{type:"symbol",symbol:"◇",color:"#8BC34A",difficulty:"hard",category:"symbols"}],patterns:[{type:"pattern",difficulty:"medium",category:"patterns",pattern:[{x:20,y:20,color:"#FF5722"},{x:50,y:30,color:"#2196F3"},{x:80,y:40,color:"#4CAF50"}]},{type:"pattern",difficulty:"medium",category:"patterns",pattern:[{x:30,y:30,color:"#FF9800"},{x:70,y:30,color:"#9C27B0"},{x:50,y:70,color:"#FFD700"}]},{type:"pattern",difficulty:"hard",category:"patterns",pattern:[{x:15,y:15,color:"#E91E63"},{x:45,y:25,color:"#3F51B5"},{x:75,y:35,color:"#00BCD4"},{x:25,y:65,color:"#8BC34A"},{x:65,y:75,color:"#FF5722"}]},{type:"pattern",difficulty:"easy",category:"patterns",pattern:[{x:40,y:40,color:"#2196F3"},{x:60,y:60,color:"#4CAF50"}]}],numbers:[{type:"number",value:"1",color:"#FF5722",difficulty:"easy",category:"numbers"},{type:"number",value:"2",color:"#2196F3",difficulty:"easy",category:"numbers"},{type:"number",value:"3",color:"#4CAF50",difficulty:"easy",category:"numbers"},{type:"number",value:"4",color:"#FF9800",difficulty:"easy",category:"numbers"},{type:"number",value:"5",color:"#9C27B0",difficulty:"easy",category:"numbers"},{type:"number",value:"12",color:"#E91E63",difficulty:"medium",category:"numbers"},{type:"number",value:"25",color:"#795548",difficulty:"medium",category:"numbers"},{type:"number",value:"67",color:"#607D8B",difficulty:"medium",category:"numbers"},{type:"number",value:"123",color:"#3F51B5",difficulty:"hard",category:"numbers"},{type:"number",value:"456",color:"#00BCD4",difficulty:"hard",category:"numbers"}],letters:[{type:"letter",value:"A",color:"#FF5722",difficulty:"easy",category:"letters"},{type:"letter",value:"B",color:"#2196F3",difficulty:"easy",category:"letters"},{type:"letter",value:"C",color:"#4CAF50",difficulty:"easy",category:"letters"},{type:"letter",value:"X",color:"#FF9800",difficulty:"medium",category:"letters"},{type:"letter",value:"Y",color:"#9C27B0",difficulty:"medium",category:"letters"},{type:"letter",value:"Z",color:"#E91E63",difficulty:"medium",category:"letters"},{type:"letter",value:"AB",color:"#795548",difficulty:"hard",category:"letters"},{type:"letter",value:"XY",color:"#607D8B",difficulty:"hard",category:"letters"}]},settings:{},statistics:{totalSessions:38,bestRecognition:95,averageRecognition:76,averageReactionTime:850,modePerformance:[{id:"simple_shapes",name:"基础图形",level:"初级",bestRecognition:95,averageRecognition:88,attempts:12,mastery:92},{id:"color_shapes",name:"彩色图形",level:"中级",bestRecognition:82,averageRecognition:75,attempts:10,mastery:78},{id:"complex_patterns",name:"复杂图案",level:"高级",bestRecognition:68,averageRecognition:61,attempts:8,mastery:65}],recognitionTrend:[{recognition:65},{recognition:70},{recognition:68},{recognition:75},{recognition:78},{recognition:76},{recognition:82},{recognition:85},{recognition:83},{recognition:88}]},flashTimer:null,countdownTimer:null}},computed:{recognitionRate(){const i=this.correctCount+this.errorCount;return i>0?Math.round(this.correctCount/i*100):0},averageReactionTime(){if(this.reactionTimes.length===0)return 0;const i=this.reactionTimes.reduce((t,o)=>t+o,0);return Math.round(i/this.reactionTimes.length)},performanceLevel(){const i=this.recognitionRate;return i>=90?{text:"优秀",class:"excellent"}:i>=80?{text:"良好",class:"good"}:i>=70?{text:"一般",class:"average"}:{text:"需要提高",class:"poor"}},abilityScores(){return{imageRecognition:Math.min(100,this.recognitionRate+5),shapePerception:Math.min(100,this.recognitionRate),colorDiscrimination:Math.min(100,this.recognitionRate-5),visualMemory:Math.min(100,this.recognitionRate-10)}},settingsSections(){return[{title:"基础设置",items:[{key:"flashDuration",label:"闪现时长",type:"range",value:this.settings.flashDuration,min:100,max:3e3,step:100,unit:"ms",description:"图像显示的时间长度"},{key:"intervalDuration",label:"间隔时长",type:"range",value:this.settings.intervalDuration,min:0,max:3e3,step:100,unit:"ms",description:"图像之间的间隔时间"},{key:"imageCount",label:"图片数量",type:"range",value:this.settings.imageCount,min:5,max:50,step:5,description:"每轮训练的图片数量"},{key:"imageSize",label:"图片尺寸",type:"select",value:this.settings.imageSize,options:[{value:"small",label:"小 (150px)"},{value:"medium",label:"中 (200px)"},{value:"large",label:"大 (300px)"}],description:"闪现图片的显示尺寸"}]},{title:"训练模式",items:[{key:"mode",label:"训练模式",type:"select",value:this.settings.mode,options:[{value:"sequence",label:"顺序模式"},{value:"random",label:"随机模式"},{value:"adaptive",label:"自适应模式"}],description:"图片显示的顺序方式"},{key:"difficulty",label:"难度等级",type:"select",value:this.settings.difficulty,options:[{value:"easy",label:"简单"},{value:"normal",label:"普通"},{value:"hard",label:"困难"}],description:"训练的难度级别"}]},{title:"显示设置",items:[{key:"showProgress",label:"显示进度",type:"switch",value:this.settings.showProgress,description:"是否显示训练进度"},{key:"showTimer",label:"显示计时器",type:"switch",value:this.settings.showTimer,description:"是否显示计时器"},{key:"showScore",label:"显示分数",type:"switch",value:this.settings.showScore,description:"是否显示实时分数"}]},{title:"反馈设置",items:[{key:"enableSound",label:"启用声音",type:"switch",value:this.settings.enableSound,description:"是否播放音效反馈"},{key:"showCorrectAnswer",label:"显示正确答案",type:"switch",value:this.settings.showCorrectAnswer,description:"答错时是否显示正确答案"}]},{title:"高级设置",items:[{key:"autoStart",label:"自动开始",type:"switch",value:this.settings.autoStart,description:"是否自动开始下一轮"},{key:"adaptiveDifficulty",label:"自适应难度",type:"switch",value:this.settings.adaptiveDifficulty,description:"根据表现自动调整难度"}]}]}},methods:{selectMode(i){this.selectedMode=i},startTraining(i){this.selectedMode=i,this.currentModeData=this.trainingModes.find(t=>t.id===i),this.resetTrainingState(),this.isTraining=!0,this.totalRounds=parseInt(this.settings.rounds),this.startCountdown()},pauseTraining(){this.isPaused=!0,this.clearTimers()},resumeTraining(){this.isPaused=!1,!this.showRecognitionTest&&this.startCountdown()},stopTraining(){this.clearTimers(),this.isTraining=!1,this.isPaused=!1,this.isCompleted=!1},restartTraining(){this.resetTrainingState(),this.startCountdown()},startCountdown(){this.countdown=3,this.countdownTimer=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(this.countdownTimer),this.startFlash())},1e3)},startFlash(){this.currentRound++,this.generateFlashImage(),this.isFlashing=!0,this.roundStartTime=Date.now(),this.settings.soundEffects&&this.playFlashSound(),this.flashTimer=setTimeout(()=>{this.isFlashing=!1,this.showRecognitionTest=!0;const i=Date.now()-this.roundStartTime;this.reactionTimes.push(i),this.recognitionQuestion.type==="count"&&this.$nextTick(()=>{this.$refs.countInput&&this.$refs.countInput.focus()})},this.settings.flashDuration)},generateFlashImage(){const i=this.currentModeData.id,t=this.getFilteredImages(i),o=t[Math.floor(Math.random()*t.length)];this.currentFlashImage=o,this.generateRecognitionQuestion(o)},getFilteredImages(i){let t=[];return i==="simple_shapes"||i==="color_shapes"?t=[...this.imageLibrary.shapes]:i==="symbol_recognition"?t=[...this.imageLibrary.symbols]:i==="dot_patterns"?t=[...this.imageLibrary.patterns]:i==="number_flash"?t=[...this.imageLibrary.numbers]:i==="letter_flash"?t=[...this.imageLibrary.letters]:t=[...this.imageLibrary.shapes,...this.imageLibrary.symbols,...this.imageLibrary.patterns,...this.imageLibrary.numbers,...this.imageLibrary.letters],this.settings.difficulty!=="all"&&(t=t.filter(o=>o.difficulty===this.settings.difficulty)),this.settings.contentFilter!=="all"&&(t=t.filter(o=>o.category===this.settings.contentFilter)),t.length===0&&(t=[...this.imageLibrary.shapes,...this.imageLibrary.symbols,...this.imageLibrary.patterns,...this.imageLibrary.numbers,...this.imageLibrary.letters]),t},generateShapeImage(){const i=this.imageLibrary.shapes;return{...i[Math.floor(Math.random()*i.length)]}},generateSymbolImage(){const i=this.imageLibrary.symbols;return{...i[Math.floor(Math.random()*i.length)]}},generatePatternImage(){const i=this.imageLibrary.patterns;return{...i[Math.floor(Math.random()*i.length)]}},generateRecognitionQuestion(i){const t=["choice","judgment","count"],o=t[Math.floor(Math.random()*t.length)];o==="choice"?this.generateChoiceQuestion(i):o==="judgment"?this.generateJudgmentQuestion(i):this.generateCountQuestion(i)},generateChoiceQuestion(i){const t=[];t.push({id:"correct",...i});for(let o=0;o<3;o++){let a;i.type==="shape"?a=this.generateShapeImage():i.type==="symbol"?a=this.generateSymbolImage():a=this.generatePatternImage(),t.push({id:`wrong_${o}`,...a})}this.settings.randomOrder&&this.shuffleArray(t),this.recognitionQuestion={type:"choice",question:"请选择刚才看到的图像：",options:t,correctAnswer:"correct"}},generateJudgmentQuestion(i){const t=Math.random()>.5;let o;t?o={...i}:i.type==="shape"?o=this.generateShapeImage():i.type==="symbol"?o=this.generateSymbolImage():o=this.generatePatternImage(),this.recognitionQuestion={type:"judgment",question:"这是刚才看到的图像吗？",testImage:o,correctAnswer:t}},generateCountQuestion(i){if(i.type==="pattern")this.recognitionQuestion={type:"count",question:"刚才看到的图案中有多少个点？",correctAnswer:i.pattern.length};else{const t=Math.floor(Math.random()*5)+1;this.recognitionQuestion={type:"count",question:"如果刚才的图像重复出现，总共会有多少个？",correctAnswer:t}}},selectAnswer(i){this.showResult||(this.selectedAnswer=i,this.checkAnswer(i))},submitAnswer(){this.userCount===null||this.showResult||this.checkAnswer(this.userCount)},checkAnswer(i){let t=!1;this.recognitionQuestion.type==="choice"?t=i===this.recognitionQuestion.correctAnswer:this.recognitionQuestion.type==="judgment"?t=i===this.recognitionQuestion.correctAnswer:t=i===this.recognitionQuestion.correctAnswer,this.isAnswerCorrect=t,t?(this.correctCount++,this.settings.soundEffects&&this.playSuccessSound()):(this.errorCount++,this.settings.soundEffects&&this.playErrorSound()),this.showResult=!0,this.settings.autoNext&&setTimeout(()=>{this.nextRound()},2e3)},nextRound(){this.showResult=!1,this.showRecognitionTest=!1,this.selectedAnswer=null,this.userCount=null,this.currentRound>=this.totalRounds?this.completeTraining():this.startCountdown()},completeTraining(){this.isCompleted=!0,this.settings.soundEffects&&this.playCompletionSound(),this.saveResult()},getCorrectAnswerText(){if(this.recognitionQuestion.type==="choice"){const i=this.recognitionQuestion.options.find(t=>t.id===this.recognitionQuestion.correctAnswer);if(i)return i.type==="shape"?`${i.color} ${i.shape}`:i.type==="symbol"?i.symbol:"对应的图案"}else return this.recognitionQuestion.type==="judgment"?this.recognitionQuestion.correctAnswer?"是":"否":this.recognitionQuestion.correctAnswer;return""},resetTrainingState(){this.currentRound=0,this.correctCount=0,this.errorCount=0,this.isCompleted=!1,this.isFlashing=!1,this.showRecognitionTest=!1,this.showResult=!1,this.selectedAnswer=null,this.userCount=null,this.reactionTimes=[],this.clearTimers()},clearTimers(){this.flashTimer&&(clearTimeout(this.flashTimer),this.flashTimer=null),this.countdownTimer&&(clearInterval(this.countdownTimer),this.countdownTimer=null)},shuffleArray(i){for(let t=i.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1));[i[t],i[o]]=[i[o],i[t]]}},playFlashSound(){const i=new(window.AudioContext||window.webkitAudioContext),t=i.createOscillator(),o=i.createGain();t.connect(o),o.connect(i.destination),t.frequency.setValueAtTime(1e3,i.currentTime),o.gain.setValueAtTime(.1,i.currentTime),o.gain.exponentialRampToValueAtTime(.01,i.currentTime+.2),t.start(i.currentTime),t.stop(i.currentTime+.2)},playSuccessSound(){const i=new(window.AudioContext||window.webkitAudioContext),t=i.createOscillator(),o=i.createGain();t.connect(o),o.connect(i.destination),t.frequency.setValueAtTime(1200,i.currentTime),o.gain.setValueAtTime(.1,i.currentTime),o.gain.exponentialRampToValueAtTime(.01,i.currentTime+.3),t.start(i.currentTime),t.stop(i.currentTime+.3)},playErrorSound(){const i=new(window.AudioContext||window.webkitAudioContext),t=i.createOscillator(),o=i.createGain();t.connect(o),o.connect(i.destination),t.frequency.setValueAtTime(300,i.currentTime),o.gain.setValueAtTime(.1,i.currentTime),o.gain.exponentialRampToValueAtTime(.01,i.currentTime+.4),t.start(i.currentTime),t.stop(i.currentTime+.4)},playCompletionSound(){const i=new(window.AudioContext||window.webkitAudioContext);[523,659,784,1047].forEach((o,a)=>{const s=i.createOscillator(),l=i.createGain();s.connect(l),l.connect(i.destination);const g=i.currentTime+a*.2;s.frequency.setValueAtTime(o,g),l.gain.setValueAtTime(.1,g),l.gain.exponentialRampToValueAtTime(.01,g+.4),s.start(g),s.stop(g+.4)})},getEncouragementMessage(){if(!this.settings.showEncouragement)return"";const i=this.recognitionRate;let t;i>=90?t="excellent":i>=80?t="good":i>=60?t="average":t="poor";const a={excellent:["太棒了！你的视觉识别能力非常出色！","完美的表现！继续保持这种专注力！","惊人的识别速度！你的大脑反应很敏锐！","卓越的成绩！你的视觉训练效果显著！"],good:["很好！你的识别能力在稳步提升！","不错的表现！继续练习会更好！","良好的进步！保持这种训练节奏！","做得很好！你的专注力在增强！"],average:["继续努力！你正在进步中！","不要气馁，多练习会有提升！","保持练习，你会看到明显改善！","坚持训练，成功就在前方！"],poor:["没关系，每个人都有起步阶段！","坚持练习，你一定会进步的！","不要放弃，持续训练是关键！","相信自己，下次会更好！"]}[t];return a[Math.floor(Math.random()*a.length)]},saveResult(){const i={id:Date.now().toString(),mode:this.currentModeData.id,modeName:this.currentModeData.name,recognitionRate:this.recognitionRate,correctCount:this.correctCount,errorCount:this.errorCount,totalRounds:this.totalRounds,averageReactionTime:this.averageReactionTime,reactionTimes:[...this.reactionTimes],settings:{flashDuration:this.settings.flashDuration,intervalTime:this.settings.intervalTime,imageSize:this.settings.imageSize,imageType:this.settings.imageType},date:new Date().toISOString(),timestamp:Date.now()},t=JSON.parse(localStorage.getItem("imageFlashResults")||"[]");t.push(i),t.length>1e3&&t.splice(0,t.length-1e3),localStorage.setItem("imageFlashResults",JSON.stringify(t)),this.updateStatistics(i)},updateStatistics(i){i.recognitionRate>this.statistics.bestRecognition&&(this.statistics.bestRecognition=i.recognitionRate),this.statistics.totalSessions++,this.saveStatistics()},getChartPoints(){return this.statistics.recognitionTrend.map((i,t)=>{const o=t/(this.statistics.recognitionTrend.length-1)*100,a=100-i.recognition;return`${o},${a}`}).join(" ")},saveStatistics(){localStorage.setItem("imageFlashStats",JSON.stringify(this.statistics))},loadStatistics(){const i=localStorage.getItem("imageFlashStats");i&&(this.statistics={...this.statistics,...JSON.parse(i)})},getTrainingHistory(i=30){const t=JSON.parse(localStorage.getItem("imageFlashResults")||"[]"),o=new Date;return o.setDate(o.getDate()-i),t.filter(a=>new Date(a.date)>=o)},getDetailedAnalysis(){const i=JSON.parse(localStorage.getItem("imageFlashResults")||"[]");if(i.length===0)return{totalSessions:0,averageRecognition:0,bestRecognition:0,worstRecognition:0,improvementTrend:0,modePerformance:{},weeklyProgress:[]};const t={totalSessions:i.length,averageRecognition:i.reduce((o,a)=>o+a.recognitionRate,0)/i.length,bestRecognition:Math.max(...i.map(o=>o.recognitionRate)),worstRecognition:Math.min(...i.map(o=>o.recognitionRate)),averageReactionTime:i.reduce((o,a)=>o+(a.averageReactionTime||0),0)/i.length};if(i.length>=10){const o=i.slice(-10),a=i.slice(-20,-10),s=o.reduce((g,S)=>g+S.recognitionRate,0)/o.length,l=a.reduce((g,S)=>g+S.recognitionRate,0)/a.length;t.improvementTrend=s-l}else t.improvementTrend=0;return t.modePerformance={},i.forEach(o=>{t.modePerformance[o.mode]||(t.modePerformance[o.mode]={sessions:0,totalRecognition:0,bestRecognition:0,averageReactionTime:0,totalReactionTime:0});const a=t.modePerformance[o.mode];a.sessions++,a.totalRecognition+=o.recognitionRate,a.bestRecognition=Math.max(a.bestRecognition,o.recognitionRate),a.totalReactionTime+=o.averageReactionTime||0}),Object.keys(t.modePerformance).forEach(o=>{const a=t.modePerformance[o];a.averageRecognition=a.totalRecognition/a.sessions,a.averageReactionTime=a.totalReactionTime/a.sessions}),t.weeklyProgress=this.calculateWeeklyProgress(i),t},calculateWeeklyProgress(i){const t={};return i.forEach(o=>{const a=new Date(o.date),s=new Date(a);s.setDate(a.getDate()-a.getDay());const l=s.toISOString().split("T")[0];t[l]||(t[l]={week:l,sessions:0,totalRecognition:0,bestRecognition:0}),t[l].sessions++,t[l].totalRecognition+=o.recognitionRate,t[l].bestRecognition=Math.max(t[l].bestRecognition,o.recognitionRate)}),Object.values(t).map(o=>({...o,averageRecognition:o.totalRecognition/o.sessions})).sort((o,a)=>new Date(o.week)-new Date(a.week)).slice(-12)},exportTrainingData(){const i=JSON.parse(localStorage.getItem("imageFlashResults")||"[]"),t=JSON.parse(localStorage.getItem("imageFlashSettings")||"{}"),o=JSON.parse(localStorage.getItem("imageFlashStats")||"{}"),a={exportDate:new Date().toISOString(),version:"1.0",type:"imageFlashTraining",data:{results:i,settings:t,statistics:o,analysis:this.getDetailedAnalysis()}},s=JSON.stringify(a,null,2),l=new Blob([s],{type:"application/json"}),g=document.createElement("a");return g.href=URL.createObjectURL(l),g.download=`image-flash-training-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),!0},importTrainingData(i){return new Promise((t,o)=>{const a=new FileReader;a.onload=s=>{var l;try{const g=JSON.parse(s.target.result);if(g.type!=="imageFlashTraining"){o(new Error("无效的数据文件类型"));return}if(this.createBackup(),g.data.results){const p=[...JSON.parse(localStorage.getItem("imageFlashResults")||"[]"),...g.data.results].filter((v,T,A)=>A.findIndex(I=>I.id===v.id)===T).sort((v,T)=>new Date(v.date)-new Date(T.date));localStorage.setItem("imageFlashResults",JSON.stringify(p))}g.data.settings&&(localStorage.setItem("imageFlashSettings",JSON.stringify(g.data.settings)),this.loadSettings()),g.data.statistics&&(localStorage.setItem("imageFlashStats",JSON.stringify(g.data.statistics)),this.loadStatistics()),t({success:!0,message:"数据导入成功",importedRecords:((l=g.data.results)==null?void 0:l.length)||0})}catch(g){o(new Error("数据文件格式错误: "+g.message))}},a.onerror=()=>o(new Error("文件读取失败")),a.readAsText(i)})},createBackup(){const i={results:localStorage.getItem("imageFlashResults"),settings:localStorage.getItem("imageFlashSettings"),statistics:localStorage.getItem("imageFlashStats"),timestamp:Date.now()},t=JSON.parse(localStorage.getItem("imageFlashBackups")||"[]");t.push(i),t.length>10&&t.splice(0,t.length-10),localStorage.setItem("imageFlashBackups",JSON.stringify(t))},restoreBackup(i){const t=JSON.parse(localStorage.getItem("imageFlashBackups")||"[]");if(i<0||i>=t.length)throw new Error("无效的备份索引");const o=t[i];return o.results&&localStorage.setItem("imageFlashResults",o.results),o.settings&&(localStorage.setItem("imageFlashSettings",o.settings),this.loadSettings()),o.statistics&&(localStorage.setItem("imageFlashStats",o.statistics),this.loadStatistics()),!0},clearTrainingData(i="all"){switch(this.createBackup(),i){case"results":localStorage.removeItem("imageFlashResults");break;case"settings":localStorage.removeItem("imageFlashSettings"),this.loadSettings();break;case"statistics":localStorage.removeItem("imageFlashStats"),this.loadStatistics();break;case"all":localStorage.removeItem("imageFlashResults"),localStorage.removeItem("imageFlashSettings"),localStorage.removeItem("imageFlashStats"),this.loadSettings(),this.loadStatistics();break}return!0},getStorageUsage(){const i=localStorage.getItem("imageFlashResults")||"",t=localStorage.getItem("imageFlashSettings")||"",o=localStorage.getItem("imageFlashStats")||"",a=localStorage.getItem("imageFlashBackups")||"",s={results:{size:new Blob([i]).size,records:JSON.parse(i||"[]").length},settings:{size:new Blob([t]).size},statistics:{size:new Blob([o]).size},backups:{size:new Blob([a]).size,count:JSON.parse(a||"[]").length}};return s.total=s.results.size+s.settings.size+s.statistics.size+s.backups.size,s},goBack(){this.$emit("go-back")},openSettings(){this.showSettingsModal=!0},closeSettings(){this.showSettingsModal=!1},applySettingsToTraining(){this.settings.flashDuration!==this.currentFlashDuration&&(this.currentFlashDuration=this.settings.flashDuration),this.settings.intervalDuration!==this.currentIntervalDuration&&(this.currentIntervalDuration=this.settings.intervalDuration)}},mounted(){this.loadStatistics()},beforeUnmount(){this.clearTimers()},watch:{}},N={class:"image-flash-container"},z={key:2,class:"training-modes"},L={class:"modes-grid"},U=["onClick"],J={class:"mode-header"},q={class:"mode-icon"},j={class:"mode-description"},G={class:"mode-details"},H={class:"detail-item"},K={class:"detail-value"},W={class:"detail-item"},X={class:"detail-value"},Y={class:"detail-item"},Z={class:"detail-value"},$={class:"mode-stats"},tt={class:"stat-item"},et={class:"stat-value"},st={class:"stat-item"},it={class:"stat-value"},nt=["onClick"],ot={key:3,class:"training-interface"},lt={class:"training-card"},at={class:"training-header"},rt={class:"training-info"},ct={class:"info-item"},ut={class:"info-value"},gt={class:"info-item"},dt={class:"info-value correct"},mt={class:"info-item"},pt={class:"info-value error"},ht={class:"info-item"},yt={class:"info-value"},ft={class:"training-controls"},vt={class:"flash-display-area"},bt={class:"image-display"},wt=["src","alt"],St={key:1,class:"ready-indicator"},Tt={class:"countdown-circle"},_t={class:"countdown-number"},Rt={key:2,class:"pause-indicator"},Ft={key:0,class:"recognition-area"},kt={class:"recognition-prompt"},Ct={class:"recognition-hint"},xt={key:0,class:"recognition-options"},At=["onClick"],It=["src","alt"],Dt={key:3,class:"option-pattern"},Mt={key:1,class:"judgment-options"},Bt=["disabled"],Et=["disabled"],Vt={key:2,class:"count-input"},Qt=["disabled"],Ot=["disabled"],Pt={key:3,class:"answer-result"},Nt={class:"result-icon"},zt={class:"result-text"},Lt={key:0,class:"correct-answer"},Ut={key:1,class:"explanation"},Jt={key:1,class:"completion-status"},qt={class:"completion-header"},jt={key:0,class:"encouragement-message"},Gt={class:"encouragement-content"},Ht={class:"encouragement-text"},Kt={class:"completion-stats"},Wt={class:"stat-item"},Xt={class:"stat-value"},Yt={class:"stat-item"},Zt={class:"stat-value correct"},$t={class:"stat-item"},te={class:"stat-value error"},ee={class:"stat-item"},se={class:"stat-value"},ie={class:"stat-item"},ne={class:"stat-value"},oe={class:"stat-item"},le={class:"completion-actions"},ae={key:4,class:"training-settings"},re={class:"settings-grid"},ce={class:"setting-card"},ue={class:"setting-item"},ge={class:"range-container"},de={class:"range-value"},me={class:"setting-item"},pe={class:"range-container"},he={class:"range-value"},ye={class:"setting-item"},fe={class:"setting-item"},ve={class:"setting-card"},be={class:"setting-item"},we={class:"range-container"},Se={class:"range-value"},Te={class:"setting-item"},_e={class:"setting-item"},Re={class:"setting-card"},Fe={class:"setting-item"},ke={class:"setting-label"},Ce={class:"setting-item"},xe={class:"setting-label"},Ae={class:"setting-item"},Ie={class:"setting-label"},De={class:"setting-item"},Me={class:"setting-label"},Be={class:"setting-item"},Ee={class:"setting-label"},Ve={class:"setting-item"},Qe={class:"setting-label"},Oe={class:"setting-item"},Pe={class:"setting-label"},Ne={class:"setting-item"},ze={class:"setting-label"},Le={class:"setting-item"},Ue={class:"setting-label"},Je={class:"setting-card"},qe={class:"setting-item"},je={class:"setting-item"},Ge={class:"setting-item"},He={class:"setting-label"},Ke={class:"setting-item"},We={class:"setting-item"},Xe={key:5,class:"training-statistics"},Ye={class:"stats-grid"},Ze={class:"stats-card"},$e={class:"stats-overview"},ts={class:"stat-item"},es={class:"stat-info"},ss={class:"stat-value"},is={class:"stat-item"},ns={class:"stat-info"},os={class:"stat-value"},ls={class:"stat-item"},as={class:"stat-info"},rs={class:"stat-value"},cs={class:"stat-item"},us={class:"stat-info"},gs={class:"stat-value"},ds={class:"stats-card"},ms={class:"mode-performance"},ps={class:"mode-header"},hs={class:"mode-name"},ys={class:"mode-level"},fs={class:"mode-details"},vs={class:"detail-row"},bs={class:"detail-value"},ws={class:"detail-row"},Ss={class:"detail-value"},Ts={class:"detail-row"},_s={class:"detail-value"},Rs={class:"mode-progress"},Fs={class:"progress-bar"},ks={class:"progress-text"},Cs={class:"stats-card"},xs={class:"recognition-chart"},As={class:"chart-container"},Is={class:"chart-line"},Ds=["title"],Ms={class:"chart-svg"},Bs=["points"],Es={class:"stats-card"},Vs={class:"ability-analysis"},Qs={class:"ability-item"},Os={class:"ability-header"},Ps={class:"ability-score"},Ns={class:"ability-bar"},zs={class:"ability-item"},Ls={class:"ability-header"},Us={class:"ability-score"},Js={class:"ability-bar"},qs={class:"ability-item"},js={class:"ability-header"},Gs={class:"ability-score"},Hs={class:"ability-bar"},Ks={class:"ability-item"},Ws={class:"ability-header"},Xs={class:"ability-score"},Ys={class:"ability-bar"};function Zs(i,t,o,a,s,l){const g=k("SettingsButton"),S=k("SettingsModal");return c(),u("div",N,[s.isTraining?m("",!0):(c(),C(g,{key:0,floating:!0,compact:!0,onClick:t[0]||(t[0]=n=>a.showSettingsModal=!0)})),a.showSettingsModal?(c(),C(S,{key:1,title:"图像闪视训练设置",sections:l.settingsSections,onClose:t[1]||(t[1]=n=>a.showSettingsModal=!1),onSave:a.handleSettingsSave,onReset:a.handleSettingsReset},null,8,["sections","onSave","onReset"])):m("",!0),s.isTraining?m("",!0):(c(),u("div",z,[t[39]||(t[39]=e("h3",null,"选择训练模式",-1)),e("div",L,[(c(!0),u(_,null,R(s.trainingModes,n=>(c(),u("div",{key:n.id,class:f(["mode-card",{active:s.selectedMode===n.id}]),onClick:p=>l.selectMode(n.id)},[e("div",J,[e("span",q,r(n.icon),1),e("span",{class:f(["mode-level",n.level])},r(n.levelText),3)]),e("h4",null,r(n.name),1),e("p",j,r(n.description),1),e("div",G,[e("div",H,[t[34]||(t[34]=e("span",{class:"detail-label"},"闪视速度:",-1)),e("span",K,r(n.flashSpeed)+"ms",1)]),e("div",W,[t[35]||(t[35]=e("span",{class:"detail-label"},"图像类型:",-1)),e("span",X,r(n.imageType),1)]),e("div",Y,[t[36]||(t[36]=e("span",{class:"detail-label"},"难度等级:",-1)),e("span",Z,r(n.difficulty),1)])]),e("div",$,[e("div",tt,[t[37]||(t[37]=e("span",{class:"stat-label"},"最高识别率",-1)),e("span",et,r(n.bestRecognition)+"%",1)]),e("div",st,[t[38]||(t[38]=e("span",{class:"stat-label"},"平均识别率",-1)),e("span",it,r(n.averageRecognition)+"%",1)])]),e("button",{class:"start-mode-btn",onClick:Q(p=>l.startTraining(n.id),["stop"])}," 开始训练 ",8,nt)],10,U))),128))])])),s.isTraining?(c(),u("div",ot,[e("div",lt,[e("div",at,[e("h3",null,r(s.currentModeData.name),1),e("div",rt,[e("div",ct,[t[40]||(t[40]=e("span",{class:"info-label"},"轮次:",-1)),e("span",ut,r(s.currentRound)+"/"+r(s.totalRounds),1)]),e("div",gt,[t[41]||(t[41]=e("span",{class:"info-label"},"识别正确:",-1)),e("span",dt,r(s.correctCount),1)]),e("div",mt,[t[42]||(t[42]=e("span",{class:"info-label"},"识别错误:",-1)),e("span",pt,r(s.errorCount),1)]),e("div",ht,[t[43]||(t[43]=e("span",{class:"info-label"},"识别率:",-1)),e("span",yt,r(l.recognitionRate)+"%",1)])]),e("div",ft,[!s.isPaused&&!s.isCompleted?(c(),u("button",{key:0,class:"control-btn",onClick:t[2]||(t[2]=(...n)=>l.pauseTraining&&l.pauseTraining(...n))}," ⏸️ ")):m("",!0),s.isPaused?(c(),u("button",{key:1,class:"control-btn",onClick:t[3]||(t[3]=(...n)=>l.resumeTraining&&l.resumeTraining(...n))}," ▶️ ")):m("",!0),e("button",{class:"control-btn",onClick:t[4]||(t[4]=(...n)=>l.stopTraining&&l.stopTraining(...n))}," ⏹️ ")])]),e("div",vt,[e("div",{class:f(["flash-container",{flashing:s.isFlashing}])},[s.isFlashing?(c(),u("div",{key:0,class:f(["flash-content",{animated:s.settings.animationEffects}])},[e("div",bt,[s.currentFlashImage.type==="image"?(c(),u("img",{key:0,src:s.currentFlashImage.src,alt:s.currentFlashImage.alt,class:"flash-image",style:h({width:s.settings.imageSize+"px",height:s.settings.imageSize+"px"})},null,12,wt)):s.currentFlashImage.type==="shape"?(c(),u("div",{key:1,class:f(["flash-shape",s.currentFlashImage.shape]),style:h({width:s.settings.imageSize+"px",height:s.settings.imageSize+"px",backgroundColor:s.currentFlashImage.color})},null,6)):s.currentFlashImage.type==="symbol"?(c(),u("div",{key:2,class:"flash-symbol",style:h({fontSize:s.settings.imageSize/2+"px",color:s.currentFlashImage.color})},r(s.currentFlashImage.symbol),5)):s.currentFlashImage.type==="pattern"?(c(),u("div",{key:3,class:"flash-pattern",style:h({width:s.settings.imageSize+"px",height:s.settings.imageSize+"px"})},[(c(!0),u(_,null,R(s.currentFlashImage.pattern,(n,p)=>(c(),u("div",{key:p,class:"pattern-dot",style:h({left:n.x+"%",top:n.y+"%",backgroundColor:n.color||"#333","--dot-index":p})},null,4))),128))],4)):m("",!0)])],2)):!s.isCompleted&&!s.isPaused?(c(),u("div",St,[t[44]||(t[44]=e("span",{class:"ready-text"},"准备观察...",-1)),e("div",Tt,[e("span",_t,r(s.countdown),1)])])):s.isPaused?(c(),u("div",Rt,t[45]||(t[45]=[e("span",{class:"pause-text"},"已暂停",-1),e("p",null,"点击继续按钮恢复训练",-1)]))):m("",!0)],2)]),s.showRecognitionTest&&!s.isCompleted?(c(),u("div",Ft,[e("div",kt,[t[46]||(t[46]=e("h4",null,"识别测试",-1)),e("p",Ct,r(s.recognitionQuestion.question),1)]),s.recognitionQuestion.type==="choice"?(c(),u("div",xt,[(c(!0),u(_,null,R(s.recognitionQuestion.options,(n,p)=>(c(),u("div",{key:p,class:f(["recognition-option",{selected:s.selectedAnswer===n.id,correct:s.showResult&&n.id===s.recognitionQuestion.correctAnswer,wrong:s.showResult&&s.selectedAnswer===n.id&&n.id!==s.recognitionQuestion.correctAnswer}]),onClick:v=>l.selectAnswer(n.id)},[n.type==="image"?(c(),u("img",{key:0,src:n.src,alt:n.alt,class:"option-image"},null,8,It)):n.type==="shape"?(c(),u("div",{key:1,class:f(["option-shape",n.shape]),style:h({backgroundColor:n.color})},null,6)):n.type==="symbol"?(c(),u("div",{key:2,class:"option-symbol",style:h({color:n.color})},r(n.symbol),5)):n.type==="pattern"?(c(),u("div",Dt,[(c(!0),u(_,null,R(n.pattern,(v,T)=>(c(),u("div",{key:T,class:"pattern-dot small",style:h({left:v.x+"%",top:v.y+"%",backgroundColor:v.color||"#333","--dot-index":T})},null,4))),128))])):m("",!0)],10,At))),128))])):s.recognitionQuestion.type==="judgment"?(c(),u("div",Mt,[e("button",{class:f(["judgment-option",{selected:s.selectedAnswer===!0,correct:s.showResult&&s.recognitionQuestion.correctAnswer===!0,wrong:s.showResult&&s.selectedAnswer===!0&&s.recognitionQuestion.correctAnswer!==!0}]),onClick:t[5]||(t[5]=n=>l.selectAnswer(!0)),disabled:s.showResult}," ✓ 是 ",10,Bt),e("button",{class:f(["judgment-option",{selected:s.selectedAnswer===!1,correct:s.showResult&&s.recognitionQuestion.correctAnswer===!1,wrong:s.showResult&&s.selectedAnswer===!1&&s.recognitionQuestion.correctAnswer!==!1}]),onClick:t[6]||(t[6]=n=>l.selectAnswer(!1)),disabled:s.showResult}," ✗ 否 ",10,Et)])):(c(),u("div",Vt,[d(e("input",{type:"number",class:"input-field","onUpdate:modelValue":t[7]||(t[7]=n=>s.userCount=n),placeholder:"请输入数量...",onKeyup:t[8]||(t[8]=V((...n)=>l.submitAnswer&&l.submitAnswer(...n),["enter"])),disabled:s.showResult,ref:"countInput",min:"0",max:"20"},null,40,Qt),[[F,s.userCount,void 0,{number:!0}]]),e("button",{class:"submit-btn",onClick:t[9]||(t[9]=(...n)=>l.submitAnswer&&l.submitAnswer(...n)),disabled:s.userCount===null||s.showResult}," 提交答案 ",8,Ot)])),s.showResult?(c(),u("div",Pt,[e("div",{class:f(["result-message",{correct:s.isAnswerCorrect,wrong:!s.isAnswerCorrect}])},[e("span",Nt,r(s.isAnswerCorrect?"✅":"❌"),1),e("span",zt,r(s.isAnswerCorrect?"识别正确！":"识别有误"),1)],2),s.isAnswerCorrect?m("",!0):(c(),u("div",Lt,[t[47]||(t[47]=y(" 正确答案: ",-1)),e("strong",null,r(l.getCorrectAnswerText()),1)])),s.recognitionQuestion.explanation?(c(),u("div",Ut,[t[48]||(t[48]=e("strong",null,"解析:",-1)),y(" "+r(s.recognitionQuestion.explanation),1)])):m("",!0),e("button",{class:"next-btn",onClick:t[10]||(t[10]=(...n)=>l.nextRound&&l.nextRound(...n))},r(s.currentRound>=s.totalRounds?"查看结果":"下一张"),1)])):m("",!0)])):m("",!0),s.isCompleted?(c(),u("div",Jt,[e("div",qt,[t[49]||(t[49]=e("span",{class:"completion-icon"},"🎉",-1)),t[50]||(t[50]=e("h4",null,"训练完成！",-1)),e("p",null,"恭喜你完成了 "+r(s.totalRounds)+" 轮图像闪视训练",1)]),s.settings.showEncouragement?(c(),u("div",jt,[e("div",Gt,[e("span",Ht,r(l.getEncouragementMessage()),1)])])):m("",!0),e("div",Kt,[e("div",Wt,[t[51]||(t[51]=e("span",{class:"stat-label"},"总轮次",-1)),e("span",Xt,r(s.totalRounds),1)]),e("div",Yt,[t[52]||(t[52]=e("span",{class:"stat-label"},"识别正确",-1)),e("span",Zt,r(s.correctCount),1)]),e("div",$t,[t[53]||(t[53]=e("span",{class:"stat-label"},"识别错误",-1)),e("span",te,r(s.errorCount),1)]),e("div",ee,[t[54]||(t[54]=e("span",{class:"stat-label"},"识别率",-1)),e("span",se,r(l.recognitionRate)+"%",1)]),e("div",ie,[t[55]||(t[55]=e("span",{class:"stat-label"},"平均反应时间",-1)),e("span",ne,r(l.averageReactionTime)+"ms",1)]),e("div",oe,[t[56]||(t[56]=e("span",{class:"stat-label"},"等级评价",-1)),e("span",{class:f(["stat-value",l.performanceLevel.class])},r(l.performanceLevel.text),3)])]),e("div",le,[e("button",{class:"action-btn secondary",onClick:t[11]||(t[11]=(...n)=>l.stopTraining&&l.stopTraining(...n))}," 返回选择 "),e("button",{class:"action-btn primary",onClick:t[12]||(t[12]=(...n)=>l.restartTraining&&l.restartTraining(...n))}," 再次训练 ")])])):m("",!0)])])):m("",!0),s.isTraining?m("",!0):(c(),u("div",ae,[t[90]||(t[90]=e("h3",null,"训练设置",-1)),e("div",re,[e("div",ce,[t[63]||(t[63]=e("h4",null,"基础设置",-1)),e("div",ue,[t[57]||(t[57]=e("label",null,"闪视速度 (毫秒)",-1)),e("div",ge,[d(e("input",{type:"range",class:"range-input","onUpdate:modelValue":t[13]||(t[13]=n=>s.settings.flashDuration=n),min:"200",max:"2000",step:"100"},null,512),[[F,s.settings.flashDuration]]),e("span",de,r(s.settings.flashDuration)+"ms",1)])]),e("div",me,[t[58]||(t[58]=e("label",null,"间隔时间 (秒)",-1)),e("div",pe,[d(e("input",{type:"range",class:"range-input","onUpdate:modelValue":t[14]||(t[14]=n=>s.settings.intervalTime=n),min:"1",max:"5",step:"1"},null,512),[[F,s.settings.intervalTime]]),e("span",he,r(s.settings.intervalTime)+"s",1)])]),e("div",ye,[t[60]||(t[60]=e("label",null,"训练轮次",-1)),d(e("select",{class:"select-input","onUpdate:modelValue":t[15]||(t[15]=n=>s.settings.rounds=n)},t[59]||(t[59]=[e("option",{value:"5"},"5轮",-1),e("option",{value:"10"},"10轮",-1),e("option",{value:"15"},"15轮",-1),e("option",{value:"20"},"20轮",-1)]),512),[[w,s.settings.rounds]])]),e("div",fe,[t[62]||(t[62]=e("label",null,"图像类型",-1)),d(e("select",{class:"select-input","onUpdate:modelValue":t[16]||(t[16]=n=>s.settings.imageType=n)},t[61]||(t[61]=[e("option",{value:"shapes"},"几何图形",-1),e("option",{value:"symbols"},"符号标记",-1),e("option",{value:"patterns"},"点阵图案",-1),e("option",{value:"mixed"},"混合类型",-1)]),512),[[w,s.settings.imageType]])])]),e("div",ve,[t[69]||(t[69]=e("h4",null,"显示设置",-1)),e("div",be,[t[64]||(t[64]=e("label",null,"图像大小",-1)),e("div",we,[d(e("input",{type:"range",class:"range-input","onUpdate:modelValue":t[17]||(t[17]=n=>s.settings.imageSize=n),min:"100",max:"300",step:"20"},null,512),[[F,s.settings.imageSize]]),e("span",Se,r(s.settings.imageSize)+"px",1)])]),e("div",Te,[t[66]||(t[66]=e("label",null,"背景颜色",-1)),d(e("select",{class:"select-input","onUpdate:modelValue":t[18]||(t[18]=n=>s.settings.backgroundColor=n)},t[65]||(t[65]=[e("option",{value:"white"},"白色",-1),e("option",{value:"black"},"黑色",-1),e("option",{value:"gray"},"灰色",-1),e("option",{value:"blue"},"蓝色",-1)]),512),[[w,s.settings.backgroundColor]])]),e("div",_e,[t[68]||(t[68]=e("label",null,"颜色模式",-1)),d(e("select",{class:"select-input","onUpdate:modelValue":t[19]||(t[19]=n=>s.settings.colorMode=n)},t[67]||(t[67]=[e("option",{value:"colorful"},"彩色",-1),e("option",{value:"monochrome"},"单色",-1),e("option",{value:"grayscale"},"灰度",-1)]),512),[[w,s.settings.colorMode]])])]),e("div",Re,[t[79]||(t[79]=e("h4",null,"训练辅助",-1)),e("div",Fe,[e("label",ke,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=n=>s.settings.showProgress=n)},null,512),[[b,s.settings.showProgress]]),t[70]||(t[70]=y(" 显示进度 ",-1))])]),e("div",Ce,[e("label",xe,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=n=>s.settings.soundEffects=n)},null,512),[[b,s.settings.soundEffects]]),t[71]||(t[71]=y(" 声音效果 ",-1))])]),e("div",Ae,[e("label",Ie,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[22]||(t[22]=n=>s.settings.randomOrder=n)},null,512),[[b,s.settings.randomOrder]]),t[72]||(t[72]=y(" 随机顺序 ",-1))])]),e("div",De,[e("label",Me,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=n=>s.settings.autoNext=n)},null,512),[[b,s.settings.autoNext]]),t[73]||(t[73]=y(" 自动下一题 ",-1))])]),e("div",Be,[e("label",Ee,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=n=>s.settings.showHints=n)},null,512),[[b,s.settings.showHints]]),t[74]||(t[74]=y(" 提示显示 ",-1))])]),e("div",Ve,[e("label",Qe,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[25]||(t[25]=n=>s.settings.adaptiveDifficulty=n)},null,512),[[b,s.settings.adaptiveDifficulty]]),t[75]||(t[75]=y(" 自适应难度 ",-1))])]),e("div",Oe,[e("label",Pe,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[26]||(t[26]=n=>s.settings.showEncouragement=n)},null,512),[[b,s.settings.showEncouragement]]),t[76]||(t[76]=y(" 鼓励消息 ",-1))])]),e("div",Ne,[e("label",ze,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[27]||(t[27]=n=>s.settings.showGuide=n)},null,512),[[b,s.settings.showGuide]]),t[77]||(t[77]=y(" 阅读指南 ",-1))])]),e("div",Le,[e("label",Ue,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[28]||(t[28]=n=>s.settings.progressSound=n)},null,512),[[b,s.settings.progressSound]]),t[78]||(t[78]=y(" 进度音效 ",-1))])])]),e("div",Je,[t[89]||(t[89]=e("h4",null,"高级设置",-1)),e("div",qe,[t[81]||(t[81]=e("label",null,"难度等级",-1)),d(e("select",{class:"select-input","onUpdate:modelValue":t[29]||(t[29]=n=>s.settings.difficulty=n)},t[80]||(t[80]=[e("option",{value:"easy"},"简单",-1),e("option",{value:"medium"},"中等",-1),e("option",{value:"hard"},"困难",-1),e("option",{value:"all"},"全部",-1)]),512),[[w,s.settings.difficulty]])]),e("div",je,[t[83]||(t[83]=e("label",null,"内容过滤",-1)),d(e("select",{class:"select-input","onUpdate:modelValue":t[30]||(t[30]=n=>s.settings.contentFilter=n)},t[82]||(t[82]=[x('<option value="all" data-v-c735f88d>全部类型</option><option value="shapes" data-v-c735f88d>几何图形</option><option value="symbols" data-v-c735f88d>符号标记</option><option value="patterns" data-v-c735f88d>点阵图案</option><option value="numbers" data-v-c735f88d>数字</option><option value="letters" data-v-c735f88d>字母</option>',6)]),512),[[w,s.settings.contentFilter]])]),e("div",Ge,[e("label",He,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[31]||(t[31]=n=>s.settings.animationEffects=n)},null,512),[[b,s.settings.animationEffects]]),t[84]||(t[84]=y(" 动画效果 ",-1))])]),e("div",Ke,[t[86]||(t[86]=e("label",null,"高亮颜色",-1)),d(e("select",{class:"select-input","onUpdate:modelValue":t[32]||(t[32]=n=>s.settings.highlightColor=n)},t[85]||(t[85]=[x('<option value="#FFD700" data-v-c735f88d>金色</option><option value="#FF6B6B" data-v-c735f88d>红色</option><option value="#4ECDC4" data-v-c735f88d>青色</option><option value="#45B7D1" data-v-c735f88d>蓝色</option><option value="#96CEB4" data-v-c735f88d>绿色</option>',5)]),512),[[w,s.settings.highlightColor]])]),e("div",We,[t[88]||(t[88]=e("label",null,"识别模式",-1)),d(e("select",{class:"select-input","onUpdate:modelValue":t[33]||(t[33]=n=>s.settings.recognitionMode=n)},t[87]||(t[87]=[e("option",{value:"instant"},"即时识别",-1),e("option",{value:"delayed"},"延时识别",-1),e("option",{value:"choice"},"选择识别",-1)]),512),[[w,s.settings.recognitionMode]])])])])])),s.isTraining?m("",!0):(c(),u("div",Xe,[t[111]||(t[111]=e("h3",null,"训练统计",-1)),e("div",Ye,[e("div",Ze,[t[99]||(t[99]=e("h4",null,"总体表现",-1)),e("div",$e,[e("div",ts,[t[92]||(t[92]=e("span",{class:"stat-icon"},"👁️",-1)),e("div",es,[e("span",ss,r(s.statistics.totalSessions),1),t[91]||(t[91]=e("span",{class:"stat-label"},"总训练次数",-1))])]),e("div",is,[t[94]||(t[94]=e("span",{class:"stat-icon"},"🎯",-1)),e("div",ns,[e("span",os,r(s.statistics.bestRecognition)+"%",1),t[93]||(t[93]=e("span",{class:"stat-label"},"最高识别率",-1))])]),e("div",ls,[t[96]||(t[96]=e("span",{class:"stat-icon"},"📊",-1)),e("div",as,[e("span",rs,r(s.statistics.averageRecognition)+"%",1),t[95]||(t[95]=e("span",{class:"stat-label"},"平均识别率",-1))])]),e("div",cs,[t[98]||(t[98]=e("span",{class:"stat-icon"},"⚡",-1)),e("div",us,[e("span",gs,r(s.statistics.averageReactionTime)+"ms",1),t[97]||(t[97]=e("span",{class:"stat-label"},"平均反应时间",-1))])])])]),e("div",ds,[t[103]||(t[103]=e("h4",null,"不同模式表现",-1)),e("div",ms,[(c(!0),u(_,null,R(s.statistics.modePerformance,n=>(c(),u("div",{key:n.id,class:"mode-stat"},[e("div",ps,[e("span",hs,r(n.name),1),e("span",ys,r(n.level),1)]),e("div",fs,[e("div",vs,[t[100]||(t[100]=e("span",{class:"detail-label"},"最高:",-1)),e("span",bs,r(n.bestRecognition)+"%",1)]),e("div",ws,[t[101]||(t[101]=e("span",{class:"detail-label"},"平均:",-1)),e("span",Ss,r(n.averageRecognition)+"%",1)]),e("div",Ts,[t[102]||(t[102]=e("span",{class:"detail-label"},"次数:",-1)),e("span",_s,r(n.attempts),1)])]),e("div",Rs,[e("div",Fs,[e("div",{class:"progress-fill",style:h({width:n.mastery+"%"})},null,4)]),e("span",ks,"熟练度: "+r(n.mastery)+"%",1)])]))),128))])]),e("div",Cs,[t[105]||(t[105]=e("h4",null,"识别率趋势",-1)),e("div",xs,[e("div",As,[e("div",Is,[(c(!0),u(_,null,R(s.statistics.recognitionTrend,(n,p)=>(c(),u("div",{key:p,class:"chart-point",style:h({left:p/(s.statistics.recognitionTrend.length-1)*100+"%",bottom:n.recognition+"%"}),title:`第${p+1}次: ${n.recognition}%`},null,12,Ds))),128)),(c(),u("svg",Ms,[e("polyline",{points:l.getChartPoints(),fill:"none",stroke:"#2196F3","stroke-width":"2"},null,8,Bs)]))]),t[104]||(t[104]=e("div",{class:"chart-axis"},[e("span",{class:"axis-label"},"训练次数")],-1))])])]),e("div",Es,[t[110]||(t[110]=e("h4",null,"视觉能力分析",-1)),e("div",Vs,[e("div",Qs,[e("div",Os,[t[106]||(t[106]=e("span",{class:"ability-name"},"图像识别",-1)),e("span",Ps,r(l.abilityScores.imageRecognition)+"/100",1)]),e("div",Ns,[e("div",{class:"ability-fill",style:h({width:l.abilityScores.imageRecognition+"%"})},null,4)])]),e("div",zs,[e("div",Ls,[t[107]||(t[107]=e("span",{class:"ability-name"},"形状感知",-1)),e("span",Us,r(l.abilityScores.shapePerception)+"/100",1)]),e("div",Js,[e("div",{class:"ability-fill",style:h({width:l.abilityScores.shapePerception+"%"})},null,4)])]),e("div",qs,[e("div",js,[t[108]||(t[108]=e("span",{class:"ability-name"},"颜色辨识",-1)),e("span",Gs,r(l.abilityScores.colorDiscrimination)+"/100",1)]),e("div",Hs,[e("div",{class:"ability-fill",style:h({width:l.abilityScores.colorDiscrimination+"%"})},null,4)])]),e("div",Ks,[e("div",Ws,[t[109]||(t[109]=e("span",{class:"ability-name"},"视觉记忆",-1)),e("span",Xs,r(l.abilityScores.visualMemory)+"/100",1)]),e("div",Ys,[e("div",{class:"ability-fill",style:h({width:l.abilityScores.visualMemory+"%"})},null,4)])])])])])]))])}const ii=O(P,[["render",Zs],["__scopeId","data-v-c735f88d"]]);export{ii as default};
